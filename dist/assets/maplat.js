/*! For license information please see maplat.js.LICENSE.txt */
(()=>{var t={5432:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});n(9346);function i(t,e,n){if(null!==t)for(var r,o,s,a,l,c,u,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,v=0;v<y;v++){l=(h=!!(u=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<l;_++){var x=0,b=0;if(null!==(a=h?u.geometries[_]:u)){c=a.coordinates;var w=a.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(c,f,v,x,b),f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++)e(c[r],f,v,x,b),f++,"MultiPoint"===w&&x++;"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++)e(c[r][o],f,v,x,b),f++;"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===w&&(b=0),o=0;o<c[r].length;o++){for(s=0;s<c[r][o].length-p;s++)e(c[r][o][s],f,v,x,b),f++;b++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)i(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}const r=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},9346:(t,e,n)=>{"use strict";n.d(e,{Tu:()=>s,uf:()=>a,xm:()=>r,yu:()=>o});function i(t,e,n){if(!c(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&u(i),r&&h(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l(t[0])||!l(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===r&&0===s&&!l(o[0][0])||!l(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return i({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!l(t[0][1])||!l(t[0][1]))throw new Error("coordinates must contain numbers");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&u(n),i&&h(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function l(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t){return!!t&&t.constructor===Object}function u(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!l(t))throw new Error("bbox must only contain numbers")}))}function h(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},1924:(t,e,n)=>{"use strict";var i=n(210),r=n(5559),o=r(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},5559:(t,e,n)=>{"use strict";var i=n(8612),r=n(210),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o),l=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(i,s,arguments);l&&c&&(l(e,"length").configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))}));return e};var h=function(){return a(i,o,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},8874:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},2273:(t,e,n)=>{"use strict";var i=n(1662),r=n(3842),o=n(6960);const s=n(8639).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var l=[e,n,i,r],c=l.slice();for(s=0;s<t.length;s++)o(t[s],l)||c.push(t[s]);return function(t){t.sort(_);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&f(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(c)}(t),s=new i(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,c=[],u=0;u<r.length;u++){var h=r[u];s.remove(h),a=g(h,a),c.push(a)}var p=new i(16);for(u=0;u<c.length;u++)p.insert(d(c[u]));for(var y=e*e,v=n*n;c.length;){var x=c.shift(),b=x.p,w=x.next.p,E=m(b,w);if(!(E<v)){var S=E/y;(h=l(s,x.prev.p,b,w,x.next.next.p,S,p))&&Math.min(m(h,b),m(h,w))<=S&&(c.push(x),c.push(g(h,x)),s.remove(h),p.remove(x),p.insert(d(x)),p.insert(d(x.next)))}}x=a;var C=[];do{C.push(x.p),x=x.next}while(x!==a);return C.push(x.p),C}function l(t,e,n,i,o,s,a){for(var l=new r([],c),h=t.data;h;){for(var f=0;f<h.children.length;f++){var d=h.children[f],g=h.leaf?y(d,n,i):u(n,i,d);g>s||l.push({node:d,dist:g})}for(;l.length&&!l.peek().node.children;){var m=l.pop(),v=m.node,_=y(v,e,n),x=y(v,i,o);if(m.dist<_&&m.dist<x&&p(n,v,a)&&p(i,v,a))return v}(h=l.pop())&&(h=h.node)}return null}function c(t,e){return t.dist-e.dist}function u(t,e,n){if(h(t,n)||h(e,n))return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),h=n.search({minX:a,minY:l,maxX:c,maxY:u}),p=0;p<h.length;p++)if(i=h[p].p,r=h[p].next.p,o=t,i!==(s=e)&&r!==o&&f(i,r,o)>0!=f(i,r,s)>0&&f(o,s,i)>0!=f(o,s,r)>0)return!1;return!0}function f(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function m(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function y(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function v(t,e,n,i,r,o,s,a){var l,c,u,h,p=n-t,f=i-e,d=s-r,g=a-o,m=t-r,y=e-o,v=p*p+f*f,_=p*d+f*g,x=d*d+g*g,b=p*m+f*y,w=d*m+g*y,E=v*x-_*_,S=E,C=E;0===E?(c=0,S=1,h=w,C=x):(h=v*w-_*b,(c=_*w-x*b)<0?(c=0,h=w,C=x):c>S&&(c=S,h=w+_,C=x)),h<0?(h=0,-b<0?c=0:-b>v?c=S:(c=-b,S=v)):h>C&&(h=C,-b+_<0?c=0:-b+_>v?c=S:(c=-b+_,S=v));var I=(1-(u=0===h?0:h/C))*r+u*s-((1-(l=0===c?0:c/S))*t+l*n),M=(1-u)*o+u*a-((1-l)*e+l*i);return I*I+M*M}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},1662:function(t){t.exports=function(){"use strict";function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/a+h)),Math.min(o,Math.floor(i+(a-l)*u/a+h)),s)}var p=n[i],f=r,d=o;for(e(n,r,i),s(n[o],p)>0&&e(n,r,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[r],p)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,s=this.data,a=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),s.leaf){var u=r(t,s.children,e);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(l.push(s),c.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries;if(s<=a)return o(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=d([])).leaf=!1,r.height=i;var l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));g(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);g(t,u,h,l,this.compareMinY);for(var p=u;p<=h;p+=l){var f=Math.min(p+l-1,h);r.children.push(this._build(t,p,f,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],c=u(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,r=c<r?c:r,s=l):h===o&&c<r&&(r=c,s=l)}e=s||e.children[0]}var p,f;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var s=this._chooseSplitIndex(n,r,i),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,l,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),m=s(t,d,n,this.toBBox),y=(r=g,o=m,a=void 0,l=void 0,c=void 0,h=void 0,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-a)*Math.max(0,h-l)),v=u(g)+u(m);y<p?(p=y,i=d,f=v<f?v:f):y===p&&v<f&&(f=v,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,n-e,n,r),c=h(o)+h(l),u=e;u<n-e;u++){var p=t.children[u];a(o,t.leaf?r(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?r(d):d),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},9662:(t,e,n)=>{var i=n(614),r=n(6330),o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a function")}},9483:(t,e,n)=>{var i=n(4411),r=n(6330),o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a constructor")}},6077:(t,e,n)=>{var i=n(614),r=String,o=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw o("Can't set "+r(t)+" as a prototype")}},1223:(t,e,n)=>{var i=n(5112),r=n(30),o=n(3070).f,s=i("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},1530:(t,e,n)=>{"use strict";var i=n(8710).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},5787:(t,e,n)=>{var i=n(7976),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw r("Incorrect invocation")}},9670:(t,e,n)=>{var i=n(111),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not an object")}},8533:(t,e,n)=>{"use strict";var i=n(2092).forEach,r=n(9341)("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},8457:(t,e,n)=>{"use strict";var i=n(9974),r=n(6916),o=n(7908),s=n(3411),a=n(7659),l=n(4411),c=n(6244),u=n(6135),h=n(4121),p=n(1246),f=Array;t.exports=function(t){var e=o(t),n=l(this),d=arguments.length,g=d>1?arguments[1]:void 0,m=void 0!==g;m&&(g=i(g,d>2?arguments[2]:void 0));var y,v,_,x,b,w,E=p(e),S=0;if(!E||this===f&&a(E))for(y=c(e),v=n?new this(y):f(y);y>S;S++)w=m?g(e[S],S):e[S],u(v,S,w);else for(b=(x=h(e,E)).next,v=n?new this:[];!(_=r(b,x)).done;S++)w=m?s(x,g,[_.value,S],!0):_.value,u(v,S,w);return v.length=S,v}},1318:(t,e,n)=>{var i=n(5656),r=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,l=i(e),c=o(l),u=r(s,c);if(t&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2092:(t,e,n)=>{var i=n(9974),r=n(1702),o=n(8361),s=n(7908),a=n(6244),l=n(5417),c=r([].push),u=function(t){var e=1==t,n=2==t,r=3==t,u=4==t,h=6==t,p=7==t,f=5==t||h;return function(d,g,m,y){for(var v,_,x=s(d),b=o(x),w=i(g,m),E=a(b),S=0,C=y||l,I=e?C(d,E):n||p?C(d,0):void 0;E>S;S++)if((f||S in b)&&(_=w(v=b[S],S,x),t))if(e)I[S]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return S;case 2:c(I,v)}else switch(t){case 4:return!1;case 7:c(I,v)}return h?-1:r||u?u:I}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},1194:(t,e,n)=>{var i=n(7293),r=n(5112),o=n(7392),s=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,n)=>{"use strict";var i=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},3658:(t,e,n)=>{"use strict";var i=n(9781),r=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1589:(t,e,n)=>{var i=n(1400),r=n(6244),o=n(6135),s=Array,a=Math.max;t.exports=function(t,e,n){for(var l=r(t),c=i(e,l),u=i(void 0===n?l:n,l),h=s(a(u-c,0)),p=0;c<u;c++,p++)o(h,p,t[c]);return h.length=p,h}},206:(t,e,n)=>{var i=n(1702);t.exports=i([].slice)},4362:(t,e,n)=>{var i=n(1589),r=Math.floor,o=function(t,e){var n=t.length,l=r(n/2);return n<8?s(t,e):a(t,o(i(t,0,l),e),o(i(t,l),e),e)},s=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},a=function(t,e,n,i){for(var r=e.length,o=n.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?i(e[s],n[a])<=0?e[s++]:n[a++]:s<r?e[s++]:n[a++];return t};t.exports=o},7475:(t,e,n)=>{var i=n(3157),r=n(4411),o=n(111),s=n(5112)("species"),a=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(r(e)&&(e===a||i(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},5417:(t,e,n)=>{var i=n(7475);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},3411:(t,e,n)=>{var i=n(9670),r=n(9212);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},7072:(t,e,n)=>{var i=n(5112)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4326:(t,e,n)=>{var i=n(1702),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},648:(t,e,n)=>{var i=n(1694),r=n(614),o=n(4326),s=n(5112)("toStringTag"),a=Object,l="Arguments"==o(function(){return arguments}());t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:l?o(e):"Object"==(i=o(e))&&r(e.callee)?"Arguments":i}},9920:(t,e,n)=>{var i=n(2597),r=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,u=0;u<a.length;u++){var h=a[u];i(t,h)||n&&i(n,h)||l(t,h,c(e,h))}}},8544:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6178:t=>{t.exports=function(t,e){return{value:t,done:e}}},8880:(t,e,n)=>{var i=n(9781),r=n(3070),o=n(9114);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:(t,e,n)=>{"use strict";var i=n(4948),r=n(3070),o=n(9114);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},8709:(t,e,n)=>{"use strict";var i=n(9670),r=n(2140),o=TypeError;t.exports=function(t){if(i(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw o("Incorrect hint");return r(this,t)}},7045:(t,e,n)=>{var i=n(6339),r=n(3070);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},8052:(t,e,n)=>{var i=n(614),r=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9190:(t,e,n)=>{var i=n(8052);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},3072:(t,e,n)=>{var i=n(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},5117:(t,e,n)=>{"use strict";var i=n(6330),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+i(e)+" of "+i(t))}},9781:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:t=>{var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:(t,e,n)=>{var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(t,e,n)=>{var i=n(317)("span").classList,r=i&&i.constructor&&i.constructor.prototype;t.exports=r===Object.prototype?void 0:r},8886:(t,e,n)=>{var i=n(8113).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},7871:(t,e,n)=>{var i=n(3823),r=n(5268);t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},3823:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:(t,e,n)=>{var i=n(8113);t.exports=/MSIE|Trident/.test(i)},1528:(t,e,n)=>{var i=n(8113),r=n(7854);t.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},6833:(t,e,n)=>{var i=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},5268:(t,e,n)=>{var i=n(4326),r=n(7854);t.exports="process"==i(r.process)},1036:(t,e,n)=>{var i=n(8113);t.exports=/web0s(?!.*chrome)/i.test(i)},8113:(t,e,n)=>{var i=n(5005);t.exports=i("navigator","userAgent")||""},7392:(t,e,n)=>{var i,r,o=n(7854),s=n(8113),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},8008:(t,e,n)=>{var i=n(8113).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,n)=>{var i=n(7854),r=n(1236).f,o=n(8880),s=n(8052),a=n(3072),l=n(9920),c=n(4705);t.exports=function(t,e){var n,u,h,p,f,d=t.target,g=t.global,m=t.stat;if(n=g?i:m?i[d]||a(d,{}):(i[d]||{}).prototype)for(u in e){if(p=e[u],h=t.dontCallGetSet?(f=r(n,u))&&f.value:n[u],!c(g?u:d+(m?".":"#")+u,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;l(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),s(n,u,p,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:(t,e,n)=>{"use strict";n(4916);var i=n(1470),r=n(8052),o=n(2261),s=n(7293),a=n(5112),l=n(8880),c=a("species"),u=RegExp.prototype;t.exports=function(t,e,n,h){var p=a(t),f=!s((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),d=f&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!f||!d||n){var g=i(/./[p]),m=e(p,""[t],(function(t,e,n,r,s){var a=i(t),l=e.exec;return l===o||l===u.exec?f&&!s?{done:!0,value:g(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));r(String.prototype,t,m[0]),r(u,p,m[1])}h&&l(u[p],"sham",!0)}},2104:(t,e,n)=>{var i=n(4374),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},9974:(t,e,n)=>{var i=n(1470),r=n(9662),o=n(4374),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},7065:(t,e,n)=>{"use strict";var i=n(1702),r=n(9662),o=n(111),s=n(2597),a=n(206),l=n(4374),c=Function,u=i([].concat),h=i([].join),p={};t.exports=l?c.bind:function(t){var e=r(this),n=e.prototype,i=a(arguments,1),l=function(){var n=u(i,a(arguments));return this instanceof l?function(t,e,n){if(!s(p,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";p[e]=c("C,a","return new C("+h(i,",")+")")}return p[e](t,n)}(e,n.length,n):e.apply(t,n)};return o(n)&&(l.prototype=n),l}},6916:(t,e,n)=>{var i=n(4374),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:(t,e,n)=>{var i=n(9781),r=n(2597),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1470:(t,e,n)=>{var i=n(4326),r=n(1702);t.exports=function(t){if("Function"===i(t))return r(t)}},1702:(t,e,n)=>{var i=n(4374),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},5005:(t,e,n)=>{var i=n(7854),r=n(614);t.exports=function(t,e){return arguments.length<2?(n=i[t],r(n)?n:void 0):i[t]&&i[t][e];var n}},1246:(t,e,n)=>{var i=n(648),r=n(8173),o=n(8554),s=n(7497),a=n(5112)("iterator");t.exports=function(t){if(!o(t))return r(t,a)||r(t,"@@iterator")||s[i(t)]}},4121:(t,e,n)=>{var i=n(6916),r=n(9662),o=n(9670),s=n(6330),a=n(1246),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(r(n))return o(i(n,t));throw l(s(t)+" is not iterable")}},8173:(t,e,n)=>{var i=n(9662),r=n(8554);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},647:(t,e,n)=>{var i=n(1702),r=n(7908),o=Math.floor,s=i("".charAt),a=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,h,p){var f=n+t.length,d=i.length,g=u;return void 0!==h&&(h=r(h),g=c),a(p,g,(function(r,a){var c;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return l(e,0,n);case"'":return l(e,f);case"<":c=h[l(a,1,-1)];break;default:var u=+a;if(0===u)return r;if(u>d){var p=o(u/10);return 0===p?r:p<=d?void 0===i[p-1]?s(a,1):i[p-1]+s(a,1):r}c=i[u-1]}return void 0===c?"":c}))}},7854:(t,e,n)=>{var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:(t,e,n)=>{var i=n(1702),r=n(7908),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},3501:t=>{t.exports={}},842:(t,e,n)=>{var i=n(7854);t.exports=function(t,e){var n=i.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},490:(t,e,n)=>{var i=n(5005);t.exports=i("document","documentElement")},4664:(t,e,n)=>{var i=n(9781),r=n(7293),o=n(317);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,n)=>{var i=n(1702),r=n(7293),o=n(4326),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:(t,e,n)=>{var i=n(614),r=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:(t,e,n)=>{var i=n(1702),r=n(614),o=n(5465),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},9909:(t,e,n)=>{var i,r,o,s=n(4811),a=n(7854),l=n(111),c=n(8880),u=n(2597),h=n(5465),p=n(6200),f=n(3501),d="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||h.state){var y=h.state||(h.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,i=function(t,e){if(y.has(t))throw g(d);return e.facade=t,y.set(t,e),e},r=function(t){return y.get(t)||{}},o=function(t){return y.has(t)}}else{var v=p("state");f[v]=!0,i=function(t,e){if(u(t,v))throw g(d);return e.facade=t,c(t,v,e),e},r=function(t){return u(t,v)?t[v]:{}},o=function(t){return u(t,v)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}}}},7659:(t,e,n)=>{var i=n(5112),r=n(7497),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},3157:(t,e,n)=>{var i=n(4326);t.exports=Array.isArray||function(t){return"Array"==i(t)}},614:(t,e,n)=>{var i=n(4154),r=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4411:(t,e,n)=>{var i=n(1702),r=n(7293),o=n(614),s=n(648),a=n(5005),l=n(2788),c=function(){},u=[],h=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=i(p.exec),d=!p.exec(c),g=function(t){if(!o(t))return!1;try{return h(c,u,t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(p,l(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||r((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?m:g},5032:(t,e,n)=>{var i=n(2597);t.exports=function(t){return void 0!==t&&(i(t,"value")||i(t,"writable"))}},4705:(t,e,n)=>{var i=n(7293),r=n(614),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n==u||n!=c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},8554:t=>{t.exports=function(t){return null==t}},111:(t,e,n)=>{var i=n(614),r=n(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===o}:function(t){return"object"==typeof t?null!==t:i(t)}},1913:t=>{t.exports=!1},7850:(t,e,n)=>{var i=n(111),r=n(4326),o=n(5112)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},2190:(t,e,n)=>{var i=n(5005),r=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},408:(t,e,n)=>{var i=n(9974),r=n(6916),o=n(9670),s=n(6330),a=n(7659),l=n(6244),c=n(7976),u=n(4121),h=n(1246),p=n(9212),f=TypeError,d=function(t,e){this.stopped=t,this.result=e},g=d.prototype;t.exports=function(t,e,n){var m,y,v,_,x,b,w,E=n&&n.that,S=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_RECORD),I=!(!n||!n.IS_ITERATOR),M=!(!n||!n.INTERRUPTED),L=i(e,E),T=function(t){return m&&p(m,"normal",t),new d(!0,t)},P=function(t){return S?(o(t),M?L(t[0],t[1],T):L(t[0],t[1])):M?L(t,T):L(t)};if(C)m=t.iterator;else if(I)m=t;else{if(!(y=h(t)))throw f(s(t)+" is not iterable");if(a(y)){for(v=0,_=l(t);_>v;v++)if((x=P(t[v]))&&c(g,x))return x;return new d(!1)}m=u(t,y)}for(b=C?t.next:m.next;!(w=r(b,m)).done;){try{x=P(w.value)}catch(t){p(m,"throw",t)}if("object"==typeof x&&x&&c(g,x))return x}return new d(!1)}},9212:(t,e,n)=>{var i=n(6916),r=n(9670),o=n(8173);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},3061:(t,e,n)=>{"use strict";var i=n(3383).IteratorPrototype,r=n(30),o=n(9114),s=n(8003),a=n(7497),l=function(){return this};t.exports=function(t,e,n,c){var u=e+" Iterator";return t.prototype=r(i,{next:o(+!c,n)}),s(t,u,!1,!0),a[u]=l,t}},1656:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(1913),s=n(6530),a=n(614),l=n(3061),c=n(9518),u=n(7674),h=n(8003),p=n(8880),f=n(8052),d=n(5112),g=n(7497),m=n(3383),y=s.PROPER,v=s.CONFIGURABLE,_=m.IteratorPrototype,x=m.BUGGY_SAFARI_ITERATORS,b=d("iterator"),w="keys",E="values",S="entries",C=function(){return this};t.exports=function(t,e,n,s,d,m,I){l(n,e,s);var M,L,T,P=function(t){if(t===d&&N)return N;if(!x&&t in A)return A[t];switch(t){case w:case E:case S:return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",R=!1,A=t.prototype,k=A[b]||A["@@iterator"]||d&&A[d],N=!x&&k||P(d),D="Array"==e&&A.entries||k;if(D&&(M=c(D.call(new t)))!==Object.prototype&&M.next&&(o||c(M)===_||(u?u(M,_):a(M[b])||f(M,b,C)),h(M,O,!0,!0),o&&(g[O]=C)),y&&d==E&&k&&k.name!==E&&(!o&&v?p(A,"name",E):(R=!0,N=function(){return r(k,this)})),d)if(L={values:P(E),keys:m?N:P(w),entries:P(S)},I)for(T in L)(x||R||!(T in A))&&f(A,T,L[T]);else i({target:e,proto:!0,forced:x||R},L);return o&&!I||A[b]===N||f(A,b,N,{name:d}),g[e]=N,L}},3383:(t,e,n)=>{"use strict";var i,r,o,s=n(7293),a=n(614),l=n(111),c=n(30),u=n(9518),h=n(8052),p=n(5112),f=n(1913),d=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(r=u(u(o)))!==Object.prototype&&(i=r):g=!0),!l(i)||s((function(){var t={};return i[d].call(t)!==t}))?i={}:f&&(i=c(i)),a(i[d])||h(i,d,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},7497:t=>{t.exports={}},6244:(t,e,n)=>{var i=n(7466);t.exports=function(t){return i(t.length)}},6339:(t,e,n)=>{var i=n(7293),r=n(614),o=n(2597),s=n(9781),a=n(6530).CONFIGURABLE,l=n(2788),c=n(9909),u=c.enforce,h=c.get,p=Object.defineProperty,f=s&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),d=String(String).split("String"),g=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||a&&t.name!==e)&&(s?p(t,"name",{value:e,configurable:!0}):t.name=e),f&&n&&o(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?s&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=u(t);return o(i,"source")||(i.source=d.join("string"==typeof e?e:"")),t};Function.prototype.toString=g((function(){return r(this)&&h(this).source||l(this)}),"toString")},4758:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},5948:(t,e,n)=>{var i,r,o,s,a,l,c,u,h=n(7854),p=n(9974),f=n(1236).f,d=n(261).set,g=n(6833),m=n(1528),y=n(1036),v=n(5268),_=h.MutationObserver||h.WebKitMutationObserver,x=h.document,b=h.process,w=h.Promise,E=f(h,"queueMicrotask"),S=E&&E.value;S||(i=function(){var t,e;for(v&&(t=b.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():o=void 0,t}}o=void 0,t&&t.enter()},g||v||y||!_||!x?!m&&w&&w.resolve?((c=w.resolve(void 0)).constructor=w,u=p(c.then,c),s=function(){u(i)}):v?s=function(){b.nextTick(i)}:(d=p(d,h),s=function(){d(i)}):(a=!0,l=x.createTextNode(""),new _(i).observe(l,{characterData:!0}),s=function(){l.data=a=!a})),t.exports=S||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,s()),o=e}},8523:(t,e,n)=>{"use strict";var i=n(9662),r=TypeError,o=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw r("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new o(t)}},1574:(t,e,n)=>{"use strict";var i=n(9781),r=n(1702),o=n(6916),s=n(7293),a=n(1956),l=n(5181),c=n(5296),u=n(7908),h=n(8361),p=Object.assign,f=Object.defineProperty,d=r([].concat);t.exports=!p||s((function(){if(i&&1!==p({b:1},p(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=p({},t)[n]||a(p({},e)).join("")!=r}))?function(t,e){for(var n=u(t),r=arguments.length,s=1,p=l.f,f=c.f;r>s;)for(var g,m=h(arguments[s++]),y=p?d(a(m),p(m)):a(m),v=y.length,_=0;v>_;)g=y[_++],i&&!o(f,m,g)||(n[g]=m[g]);return n}:p},30:(t,e,n)=>{var i,r=n(9670),o=n(6048),s=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),h="prototype",p="script",f=u("IE_PROTO"),d=function(){},g=function(t){return"<"+p+">"+t+"</"+p+">"},m=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&i?m(i):(e=c("iframe"),n="java"+p+":",e.style.display="none",l.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):m(i);for(var r=s.length;r--;)delete y[h][s[r]];return y()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d[h]=r(t),n=new d,d[h]=null,n[f]=t):n=y(),void 0===e?n:o.f(n,e)}},6048:(t,e,n)=>{var i=n(9781),r=n(3353),o=n(3070),s=n(9670),a=n(5656),l=n(1956);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=l(e),c=r.length,u=0;c>u;)o.f(t,n=r[u++],i[n]);return t}},3070:(t,e,n)=>{var i=n(9781),r=n(4664),o=n(3353),s=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=u(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:p in n?n[p]:i[p],enumerable:h in n?n[h]:i[h],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:(t,e,n)=>{var i=n(9781),r=n(6916),o=n(5296),s=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(t){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},1156:(t,e,n)=>{var i=n(4326),r=n(5656),o=n(8006).f,s=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==i(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(r(t))}},8006:(t,e,n)=>{var i=n(6324),r=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},9518:(t,e,n)=>{var i=n(2597),r=n(614),o=n(7908),s=n(6200),a=n(8544),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},7976:(t,e,n)=>{var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:(t,e,n)=>{var i=n(1702),r=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);for(;e.length>c;)r(i,n=e[c++])&&(~s(u,n)||l(u,n));return u}},1956:(t,e,n)=>{var i=n(6324),r=n(748);t.exports=Object.keys||function(t){return i(t,r)}},5296:(t,e)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},7674:(t,e,n)=>{var i=n(1702),r=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},288:(t,e,n)=>{"use strict";var i=n(1694),r=n(648);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(t,e,n)=>{var i=n(6916),r=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:(t,e,n)=>{var i=n(5005),r=n(1702),o=n(8006),s=n(5181),a=n(9670),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},857:(t,e,n)=>{var i=n(7854);t.exports=i},2534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},3702:(t,e,n)=>{var i=n(7854),r=n(2492),o=n(614),s=n(4705),a=n(2788),l=n(5112),c=n(7871),u=n(3823),h=n(1913),p=n(7392),f=r&&r.prototype,d=l("species"),g=!1,m=o(i.PromiseRejectionEvent),y=s("Promise",(function(){var t=a(r),e=t!==String(r);if(!e&&66===p)return!0;if(h&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(t)){var n=new r((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((n.constructor={})[d]=i,!(g=n.then((function(){}))instanceof i))return!0}return!e&&(c||u)&&!m}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:m,SUBCLASSING:g}},2492:(t,e,n)=>{var i=n(7854);t.exports=i.Promise},9478:(t,e,n)=>{var i=n(9670),r=n(111),o=n(8523);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},612:(t,e,n)=>{var i=n(2492),r=n(7072),o=n(3702).CONSTRUCTOR;t.exports=o||!r((function(t){i.all(t).then(void 0,(function(){}))}))},2626:(t,e,n)=>{var i=n(3070).f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},8572:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},7651:(t,e,n)=>{var i=n(6916),r=n(9670),o=n(614),s=n(4326),a=n(2261),l=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var c=i(n,t,e);return null!==c&&r(c),c}if("RegExp"===s(t))return i(a,t,e);throw l("RegExp#exec called on incompatible receiver")}},2261:(t,e,n)=>{"use strict";var i,r,o=n(6916),s=n(1702),a=n(1340),l=n(7066),c=n(2999),u=n(2309),h=n(30),p=n(9909).get,f=n(9441),d=n(7168),g=u("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,y=m,v=s("".charAt),_=s("".indexOf),x=s("".replace),b=s("".slice),w=(r=/b*/g,o(m,i=/a/,"a"),o(m,r,"a"),0!==i.lastIndex||0!==r.lastIndex),E=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(w||S||E||f||d)&&(y=function(t){var e,n,i,r,s,c,u,f=this,d=p(f),C=a(t),I=d.raw;if(I)return I.lastIndex=f.lastIndex,e=o(y,I,C),f.lastIndex=I.lastIndex,e;var M=d.groups,L=E&&f.sticky,T=o(l,f),P=f.source,O=0,R=C;if(L&&(T=x(T,"y",""),-1===_(T,"g")&&(T+="g"),R=b(C,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==v(C,f.lastIndex-1))&&(P="(?: "+P+")",R=" "+R,O++),n=new RegExp("^(?:"+P+")",T)),S&&(n=new RegExp("^"+P+"$(?!\\s)",T)),w&&(i=f.lastIndex),r=o(m,L?n:f,R),L?r?(r.input=b(r.input,O),r[0]=b(r[0],O),r.index=f.lastIndex,f.lastIndex+=r[0].length):f.lastIndex=0:w&&r&&(f.lastIndex=f.global?r.index+r[0].length:i),S&&r&&r.length>1&&o(g,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&M)for(r.groups=c=h(null),s=0;s<M.length;s++)c[(u=M[s])[0]]=r[u[1]];return r}),t.exports=y},7066:(t,e,n)=>{"use strict";var i=n(9670);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:(t,e,n)=>{var i=n(6916),r=n(2597),o=n(7976),s=n(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||r(t,"flags")||!o(a,t)?e:i(s,t)}},2999:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp,o=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=o||i((function(){return!r("a","y").sticky})),a=o||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:(t,e,n)=>{var i=n(8554),r=TypeError;t.exports=function(t){if(i(t))throw r("Can't call method on "+t);return t}},1150:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6340:(t,e,n)=>{"use strict";var i=n(5005),r=n(3070),o=n(5112),s=n(9781),a=o("species");t.exports=function(t){var e=i(t),n=r.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},8003:(t,e,n)=>{var i=n(3070).f,r=n(2597),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!r(t,o)&&i(t,o,{configurable:!0,value:e})}},6200:(t,e,n)=>{var i=n(2309),r=n(9711),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:(t,e,n)=>{var i=n(7854),r=n(3072),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},2309:(t,e,n)=>{var i=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(t,e,n)=>{var i=n(9670),r=n(9483),o=n(8554),s=n(5112)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||o(n=i(a)[s])?e:r(n)}},8710:(t,e,n)=>{var i=n(1702),r=n(9303),o=n(1340),s=n(4488),a=i("".charAt),l=i("".charCodeAt),c=i("".slice),u=function(t){return function(e,n){var i,u,h=o(s(e)),p=r(n),f=h.length;return p<0||p>=f?t?"":void 0:(i=l(h,p))<55296||i>56319||p+1===f||(u=l(h,p+1))<56320||u>57343?t?a(h,p):i:t?c(h,p,p+2):u-56320+(i-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},3197:(t,e,n)=>{"use strict";var i=n(1702),r=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",l=RangeError,c=i(s.exec),u=Math.floor,h=String.fromCharCode,p=i("".charCodeAt),f=i([].join),d=i([].push),g=i("".replace),m=i("".split),y=i("".toLowerCase),v=function(t){return t+22+75*(t<26)},_=function(t,e,n){var i=0;for(t=n?u(t/700):t>>1,t+=u(t/e);t>455;)t=u(t/35),i+=36;return u(i+36*t/(t+38))},x=function(t){var e=[];t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=p(t,n++);if(r>=55296&&r<=56319&&n<i){var o=p(t,n++);56320==(64512&o)?d(e,((1023&r)<<10)+(1023&o)+65536):(d(e,r),n--)}else d(e,r)}return e}(t);var n,i,o=t.length,s=128,c=0,g=72;for(n=0;n<t.length;n++)(i=t[n])<128&&d(e,h(i));var m=e.length,y=m;for(m&&d(e,"-");y<o;){var x=r;for(n=0;n<t.length;n++)(i=t[n])>=s&&i<x&&(x=i);var b=y+1;if(x-s>u((r-c)/b))throw l(a);for(c+=(x-s)*b,s=x,n=0;n<t.length;n++){if((i=t[n])<s&&++c>r)throw l(a);if(i==s){for(var w=c,E=36;;){var S=E<=g?1:E>=g+26?26:E-g;if(w<S)break;var C=w-S,I=36-S;d(e,h(v(S+C%I))),w=u(C/I),E+=36}d(e,h(v(w))),g=_(c,b,y==m),c=0,y++}}c++,s++}return f(e,"")};t.exports=function(t){var e,n,i=[],r=m(g(y(t),s,"."),".");for(e=0;e<r.length;e++)n=r[e],d(i,c(o,n)?"xn--"+x(n):n);return f(i,".")}},8415:(t,e,n)=>{"use strict";var i=n(9303),r=n(1340),o=n(4488),s=RangeError;t.exports=function(t){var e=r(o(this)),n="",a=i(t);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},6091:(t,e,n)=>{var i=n(6530).PROPER,r=n(7293),o=n(1361);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||i&&o[t].name!==t}))}},3111:(t,e,n)=>{var i=n(1702),r=n(4488),o=n(1340),s=n(1361),a=i("".replace),l="["+s+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),h=function(t){return function(e){var n=o(r(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,u,"")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},6293:(t,e,n)=>{var i=n(7392),r=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6532:(t,e,n)=>{var i=n(6916),r=n(5005),o=n(5112),s=n(8052);t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=o("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return i(n,this)}),{arity:1})}},2015:(t,e,n)=>{var i=n(6293);t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},261:(t,e,n)=>{var i,r,o,s,a=n(7854),l=n(2104),c=n(9974),u=n(614),h=n(2597),p=n(7293),f=n(490),d=n(206),g=n(317),m=n(8053),y=n(6833),v=n(5268),_=a.setImmediate,x=a.clearImmediate,b=a.process,w=a.Dispatch,E=a.Function,S=a.MessageChannel,C=a.String,I=0,M={},L="onreadystatechange";try{i=a.location}catch(t){}var T=function(t){if(h(M,t)){var e=M[t];delete M[t],e()}},P=function(t){return function(){T(t)}},O=function(t){T(t.data)},R=function(t){a.postMessage(C(t),i.protocol+"//"+i.host)};_&&x||(_=function(t){m(arguments.length,1);var e=u(t)?t:E(t),n=d(arguments,1);return M[++I]=function(){l(e,void 0,n)},r(I),I},x=function(t){delete M[t]},v?r=function(t){b.nextTick(P(t))}:w&&w.now?r=function(t){w.now(P(t))}:S&&!y?(s=(o=new S).port2,o.port1.onmessage=O,r=c(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!p(R)?(r=R,a.addEventListener("message",O,!1)):r=L in g("script")?function(t){f.appendChild(g("script"))[L]=function(){f.removeChild(this),T(t)}}:function(t){setTimeout(P(t),0)}),t.exports={set:_,clear:x}},863:(t,e,n)=>{var i=n(1702);t.exports=i(1..valueOf)},1400:(t,e,n)=>{var i=n(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},5656:(t,e,n)=>{var i=n(8361),r=n(4488);t.exports=function(t){return i(r(t))}},9303:(t,e,n)=>{var i=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},7466:(t,e,n)=>{var i=n(9303),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},7908:(t,e,n)=>{var i=n(4488),r=Object;t.exports=function(t){return r(i(t))}},7593:(t,e,n)=>{var i=n(6916),r=n(111),o=n(2190),s=n(8173),a=n(2140),l=n(5112),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:(t,e,n)=>{var i=n(7593),r=n(2190);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},1694:(t,e,n)=>{var i={};i[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(i)},1340:(t,e,n)=>{var i=n(648),r=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:(t,e,n)=>{var i=n(1702),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},5143:(t,e,n)=>{var i=n(7293),r=n(5112),o=n(1913),s=r("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:(t,e,n)=>{var i=n(6293);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,n)=>{var i=n(9781),r=n(7293);t.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:t=>{var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:(t,e,n)=>{var i=n(7854),r=n(614),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},6800:(t,e,n)=>{var i=n(857),r=n(2597),o=n(6061),s=n(3070).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},6061:(t,e,n)=>{var i=n(5112);e.f=i},5112:(t,e,n)=>{var i=n(7854),r=n(2309),o=n(2597),s=n(9711),a=n(6293),l=n(3307),c=r("wks"),u=i.Symbol,h=u&&u.for,p=l?u:u&&u.withoutSetter||s;t.exports=function(t){if(!o(c,t)||!a&&"string"!=typeof c[t]){var e="Symbol."+t;a&&o(u,t)?c[t]=u[t]:c[t]=l&&h?h(e):p(e)}return c[t]}},1361:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:(t,e,n)=>{"use strict";var i=n(2109),r=n(7293),o=n(3157),s=n(111),a=n(7908),l=n(6244),c=n(7207),u=n(6135),h=n(5417),p=n(1194),f=n(5112),d=n(7392),g=f("isConcatSpreadable"),m=d>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=p("concat"),v=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)};i({target:"Array",proto:!0,arity:1,forced:!m||!y},{concat:function(t){var e,n,i,r,o,s=a(this),p=h(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(v(o=-1===e?s:arguments[e]))for(r=l(o),c(f+r),n=0;n<r;n++,f++)n in o&&u(p,f,o[n]);else c(f+1),u(p,f++,o);return p.length=f,p}})},7327:(t,e,n)=>{"use strict";var i=n(2109),r=n(2092).filter;i({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:(t,e,n)=>{var i=n(2109),r=n(8457);i({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:r})},6992:(t,e,n)=>{"use strict";var i=n(5656),r=n(1223),o=n(7497),s=n(9909),a=n(3070).f,l=n(1656),c=n(6178),u=n(1913),h=n(9781),p="Array Iterator",f=s.set,d=s.getterFor(p);t.exports=l(Array,"Array",(function(t,e){f(this,{type:p,target:i(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==n?i:"values"==n?e[i]:[i,e[i]],!1)}),"values");var g=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!u&&h&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},9600:(t,e,n)=>{"use strict";var i=n(2109),r=n(1702),o=n(8361),s=n(5656),a=n(9341),l=r([].join),c=o!=Object,u=a("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(t){return l(s(this),void 0===t?",":t)}})},1249:(t,e,n)=>{"use strict";var i=n(2109),r=n(2092).map;i({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:(t,e,n)=>{"use strict";var i=n(2109),r=n(3157),o=n(4411),s=n(111),a=n(1400),l=n(6244),c=n(5656),u=n(6135),h=n(5112),p=n(1194),f=n(206),d=p("slice"),g=h("species"),m=Array,y=Math.max;i({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,i,h,p=c(this),d=l(p),v=a(t,d),_=a(void 0===e?d:e,d);if(r(p)&&(n=p.constructor,(o(n)&&(n===m||r(n.prototype))||s(n)&&null===(n=n[g]))&&(n=void 0),n===m||void 0===n))return f(p,v,_);for(i=new(void 0===n?m:n)(y(_-v,0)),h=0;v<_;v++,h++)v in p&&u(i,h,p[v]);return i.length=h,i}})},2707:(t,e,n)=>{"use strict";var i=n(2109),r=n(1702),o=n(9662),s=n(7908),a=n(6244),l=n(5117),c=n(1340),u=n(7293),h=n(4362),p=n(9341),f=n(8886),d=n(256),g=n(7392),m=n(8008),y=[],v=r(y.sort),_=r(y.push),x=u((function(){y.sort(void 0)})),b=u((function(){y.sort(null)})),w=p("sort"),E=!u((function(){if(g)return g<70;if(!(f&&f>3)){if(d)return!0;if(m)return m<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)y.push({k:e+i,v:n})}for(y.sort((function(t,e){return e.v-t.v})),i=0;i<y.length;i++)e=y[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:x||!b||!w||!E},{sort:function(t){void 0!==t&&o(t);var e=s(this);if(E)return void 0===t?v(e):v(e,t);var n,i,r=[],u=a(e);for(i=0;i<u;i++)i in e&&_(r,e[i]);for(h(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}}(t)),n=a(r),i=0;i<n;)e[i]=r[i++];for(;i<u;)l(e,i++);return e}})},561:(t,e,n)=>{"use strict";var i=n(2109),r=n(7908),o=n(1400),s=n(9303),a=n(6244),l=n(3658),c=n(7207),u=n(5417),h=n(6135),p=n(5117),f=n(1194)("splice"),d=Math.max,g=Math.min;i({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,i,f,m,y,v,_=r(this),x=a(_),b=o(t,x),w=arguments.length;for(0===w?n=i=0:1===w?(n=0,i=x-b):(n=w-2,i=g(d(s(e),0),x-b)),c(x+n-i),f=u(_,i),m=0;m<i;m++)(y=b+m)in _&&h(f,m,_[y]);if(f.length=i,n<i){for(m=b;m<x-i;m++)v=m+n,(y=m+i)in _?_[v]=_[y]:p(_,v);for(m=x;m>x-i+n;m--)p(_,m-1)}else if(n>i)for(m=x-i;m>b;m--)v=m+n-1,(y=m+i-1)in _?_[v]=_[y]:p(_,v);for(m=0;m<n;m++)_[m+b]=arguments[m+2];return l(_,x-i+n),f}})},6078:(t,e,n)=>{var i=n(2597),r=n(8052),o=n(8709),s=n(5112)("toPrimitive"),a=Date.prototype;i(a,s)||r(a,s,o)},8309:(t,e,n)=>{var i=n(9781),r=n(6530).EXISTS,o=n(1702),s=n(3070).f,a=Function.prototype,l=o(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(c.exec);i&&!r&&s(a,"name",{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(t){return""}}})},8862:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2104),s=n(6916),a=n(1702),l=n(7293),c=n(3157),u=n(614),h=n(111),p=n(2190),f=n(206),d=n(6293),g=r("JSON","stringify"),m=a(/./.exec),y=a("".charAt),v=a("".charCodeAt),_=a("".replace),x=a(1..toString),b=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,S=!d||l((function(){var t=r("Symbol")();return"[null]"!=g([t])||"{}"!=g({a:t})||"{}"!=g(Object(t))})),C=l((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),I=function(t,e){var n=f(arguments),i=e;if((h(e)||void 0!==t)&&!p(t))return c(e)||(e=function(t,e){if(u(i)&&(e=s(i,this,t,e)),!p(e))return e}),n[1]=e,o(g,null,n)},M=function(t,e,n){var i=y(n,e-1),r=y(n,e+1);return m(w,t)&&!m(E,r)||m(E,t)&&!m(w,i)?"\\u"+x(v(t,0),16):t};g&&i({target:"JSON",stat:!0,arity:3,forced:S||C},{stringify:function(t,e,n){var i=f(arguments),r=o(S?I:g,null,i);return C&&"string"==typeof r?_(r,b,M):r}})},3706:(t,e,n)=>{var i=n(7854);n(8003)(i.JSON,"JSON",!0)},2703:(t,e,n)=>{n(8003)(Math,"Math",!0)},9653:(t,e,n)=>{"use strict";var i=n(9781),r=n(7854),o=n(1702),s=n(4705),a=n(8052),l=n(2597),c=n(9587),u=n(7976),h=n(2190),p=n(7593),f=n(7293),d=n(8006).f,g=n(1236).f,m=n(3070).f,y=n(863),v=n(3111).trim,_="Number",x=r[_],b=x.prototype,w=r.TypeError,E=o("".slice),S=o("".charCodeAt),C=function(t){var e,n,i,r,o,s,a,l,c=p(t,"number");if(h(c))throw w("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),43===(e=S(c,0))||45===e){if(88===(n=S(c,2))||120===n)return NaN}else if(48===e){switch(S(c,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(o=E(c,2)).length,a=0;a<s;a++)if((l=S(o,a))<48||l>r)return NaN;return parseInt(o,i)}return+c};if(s(_,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var I,M=function(t){var e=arguments.length<1?0:x(function(t){var e=p(t,"number");return"bigint"==typeof e?e:C(e)}(t)),n=this;return u(b,n)&&f((function(){y(n)}))?c(Object(e),n,M):e},L=i?d(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;L.length>T;T++)l(x,I=L[T])&&!l(M,I)&&m(M,I,g(x,I));M.prototype=b,b.constructor=M,a(r,_,M,{constructor:!0})}},6977:(t,e,n)=>{"use strict";var i=n(2109),r=n(1702),o=n(9303),s=n(863),a=n(8415),l=n(7293),c=RangeError,u=String,h=Math.floor,p=r(a),f=r("".slice),d=r(1..toFixed),g=function(t,e,n){return 0===e?n:e%2==1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t,e,n){for(var i=-1,r=n;++i<6;)r+=e*t[i],t[i]=r%1e7,r=h(r/1e7)},y=function(t,e){for(var n=6,i=0;--n>=0;)i+=t[n],t[n]=h(i/e),i=i%e*1e7},v=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var i=u(t[e]);n=""===n?i:n+p("0",7-i.length)+i}return n};i({target:"Number",proto:!0,forced:l((function(){return"0.000"!==d(8e-5,3)||"1"!==d(.9,0)||"1.25"!==d(1.255,2)||"1000000000000000128"!==d(0xde0b6b3a7640080,0)}))||!l((function(){d({})}))},{toFixed:function(t){var e,n,i,r,a=s(this),l=o(t),h=[0,0,0,0,0,0],d="",_="0";if(l<0||l>20)throw c("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return u(a);if(a<0&&(d="-",a=-a),a>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(a*g(2,69,1))-69)<0?a*g(2,-e,1):a/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(h,0,n),i=l;i>=7;)m(h,1e7,0),i-=7;for(m(h,g(10,i,1),0),i=e-1;i>=23;)y(h,1<<23),i-=23;y(h,1<<i),m(h,1,1),y(h,2),_=v(h)}else m(h,0,n),m(h,1<<-e,0),_=v(h)+p("0",l);return _=l>0?d+((r=_.length)<=l?"0."+p("0",l-r)+_:f(_,0,r-l)+"."+f(_,r-l)):d+_}})},5003:(t,e,n)=>{var i=n(2109),r=n(7293),o=n(5656),s=n(1236).f,a=n(9781),l=r((function(){s(1)}));i({target:"Object",stat:!0,forced:!a||l,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},9660:(t,e,n)=>{var i=n(2109),r=n(6293),o=n(7293),s=n(5181),a=n(7908);i({target:"Object",stat:!0,forced:!r||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})},489:(t,e,n)=>{var i=n(2109),r=n(7293),o=n(7908),s=n(9518),a=n(8544);i({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!a},{getPrototypeOf:function(t){return s(o(t))}})},7941:(t,e,n)=>{var i=n(2109),r=n(7908),o=n(1956);i({target:"Object",stat:!0,forced:n(7293)((function(){o(1)}))},{keys:function(t){return o(r(t))}})},1539:(t,e,n)=>{var i=n(1694),r=n(8052),o=n(288);i||r(Object.prototype,"toString",o,{unsafe:!0})},821:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(9662),s=n(8523),a=n(2534),l=n(408);i({target:"Promise",stat:!0,forced:n(612)},{all:function(t){var e=this,n=s.f(e),i=n.resolve,c=n.reject,u=a((function(){var n=o(e.resolve),s=[],a=0,u=1;l(t,(function(t){var o=a++,l=!1;u++,r(n,e,t).then((function(t){l||(l=!0,s[o]=t,--u||i(s))}),c)})),--u||i(s)}));return u.error&&c(u.value),n.promise}})},4164:(t,e,n)=>{"use strict";var i=n(2109),r=n(1913),o=n(3702).CONSTRUCTOR,s=n(2492),a=n(5005),l=n(614),c=n(8052),u=s&&s.prototype;if(i({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&l(s)){var h=a("Promise").prototype.catch;u.catch!==h&&c(u,"catch",h,{unsafe:!0})}},3401:(t,e,n)=>{"use strict";var i,r,o,s=n(2109),a=n(1913),l=n(5268),c=n(7854),u=n(6916),h=n(8052),p=n(7674),f=n(8003),d=n(6340),g=n(9662),m=n(614),y=n(111),v=n(5787),_=n(6707),x=n(261).set,b=n(5948),w=n(842),E=n(2534),S=n(8572),C=n(9909),I=n(2492),M=n(3702),L=n(8523),T="Promise",P=M.CONSTRUCTOR,O=M.REJECTION_EVENT,R=M.SUBCLASSING,A=C.getterFor(T),k=C.set,N=I&&I.prototype,D=I,F=N,j=c.TypeError,B=c.document,G=c.process,z=L.f,U=z,q=!!(B&&B.createEvent&&c.dispatchEvent),X="unhandledrejection",V=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},Y=function(t,e){var n,i,r,o=e.value,s=1==e.state,a=s?t.ok:t.fail,l=t.resolve,c=t.reject,h=t.domain;try{a?(s||(2===e.rejection&&K(e),e.rejection=1),!0===a?n=o:(h&&h.enter(),n=a(o),h&&(h.exit(),r=!0)),n===t.promise?c(j("Promise-chain cycle")):(i=V(n))?u(i,n,l,c):l(n)):c(o)}catch(t){h&&!r&&h.exit(),c(t)}},H=function(t,e){t.notified||(t.notified=!0,b((function(){for(var n,i=t.reactions;n=i.get();)Y(n,t);t.notified=!1,e&&!t.rejection&&Z(t)})))},W=function(t,e,n){var i,r;q?((i=B.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),c.dispatchEvent(i)):i={promise:e,reason:n},!O&&(r=c["on"+t])?r(i):t===X&&w("Unhandled promise rejection",n)},Z=function(t){u(x,c,(function(){var e,n=t.facade,i=t.value;if($(t)&&(e=E((function(){l?G.emit("unhandledRejection",i,n):W(X,n,i)})),t.rejection=l||$(t)?2:1,e.error))throw e.value}))},$=function(t){return 1!==t.rejection&&!t.parent},K=function(t){u(x,c,(function(){var e=t.facade;l?G.emit("rejectionHandled",e):W("rejectionhandled",e,t.value)}))},J=function(t,e,n){return function(i){t(e,i,n)}},Q=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,H(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw j("Promise can't be resolved itself");var i=V(e);i?b((function(){var n={done:!1};try{u(i,e,J(tt,n,t),J(Q,n,t))}catch(e){Q(n,e,t)}})):(t.value=e,t.state=1,H(t,!1))}catch(e){Q({done:!1},e,t)}}};if(P&&(F=(D=function(t){v(this,F),g(t),u(i,this);var e=A(this);try{t(J(tt,e),J(Q,e))}catch(t){Q(e,t)}}).prototype,(i=function(t){k(this,{type:T,done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=h(F,"then",(function(t,e){var n=A(this),i=z(_(this,D));return n.parent=!0,i.ok=!m(t)||t,i.fail=m(e)&&e,i.domain=l?G.domain:void 0,0==n.state?n.reactions.add(i):b((function(){Y(i,n)})),i.promise})),r=function(){var t=new i,e=A(t);this.promise=t,this.resolve=J(tt,e),this.reject=J(Q,e)},L.f=z=function(t){return t===D||undefined===t?new r(t):U(t)},!a&&m(I)&&N!==Object.prototype)){o=N.then,R||h(N,"then",(function(t,e){var n=this;return new D((function(t,e){u(o,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete N.constructor}catch(t){}p&&p(N,F)}s({global:!0,constructor:!0,wrap:!0,forced:P},{Promise:D}),f(D,T,!1,!0),d(T)},8674:(t,e,n)=>{n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(9662),s=n(8523),a=n(2534),l=n(408);i({target:"Promise",stat:!0,forced:n(612)},{race:function(t){var e=this,n=s.f(e),i=n.reject,c=a((function(){var s=o(e.resolve);l(t,(function(t){r(s,e,t).then(n.resolve,i)}))}));return c.error&&i(c.value),n.promise}})},683:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(8523);i({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return r(e.reject,void 0,t),e.promise}})},6294:(t,e,n)=>{"use strict";var i=n(2109),r=n(5005),o=n(1913),s=n(2492),a=n(3702).CONSTRUCTOR,l=n(9478),c=r("Promise"),u=o&&!a;i({target:"Promise",stat:!0,forced:o||a},{resolve:function(t){return l(u&&this===c?s:this,t)}})},2419:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2104),s=n(7065),a=n(9483),l=n(9670),c=n(111),u=n(30),h=n(7293),p=r("Reflect","construct"),f=Object.prototype,d=[].push,g=h((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),m=!h((function(){p((function(){}))})),y=g||m;i({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(t,e){a(t),l(e);var n=arguments.length<3?t:a(arguments[2]);if(m&&!g)return p(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return o(d,i,e),new(o(s,t,i))}var r=n.prototype,h=u(c(r)?r:f),y=o(t,h,e);return c(y)?y:h}})},4819:(t,e,n)=>{var i=n(2109),r=n(6916),o=n(111),s=n(9670),a=n(5032),l=n(1236),c=n(9518);i({target:"Reflect",stat:!0},{get:function t(e,n){var i,u,h=arguments.length<3?e:arguments[2];return s(e)===h?e[n]:(i=l.f(e,n))?a(i)?i.value:void 0===i.get?void 0:r(i.get,h):o(u=c(e))?t(u,n,h):void 0}})},4603:(t,e,n)=>{var i=n(9781),r=n(7854),o=n(1702),s=n(4705),a=n(9587),l=n(8880),c=n(8006).f,u=n(7976),h=n(7850),p=n(1340),f=n(4706),d=n(2999),g=n(2626),m=n(8052),y=n(7293),v=n(2597),_=n(9909).enforce,x=n(6340),b=n(5112),w=n(9441),E=n(7168),S=b("match"),C=r.RegExp,I=C.prototype,M=r.SyntaxError,L=o(I.exec),T=o("".charAt),P=o("".replace),O=o("".indexOf),R=o("".slice),A=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,k=/a/g,N=/a/g,D=new C(k)!==k,F=d.MISSED_STICKY,j=d.UNSUPPORTED_Y,B=i&&(!D||F||w||E||y((function(){return N[S]=!1,C(k)!=k||C(N)==N||"/a/i"!=C(k,"i")})));if(s("RegExp",B)){for(var G=function(t,e){var n,i,r,o,s,c,d=u(I,this),g=h(t),m=void 0===e,y=[],x=t;if(!d&&g&&m&&t.constructor===G)return t;if((g||u(I,t))&&(t=t.source,m&&(e=f(x))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),x=t,w&&"dotAll"in k&&(i=!!e&&O(e,"s")>-1)&&(e=P(e,/s/g,"")),n=e,F&&"sticky"in k&&(r=!!e&&O(e,"y")>-1)&&j&&(e=P(e,/y/g,"")),E&&(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,l=!1,c=0,u="";i<=n;i++){if("\\"===(e=T(t,i)))e+=T(t,++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:L(A,R(t,i+1))&&(i+=2,l=!0),r+=e,c++;continue;case">"===e&&l:if(""===u||v(s,u))throw new M("Invalid capture group name");s[u]=!0,o[o.length]=[u,c],l=!1,u="";continue}l?u+=e:r+=e}return[r,o]}(t),t=o[0],y=o[1]),s=a(C(t,e),d?this:I,G),(i||r||y.length)&&(c=_(s),i&&(c.dotAll=!0,c.raw=G(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=T(t,i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+T(t,++i);return r}(t),n)),r&&(c.sticky=!0),y.length&&(c.groups=y)),t!==x)try{l(s,"source",""===x?"(?:)":x)}catch(t){}return s},z=c(C),U=0;z.length>U;)g(G,C,z[U++]);I.constructor=G,G.prototype=I,m(r,"RegExp",G,{constructor:!0})}x("RegExp")},4916:(t,e,n)=>{"use strict";var i=n(2109),r=n(2261);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},9714:(t,e,n)=>{"use strict";var i=n(6530).PROPER,r=n(8052),o=n(9670),s=n(1340),a=n(7293),l=n(4706),c="toString",u=RegExp.prototype[c],h=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),p=i&&u.name!=c;(h||p)&&r(RegExp.prototype,c,(function(){var t=o(this);return"/"+s(t.source)+"/"+s(l(t))}),{unsafe:!0})},8783:(t,e,n)=>{"use strict";var i=n(8710).charAt,r=n(1340),o=n(9909),s=n(1656),a=n(6178),l="String Iterator",c=o.set,u=o.getterFor(l);s(String,"String",(function(t){c(this,{type:l,string:r(t),index:0})}),(function(){var t,e=u(this),n=e.string,r=e.index;return r>=n.length?a(void 0,!0):(t=i(n,r),e.index+=t.length,a(t,!1))}))},4723:(t,e,n)=>{"use strict";var i=n(6916),r=n(7007),o=n(9670),s=n(8554),a=n(7466),l=n(1340),c=n(4488),u=n(8173),h=n(1530),p=n(7651);r("match",(function(t,e,n){return[function(e){var n=c(this),r=s(e)?void 0:u(e,t);return r?i(r,e,n):new RegExp(e)[t](l(n))},function(t){var i=o(this),r=l(t),s=n(e,i,r);if(s.done)return s.value;if(!i.global)return p(i,r);var c=i.unicode;i.lastIndex=0;for(var u,f=[],d=0;null!==(u=p(i,r));){var g=l(u[0]);f[d]=g,""===g&&(i.lastIndex=h(r,a(i.lastIndex),c)),d++}return 0===d?null:f}]}))},2481:(t,e,n)=>{n(2109)({target:"String",proto:!0},{repeat:n(8415)})},5306:(t,e,n)=>{"use strict";var i=n(2104),r=n(6916),o=n(1702),s=n(7007),a=n(7293),l=n(9670),c=n(614),u=n(8554),h=n(9303),p=n(7466),f=n(1340),d=n(4488),g=n(1530),m=n(8173),y=n(647),v=n(7651),_=n(5112)("replace"),x=Math.max,b=Math.min,w=o([].concat),E=o([].push),S=o("".indexOf),C=o("".slice),I="$0"==="a".replace(/./,"$0"),M=!!/./[_]&&""===/./[_]("a","$0");s("replace",(function(t,e,n){var o=M?"$":"$0";return[function(t,n){var i=d(this),o=u(t)?void 0:m(t,_);return o?r(o,t,i,n):r(e,f(i),t,n)},function(t,r){var s=l(this),a=f(t);if("string"==typeof r&&-1===S(r,o)&&-1===S(r,"$<")){var u=n(e,s,a,r);if(u.done)return u.value}var d=c(r);d||(r=f(r));var m=s.global;if(m){var _=s.unicode;s.lastIndex=0}for(var I=[];;){var M=v(s,a);if(null===M)break;if(E(I,M),!m)break;""===f(M[0])&&(s.lastIndex=g(a,p(s.lastIndex),_))}for(var L,T="",P=0,O=0;O<I.length;O++){for(var R=f((M=I[O])[0]),A=x(b(h(M.index),a.length),0),k=[],N=1;N<M.length;N++)E(k,void 0===(L=M[N])?L:String(L));var D=M.groups;if(d){var F=w([R],k,A,a);void 0!==D&&E(F,D);var j=f(i(r,void 0,F))}else j=y(R,a,A,k,D,r);A>=P&&(T+=C(a,P,A)+j,P=A+R.length)}return T+C(a,P)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!I||M)},4765:(t,e,n)=>{"use strict";var i=n(6916),r=n(7007),o=n(9670),s=n(8554),a=n(4488),l=n(1150),c=n(1340),u=n(8173),h=n(7651);r("search",(function(t,e,n){return[function(e){var n=a(this),r=s(e)?void 0:u(e,t);return r?i(r,e,n):new RegExp(e)[t](c(n))},function(t){var i=o(this),r=c(t),s=n(e,i,r);if(s.done)return s.value;var a=i.lastIndex;l(a,0)||(i.lastIndex=0);var u=h(i,r);return l(i.lastIndex,a)||(i.lastIndex=a),null===u?-1:u.index}]}))},3123:(t,e,n)=>{"use strict";var i=n(2104),r=n(6916),o=n(1702),s=n(7007),a=n(9670),l=n(8554),c=n(7850),u=n(4488),h=n(6707),p=n(1530),f=n(7466),d=n(1340),g=n(8173),m=n(1589),y=n(7651),v=n(2261),_=n(2999),x=n(7293),b=_.UNSUPPORTED_Y,w=4294967295,E=Math.min,S=[].push,C=o(/./.exec),I=o(S),M=o("".slice);s("split",(function(t,e,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var o=d(u(this)),s=void 0===n?w:n>>>0;if(0===s)return[];if(void 0===t)return[o];if(!c(t))return r(e,o,t,s);for(var a,l,h,p=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,y=new RegExp(t.source,f+"g");(a=r(v,y,o))&&!((l=y.lastIndex)>g&&(I(p,M(o,g,a.index)),a.length>1&&a.index<o.length&&i(S,p,m(a,1)),h=a[0].length,g=l,p.length>=s));)y.lastIndex===a.index&&y.lastIndex++;return g===o.length?!h&&C(y,"")||I(p,""):I(p,M(o,g)),p.length>s?m(p,0,s):p}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:r(e,this,t,n)}:e,[function(e,n){var i=u(this),s=l(e)?void 0:g(e,t);return s?r(s,e,i,n):r(o,d(i),e,n)},function(t,i){var r=a(this),s=d(t),l=n(o,r,s,i,o!==e);if(l.done)return l.value;var c=h(r,RegExp),u=r.unicode,g=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(b?"g":"y"),m=new c(b?"^(?:"+r.source+")":r,g),v=void 0===i?w:i>>>0;if(0===v)return[];if(0===s.length)return null===y(m,s)?[s]:[];for(var _=0,x=0,S=[];x<s.length;){m.lastIndex=b?0:x;var C,L=y(m,b?M(s,x):s);if(null===L||(C=E(f(m.lastIndex+(b?x:0)),s.length))===_)x=p(s,x,u);else{if(I(S,M(s,_,x)),S.length===v)return S;for(var T=1;T<=L.length-1;T++)if(I(S,L[T]),S.length===v)return S;x=_=C}}return I(S,M(s,_)),S}]}),!!x((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),b)},3210:(t,e,n)=>{"use strict";var i=n(2109),r=n(3111).trim;i({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return r(this)}})},2443:(t,e,n)=>{n(6800)("asyncIterator")},4032:(t,e,n)=>{"use strict";var i=n(2109),r=n(7854),o=n(6916),s=n(1702),a=n(1913),l=n(9781),c=n(6293),u=n(7293),h=n(2597),p=n(7976),f=n(9670),d=n(5656),g=n(4948),m=n(1340),y=n(9114),v=n(30),_=n(1956),x=n(8006),b=n(1156),w=n(5181),E=n(1236),S=n(3070),C=n(6048),I=n(5296),M=n(8052),L=n(2309),T=n(6200),P=n(3501),O=n(9711),R=n(5112),A=n(6061),k=n(6800),N=n(6532),D=n(8003),F=n(9909),j=n(2092).forEach,B=T("hidden"),G="Symbol",z="prototype",U=F.set,q=F.getterFor(G),X=Object[z],V=r.Symbol,Y=V&&V[z],H=r.TypeError,W=r.QObject,Z=E.f,$=S.f,K=b.f,J=I.f,Q=s([].push),tt=L("symbols"),et=L("op-symbols"),nt=L("wks"),it=!W||!W[z]||!W[z].findChild,rt=l&&u((function(){return 7!=v($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Z(X,e);i&&delete X[e],$(t,e,n),i&&t!==X&&$(X,e,i)}:$,ot=function(t,e){var n=tt[t]=v(Y);return U(n,{type:G,tag:t,description:e}),l||(n.description=e),n},st=function(t,e,n){t===X&&st(et,e,n),f(t);var i=g(e);return f(n),h(tt,i)?(n.enumerable?(h(t,B)&&t[B][i]&&(t[B][i]=!1),n=v(n,{enumerable:y(0,!1)})):(h(t,B)||$(t,B,y(1,{})),t[B][i]=!0),rt(t,i,n)):$(t,i,n)},at=function(t,e){f(t);var n=d(e),i=_(n).concat(ht(n));return j(i,(function(e){l&&!o(lt,n,e)||st(t,e,n[e])})),t},lt=function(t){var e=g(t),n=o(J,this,e);return!(this===X&&h(tt,e)&&!h(et,e))&&(!(n||!h(this,e)||!h(tt,e)||h(this,B)&&this[B][e])||n)},ct=function(t,e){var n=d(t),i=g(e);if(n!==X||!h(tt,i)||h(et,i)){var r=Z(n,i);return!r||!h(tt,i)||h(n,B)&&n[B][i]||(r.enumerable=!0),r}},ut=function(t){var e=K(d(t)),n=[];return j(e,(function(t){h(tt,t)||h(P,t)||Q(n,t)})),n},ht=function(t){var e=t===X,n=K(e?et:d(t)),i=[];return j(n,(function(t){!h(tt,t)||e&&!h(X,t)||Q(i,tt[t])})),i};c||(M(Y=(V=function(){if(p(Y,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?m(arguments[0]):void 0,e=O(t),n=function(t){this===X&&o(n,et,t),h(this,B)&&h(this[B],e)&&(this[B][e]=!1),rt(this,e,y(1,t))};return l&&it&&rt(X,e,{configurable:!0,set:n}),ot(e,t)})[z],"toString",(function(){return q(this).tag})),M(V,"withoutSetter",(function(t){return ot(O(t),t)})),I.f=lt,S.f=st,C.f=at,E.f=ct,x.f=b.f=ut,w.f=ht,A.f=function(t){return ot(R(t),t)},l&&($(Y,"description",{configurable:!0,get:function(){return q(this).description}}),a||M(X,"propertyIsEnumerable",lt,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),j(_(nt),(function(t){k(t)})),i({target:G,stat:!0,forced:!c},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(t,e){return void 0===e?v(t):at(v(t),e)},defineProperty:st,defineProperties:at,getOwnPropertyDescriptor:ct}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ut}),N(),D(V,G),P[B]=!0},1817:(t,e,n)=>{"use strict";var i=n(2109),r=n(9781),o=n(7854),s=n(1702),a=n(2597),l=n(614),c=n(7976),u=n(1340),h=n(3070).f,p=n(9920),f=o.Symbol,d=f&&f.prototype;if(r&&l(f)&&(!("description"in d)||void 0!==f().description)){var g={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=c(d,this)?new f(t):void 0===t?f():f(t);return""===t&&(g[e]=!0),e};p(m,f),m.prototype=d,d.constructor=m;var y="Symbol(test)"==String(f("test")),v=s(d.valueOf),_=s(d.toString),x=/^Symbol\((.*)\)[^)]+$/,b=s("".replace),w=s("".slice);h(d,"description",{configurable:!0,get:function(){var t=v(this);if(a(g,t))return"";var e=_(t),n=y?w(e,7,-1):b(e,x,"$1");return""===n?void 0:n}}),i({global:!0,constructor:!0,forced:!0},{Symbol:m})}},763:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2597),s=n(1340),a=n(2309),l=n(2015),c=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{for:function(t){var e=s(t);if(o(c,e))return c[e];var n=r("Symbol")(e);return c[e]=n,u[n]=e,n}})},2165:(t,e,n)=>{n(6800)("iterator")},2526:(t,e,n)=>{n(4032),n(763),n(6620),n(8862),n(9660)},6620:(t,e,n)=>{var i=n(2109),r=n(2597),o=n(2190),s=n(6330),a=n(2309),l=n(2015),c=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{keyFor:function(t){if(!o(t))throw TypeError(s(t)+" is not a symbol");if(r(c,t))return c[t]}})},6649:(t,e,n)=>{var i=n(6800),r=n(6532);i("toPrimitive"),r()},3680:(t,e,n)=>{var i=n(5005),r=n(6800),o=n(8003);r("toStringTag"),o(i("Symbol"),"Symbol")},4747:(t,e,n)=>{var i=n(7854),r=n(8324),o=n(8509),s=n(8533),a=n(8880),l=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in r)r[c]&&l(i[c]&&i[c].prototype);l(o)},3948:(t,e,n)=>{var i=n(7854),r=n(8324),o=n(8509),s=n(6992),a=n(8880),l=n(5112),c=l("iterator"),u=l("toStringTag"),h=s.values,p=function(t,e){if(t){if(t[c]!==h)try{a(t,c,h)}catch(e){t[c]=h}if(t[u]||a(t,u,e),r[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var f in r)p(i[f]&&i[f].prototype,f);p(o,"DOMTokenList")},5556:(t,e,n)=>{"use strict";n(6992);var i=n(2109),r=n(7854),o=n(6916),s=n(1702),a=n(9781),l=n(5143),c=n(8052),u=n(9190),h=n(8003),p=n(3061),f=n(9909),d=n(5787),g=n(614),m=n(2597),y=n(9974),v=n(648),_=n(9670),x=n(111),b=n(1340),w=n(30),E=n(9114),S=n(4121),C=n(1246),I=n(8053),M=n(5112),L=n(4362),T=M("iterator"),P="URLSearchParams",O=P+"Iterator",R=f.set,A=f.getterFor(P),k=f.getterFor(O),N=Object.getOwnPropertyDescriptor,D=function(t){if(!a)return r[t];var e=N(r,t);return e&&e.value},F=D("fetch"),j=D("Request"),B=D("Headers"),G=j&&j.prototype,z=B&&B.prototype,U=r.RegExp,q=r.TypeError,X=r.decodeURIComponent,V=r.encodeURIComponent,Y=s("".charAt),H=s([].join),W=s([].push),Z=s("".replace),$=s([].shift),K=s([].splice),J=s("".split),Q=s("".slice),tt=/\+/g,et=Array(4),nt=function(t){return et[t-1]||(et[t-1]=U("((?:%[\\da-f]{2}){"+t+"})","gi"))},it=function(t){try{return X(t)}catch(e){return t}},rt=function(t){var e=Z(t,tt," "),n=4;try{return X(e)}catch(t){for(;n;)e=Z(e,nt(n--),it);return e}},ot=/[!'()~]|%20/g,st={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},at=function(t){return st[t]},lt=function(t){return Z(V(t),ot,at)},ct=p((function(t,e){R(this,{type:O,iterator:S(A(t).entries),kind:e})}),"Iterator",(function(){var t=k(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n}),!0),ut=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===Y(t,0)?Q(t,1):t:b(t)))};ut.prototype={type:P,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,i,r,s,a,l,c=C(t);if(c)for(n=(e=S(t,c)).next;!(i=o(n,e)).done;){if(s=(r=S(_(i.value))).next,(a=o(s,r)).done||(l=o(s,r)).done||!o(s,r).done)throw q("Expected sequence with length 2");W(this.entries,{key:b(a.value),value:b(l.value)})}else for(var u in t)m(t,u)&&W(this.entries,{key:u,value:b(t[u])})},parseQuery:function(t){if(t)for(var e,n,i=J(t,"&"),r=0;r<i.length;)(e=i[r++]).length&&(n=J(e,"="),W(this.entries,{key:rt($(n)),value:rt(H(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],i=0;i<e.length;)t=e[i++],W(n,lt(t.key)+"="+lt(t.value));return H(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ht=function(){d(this,pt),R(this,new ut(arguments.length>0?arguments[0]:void 0))},pt=ht.prototype;if(u(pt,{append:function(t,e){I(arguments.length,2);var n=A(this);W(n.entries,{key:b(t),value:b(e)}),n.updateURL()},delete:function(t){I(arguments.length,1);for(var e=A(this),n=e.entries,i=b(t),r=0;r<n.length;)n[r].key===i?K(n,r,1):r++;e.updateURL()},get:function(t){I(arguments.length,1);for(var e=A(this).entries,n=b(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){I(arguments.length,1);for(var e=A(this).entries,n=b(t),i=[],r=0;r<e.length;r++)e[r].key===n&&W(i,e[r].value);return i},has:function(t){I(arguments.length,1);for(var e=A(this).entries,n=b(t),i=0;i<e.length;)if(e[i++].key===n)return!0;return!1},set:function(t,e){I(arguments.length,1);for(var n,i=A(this),r=i.entries,o=!1,s=b(t),a=b(e),l=0;l<r.length;l++)(n=r[l]).key===s&&(o?K(r,l--,1):(o=!0,n.value=a));o||W(r,{key:s,value:a}),i.updateURL()},sort:function(){var t=A(this);L(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=A(this).entries,i=y(t,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new ct(this,"keys")},values:function(){return new ct(this,"values")},entries:function(){return new ct(this,"entries")}},{enumerable:!0}),c(pt,T,pt.entries,{name:"entries"}),c(pt,"toString",(function(){return A(this).serialize()}),{enumerable:!0}),h(ht,P),i({global:!0,constructor:!0,forced:!l},{URLSearchParams:ht}),!l&&g(B)){var ft=s(z.has),dt=s(z.set),gt=function(t){if(x(t)){var e,n=t.body;if(v(n)===P)return e=t.headers?new B(t.headers):new B,ft(e,"content-type")||dt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(t,{body:E(0,b(n)),headers:E(0,e)})}return t};if(g(F)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return F(t,arguments.length>1?gt(arguments[1]):{})}}),g(j)){var mt=function(t){return d(this,G),new j(t,arguments.length>1?gt(arguments[1]):{})};G.constructor=mt,mt.prototype=G,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:mt})}}t.exports={URLSearchParams:ht,getState:A}},1637:(t,e,n)=>{n(5556)},8789:(t,e,n)=>{"use strict";n(8783);var i,r=n(2109),o=n(9781),s=n(5143),a=n(7854),l=n(9974),c=n(1702),u=n(8052),h=n(7045),p=n(5787),f=n(2597),d=n(1574),g=n(8457),m=n(1589),y=n(8710).codeAt,v=n(3197),_=n(1340),x=n(8003),b=n(8053),w=n(5556),E=n(9909),S=E.set,C=E.getterFor("URL"),I=w.URLSearchParams,M=w.getState,L=a.URL,T=a.TypeError,P=a.parseInt,O=Math.floor,R=Math.pow,A=c("".charAt),k=c(/./.exec),N=c([].join),D=c(1..toString),F=c([].pop),j=c([].push),B=c("".replace),G=c([].shift),z=c("".split),U=c("".slice),q=c("".toLowerCase),X=c([].unshift),V="Invalid scheme",Y="Invalid host",H="Invalid port",W=/[a-z]/i,Z=/[\d+-.a-z]/i,$=/\d/,K=/^0x/i,J=/^[0-7]+$/,Q=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,it=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,rt=/[\t\n\r]/g,ot=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)X(e,t%256),t=O(t/256);return N(e,".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e}(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=D(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},st={},at=d({},st,{" ":1,'"':1,"<":1,">":1,"`":1}),lt=d({},at,{"#":1,"?":1,"{":1,"}":1}),ct=d({},lt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ut=function(t,e){var n=y(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},ht={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pt=function(t,e){var n;return 2==t.length&&k(W,A(t,0))&&(":"==(n=A(t,1))||!e&&"|"==n)},ft=function(t){var e;return t.length>1&&pt(U(t,0,2))&&(2==t.length||"/"===(e=A(t,2))||"\\"===e||"?"===e||"#"===e)},dt=function(t){return"."===t||"%2e"===q(t)},gt={},mt={},yt={},vt={},_t={},xt={},bt={},wt={},Et={},St={},Ct={},It={},Mt={},Lt={},Tt={},Pt={},Ot={},Rt={},At={},kt={},Nt={},Dt=function(t,e,n){var i,r,o,s=_(t);if(e){if(r=this.parse(s))throw T(r);this.searchParams=null}else{if(void 0!==n&&(i=new Dt(n,!0)),r=this.parse(s,null,i))throw T(r);(o=M(new I)).bindURL(this),this.searchParams=o}};Dt.prototype={type:"URL",parse:function(t,e,n){var r,o,s,a,l,c=this,u=e||gt,h=0,p="",d=!1,y=!1,v=!1;for(t=_(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=B(t,it,"")),t=B(t,rt,""),r=g(t);h<=r.length;){switch(o=r[h],u){case gt:if(!o||!k(W,o)){if(e)return V;u=yt;continue}p+=q(o),u=mt;break;case mt:if(o&&(k(Z,o)||"+"==o||"-"==o||"."==o))p+=q(o);else{if(":"!=o){if(e)return V;p="",u=yt,h=0;continue}if(e&&(c.isSpecial()!=f(ht,p)||"file"==p&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=p,e)return void(c.isSpecial()&&ht[c.scheme]==c.port&&(c.port=null));p="","file"==c.scheme?u=Lt:c.isSpecial()&&n&&n.scheme==c.scheme?u=vt:c.isSpecial()?u=wt:"/"==r[h+1]?(u=_t,h++):(c.cannotBeABaseURL=!0,j(c.path,""),u=At)}break;case yt:if(!n||n.cannotBeABaseURL&&"#"!=o)return V;if(n.cannotBeABaseURL&&"#"==o){c.scheme=n.scheme,c.path=m(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=Nt;break}u="file"==n.scheme?Lt:xt;continue;case vt:if("/"!=o||"/"!=r[h+1]){u=xt;continue}u=Et,h++;break;case _t:if("/"==o){u=St;break}u=Rt;continue;case xt:if(c.scheme=n.scheme,o==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query;else if("/"==o||"\\"==o&&c.isSpecial())u=bt;else if("?"==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query="",u=kt;else{if("#"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.path.length--,u=Rt;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query,c.fragment="",u=Nt}break;case bt:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Rt;continue}u=St}else u=Et;break;case wt:if(u=Et,"/"!=o||"/"!=A(p,h+1))continue;h++;break;case Et:if("/"!=o&&"\\"!=o){u=St;continue}break;case St:if("@"==o){d&&(p="%40"+p),d=!0,s=g(p);for(var x=0;x<s.length;x++){var b=s[x];if(":"!=b||v){var w=ut(b,ct);v?c.password+=w:c.username+=w}else v=!0}p=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(d&&""==p)return"Invalid authority";h-=g(p).length+1,p="",u=Ct}else p+=o;break;case Ct:case It:if(e&&"file"==c.scheme){u=Pt;continue}if(":"!=o||y){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==p)return Y;if(e&&""==p&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(p))return a;if(p="",u=Ot,e)return;continue}"["==o?y=!0:"]"==o&&(y=!1),p+=o}else{if(""==p)return Y;if(a=c.parseHost(p))return a;if(p="",u=Mt,e==It)return}break;case Mt:if(!k($,o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||e){if(""!=p){var E=P(p,10);if(E>65535)return H;c.port=c.isSpecial()&&E===ht[c.scheme]?null:E,p=""}if(e)return;u=Ot;continue}return H}p+=o;break;case Lt:if(c.scheme="file","/"==o||"\\"==o)u=Tt;else{if(!n||"file"!=n.scheme){u=Rt;continue}if(o==i)c.host=n.host,c.path=m(n.path),c.query=n.query;else if("?"==o)c.host=n.host,c.path=m(n.path),c.query="",u=kt;else{if("#"!=o){ft(N(m(r,h),""))||(c.host=n.host,c.path=m(n.path),c.shortenPath()),u=Rt;continue}c.host=n.host,c.path=m(n.path),c.query=n.query,c.fragment="",u=Nt}}break;case Tt:if("/"==o||"\\"==o){u=Pt;break}n&&"file"==n.scheme&&!ft(N(m(r,h),""))&&(pt(n.path[0],!0)?j(c.path,n.path[0]):c.host=n.host),u=Rt;continue;case Pt:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!e&&pt(p))u=Rt;else if(""==p){if(c.host="",e)return;u=Ot}else{if(a=c.parseHost(p))return a;if("localhost"==c.host&&(c.host=""),e)return;p="",u=Ot}continue}p+=o;break;case Ot:if(c.isSpecial()){if(u=Rt,"/"!=o&&"\\"!=o)continue}else if(e||"?"!=o)if(e||"#"!=o){if(o!=i&&(u=Rt,"/"!=o))continue}else c.fragment="",u=Nt;else c.query="",u=kt;break;case Rt:if(o==i||"/"==o||"\\"==o&&c.isSpecial()||!e&&("?"==o||"#"==o)){if(".."===(l=q(l=p))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||j(c.path,"")):dt(p)?"/"==o||"\\"==o&&c.isSpecial()||j(c.path,""):("file"==c.scheme&&!c.path.length&&pt(p)&&(c.host&&(c.host=""),p=A(p,0)+":"),j(c.path,p)),p="","file"==c.scheme&&(o==i||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)G(c.path);"?"==o?(c.query="",u=kt):"#"==o&&(c.fragment="",u=Nt)}else p+=ut(o,lt);break;case At:"?"==o?(c.query="",u=kt):"#"==o?(c.fragment="",u=Nt):o!=i&&(c.path[0]+=ut(o,st));break;case kt:e||"#"!=o?o!=i&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":ut(o,st)):(c.fragment="",u=Nt);break;case Nt:o!=i&&(c.fragment+=ut(o,at))}h++}},parseHost:function(t){var e,n,i;if("["==A(t,0)){if("]"!=A(t,t.length-1))return Y;if(e=function(t){var e,n,i,r,o,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,p=function(){return A(t,h)};if(":"==p()){if(":"!=A(t,1))return;h+=2,u=++c}for(;p();){if(8==c)return;if(":"!=p()){for(e=n=0;n<4&&k(tt,p());)e=16*e+P(p(),16),h++,n++;if("."==p()){if(0==n)return;if(h-=n,c>6)return;for(i=0;p();){if(r=null,i>0){if(!("."==p()&&i<4))return;h++}if(!k($,p()))return;for(;k($,p());){if(o=P(p(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}l[c]=256*l[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==p()){if(h++,!p())return}else if(p())return;l[c++]=e}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!=c)return;return l}(U(t,1,-1)),!e)return Y;this.host=e}else if(this.isSpecial()){if(t=v(t),k(et,t))return Y;if(e=function(t){var e,n,i,r,o,s,a,l=z(t,".");if(l.length&&""==l[l.length-1]&&l.length--,(e=l.length)>4)return t;for(n=[],i=0;i<e;i++){if(""==(r=l[i]))return t;if(o=10,r.length>1&&"0"==A(r,0)&&(o=k(K,r)?16:8,r=U(r,8==o?1:2)),""===r)s=0;else{if(!k(10==o?Q:8==o?J:tt,r))return t;s=P(r,o)}j(n,s)}for(i=0;i<e;i++)if(s=n[i],i==e-1){if(s>=R(256,5-e))return null}else if(s>255)return null;for(a=F(n),i=0;i<n.length;i++)a+=n[i]*R(256,3-i);return a}(t),null===e)return Y;this.host=e}else{if(k(nt,t))return Y;for(e="",n=g(t),i=0;i<n.length;i++)e+=ut(n[i],st);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return f(ht,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&pt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,s=t.path,a=t.query,l=t.fragment,c=e+":";return null!==r?(c+="//",t.includesCredentials()&&(c+=n+(i?":"+i:"")+"@"),c+=ot(r),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+N(s,"/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},setHref:function(t){var e=this.parse(t);if(e)throw T(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Ft(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+ot(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(_(t)+":",gt)},getUsername:function(){return this.username},setUsername:function(t){var e=g(_(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=ut(e[n],ct)}},getPassword:function(){return this.password},setPassword:function(t){var e=g(_(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=ut(e[n],ct)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?ot(t):ot(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Ct)},getHostname:function(){var t=this.host;return null===t?"":ot(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,It)},getPort:function(){var t=this.port;return null===t?"":_(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=_(t))?this.port=null:this.parse(t,Mt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+N(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ot))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=_(t))?this.query=null:("?"==A(t,0)&&(t=U(t,1)),this.query="",this.parse(t,kt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=_(t))?("#"==A(t,0)&&(t=U(t,1)),this.fragment="",this.parse(t,Nt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ft=function(t){var e=p(this,jt),n=b(arguments.length,1)>1?arguments[1]:void 0,i=S(e,new Dt(t,!1,n));o||(e.href=i.serialize(),e.origin=i.getOrigin(),e.protocol=i.getProtocol(),e.username=i.getUsername(),e.password=i.getPassword(),e.host=i.getHost(),e.hostname=i.getHostname(),e.port=i.getPort(),e.pathname=i.getPathname(),e.search=i.getSearch(),e.searchParams=i.getSearchParams(),e.hash=i.getHash())},jt=Ft.prototype,Bt=function(t,e){return{get:function(){return C(this)[t]()},set:e&&function(t){return C(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&(h(jt,"href",Bt("serialize","setHref")),h(jt,"origin",Bt("getOrigin")),h(jt,"protocol",Bt("getProtocol","setProtocol")),h(jt,"username",Bt("getUsername","setUsername")),h(jt,"password",Bt("getPassword","setPassword")),h(jt,"host",Bt("getHost","setHost")),h(jt,"hostname",Bt("getHostname","setHostname")),h(jt,"port",Bt("getPort","setPort")),h(jt,"pathname",Bt("getPathname","setPathname")),h(jt,"search",Bt("getSearch","setSearch")),h(jt,"searchParams",Bt("getSearchParams")),h(jt,"hash",Bt("getHash","setHash"))),u(jt,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),u(jt,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),L){var Gt=L.createObjectURL,zt=L.revokeObjectURL;Gt&&u(Ft,"createObjectURL",l(Gt,L)),zt&&u(Ft,"revokeObjectURL",l(zt,L))}x(Ft,"URL"),r({global:!0,constructor:!0,forced:!s,sham:!o},{URL:Ft})},285:(t,e,n)=>{n(8789)},251:(t,e,n)=>{var i=n(2215),r=n(2584),o=n(609),s=n(8420),a=n(2847),l=n(8923),c=Date.prototype.getTime;function u(t,e,n){var f=n||{};return!!(f.strict?o(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?f.strict?o(t,e):t==e:function(t,e,n){var o,f;if(typeof t!=typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(r(t)!==r(e))return!1;var d=s(t),g=s(e);if(d!==g)return!1;if(d||g)return t.source===e.source&&a(t)===a(e);if(l(t)&&l(e))return c.call(t)===c.call(e);var m=p(t),y=p(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!=typeof e)return!1;try{var v=i(t),_=i(e)}catch(t){return!1}if(v.length!==_.length)return!1;for(v.sort(),_.sort(),o=v.length-1;o>=0;o--)if(v[o]!=_[o])return!1;for(o=v.length-1;o>=0;o--)if(!u(t[f=v[o]],e[f],n))return!1;return!0}(t,e,f))}function h(t){return null==t}function p(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=u},4289:(t,e,n)=>{"use strict";var i=n(2215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,l=n(1044)(),c=a&&l,u=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===o.call(r)&&i())&&(c?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)u(t,o[a],e[o[a]],n[o[a]])};h.supportsDescriptors=!!c,t.exports=h},8317:t=>{function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)},3781:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(u),a=0,l=0;l<u;l++)s[l]=0;for(var c=0;c<n;c++){var u=this.dataset[c].length;if(o===this.assignments[c]){for(l=0;l<u;l++)s[l]+=this.dataset[c][l];a++}}if(a>0){for(l=0;l<u;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)},3763:(t,e,n)=>{if(t.exports)var i=n(7985);function r(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}r.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,l),this._expandCluster(a,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},r.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},r.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=r)},7985:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},2606:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(8317),KMEANS:n(3781),OPTICS:n(3763),PriorityQueue:n(7985)})},9187:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,a,l,h,p,d,g=e&&e.length,m=g?e[0]*i:t.length,y=n(t,0,m,i,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(t,e,i,r){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)i=u(l[o],i);return i}(t,e,y,i)),t.length>80*i){o=a=t[0],s=l=t[1];for(var _=i;_<m;_+=i)(h=t[_])<o&&(o=h),(p=t[_+1])<s&&(s=p),h>a&&(a=h),p>l&&(l=p);d=0!==(d=Math.max(a-o,l-s))?32767/d:0}return r(y,v,i,o,s,d,0),v}function n(t,e,n,i,r){var o,s;if(r===I(t,e,n,i)>0)for(o=e;o<n;o+=i)s=E(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=E(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(S(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(S(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,c,u,h,f){if(t){!f&&h&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=p(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(t,c,u,h);for(var d,g,m=t;t.prev!==t.next;)if(d=t.prev,g=t.next,h?s(t,c,u,h):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),S(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?r(t=a(i(t),e,n),e,n,c,u,h,2):2===f&&l(t,e,n,c,u,h):r(i(t),e,n,c,u,h,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(m(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,p=r>o?r>s?r:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=i.next;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=h&&g.y<=f&&d(r,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next;if(m(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,h=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,y=u<h?u<f?u:f:h<f?h:f,v=a>l?a>c?a:c:l>c?l:c,_=u>h?u>f?u:f:h>f?h:f,x=p(g,y,e,n,i),b=p(v,_,e,n,i),w=t.prevZ,E=t.nextZ;w&&w.z>=x&&E&&E.z<=b;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=_&&w!==r&&w!==s&&d(a,u,l,h,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=g&&E.x<=v&&E.y>=y&&E.y<=_&&E!==r&&E!==s&&d(a,u,l,h,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=x;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=_&&w!==r&&w!==s&&d(a,u,l,h,c,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=g&&E.x<=v&&E.y>=y&&E.y<=_&&E!==r&&E!==s&&d(a,u,l,h,c,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function a(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!y(o,s)&&v(o,r,r.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),S(r),S(r.next),r=t=s),r=r.next}while(r!==t);return i(r)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=w(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,e,n,o,s,a,0),void r(u,e,n,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,c=n,u=n.x,p=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&d(o<p?r:s,o,u,p,o<p?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),b(i,t)&&(l<f||l===f&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,f=l)),i=i.next}while(i!==c);return n}(t,e);if(!n)return e;var r=w(n,t);return i(r,r.next),i(n,n.next)}function h(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function p(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,i){var r=x(m(t,e,n)),o=x(m(t,e,i)),s=x(m(n,i,t)),a=x(m(n,i,e));return r!==o&&s!==a||(!(0!==r||!_(t,n,e))||(!(0!==o||!_(t,i,e))||(!(0!==s||!_(n,t,i))||!(0!==a||!_(n,e,i)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function w(t,e){var n=new C(t.i,t.x,t.y),i=new C(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(t,e,n,i){var r=new C(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(I(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(I(t,c,u,n))}var h=0;for(a=0;a<i.length;a+=3){var p=i[a]*n,f=i[a+1]*n,d=i[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},7648:t=>{"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var i=this;if("function"!=typeof i||"[object Function]"!==n.call(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var r,o=e.call(arguments,1),s=Math.max(0,i.length-o.length),a=[],l=0;l<s;l++)a.push("$"+l);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var n=i.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return i.apply(t,o.concat(e.call(arguments)))})),i.prototype){var c=function(){};c.prototype=i.prototype,r.prototype=new c,c.prototype=null}return r}},8612:(t,e,n)=>{"use strict";var i=n(7648);t.exports=Function.prototype.bind||i},5972:t=>{"use strict";var e=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(t){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var i=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof i&&""!==function(){}.bind().name},t.exports=e},9657:(t,e,n)=>{var i=n(251),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(t,e,n,i){if(!s(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},1787:(t,e,n)=>{var i=n(4056),r=n(9500),o=n(9181),s=n(5432).Z,a=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function c(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return l(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},9500:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function u(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=u,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(h(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},9181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9500);function r(t,e,n){if(null!==t)for(var i,o,s,a,l,c,u,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,v=0;v<y;v++){l=(h=!!(u=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<l;_++){var x=0,b=0;if(null!==(a=h?u.geometries[_]:u)){c=a.coordinates;var w=a.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,f,v,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],f,v,x,b))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-p;o++){if(!1===e(c[i][o],f,v,x,b))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(b=0,o=0;o<c[i].length;o++){for(s=0;s<c[i][o].length-p;s++){if(!1===e(c[i][o][s],f,v,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,l,c,u,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},u=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}function l(t,e){a(t,(function(t,n,r,o,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var u={type:a,coordinates:t.coordinates[c]};if(!1===e(i.feature(u,r),n,c))return!1}}))}function c(t,e){l(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,c=0,u=0,h=0;return!1!==r(t,(function(r,a,p,f,d){if(void 0===l||n>c||f>u||d>h)return l=r,c=n,u=f,h=d,void(s=0);var g=i.lineString([l,r],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,l=r}))&&void 0}}}))}function u(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(i.lineString(s[a],t.properties),n,r,a))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return i.point(c,l,e);case"MultiPoint":return o<0&&(o=c.length+o),i.point(c[o],l,e);case"LineString":return a<0&&(a=c.length+a),i.point(c[a],l,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a),i.point(c[s][a],l,e);case"MultiLineString":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),i.point(c[o][a],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),a<0&&(a=c[o][s].length-a),i.point(c[o][s][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),i.lineString([c[a],c[a+1]],l,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a-1),i.lineString([c[s][a],c[s][a+1]],l,e);case"MultiLineString":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a-1),i.lineString([c[o][a],c[o][a+1]],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),a<0&&(a=c[o][s].length-a-1),i.lineString([c[o][s][a],c[o][s][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var i=n;return l(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.lineEach=u,e.lineReduce=function(t,e,n){var i=n;return u(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=c,e.segmentReduce=function(t,e,n){var i=n,r=!1;return c(t,(function(t,o,s,a,l){i=!1===r&&void 0===n?t:e(i,t,o,s,a,l),r=!0})),i}},4056:function(t){t.exports=function(){"use strict";function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/a+h)),Math.min(o,Math.floor(i+(a-l)*u/a+h)),s)}var p=n[i],f=r,d=o;for(e(n,r,i),s(n[o],p)>0&&e(n,r,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[r],p)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,s=this.data,a=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),s.leaf){var u=r(t,s.children,e);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(l.push(s),c.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries;if(s<=a)return o(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=d([])).leaf=!1,r.height=i;var l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));g(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);g(t,u,h,l,this.compareMinY);for(var p=u;p<=h;p+=l){var f=Math.min(p+l-1,h);r.children.push(this._build(t,p,f,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],c=u(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,r=c<r?c:r,s=l):h===o&&c<r&&(r=c,s=l)}e=s||e.children[0]}var p,f;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var s=this._chooseSplitIndex(n,r,i),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,l,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),m=s(t,d,n,this.toBBox),y=(r=g,o=m,a=void 0,l=void 0,c=void 0,h=void 0,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-a)*Math.max(0,h-l)),v=u(g)+u(m);y<p?(p=y,i=d,f=v<f?v:f):y===p&&v<f&&(f=v,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,n-e,n,r),c=h(o)+h(l),u=e;u<n-e;u++){var p=t.children[u];a(o,t.leaf?r(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?r(d):d),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},210:(t,e,n)=>{"use strict";var i,r=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new s},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,h=n(1405)(),p=Object.getPrototypeOf||function(t){return t.__proto__},f={},d="undefined"==typeof Uint8Array?i:p(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":h?p([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?p(p([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?p((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?p((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?p(""[Symbol.iterator]()):i,"%Symbol%":h?Symbol:i,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},m=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(n=p(r.prototype))}return g[e]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(8612),_=n(7642),x=v.call(Function.call,Array.prototype.concat),b=v.call(Function.apply,Array.prototype.splice),w=v.call(Function.call,String.prototype.replace),E=v.call(Function.call,String.prototype.slice),S=v.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,M=function(t,e){var n,i=t;if(_(y,i)&&(i="%"+(n=y[i])[0]+"%"),_(g,i)){var o=g[i];if(o===f&&(o=m(i)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,t))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return w(t,C,(function(t,e,n,r){i[i.length]=n?w(r,I,"$1"):e||t})),i}(t),i=n.length>0?n[0]:"",o=M("%"+i+"%",e),a=o.name,c=o.value,u=!1,h=o.alias;h&&(i=h[0],b(n,x([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var d=n[p],m=E(d,0,1),y=E(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new r("property names with quotes must have matching quotes");if("constructor"!==d&&f||(u=!0),_(g,a="%"+(i+="."+d)+"%"))c=g[a];else if(null!=c){if(!(d in c)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&p+1>=n.length){var v=l(c,d);c=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[d]}else f=_(c,d),c=c[d];f&&!u&&(g[a]=c)}}return c}},1044:(t,e,n)=>{"use strict";var i=n(210)("%Object.defineProperty%",!0),r=function(){if(i)try{return i({},"a",{value:1}),!0}catch(t){return!1}return!1};r.hasArrayLengthDefineBug=function(){if(!r())return null;try{return 1!==i([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},1405:(t,e,n)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,r=n(5419);t.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&r())))}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},6410:(t,e,n)=>{"use strict";var i=n(5419);t.exports=function(){return i()&&!!Symbol.toStringTag}},7642:(t,e,n)=>{"use strict";var i=n(8612);t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},2584:t=>{"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,n=Object.prototype.toString,i=function(t){return!(e&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===n.call(t)},r=function(t){return!!i(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==n.call(t)&&"[object Function]"===n.call(t.callee)},o=function(){return i(arguments)}();i.isLegacyArguments=r,t.exports=o?i:r},8923:t=>{"use strict";var e=Date.prototype.getDay,n=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return e.call(t),!0}catch(t){return!1}}(t):"[object Date]"===n.call(t))}},8420:(t,e,n)=>{"use strict";var i,r,o,s,a=n(1924),l=n(6410)();if(l){i=a("Object.prototype.hasOwnProperty"),r=a("RegExp.prototype.exec"),o={};var c=function(){throw o};s={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=c)}var u=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&i(e,"value")))return!1;try{r(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===u(t)}},2846:t=>{t.exports=/<%=([\s\S]+?)%>/g},6816:(t,e,n)=>{t=n.nmd(t);var i=n(2846),r=n(8502),o=1/0,s=9007199254740991,a="[object Arguments]",l="[object AsyncFunction]",c="[object DOMException]",u="[object Error]",h="[object Function]",p="[object GeneratorFunction]",f="[object Null]",d="[object Object]",g="[object Proxy]",m="[object Symbol]",y="[object Undefined]",v=/\b__p \+= '';/g,_=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,b=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,w=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,S=/($^)/,C=/['\n\r\u2028\u2029\\]/g,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[a]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I[u]=I[h]=I["[object Map]"]=I["[object Number]"]=I[d]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var M={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},L="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,T="object"==typeof self&&self&&self.Object===Object&&self,P=L||T||Function("return this")(),O=e&&!e.nodeType&&e,R=O&&t&&!t.nodeType&&t,A=R&&R.exports===O,k=A&&L.process,N=function(){try{var t=R&&R.require&&R.require("util").types;return t||k&&k.binding&&k.binding("util")}catch(t){}}(),D=N&&N.isTypedArray;function F(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function j(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function B(t){return"\\"+M[t]}function G(t,e){return function(n){return t(e(n))}}var z,U=Function.prototype,q=Object.prototype,X=P["__core-js_shared__"],V=U.toString,Y=q.hasOwnProperty,H=(z=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",W=q.toString,Z=V.call(Object),$=RegExp("^"+V.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=A?P.Buffer:void 0,J=P.Symbol,Q=G(Object.getPrototypeOf,Object),tt=q.propertyIsEnumerable,et=J?J.toStringTag:void 0,nt=function(){try{var t=function(t){if(!kt(t)||function(t){return!!H&&H in t}(t))return!1;var e=Rt(t)?$:w;return e.test(function(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(e=function(t,e){return null==t?void 0:t[e]}(Object,"defineProperty"))?e:void 0;return t({},"",{}),t}catch(t){}var e}(),it=K?K.isBuffer:void 0,rt=G(Object.keys,Object),ot=Math.max,st=Date.now,at=J?J.prototype:void 0,lt=at?at.toString:void 0;function ct(t,e){var n=Lt(t),i=!n&&Mt(t),r=!n&&!i&&Pt(t),o=!n&&!i&&!r&&Dt(t),s=n||i||r||o,a=s?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!Y.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_t(c,l))||a.push(c);return a}function ut(t,e,n){var i=t[e];Y.call(t,e)&&It(i,n)&&(void 0!==n||e in t)||ht(t,e,n)}function ht(t,e,n){"__proto__"==e&&nt?nt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function pt(t){return null==t?void 0===t?y:f:et&&et in Object(t)?function(t){var e=Y.call(t,et),n=t[et];try{t[et]=void 0;var i=!0}catch(t){}var r=W.call(t);i&&(e?t[et]=n:delete t[et]);return r}(t):function(t){return W.call(t)}(t)}function ft(t){return Nt(t)&&pt(t)==a}function dt(t){if(!kt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=bt(t),n=[];for(var i in t)("constructor"!=i||!e&&Y.call(t,i))&&n.push(i);return n}function gt(t,e){return Ct(function(t,e,n){return e=ot(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=ot(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(s),F(t,this,a)}}(t,e,zt),t+"")}var mt=nt?function(t,e){return nt(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:zt;function yt(t){if("string"==typeof t)return t;if(Lt(t))return j(t,yt)+"";if(function(t){return"symbol"==typeof t||Nt(t)&&pt(t)==m}(t))return lt?lt.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}function vt(t,e,n,i){return void 0===t||It(t,q[n])&&!Y.call(i,n)?e:t}function _t(t,e){var n=typeof t;return!!(e=null==e?s:e)&&("number"==n||"symbol"!=n&&E.test(t))&&t>-1&&t%1==0&&t<e}function xt(t,e,n){if(!kt(n))return!1;var i=typeof e;return!!("number"==i?Tt(n)&&_t(e,n.length):"string"==i&&e in n)&&It(n[e],t)}function bt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||q)}var wt,Et,St,Ct=(wt=mt,Et=0,St=0,function(){var t=st(),e=16-(t-St);if(St=t,e>0){if(++Et>=800)return arguments[0]}else Et=0;return wt.apply(void 0,arguments)});function It(t,e){return t===e||t!=t&&e!=e}var Mt=ft(function(){return arguments}())?ft:function(t){return Nt(t)&&Y.call(t,"callee")&&!tt.call(t,"callee")},Lt=Array.isArray;function Tt(t){return null!=t&&At(t.length)&&!Rt(t)}var Pt=it||function(){return!1};function Ot(t){if(!Nt(t))return!1;var e=pt(t);return e==u||e==c||"string"==typeof t.message&&"string"==typeof t.name&&!function(t){if(!Nt(t)||pt(t)!=d)return!1;var e=Q(t);if(null===e)return!0;var n=Y.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&V.call(n)==Z}(t)}function Rt(t){if(!kt(t))return!1;var e=pt(t);return e==h||e==p||e==l||e==g}function At(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function kt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Nt(t){return null!=t&&"object"==typeof t}var Dt=D?function(t){return function(e){return t(e)}}(D):function(t){return Nt(t)&&At(t.length)&&!!I[pt(t)]};var Ft,jt=(Ft=function(t,e,n,i){!function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?ht(n,a,l):ut(n,a,l)}}(e,function(t){return Tt(t)?ct(t,!0):dt(t)}(e),t,i)},gt((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(r=Ft.length>3&&"function"==typeof r?(i--,r):void 0,o&&xt(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var s=e[n];s&&Ft(t,s,n,r)}return t})));function Bt(t){return Tt(t)?ct(t):function(t){if(!bt(t))return rt(t);var e=[];for(var n in Object(t))Y.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var Gt=gt((function(t,e){try{return F(t,void 0,e)}catch(t){return Ot(t)?t:new Error(t)}}));function zt(t){return t}t.exports=function(t,e,n){var o,s=r.imports._.templateSettings||r;n&&xt(t,e,n)&&(e=void 0),t=null==(o=t)?"":yt(o),e=jt({},e,s,vt);var a,l,c,u=jt({},e.imports,s.imports,vt),h=Bt(u),p=(a=u,j(h,(function(t){return a[t]}))),f=0,d=e.interpolate||S,g="__p += '",m=RegExp((e.escape||S).source+"|"+d.source+"|"+(d===i?b:S).source+"|"+(e.evaluate||S).source+"|$","g"),y=Y.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";t.replace(m,(function(e,n,i,r,o,s){return i||(i=r),g+=t.slice(f,s).replace(C,B),n&&(l=!0,g+="' +\n__e("+n+") +\n'"),o&&(c=!0,g+="';\n"+o+";\n__p += '"),i&&(g+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),f=s+e.length,e})),g+="';\n";var w=Y.call(e,"variable")&&e.variable;w||(g="with (obj) {\n"+g+"\n}\n"),g=(c?g.replace(v,""):g).replace(_,"$1").replace(x,"$1;"),g="function("+(w||"obj")+") {\n"+(w?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+g+"return __p\n}";var E=Gt((function(){return Function(h,y+"return "+g).apply(void 0,p)}));if(E.source=g,Ot(E))throw E;return E}},8502:(t,e,n)=>{var i=n(2846),r=1/0,o="[object Null]",s="[object Symbol]",a="[object Undefined]",l=/[&<>"']/g,c=RegExp(l.source),u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,p=u||h||Function("return this")();var f,d=(f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==f?void 0:f[t]}),g=Object.prototype,m=g.hasOwnProperty,y=g.toString,v=p.Symbol,_=v?v.toStringTag:void 0,x=v?v.prototype:void 0,b=x?x.toString:void 0,w={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:i,variable:"",imports:{_:{escape:function(t){return(t=I(t))&&c.test(t)?t.replace(l,d):t}}}};function E(t){return null==t?void 0===t?a:o:_&&_ in Object(t)?function(t){var e=m.call(t,_),n=t[_];try{t[_]=void 0;var i=!0}catch(t){}var r=y.call(t);i&&(e?t[_]=n:delete t[_]);return r}(t):function(t){return y.call(t)}(t)}function S(t){if("string"==typeof t)return t;if(C(t))return function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}(t,S)+"";if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&E(t)==s}(t))return b?b.call(t):"";var e=t+"";return"0"==e&&1/t==-r?"-0":e}var C=Array.isArray;function I(t){return null==t?"":S(t)}t.exports=w},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(e){s=e(o);for(var u=0;u<s.length;u++)i.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},609:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},8987:(t,e,n)=>{"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(1414),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var d=c&&n;if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(i&&t.length>0)for(var m=0;m<t.length;++m)p.push(String(m));else for(var y in t)d&&"prototype"===y||!r.call(t,y)||p.push(String(y));if(l)for(var v=function(t){if("undefined"==typeof window||!f)return h(t);try{return h(t)}catch(t){return!1}}(t),_=0;_<u.length;++_)v&&"constructor"===u[_]||!r.call(t,u[_])||p.push(u[_]);return p}}t.exports=i},2215:(t,e,n)=>{"use strict";var i=Array.prototype.slice,r=n(1414),o=Object.keys,s=o?function(t){return o(t)}:n(8987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},1414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}},4331:function(t){t.exports=function(){"use strict";function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/a+h)),Math.min(o,Math.floor(i+(a-l)*u/a+h)),s)}var p=n[i],f=r,d=o;for(e(n,r,i),s(n[o],p)>0&&e(n,r,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[r],p)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,s=this.data,a=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),s.leaf){var u=r(t,s.children,e);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}o||s.leaf||!p(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(l.push(s),c.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries;if(s<=a)return o(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=d([])).leaf=!1,r.height=i;var l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));g(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);g(t,u,h,l,this.compareMinY);for(var p=u;p<=h;p+=l){var f=Math.min(p+l-1,h);r.children.push(this._build(t,p,f,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],c=u(l),h=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,r=c<r?c:r,s=l):h===o&&c<r&&(r=c,s=l)}e=s||e.children[0]}var p,f;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var s=this._chooseSplitIndex(n,r,i),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,l,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),m=s(t,d,n,this.toBBox),y=(r=g,o=m,a=void 0,l=void 0,c=void 0,h=void 0,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-a)*Math.max(0,h-l)),v=u(g)+u(m);y<p?(p=y,i=d,f=v<f?v:f):y===p&&v<f&&(f=v,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,n-e,n,r),c=h(o)+h(l),u=e;u<n-e;u++){var p=t.children[u];a(o,t.leaf?r(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?r(d):d),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},1895:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=(i-n)/2,l=0,c=a-1;l<a;c=l++){var u=e[n+2*l+0],h=e[n+2*l+1],p=e[n+2*c+0],f=e[n+2*c+1];h>o!=f>o&&r<(p-u)*(o-h)/(f-h)+u&&(s=!s)}return s}},6960:(t,e,n)=>{var i=n(1895),r=n(8139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?r(t,e,n,o):i(t,e,n,o)},t.exports.nested=r,t.exports.flat=i},8139:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=i-n,l=0,c=a-1;l<a;c=l++){var u=e[l+n][0],h=e[l+n][1],p=e[c+n][0],f=e[c+n][1];h>o!=f>o&&r<(p-u)*(o-h)/(f-h)+u&&(s=!s)}return s}},2676:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var r=new i(null,null),o=r,s=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function s(t,e,n,r){var s=new i(t,e);if(null===n)return s.left=s.right=null,s;var a=r(t,(n=o(t,n,r)).key);return a<0?(s.left=n.left,s.right=n,n.left=null):a>=0&&(s.right=n.right,s.left=n,n.right=null),s}function a(t,e,n){var i=null,r=null;if(e){var s=n((e=o(t,e,n)).key,t);0===s?(i=e.left,r=e.right):s<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function l(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}function c(t,e,n,i,r){if(t){i(e+(n?"└── ":"├── ")+r(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&c(t.left,o,!1,i,r),t.right&&c(t.right,o,!0,i,r)}}var u=function(){function t(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,s=o(t,this._root,r),a=r(t,s.key);return 0===a?this._root=s:(a<0?(n.left=s.left,n.right=s,s.left=null):a>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?i=e.right:(i=o(t,e.left,n)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return f(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,r=this._comparator;if(n&&m(t,e,0,i-1,r),null===this._root)this._root=h(t,e,0,i),this._size=i;else{var o=g(this.toList(),p(t,e),r);i=this._size+i,this._root=d({head:o},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return c(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=a(t,this._root,i),o=r.left,c=r.right;i(t,e)<0?c=s(e,n,c,i):o=s(e,n,o,i),this._root=l(o,c,i)},t.prototype.split=function(t){return a(t,this._root,this._comparator)},t}();function h(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],l=e[s],c=new i(a,l);return c.left=h(t,e,n,s),c.right=h(t,e,s+1,r),c}return null}function p(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}function f(t){for(var e=t,n=[],r=!1,o=new i(null,null),s=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}function d(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=d(t,e,r),s=t.head;return s.left=o,t.head=t.head.next,s.right=d(t,r+1,n),s}return null}function g(t,e,n){for(var r=new i(null,null),o=r,s=t,a=e;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function m(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],s=n-1,a=i+1;;){do{s++}while(r(t[s],o)<0);do{a--}while(r(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}m(t,e,n,a,r),m(t,e,a+1,i,r)}}var y=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},v=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var x=_*_,b=function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),E=function(){function e(){t(this,e),this.tree=new u,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===b(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===b(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),e}(),S=new w,C=function(t,e){return t.x*e.y-t.y*e.x},I=function(t,e){return t.x*e.x+t.y*e.y},M=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},o=C(i,r);return b(o,0)},L=function(t){return Math.sqrt(I(t,t))},T=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return C(r,i)/L(r)/L(i)},P=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return I(r,i)/L(r)/L(i)},O=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},R=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},A=function(t,e,n,i){if(0===e.x)return R(n,i,t.x);if(0===i.x)return R(t,e,n.x);if(0===e.y)return O(n,i,t.y);if(0===i.y)return O(t,e,n.y);var r=C(e,i);if(0==r)return null;var o={x:n.x-t.x,y:n.y-t.y},s=C(o,e)/r,a=C(o,i)/r;return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}},k=function(){function e(n,i){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=i}return n(e,null,[{key:"compare",value:function(t,n){var i=e.comparePoints(t.point,n.point);return 0!==i?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:D.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r=i.otherSE;n.set(i,{sine:T(e.point,t.point,r.point),cosine:P(e.point,t.point,r.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),l=a.sine,c=a.cosine;return o>=0&&l>=0?s<c?1:s>c?-1:0:o<0&&l<0?s<c?-1:s>c?1:0:l<o?-1:l>o?1:0}}}]),e}(),N=0,D=function(){function e(n,i,r,o){t(this,e),this.id=++N,this.leftSE=n,n.segment=this,n.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=n,this.rings=r,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(n<i){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>i){if(s<a&&s<c)return-1;if(s>a&&s>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(r>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var m=l-s,y=r-n,v=c-a,_=o-i;if(m>y&&v<_)return 1;if(m<y&&v>_)return-1}return r>o?1:r<o||l<c?-1:l>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;var s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=v(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=y(e,s)&&0===this.comparePoint(s),c=y(n,r)&&0===t.comparePoint(r),u=y(e,a)&&0===this.comparePoint(a),h=y(n,o)&&0===t.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?a:null;if(c)return u&&r.x===a.x&&r.y===a.y?null:r;if(l)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&u)return null;if(h)return o;if(u)return a;var p=A(r,this.vector(),s,t.vector());return null===p?null:y(i,p)?S.round(p.x,p.y):null}},{key:"split",value:function(t){var n=[],i=void 0!==t.events,r=new k(t,!0),o=new k(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new e(r,s,this.rings.slice(),this.windings.slice());return k.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),k.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,i=t;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=e.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,l=i.rings.length;a<l;a++){var c=i.rings[a],u=i.windings[a],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(u)):n.windings[h]+=u}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],l=e.indexOf(s);-1===l?(e.push(s),n.push(a)):n[l]+=a}for(var c=[],u=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var f=e[h],d=f.poly;if(-1===u.indexOf(d))if(f.isExterior)c.push(d);else{-1===u.indexOf(d)&&u.push(d);var g=c.indexOf(f.poly);-1!==g&&c.splice(g,1)}}for(var m=0,y=c.length;m<y;m++){var v=c[m].multiPoly;-1===i.indexOf(v)&&i.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Y.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===Y.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,i){var r,o,s,a=k.comparePoints(t,n);if(a<0)r=t,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=n,o=t,s=-1}return new e(new k(r,!0),new k(o,!1),[i],[s])}}]),e}(),F=function(){function e(n,i,r){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=n.length;a<l;a++){if("number"!=typeof n[a][0]||"number"!=typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=S.round(n[a][0],n[a][1]);c.x===s.x&&c.y===s.y||(this.segments.push(D.fromRing(s,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),s=c)}o.x===s.x&&o.y===s.y||this.segments.push(D.fromRing(s,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),j=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=n.length;r<o;r++){var s=new F(n[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),e}(),B=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=n.length;r<o;r++){var s=new j(n[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),e}(),G=function(){function e(n){t(this,e),this.events=n;for(var i=0,r=n.length;i<r;i++)n[i].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,c=[a],u=a.point,h=[];s=a,a=l,c.push(a),a.point!==u;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var f=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,m=0,y=h.length;m<y;m++)if(h[m].point===a.point){g=m;break}if(null===g){h.push({index:c.length,point:a.point});var v=a.getLeftmostComparator(s);l=p.sort(v)[0].otherSE;break}var _=h.splice(g)[0],x=c.splice(_.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()))}n.push(new e(c))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==M(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===M(s,t,a)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[],p=c;p!=u;p+=l)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];k.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),e}(),z=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),e}(),U=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new z(r));else{var o=r.enclosingRing();o.poly||e.push(new z(o)),o.poly.addInterior(r)}}return e}}]),e}(),q=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.compare;t(this,e),this.queue=n,this.tree=new u(i),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,s=void 0,a=void 0;void 0===s;)null===(r=this.tree.prev(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var l=null;if(s){var c=s.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!s.isAnEndpoint(c)))for(var u=this._splitSafely(s,c),h=0,p=u.length;h<p;h++)n.push(u[h])}var f=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==l||null!==f){var v=null;v=null===l?f:null===f||k.comparePoints(l,f)<=0?l:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(v),x=0,b=_.length;x<b;x++)n.push(_[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),S=0,C=E.length;S<C;S++)n.push(E[S]);if(!a.isAnEndpoint(w))for(var I=this._splitSafely(a,w),M=0,L=I.length;M<L;M++)n.push(I[M])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),e}(),X="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,V="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Y=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){Y.type=t,S.reset();for(var i=[new B(e,!0)],r=0,o=n.length;r<o;r++)i.push(new B(n[r],!1));if(Y.numMultiPolys=i.length,"difference"===Y.type)for(var s=i[0],a=1;a<i.length;)null!==v(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===Y.type)for(var l=0,c=i.length;l<c;l++)for(var h=i[l],p=l+1,f=i.length;p<f;p++)if(null===v(h.bbox,i[p].bbox))return[];for(var d=new u(k.compare),g=0,m=i.length;g<m;g++)for(var y=i[g].getSweepEvents(),_=0,x=y.length;_<x;_++)if(d.insert(y[_]),d.size>X)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new q(d),w=d.size,E=d.pop();E;){var C=E.key;if(d.size===w){var I=C.segment;throw new Error("Unable to pop() ".concat(C.isLeft?"left":"right"," SweepEvent ")+"[".concat(C.point.x,", ").concat(C.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>X)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>V)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=b.process(C),L=0,T=M.length;L<T;L++){var P=M[L];void 0===P.consumedBy&&d.insert(P)}w=d.size,E=d.pop()}S.reset();var O=G.factory(b.segments);return new U(O).getGeom()}}]),e}()),H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Y.run("union",t,n)},W=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Y.run("intersection",t,n)},Z=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Y.run("xor",t,n)},$=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Y.run("difference",t,n)};return{union:H,intersection:W,xor:Z,difference:$}}()},8166:function(t){t.exports=function(){"use strict";function t(t,n,r,o,s){e(t,n,r||0,o||t.length-1,s||i)}function e(t,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);e(t,i,Math.max(r,Math.floor(i-l*u/a+h)),Math.min(o,Math.floor(i+(a-l)*u/a+h)),s)}var p=t[i],f=r,d=o;for(n(t,r,i),s(t[o],p)>0&&n(t,r,o);f<d;){for(n(t,f,d),f++,d--;s(t[f],p)<0;)f++;for(;s(t[d],p)>0;)d--}0===s(t[r],p)?n(t,r,d):n(t,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}function n(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function i(t,e){return t<e?-1:t>e?1:0}return t}()},5510:(t,e,n)=>{"use strict";t.exports=r,t.exports.default=r;var i=n(8166);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!d(t,e))return n;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],d(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],d(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,s,a=this.data,l=this.toBBox(t),c=[],u=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],n=u.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),c.push(a),this._condense(c),this;s||a.leaf||!f(a,l)?i?(n++,a=i.children[n],s=!1):a=null:(c.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var l,c,u,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(m(t,e,n,f,this.compareMinX),l=e;l<=n;l+=f)for(m(t,l,u=Math.min(l+f-1,n),p,this.compareMinY),c=l;c<=u;c+=p)h=Math.min(c+p-1,u),r.children.push(this._build(t,c,h,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,l,c,u,p,f,d;i.push(e),!e.leaf&&i.length-1!==n;){for(u=p=1/0,r=0,o=e.children.length;r<o;r++)l=h(s=e.children[r]),f=t,d=s,(c=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<p?(p=c,u=l<u?l:u,a=s):c===p&&l<u&&(u=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,l,c,u,p,f,d,g,m,y,v;for(c=u=1/0,i=e;i<=n-e;i++)r=a(t,0,i,this.toBBox),o=a(t,i,n,this.toBBox),f=r,d=o,g=void 0,m=void 0,y=void 0,v=void 0,g=Math.max(f.minX,d.minX),m=Math.max(f.minY,d.minY),y=Math.min(f.maxX,d.maxX),v=Math.min(f.maxY,d.maxY),s=Math.max(0,y-g)*Math.max(0,v-m),l=h(r)+h(o),s<c?(c=s,p=i,u=l<u?l:u):s===c&&l<u&&(u=l,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,c=a(t,0,e,s),u=a(t,n-e,n,s),h=p(c)+p(u);for(r=e;r<n-e;r++)o=t.children[r],l(c,t.leaf?s(o):o),h+=p(c);for(r=n-e-1;r>=e;r--)o=t.children[r],l(u,t.leaf?s(o):o),h+=p(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},3697:(t,e,n)=>{"use strict";var i=n(5972).functionsHaveConfigurableNames(),r=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},i&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},2847:(t,e,n)=>{"use strict";var i=n(4289),r=n(5559),o=n(3697),s=n(1721),a=n(2753),l=r(s());i(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},1721:(t,e,n)=>{"use strict";var i=n(3697),r=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(r&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return i}},2753:(t,e,n)=>{"use strict";var i=n(4289).supportsDescriptors,r=n(1721),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!i||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=l(c),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},8639:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function i(t,e,n,i,r){let o,s,a,l,c=e[0],u=i[0],h=0,p=0;u>c==u>-c?(o=c,c=e[++h]):(o=u,u=i[++p]);let f=0;if(h<t&&p<n)for(u>c==u>-c?(a=o-((s=c+o)-c),c=e[++h]):(a=o-((s=u+o)-u),u=i[++p]),o=s,0!==a&&(r[f++]=a);h<t&&p<n;)u>c==u>-c?(a=o-((s=o+c)-(l=s-o))+(c-l),c=e[++h]):(a=o-((s=o+u)-(l=s-o))+(u-l),u=i[++p]),o=s,0!==a&&(r[f++]=a);for(;h<t;)a=o-((s=o+c)-(l=s-o))+(c-l),c=e[++h],o=s,0!==a&&(r[f++]=a);for(;p<n;)a=o-((s=o+u)-(l=s-o))+(u-l),u=i[++p],o=s,0!==a&&(r[f++]=a);return 0===o&&0!==f||(r[f++]=o),f}function r(t){return new Float64Array(t)}const o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,l=r(4),c=r(8),u=r(12),h=r(16),p=r(4);t.orient2d=function(t,r,f,d,g,m){const y=(r-m)*(f-g),v=(t-g)*(d-m),_=y-v;if(0===y||0===v||y>0!=v>0)return _;const x=Math.abs(y+v);return Math.abs(_)>=o*x?_:-function(t,r,o,f,d,g,m){let y,v,_,x,b,w,E,S,C,I,M,L,T,P,O,R,A,k;const N=t-d,D=o-d,F=r-g,j=f-g;b=(O=(S=N-(E=(w=e*N)-(w-N)))*(I=j-(C=(w=e*j)-(w-j)))-((P=N*j)-E*C-S*C-E*I))-(M=O-(A=(S=F-(E=(w=e*F)-(w-F)))*(I=D-(C=(w=e*D)-(w-D)))-((R=F*D)-E*C-S*C-E*I))),l[0]=O-(M+b)+(b-A),b=(T=P-((L=P+M)-(b=L-P))+(M-b))-(M=T-R),l[1]=T-(M+b)+(b-R),b=(k=L+M)-L,l[2]=L-(k-b)+(M-b),l[3]=k;let B=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,l),G=s*m;if(B>=G||-B>=G)return B;if(y=t-(N+(b=t-N))+(b-d),_=o-(D+(b=o-D))+(b-d),v=r-(F+(b=r-F))+(b-g),x=f-(j+(b=f-j))+(b-g),0===y&&0===v&&0===_&&0===x)return B;if(G=a*m+n*Math.abs(B),(B+=N*x+j*y-(F*_+D*v))>=G||-B>=G)return B;b=(O=(S=y-(E=(w=e*y)-(w-y)))*(I=j-(C=(w=e*j)-(w-j)))-((P=y*j)-E*C-S*C-E*I))-(M=O-(A=(S=v-(E=(w=e*v)-(w-v)))*(I=D-(C=(w=e*D)-(w-D)))-((R=v*D)-E*C-S*C-E*I))),p[0]=O-(M+b)+(b-A),b=(T=P-((L=P+M)-(b=L-P))+(M-b))-(M=T-R),p[1]=T-(M+b)+(b-R),b=(k=L+M)-L,p[2]=L-(k-b)+(M-b),p[3]=k;const z=i(4,l,4,p,c);b=(O=(S=N-(E=(w=e*N)-(w-N)))*(I=x-(C=(w=e*x)-(w-x)))-((P=N*x)-E*C-S*C-E*I))-(M=O-(A=(S=F-(E=(w=e*F)-(w-F)))*(I=_-(C=(w=e*_)-(w-_)))-((R=F*_)-E*C-S*C-E*I))),p[0]=O-(M+b)+(b-A),b=(T=P-((L=P+M)-(b=L-P))+(M-b))-(M=T-R),p[1]=T-(M+b)+(b-R),b=(k=L+M)-L,p[2]=L-(k-b)+(M-b),p[3]=k;const U=i(z,c,4,p,u);b=(O=(S=y-(E=(w=e*y)-(w-y)))*(I=x-(C=(w=e*x)-(w-x)))-((P=y*x)-E*C-S*C-E*I))-(M=O-(A=(S=v-(E=(w=e*v)-(w-v)))*(I=_-(C=(w=e*_)-(w-_)))-((R=v*_)-E*C-S*C-E*I))),p[0]=O-(M+b)+(b-A),b=(T=P-((L=P+M)-(b=L-P))+(M-b))-(M=T-R),p[1]=T-(M+b)+(b-R),b=(k=L+M)-L,p[2]=L-(k-b)+(M-b),p[3]=k;const q=i(U,u,4,p,h);return h[q-1]}(t,r,f,d,g,m,x)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},5697:t=>{"use strict";t.exports={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e);return n?i:i*i}}},7035:(t,e,n)=>{"use strict";var i=n(5697),r=i.eudist,o=i.dist;t.exports={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i},kmpp:function(t,e){var n=t[0].length?r:o,i=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)];a&&l.join("_");for(i.push(l);i.length<e;){for(var c=[],u=i.length,h=0,p=[],f=0;f<s;f++){for(var d=1/0,g=0;g<u;g++){var m=n(t[f],i[g]);m<=d&&(d=m)}c[f]=d}for(var y=0;y<s;y++)h+=c[y];for(var v=0;v<s;v++)p[v]={i:v,v:t[v],pr:c[v]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var _=1;_<s;_++)p[_].cs=p[_-1].cs+p[_].pr;for(var x=Math.random(),b=0;b<s-1&&p[b++].cs<x;);i.push(p[b-1].v)}return i}}},1160:(t,e,n)=>{"use strict";var i=n(5697),r=n(7035),o=i.eudist,s=(i.mandist,i.dist,r.kmrand),a=r.kmpp;function l(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}t.exports=function(t,e,n,i){var r=[],c=[],u=[],h=[],p=!1,f=i||1e4,d=t.length,g=t[0].length,m=g>0,y=[];if(n)r="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n;else for(var v={};r.length<e;){var _=Math.floor(Math.random()*d);v[_]||(v[_]=!0,r.push(t[_]))}do{l(e,0,y);for(var x=0;x<d;x++){for(var b=1/0,w=0,E=0;E<e;E++){(h=m?o(t[x],r[E]):Math.abs(t[x]-r[E]))<=b&&(b=h,w=E)}u[x]=w,y[w]++}for(var S=[],C=(c=[],0);C<e;C++)S[C]=m?l(g,0,S[C]):0,c[C]=r[C];if(m){for(var I=0;I<e;I++)r[I]=[];for(var M=0;M<d;M++)for(var L=S[u[M]],T=t[M],P=0;P<g;P++)L[P]+=T[P];p=!0;for(var O=0;O<e;O++){for(var R=r[O],A=S[O],k=c[O],N=y[O],D=0;D<g;D++)R[D]=A[D]/N||0;if(p)for(var F=0;F<g;F++)if(k[F]!=R[F]){p=!1;break}}}else{for(var j=0;j<d;j++){S[u[j]]+=t[j]}for(var B=0;B<e;B++)r[B]=S[B]/y[B]||0;p=!0;for(var G=0;G<e;G++)if(c[G]!=r[G]){p=!1;break}}p=p||--f<=0}while(!p);return{it:1e4-f,k:e,idxs:u,centroids:r}}},6901:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});n(4916),n(5306),n(3210),n(7042),n(2222),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}t=n.hmd(t);var r=function(){};r.prototype.dispatch=function(){return function(e,r){if("function"==typeof define&&n.amdO)define([],r);else if("object"===i(t)&&t.exports)t.exports=r();else{var o=r();e.Affix=o.Affix,e.Alert=o.Alert,e.Button=o.Button,e.Carousel=o.Carousel,e.Collapse=o.Collapse,e.Dropdown=o.Dropdown,e.Modal=o.Modal,e.Popover=o.Popover,e.ScrollSpy=o.ScrollSpy,e.Tab=o.Tab,e.Tooltip=o.Tooltip}}(this,(function(){var t=void 0!==o?o:this||window,e=document,n=e.documentElement,r="body",s=t.BSN={},a=s.supports=[],l="data-toggle",c="data-dismiss",u="data-spy",h="Affix",p="Alert",f="Button",d="Carousel",g="Collapse",m="Dropdown",y="Modal",v="Popover",_="ScrollSpy",x="Tab",b="Tooltip",w="data-backdrop",E="data-keyboard",S="data-target",C="data-title",I="data-original-title",M="data-original-text",L="data-animation",T="data-container",P="data-placement",O="data-delay",R="backdrop",A="keyboard",k="delay",N="content",D="target",F="interval",j="pause",B="animation",G="placement",z="container",U="root",q="offsetTop",X="offsetBottom",V="scrollTop",Y="scrollLeft",H="clientWidth",W="clientHeight",Z="offsetWidth",$="offsetHeight",K="scrollHeight",J="height",Q="aria-expanded",tt="aria-hidden",et="click",nt="hover",it="keydown",rt="keyup",ot="resize",st="scroll",at="show",lt="shown",ct="hide",ut="hidden",ht="slid",pt="change",ft="getAttribute",dt="setAttribute",gt="hasAttribute",mt="createElement",yt="appendChild",vt="innerHTML",_t="getElementsByTagName",xt="preventDefault",bt="getBoundingClientRect",wt="querySelectorAll",Et="indexOf",St="parentNode",Ct="length",It="toLowerCase",Mt="Transition",Lt="Webkit",Tt="style",Pt="push",Ot="tabindex",Rt="contains",At="active",kt="in",Nt="collapsing",Dt="disabled",Ft="left",jt="right",Bt="top",Gt="bottom",zt=!("opacity"in n[Tt]),Ut="onmouseleave"in e?["mouseenter","mouseleave"]:["mouseover","mouseout"],qt=/\b(top|bottom|left|right)+/,Xt=0,Vt="navbar-fixed-top",Yt="navbar-fixed-bottom",Ht=Lt+Mt in n[Tt]||Mt[It]()in n[Tt],Wt=Lt+Mt in n[Tt]?Lt[It]()+Mt+"End":Mt[It]()+"end",Zt=function(t){t.focus?t.focus():t.setActive()},$t=function(t,e){t.classList.add(e)},Kt=function(t,e){t.classList.remove(e)},Jt=function(t,e){return t.classList[Rt](e)},Qt=function(t,e){return function(t){for(var e=[],n=0,i=t[Ct];n<i;n++)e[Pt](t[n]);return e}(t[zt?wt:"getElementsByClassName"](zt?"."+e.replace(/\s(?=[a-z])/g,"."):e))},te=function(t,n){var r=n||e;return"object"===i(t)?t:r.querySelector(t)},ee=function(t,n){var i=n.charAt(0),r=n.substr(1);if("."===i){for(;t&&t!==e;t=t[St])if(null!==te(n,t[St])&&Jt(t,r))return t}else if("#"===i)for(;t&&t!==e;t=t[St])if(t.id===r)return t;return!1},ne=function(t,e,n){t.addEventListener(e,n,!1)},ie=function(t,e,n){t.removeEventListener(e,n,!1)},re=function(t,e,n){ne(t,e,(function i(r){n(r),ie(t,e,i)}))},oe=function(t,e){Ht?re(t,Wt,(function(t){e(t)})):e()},se=function(t,e,n){var i=new CustomEvent(t+".bs."+e);i.relatedTarget=n,this.dispatchEvent(i)},ae=function(){return{y:t.pageYOffset||n[V],x:t.pageXOffset||n[Y]}},le=function(t,i,o,s){var a,l,c,u,h=i[Z],p=i[$],f=n[H]||e[r][H],d=n[W]||e[r][W],g=t[bt](),m=s===e[r]?ae():{x:s.offsetLeft+s[Y],y:s[q]+s[V]},y=g[jt]-g[Ft],v=g[Gt]-g[Bt],_=te('[class*="arrow"]',i),x=g[Bt]+v/2-p/2<0,b=g[Ft]+y/2-h/2<0,w=g[Ft]+h/2+y/2>=f,E=g[Bt]+p/2+v/2>=d,S=g[Bt]-p<0,C=g[Ft]-h<0,I=g[Bt]+p+v>=d,M=g[Ft]+h+y>=f;(o=(o=(o=(o=(o=(o===Ft||o===jt)&&C&&M?Bt:o)===Bt&&S?Gt:o)===Gt&&I?Bt:o)===Ft&&C?jt:o)===jt&&M?Ft:o)===Ft||o===jt?(l=o===Ft?g[Ft]+m.x-h:g[Ft]+m.x+y,x?(a=g[Bt]+m.y,c=v/2):E?(a=g[Bt]+m.y-p+v,c=p-v/2):a=g[Bt]+m.y-p/2+v/2):o!==Bt&&o!==Gt||(a=o===Bt?g[Bt]+m.y-p:g[Bt]+m.y+v,b?(l=0,u=g[Ft]+y/2):w?(l=f-1.01*h,u=h-(f-g[Ft])+y/2):l=g[Ft]+m.x-h/2+y/2),i[Tt][Bt]=a+"px",i[Tt][Ft]=l+"px",c&&(_[Tt][Bt]=c+"px"),u&&(_[Tt][Ft]=u+"px"),-1===i.className[Et](o)&&(i.className=i.className.replace(qt,o))};s.version="2.0.23";var ce=function(o,s){s=s||{};var a=(o=te(o))[ft](S),l=o[ft]("data-offset-top"),c=o[ft]("data-offset-bottom"),u="affix",p="affixed",f="function",d="update",g="affix-bottom";if(this[D]=s[D]?te(s[D]):te(a)||null,this[q]=s[q]?s[q]:parseInt(l)||0,this[X]=s[X]?s[X]:parseInt(c)||0,this[D]||this[q]||this[X]){var m,y,v,_,x,b,w=this,E=!1,C=!1,I=function(){v=Math.max(e[r][K],e[r][$],n[W],n[K],n[$]),_=parseInt(ae().y,0),m=null!==w[D]?w[D][bt]()[Bt]+_:w[q]?parseInt(i(w[q])===f?w[q]():w[q]||0):void 0,y=function(){if(w[X])return v-o[$]-parseInt(i(w[X])===f?w[X]():w[X]||0)}(),x=parseInt(m)-_<0&&_>parseInt(m),b=parseInt(y)-_<0&&_>parseInt(y)},M=function(){E&&Jt(o,u)&&(Kt(o,u),E=!1)},L=function(){b?(x&&M(),C||Jt(o,g)||(se.call(o,u,u),se.call(o,g,u),$t(o,g),C=!0,se.call(o,p,u),se.call(o,"affixed-bottom",u))):(C&&Jt(o,g)&&(Kt(o,g),C=!1),x?E||Jt(o,u)||(se.call(o,u,u),se.call(o,"affix-top",u),$t(o,u),E=!0,se.call(o,p,u),se.call(o,"affixed-top",u)):M())};this[d]=function(){I(),L()},h in o||(ne(t,st,w[d]),!zt&&ne(t,ot,w[d])),o[h]=w,w[d]()}};a[Pt]([h,ce,"["+u+'="affix"]']);var ue=function(t){t=te(t);var e=this,n="alert",i=ee(t,"."+n),r=function(r){i=ee(r[D],"."+n),(t=te("["+c+'="'+n+'"]',i))&&i&&(t===r[D]||t[Rt](r[D]))&&e.close()},o=function(){se.call(i,"closed",n),ie(t,et,r),i[St].removeChild(i)};this.close=function(){i&&t&&Jt(i,kt)&&(se.call(i,"close",n),Kt(i,kt),i&&(Jt(i,"fade")?oe(i,o):o()))},p in t||ne(t,et,r),t[p]=e};a[Pt]([p,ue,"["+c+'="alert"]']);var he=function(t,n){t=te(t),n=n||null;var i=!1,r="button",o="checked",s="reset",a="LABEL",l="INPUT",c=function(e){var n=e[D].tagName===a?e[D]:e[D][St].tagName===a?e[D][St]:null;if(n){var s=e[D],c=Qt(s[St],"btn"),u=n[_t](l)[0];if(u){if("checkbox"===u.type&&(u[o]?(Kt(n,At),u[ft](o),u.removeAttribute(o),u[o]=!1):($t(n,At),u[ft](o),u[dt](o,o),u[o]=!0),i||(i=!0,se.call(u,pt,r),se.call(t,pt,r))),"radio"===u.type&&!i&&!u[o]){$t(n,At),u[dt](o,o),u[o]=!0,se.call(u,pt,r),se.call(t,pt,r),i=!0;for(var h=0,p=c[Ct];h<p;h++){var f=c[h],d=f[_t](l)[0];f!==n&&Jt(f,At)&&(Kt(f,At),d.removeAttribute(o),d[o]=!1,se.call(d,pt,r))}}setTimeout((function(){i=!1}),50)}}};if(Jt(t,"btn"))null!==n&&(n!==s?n&&n!==s&&("loading"===n&&($t(t,Dt),t[dt](Dt,Dt),t[dt](M,t[vt].trim())),t[vt]=t[ft]("data-"+n+"-text")):t[ft](M)&&((Jt(t,Dt)||t[ft](Dt)===Dt)&&(Kt(t,Dt),t.removeAttribute(Dt)),t[vt]=t[ft](M)));else{f in t||(ne(t,et,c),te("["+Ot+"]",t)&&ne(t,rt,(function(t){32===(t.which||t.keyCode)&&t[D]===e.activeElement&&c(t)})),ne(t,it,(function(t){32===(t.which||t.keyCode)&&t[xt]()})));for(var u=Qt(t,"btn"),h=u[Ct],p=0;p<h;p++)!Jt(u[p],At)&&te("input",u[p])[ft](o)&&$t(u[p],At);t[f]=this}};a[Pt]([f,he,"["+l+'="buttons"]']);var pe=function(e,i){i=i||{};var r=(e=te(e))[ft]("data-interval"),o=i[F],s="false"===r?0:parseInt(r),a=e[ft]("data-pause")===nt||!1,l="true"===e[ft](E)||!1,c="carousel",u="paused",h="direction",p="data-slide-to";this[A]=!0===i[A]||l,this[j]=!(i[j]!==nt&&!a)&&nt,this[F]="number"==typeof o?o:0===s||!1===s?0:5e3;var f=this,g=e.index=0,m=e.timer=0,y=!1,v=Qt(e,"item"),_=v[Ct],x=this[h]=Ft,b=Qt(e,c+"-control"),w=b[0],S=b[1],C=te("."+c+"-indicators",e),I=C&&C[_t]("LI")||[],M=function(){!1===f[F]||Jt(e,u)||($t(e,u),!y&&clearInterval(m))},L=function(){!1!==f[F]&&Jt(e,u)&&(Kt(e,u),!y&&clearInterval(m),!y&&f.cycle())},T=function(t){if(t[xt](),!y){var e=t.currentTarget||t.srcElement;e===S?g++:e===w&&g--,f.slideTo(g)}},P=function(t){for(var e=0,n=I[Ct];e<n;e++)Kt(I[e],At);I[t]&&$t(I[t],At)};this.cycle=function(){m=setInterval((function(){var i,r;i=e[bt](),r=t.innerHeight||n[W],i[Bt]<=r&&i[Gt]>=0&&(g++,f.slideTo(g))}),this[F])},this.slideTo=function(t){if(!y){var n,i=this.getActiveIndex();i<t||0===i&&t===_-1?x=f[h]=Ft:(i>t||i===_-1&&0===t)&&(x=f[h]=jt),t<0?t=_-1:t===_&&(t=0),g=t,n=x===Ft?"next":"prev",se.call(e,"slide",c,v[t]),y=!0,clearInterval(m),P(t),Ht&&Jt(e,"slide")?($t(v[t],n),v[t][Z],$t(v[t],x),$t(v[i],x),re(v[i],Wt,(function(r){var o=r[D]!==v[i]?1e3*r.elapsedTime:0;setTimeout((function(){y=!1,$t(v[t],At),Kt(v[i],At),Kt(v[t],n),Kt(v[t],x),Kt(v[i],x),se.call(e,ht,c,v[t]),f[F]&&!Jt(e,u)&&f.cycle()}),o+100)}))):($t(v[t],At),v[t][Z],Kt(v[i],At),setTimeout((function(){y=!1,f[F]&&!Jt(e,u)&&f.cycle(),se.call(e,ht,c,v[t])}),100))}},this.getActiveIndex=function(){return v[Et](Qt(e,"item active")[0])||0},d in e||(f[j]&&f[F]&&(ne(e,Ut[0],M),ne(e,Ut[1],L),ne(e,"touchstart",M),ne(e,"touchend",L)),S&&ne(S,et,T),w&&ne(w,et,T),C&&ne(C,et,(function(t){if(t[xt](),!y){var e=t[D];if(!e||Jt(e,At)||!e[ft](p))return!1;g=parseInt(e[ft](p),10),f.slideTo(g)}})),f[A]&&ne(t,it,(function(t){if(!y){switch(t.which){case 39:g++;break;case 37:g--;break;default:return}f.slideTo(g)}}))),f.getActiveIndex()<0&&(v[Ct]&&$t(v[0],At),I[Ct]&&P(0)),f[F]&&f.cycle(),e[d]=f};a[Pt]([d,pe,'[data-ride="carousel"]']);var fe=function(t,e){t=te(t),e=e||{};var n,i,r,o=null,s=null,a=this,c=!1,u=t[ft]("data-parent"),h="collapse",p="collapsed",f=function(t,e){se.call(t,ct,h),c=!0,t[Tt][J]=t[K]+"px",Kt(t,h),Kt(t,kt),$t(t,Nt),t[Z],t[Tt][J]="0px",oe(t,(function(){c=!1,t[dt](Q,"false"),e[dt](Q,"false"),Kt(t,Nt),$t(t,h),t[Tt][J]="",se.call(t,ut,h)}))};this.toggle=function(t){t[xt](),c||(Jt(s,kt)?a.hide():a.show())},this.hide=function(){f(s,t),$t(t,p)},this.show=function(){if(o){var e=te("."+h+"."+kt,o),n=e&&(te("["+l+'="'+h+'"]['+S+'="#'+e.id+'"]',o)||te("["+l+'="'+h+'"][href="#'+e.id+'"]',o)),i=n&&(n[ft](S)||n.href);e&&n&&e!==s&&(f(e,n),i.split("#")[1]!==s.id?$t(n,p):Kt(n,p))}!function(t,e){se.call(t,at,h),c=!0,$t(t,Nt),Kt(t,h),t[Tt][J]=t[K]+"px",oe(t,(function(){c=!1,t[dt](Q,"true"),e[dt](Q,"true"),Kt(t,Nt),$t(t,h),$t(t,kt),t[Tt][J]="",se.call(t,lt,h)}))}(s,t),Kt(t,p)},g in t||ne(t,et,a.toggle),n=t.href&&t[ft]("href"),i=t[ft](S),r=n||i&&"#"===i.charAt(0)&&i,s=r&&te(r),o=te(e.parent)||u&&ee(t,u),t[g]=a};a[Pt]([g,fe,"["+l+'="collapse"]']);var de=function(t,n){t=te(t),this.persist=!0===n||"true"===t[ft]("data-persist")||!1;var i=this,r="children",o=t[St],s="dropdown",a="open",l=null,c=te(".dropdown-menu",o),u=function(){for(var t=c[r],e=[],n=0;n<t[Ct];n++)t[n][r][Ct]&&"A"===t[n][r][0].tagName&&e[Pt](t[n]);return e}(),h=function(t){(t.href&&"#"===t.href.slice(-1)||t[St]&&t[St].href&&"#"===t[St].href.slice(-1))&&this[xt]()},p=function(){var n=t[a]?ne:ie;n(e,et,f),n(e,it,g),n(e,rt,y)},f=function(e){var n=e[D],r=n&&(m in n||m in n[St]);(n!==c&&!c[Rt](n)||!i.persist&&!r)&&(l=n===t||t[Rt](n)?t:null,_(),h.call(e,n))},d=function(e){l=t,v(),h.call(e,e[D])},g=function(t){var e=t.which||t.keyCode;38!==e&&40!==e||t[xt]()},y=function(n){var o=n.which||n.keyCode,s=e.activeElement,h=u[Et](s[St]),p=s===t,f=c[Rt](s),d=s[St][St]===c;(d||p)&&(h=p?0:38===o?h>1?h-1:0:40===o&&h<u[Ct]-1?h+1:h,u[h]&&Zt(u[h][r][0])),(u[Ct]&&d||!u[Ct]&&(f||p)||!f)&&t[a]&&27===o&&(i.toggle(),l=null)},v=function(){se.call(o,at,s,l),$t(o,a),c[dt](Q,!0),se.call(o,lt,s,l),t[a]=!0,ie(t,et,d),setTimeout((function(){Zt(c[_t]("INPUT")[0]||t),p()}),1)},_=function(){se.call(o,ct,s,l),Kt(o,a),c[dt](Q,!1),se.call(o,ut,s,l),t[a]=!1,p(),Zt(t),setTimeout((function(){ne(t,et,d)}),1)};t[a]=!1,this.toggle=function(){Jt(o,a)&&t[a]?_():v()},m in t||(!1 in c&&c[dt](Ot,"0"),ne(t,et,d)),t[m]=i};a[Pt]([m,de,"["+l+'="dropdown"]']);var ge=function(o,s){var a=(o=te(o))[ft](S)||o[ft]("href"),l=te(a),u=Jt(o,"modal")?o:l,h="modal",p="static",f="paddingLeft",d="paddingRight",g="modal-backdrop";if(Jt(o,"modal")&&(o=null),u){s=s||{},this[A]=!1!==s[A]&&"false"!==u[ft](E),this[R]=s[R]!==p&&u[ft](w)!==p||p,this[R]=!1!==s[R]&&"false"!==u[ft](w)&&this[R],this[N]=s[N],this[U]=s[U]||e[r];var m,v,_,x,b=this,C=null,I=Qt(n,Vt).concat(Qt(n,Yt)),M=function(){var e,n=b[U].currentStyle||t.getComputedStyle(b[U]),i=parseInt(n[d],10);if(m&&(b[U][Tt][d]=i+_+"px",I[Ct]))for(var r=0;r<I[Ct];r++)e=(I[r].currentStyle||t.getComputedStyle(I[r]))[d],I[r][Tt][d]=parseInt(e)+_+"px"},L=function(){var i,r,o;m=b[U][H]<(i=n[bt](),t.innerWidth||i[jt]-Math.abs(i[Ft])),v=u[K]>n[W],(o=e[mt]("div")).className=h+"-scrollbar-measure",b[U][yt](o),r=o[Z]-o[H],b[U].removeChild(o),_=r},T=function(){u[Tt][f]=!m&&v?_+"px":"",u[Tt][d]=m&&!v?_+"px":""},P=function(){(x=te("."+g))&&null!==x&&"object"===i(x)&&(Xt=0,b[U].removeChild(x),x=null),se.call(u,ut,h)},O=function(){Jt(u,kt)?ne(e,it,G):ie(e,it,G)},k=function(){Jt(u,kt)?ne(t,ot,b.update):ie(t,ot,b.update)},F=function(){Jt(u,kt)?ne(u,et,z):ie(u,et,z)},j=function(){Zt(u),se.call(u,lt,h,C)},B=function(){u[Tt].display="",o&&Zt(o),Qt(e,h+" "+kt)[0]||(u[Tt][f]="",u[Tt][d]="",function(){if(b[U][Tt][d]="",I[Ct])for(var t=0;t<I[Ct];t++)I[t][Tt][d]=""}(),Kt(b[U],h+"-open"),x&&Jt(x,"fade")?(Kt(x,kt),oe(x,P)):P(),k(),F(),O())},G=function(t){var e=t.which||t.keyCode;b[A]&&27==e&&Jt(u,kt)&&b.hide()},z=function(t){var e=t[D];Jt(u,kt)&&(e[St][ft](c)===h||e[ft](c)===h||e===u&&b[R]!==p)&&(b.hide(),C=null,t[xt]())};this.toggle=function(){Jt(u,kt)?this.hide():this.show()},this.show=function(){se.call(u,at,h,C);var t=Qt(e,h+" in")[0];t&&t!==u&&t.modalTrigger[y].hide(),this[R]&&!Xt&&function(){Xt=1;var t=e[mt]("div");null===(x=te("."+g))&&(t[dt]("class",g+" fade"),x=t,b[U][yt](x))}(),x&&Xt&&!Jt(x,kt)&&(x[Z],$t(x,kt)),u[Tt].display="block",L(),M(),T(),$t(b[U],h+"-open"),$t(u,kt),u[dt](tt,!1),k(),F(),O(),Jt(u,"fade")?oe(u,j):j()},this.hide=function(){se.call(u,ct,h),x=te("."+g),Kt(u,kt),u[dt](tt,!0),setTimeout((function(){Jt(u,"fade")?oe(u,B):B()}),Ht?150:0)},this.setContent=function(t){te(".modal-content",u)[vt]=t},this.update=function(){Jt(u,kt)&&(L(),M(),T())},o&&!(y in o)&&ne(o,et,(function(t){var e=t[D];(e=e[gt](S)||e[gt]("href")?e:e[St])!==o||Jt(u,kt)||(u.modalTrigger=o,C=o,b.show(),t[xt]())})),b[N]&&b.setContent(b[N]),o&&(o[y]=b)}};a[Pt]([y,ge,"["+l+'="modal"]']);var me=function(n,i){i=i||{};var o=(n=te(n))[ft]("data-trigger"),s=n[ft](L),a=n[ft](P),l=n[ft]("data-dismissible"),c=n[ft](O),u=n[ft](T),h="popover",p="template",f="trigger",d="class",g="div",m="fade",y="data-content",_="dismissible",x='<button type="button" class="close">×</button>',b=te(i[z]),w=te(u),E=ee(n,".modal"),S=ee(n,"."+Vt),I=ee(n,"."+Yt);this[p]=i[p]?i[p]:null,this[f]=i[f]?i[f]:o||nt,this[B]=i[B]&&i[B]!==m?i[B]:s||m,this[G]=i[G]?i[G]:a||Bt,this[k]=parseInt(i[k]||c)||200,this[_]=!(!i[_]&&"true"!==l),this[z]=b||(w||(S||(I||(E||e[r]))));var M=this,R=n[ft](C)||null,A=n[ft](y)||null;if(A||this[p]){var N=null,F=0,j=this[G],U=function(t){null!==N&&t[D]===te(".close",N)&&M.hide()},q=function(i){et!=M[f]&&"focus"!=M[f]||!M[_]&&i(n,"blur",M.hide),M[_]&&i(e,et,U),!zt&&i(t,ot,M.hide)},X=function(){q(ne),se.call(n,lt,h)},V=function(){q(ie),M[z].removeChild(N),F=null,N=null,se.call(n,ut,h)};this.toggle=function(){null===N?M.show():M.hide()},this.show=function(){clearTimeout(F),F=setTimeout((function(){null===N&&(j=M[G],function(){if(R=n[ft](C),A=n[ft](y),N=e[mt](g),null!==A&&null===M[p]){if(N[dt]("role","tooltip"),null!==R){var t=e[mt]("h3");t[dt](d,h+"-title"),t[vt]=M[_]?R+x:R,N[yt](t)}var i=e[mt](g),r=e[mt](g);i[dt](d,"arrow"),r[dt](d,h+"-content"),N[yt](i),N[yt](r),r[vt]=M[_]&&null===R?A+x:A}else{var o=e[mt](g);o[vt]=M[p],N[vt]=o.firstChild[vt]}M[z][yt](N),N[Tt].display="block",N[dt](d,h+" "+j+" "+M[B])}(),le(n,N,j,M[z]),!Jt(N,kt)&&$t(N,kt),se.call(n,at,h),M[B]?oe(N,X):X())}),20)},this.hide=function(){clearTimeout(F),F=setTimeout((function(){N&&null!==N&&Jt(N,kt)&&(se.call(n,ct,h),Kt(N,kt),M[B]?oe(N,V):V())}),M[k])},v in n||(M[f]===nt?(ne(n,Ut[0],M.show),M[_]||ne(n,Ut[1],M.hide)):et!=M[f]&&"focus"!=M[f]||ne(n,M[f],M.toggle)),n[v]=M}};a[Pt]([v,me,"["+l+'="popover"]']);var ye=function(e,n){e=te(e);var i=te(e[ft](S)),r=e[ft]("data-offset");if((n=n||{})[D]||i){for(var o,s=this,a=n[D]&&te(n[D])||i,l=a&&a[_t]("A"),c=parseInt(r||n.offset)||10,u=[],h=[],p=e[$]<e[K]?e:t,f=p===t,d=0,g=l[Ct];d<g;d++){var m=l[d][ft]("href"),y=m&&"#"===m.charAt(0)&&"#"!==m.slice(-1)&&te(m);y&&(u[Pt](l[d]),h[Pt](y))}var v=function(t){var n=u[t][St],i=h[t],r=ee(n,".dropdown"),s=f&&i[bt](),a=Jt(n,At)||!1,l=(f?s[Bt]+o:i[q])-c,p=f?s[Gt]+o-c:h[t+1]?h[t+1][q]-c:e[K],d=o>=l&&p>o;if(!a&&d)"LI"!==n.tagName||Jt(n,At)||($t(n,At),r&&!Jt(r,At)&&$t(r,At),se.call(e,"activate","scrollspy",u[t]));else if(d){if(!d&&!a||a&&d)return}else"LI"===n.tagName&&Jt(n,At)&&(Kt(n,At),r&&Jt(r,At)&&!Qt(n[St],At).length&&Kt(r,At))};this.refresh=function(){!function(){o=f?ae().y:e[V];for(var t=0,n=u[Ct];t<n;t++)v(t)}()},_ in e||(ne(p,st,s.refresh),!zt&&ne(t,ot,s.refresh)),s.refresh(),e[_]=s}};a[Pt]([_,ye,"["+u+'="scroll"]']);var ve=function(t,e){var n=(t=te(t))[ft]("data-height"),i="tab",r="height",o="float",s="isAnimating";e=e||{},this[r]=!!Ht&&(e[r]||"true"===n);var a,c,u,h,p,f,d,g=this,m=ee(t,".nav"),y=!1,v=m&&te(".dropdown",m),_=function(){y[Tt][r]="",Kt(y,Nt),m[s]=!1},b=function(){y?f?_():setTimeout((function(){y[Tt][r]=d+"px",y[Z],oe(y,_)}),1):m[s]=!1,se.call(a,lt,i,c)},w=function(){y&&(u[Tt][o]=Ft,h[Tt][o]=Ft,p=u[K]),$t(h,At),se.call(a,at,i,c),Kt(u,At),se.call(c,ut,i,a),y&&(d=h[K],f=d===p,$t(y,Nt),y[Tt][r]=p+"px",y[$],u[Tt][o]="",h[Tt][o]=""),Jt(h,"fade")?setTimeout((function(){$t(h,kt),oe(h,b)}),20):b()};if(m){m[s]=!1;var E=function(){var t,e=Qt(m,At);return 1!==e[Ct]||Jt(e[0],"dropdown")?e[Ct]>1&&(t=e[e[Ct]-1]):t=e[0],t[_t]("A")[0]},S=function(){return te(E()[ft]("href"))};this.show=function(){h=te((a=a||t)[ft]("href")),c=E(),u=S(),m[s]=!0,Kt(c[St],At),$t(a[St],At),v&&(Jt(t[St][St],"dropdown-menu")?Jt(v,At)||$t(v,At):Jt(v,At)&&Kt(v,At)),se.call(c,ct,i,a),Jt(u,"fade")?(Kt(u,kt),oe(u,w)):w()},x in t||ne(t,et,(function(t){var e=t[D][ft]("href");t[xt](),a=t[D][ft](l)===i||e&&"#"===e.charAt(0)?t[D]:t[D][St],!m[s]&&!Jt(a[St],At)&&g.show()})),g[r]&&(y=S()[St]),t[x]=g}};a[Pt]([x,ve,"["+l+'="tab"]']);var _e=function(n,i){i=i||{};var o=(n=te(n))[ft](L),s=n[ft](P),a=n[ft](O),l=n[ft](T),c="tooltip",u="class",h="title",p="fade",f="div",d=te(i[z]),g=te(l),m=ee(n,".modal"),y=ee(n,"."+Vt),v=ee(n,"."+Yt);this[B]=i[B]&&i[B]!==p?i[B]:o||p,this[G]=i[G]?i[G]:s||Bt,this[k]=parseInt(i[k]||a)||200,this[z]=d||(g||(y||(v||(m||e[r]))));var _=this,x=0,w=this[G],E=null,S=n[ft](h)||n[ft](C)||n[ft](I);if(S&&""!=S){var M=function(){se.call(n,lt,c),!zt&&ne(t,ot,_.hide)},R=function(){!zt&&ie(t,ot,_.hide),_[z].removeChild(E),E=null,x=null,se.call(n,ut,c)};this.show=function(){clearTimeout(x),x=setTimeout((function(){if(null===E){if(w=_[G],0==function(){if(!(S=n[ft](h)||n[ft](C)||n[ft](I))||""==S)return!1;(E=e[mt](f))[dt]("role",c);var t=e[mt](f),i=e[mt](f);t[dt](u,c+"-arrow"),i[dt](u,c+"-inner"),E[yt](t),E[yt](i),i[vt]=S,_[z][yt](E),E[dt](u,c+" "+w+" "+_[B])}())return;le(n,E,w,_[z]),!Jt(E,kt)&&$t(E,kt),se.call(n,at,c),_[B]?oe(E,M):M()}}),20)},this.hide=function(){clearTimeout(x),x=setTimeout((function(){E&&Jt(E,kt)&&(se.call(n,ct,c),Kt(E,kt),_[B]?oe(E,R):R())}),_[k])},this.toggle=function(){E?_.hide():_.show()},b in n||(n[dt](I,S),n.removeAttribute(h),ne(n,Ut[0],_.show),ne(n,Ut[1],_.hide)),n[b]=_}};a[Pt]([b,_e,"["+l+'="tooltip"]']);var xe=function(t,e){for(var n=0,i=e[Ct];n<i;n++)new t(e[n])},be=s.initCallback=function(t){t=t||e;for(var n=0,i=a[Ct];n<i;n++)xe(a[n][1],t[wt](a[n][2]))};return e[r]?be():ne(e,"DOMContentLoaded",(function(){be()})),{Affix:ce,Alert:ue,Button:he,Carousel:pe,Collapse:fe,Dropdown:de,Modal:ge,Popover:me,ScrollSpy:ye,Tab:ve,Tooltip:_e}})),this};var o=(new r).dispatch();const s=o},953:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});n(4916),n(1539),n(9714),n(5306),n(561),n(9600),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}t=n.hmd(t);var r=function(){};r.prototype.dispatch=function(){var e,r;return e=this,r=function(t){var e={},n="iziToast",r=(document.querySelector("body"),!!/Mobi/.test(navigator.userAgent)),o=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),s="undefined"!=typeof InstallTrigger,a="ontouchstart"in document.documentElement,l=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],c=568,u={};e.children={};var h={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof window.CustomEvent){var p=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};p.prototype=window.Event.prototype,window.CustomEvent=p}var f=function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(n,t[i],i,t);else if(t)for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)},d=function(t,e){var n={};return f(t,(function(e,i){n[i]=t[i]})),f(e,(function(t,i){n[i]=e[i]})),n},g=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e},m={move:function(t,e,i,r){var a,l=.3,c=180;0!==r&&(t.classList.add(n+"-dragged"),t.style.transform="translateX("+r+"px)",r>0?(a=(c-r)/c)<l&&e.hide(d(i,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),t,"drag"):(a=(c+r)/c)<l&&e.hide(d(i,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),t,"drag"),t.style.opacity=a,a<l&&((o||s)&&(t.style.left=r+"px"),t.parentNode.style.opacity=l,this.stopMoving(t,null)))},startMoving:function(t,e,n,i){i=i||window.event;var r=a?i.touches[0].clientX:i.clientX,o=t.style.transform.replace("px)",""),s=r-(o=o.replace("translateX(",""));n.transitionIn&&t.classList.remove(n.transitionIn),n.transitionInMobile&&t.classList.remove(n.transitionInMobile),t.style.transition="",a?document.ontouchmove=function(i){i.preventDefault();var r=(i=i||window.event).touches[0].clientX-s;m.move(t,e,n,r)}:document.onmousemove=function(i){i.preventDefault();var r=(i=i||window.event).clientX-s;m.move(t,e,n,r)}},stopMoving:function(t,e){a?document.ontouchmove=function(){}:document.onmousemove=function(){},t.style.opacity="",t.style.transform="",t.classList.contains(n+"-dragged")&&(t.classList.remove(n+"-dragged"),t.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout((function(){t.style.transition=""}),400))}};return e.setSetting=function(t,n,i){e.children[t][n]=i},e.getSetting=function(t,n){return e.children[t][n]},e.destroy=function(){f(document.querySelectorAll("."+n+"-overlay"),(function(t,e){t.remove()})),f(document.querySelectorAll("."+n+"-wrapper"),(function(t,e){t.remove()})),f(document.querySelectorAll("."+n),(function(t,e){t.remove()})),this.children={},document.removeEventListener(n+"-opened",{},!1),document.removeEventListener(n+"-opening",{},!1),document.removeEventListener(n+"-closing",{},!1),document.removeEventListener(n+"-closed",{},!1),document.removeEventListener("keyup",{},!1),u={}},e.settings=function(t){e.destroy(),u=t,h=d(h,t||{})},f({info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},(function(t,n){e[n]=function(e){var n=d(u,e||{});n=d(t,n||{}),this.show(n)}})),e.progress=function(t,e,i){var r=this,o=e.getAttribute("data-iziToast-ref"),s=d(this.children[o],t||{}),a=e.querySelector("."+n+"-progressbar div");return{start:function(){void 0===s.time.REMAINING&&(e.classList.remove(n+"-reseted"),null!==a&&(a.style.transition="width "+s.timeout+"ms "+s.progressBarEasing,a.style.width="0%"),s.time.START=(new Date).getTime(),s.time.END=s.time.START+s.timeout,s.time.TIMER=setTimeout((function(){clearTimeout(s.time.TIMER),e.classList.contains(n+"-closing")||(r.hide(s,e,"timeout"),"function"==typeof i&&i.apply(r))}),s.timeout),r.setSetting(o,"time",s.time))},pause:function(){if(void 0!==s.time.START&&!e.classList.contains(n+"-paused")&&!e.classList.contains(n+"-reseted")){if(e.classList.add(n+"-paused"),s.time.REMAINING=s.time.END-(new Date).getTime(),clearTimeout(s.time.TIMER),r.setSetting(o,"time",s.time),null!==a){var t=window.getComputedStyle(a).getPropertyValue("width");a.style.transition="none",a.style.width=t}"function"==typeof i&&setTimeout((function(){i.apply(r)}),10)}},resume:function(){void 0!==s.time.REMAINING?(e.classList.remove(n+"-paused"),null!==a&&(a.style.transition="width "+s.time.REMAINING+"ms "+s.progressBarEasing,a.style.width="0%"),s.time.END=(new Date).getTime()+s.time.REMAINING,s.time.TIMER=setTimeout((function(){clearTimeout(s.time.TIMER),e.classList.contains(n+"-closing")||(r.hide(s,e,"timeout"),"function"==typeof i&&i.apply(r))}),s.time.REMAINING),r.setSetting(o,"time",s.time)):this.start()},reset:function(){clearTimeout(s.time.TIMER),delete s.time.REMAINING,r.setSetting(o,"time",s.time),e.classList.add(n+"-reseted"),e.classList.remove(n+"-paused"),null!==a&&(a.style.transition="none",a.style.width="100%"),"function"==typeof i&&setTimeout((function(){i.apply(r)}),10)}}},e.hide=function(t,e,o){"object"!=i(e)&&(e=document.querySelector(e));var s=this,a=d(this.children[e.getAttribute("data-iziToast-ref")],t||{});a.closedBy=o||null,delete a.time.REMAINING,e.classList.add(n+"-closing"),function(){var t=document.querySelector("."+n+"-overlay");if(null!==t){var e=t.getAttribute("data-iziToast-ref"),i=(e=e.split(",")).indexOf(String(a.ref));-1!==i&&e.splice(i,1),t.setAttribute("data-iziToast-ref",e.join()),0===e.length&&(t.classList.remove("fadeIn"),t.classList.add("fadeOut"),setTimeout((function(){t.remove()}),700))}}(),a.transitionIn&&e.classList.remove(a.transitionIn),a.transitionInMobile&&e.classList.remove(a.transitionInMobile),r||window.innerWidth<=c?a.transitionOutMobile&&e.classList.add(a.transitionOutMobile):a.transitionOut&&e.classList.add(a.transitionOut);var l=e.parentNode.offsetHeight;e.parentNode.style.height=l+"px",e.style.pointerEvents="none",(!r||window.innerWidth>c)&&(e.parentNode.style.transitionDelay="0.2s");try{var u=new CustomEvent(n+"-closing",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(u)}catch(t){console.warn(t)}setTimeout((function(){e.parentNode.style.height="0px",e.parentNode.style.overflow="",setTimeout((function(){delete s.children[a.ref],e.parentNode.remove();try{var t=new CustomEvent(n+"-closed",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}void 0!==a.onClosed&&a.onClosed.apply(null,[a,e,o])}),1e3)}),200),void 0!==a.onClosing&&a.onClosing.apply(null,[a,e,o])},e.show=function(t){var i,o=this,s=d(u,t||{});if((s=d(h,s)).time={},null===s.id&&(s.id=(i=s.title+s.message+s.color,btoa(encodeURIComponent(i)).replace(/=/g,""))),1===s.displayMode||"once"==s.displayMode)try{if(document.querySelectorAll("."+n+"#"+s.id).length>0)return!1}catch(t){console.warn("["+n+"] Could not find an element with this selector: #"+s.id+". Try to set an valid id.")}if(2===s.displayMode||"replace"==s.displayMode)try{f(document.querySelectorAll("."+n+"#"+s.id),(function(t,e){o.hide(s,t,"replaced")}))}catch(t){console.warn("["+n+"] Could not find an element with this selector: #"+s.id+". Try to set an valid id.")}s.ref=(new Date).getTime()+Math.floor(1e7*Math.random()+1),e.children[s.ref]=s;var p,y={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:s.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};y.toast.setAttribute("data-iziToast-ref",s.ref),y.toast.appendChild(y.toastBody),y.toastCapsule.appendChild(y.toast),function(){if(y.toast.classList.add(n),y.toast.classList.add(n+"-opening"),y.toastCapsule.classList.add(n+"-capsule"),y.toastBody.classList.add(n+"-body"),y.toastTexts.classList.add(n+"-texts"),r||window.innerWidth<=c?s.transitionInMobile&&y.toast.classList.add(s.transitionInMobile):s.transitionIn&&y.toast.classList.add(s.transitionIn),s.class){var t=s.class.split(" ");f(t,(function(t,e){y.toast.classList.add(t)}))}var e;s.id&&(y.toast.id=s.id),s.rtl&&(y.toast.classList.add(n+"-rtl"),y.toast.setAttribute("dir","rtl")),s.layout>1&&y.toast.classList.add(n+"-layout"+s.layout),s.balloon&&y.toast.classList.add(n+"-balloon"),s.maxWidth&&(isNaN(s.maxWidth)?y.toast.style.maxWidth=s.maxWidth:y.toast.style.maxWidth=s.maxWidth+"px"),""===s.theme&&"light"===s.theme||y.toast.classList.add(n+"-theme-"+s.theme),s.color&&("#"==(e=s.color).substring(0,1)||"rgb"==e.substring(0,3)||"hsl"==e.substring(0,3)?y.toast.style.background=s.color:y.toast.classList.add(n+"-color-"+s.color)),s.backgroundColor&&(y.toast.style.background=s.backgroundColor,s.balloon&&(y.toast.style.borderColor=s.backgroundColor))}(),s.image&&(y.cover.classList.add(n+"-cover"),y.cover.style.width=s.imageWidth+"px",function(t){try{return btoa(atob(t))==t}catch(t){return!1}}(s.image.replace(/ /g,""))?y.cover.style.backgroundImage="url(data:image/png;base64,"+s.image.replace(/ /g,"")+")":y.cover.style.backgroundImage="url("+s.image+")",s.rtl?y.toastBody.style.marginRight=s.imageWidth+10+"px":y.toastBody.style.marginLeft=s.imageWidth+10+"px",y.toast.appendChild(y.cover)),s.close?(y.buttonClose=document.createElement("button"),y.buttonClose.type="button",y.buttonClose.classList.add(n+"-close"),y.buttonClose.addEventListener("click",(function(t){t.target,o.hide(s,y.toast,"button")})),y.toast.appendChild(y.buttonClose)):s.rtl?y.toast.style.paddingLeft="18px":y.toast.style.paddingRight="18px",s.progressBar&&(y.progressBar=document.createElement("div"),y.progressBarDiv=document.createElement("div"),y.progressBar.classList.add(n+"-progressbar"),y.progressBarDiv.style.background=s.progressBarColor,y.progressBar.appendChild(y.progressBarDiv),y.toast.appendChild(y.progressBar)),s.timeout&&(s.pauseOnHover&&!s.resetOnHover&&(y.toast.addEventListener("mouseenter",(function(t){o.progress(s,y.toast).pause()})),y.toast.addEventListener("mouseleave",(function(t){o.progress(s,y.toast).resume()}))),s.resetOnHover&&(y.toast.addEventListener("mouseenter",(function(t){o.progress(s,y.toast).reset()})),y.toast.addEventListener("mouseleave",(function(t){o.progress(s,y.toast).start()})))),s.iconUrl?(y.icon.setAttribute("class",n+"-icon"),y.icon.setAttribute("src",s.iconUrl)):s.icon&&(y.icon.setAttribute("class",n+"-icon "+s.icon),s.iconText&&y.icon.appendChild(document.createTextNode(s.iconText)),s.iconColor&&(y.icon.style.color=s.iconColor)),(s.icon||s.iconUrl)&&(s.rtl?y.toastBody.style.paddingRight="33px":y.toastBody.style.paddingLeft="33px",y.toastBody.appendChild(y.icon)),s.title.length>0&&(y.strong=document.createElement("strong"),y.strong.classList.add(n+"-title"),y.strong.appendChild(g(s.title)),y.toastTexts.appendChild(y.strong),s.titleColor&&(y.strong.style.color=s.titleColor),s.titleSize&&(isNaN(s.titleSize)?y.strong.style.fontSize=s.titleSize:y.strong.style.fontSize=s.titleSize+"px"),s.titleLineHeight&&(isNaN(s.titleSize)?y.strong.style.lineHeight=s.titleLineHeight:y.strong.style.lineHeight=s.titleLineHeight+"px")),s.message.length>0&&(y.p=document.createElement("p"),y.p.classList.add(n+"-message"),y.p.appendChild(g(s.message)),y.toastTexts.appendChild(y.p),s.messageColor&&(y.p.style.color=s.messageColor),s.messageSize&&(isNaN(s.titleSize)?y.p.style.fontSize=s.messageSize:y.p.style.fontSize=s.messageSize+"px"),s.messageLineHeight&&(isNaN(s.titleSize)?y.p.style.lineHeight=s.messageLineHeight:y.p.style.lineHeight=s.messageLineHeight+"px")),s.title.length>0&&s.message.length>0&&(s.rtl?y.strong.style.marginLeft="10px":2===s.layout||s.rtl||(y.strong.style.marginRight="10px")),y.toastBody.appendChild(y.toastTexts),s.inputs.length>0&&(y.inputs.classList.add(n+"-inputs"),f(s.inputs,(function(t,e){y.inputs.appendChild(g(t[0])),(p=y.inputs.childNodes)[e].classList.add(n+"-inputs-child"),t[3]&&setTimeout((function(){p[e].focus()}),300),p[e].addEventListener(t[1],(function(e){return(0,t[2])(o,y.toast,this,e)}))})),y.toastBody.appendChild(y.inputs)),s.buttons.length>0&&(y.buttons.classList.add(n+"-buttons"),f(s.buttons,(function(t,e){y.buttons.appendChild(g(t[0]));var i=y.buttons.childNodes;i[e].classList.add(n+"-buttons-child"),t[2]&&setTimeout((function(){i[e].focus()}),300),i[e].addEventListener("click",(function(e){return e.preventDefault(),(0,t[1])(o,y.toast,this,e,p)}))}))),y.toastBody.appendChild(y.buttons),s.message.length>0&&(s.inputs.length>0||s.buttons.length>0)&&(y.p.style.marginBottom="0"),(s.inputs.length>0||s.buttons.length>0)&&(s.rtl?y.toastTexts.style.marginLeft="10px":y.toastTexts.style.marginRight="10px",s.inputs.length>0&&s.buttons.length>0&&(s.rtl?y.inputs.style.marginLeft="8px":y.inputs.style.marginRight="8px")),y.toastCapsule.style.visibility="hidden",setTimeout((function(){var t=y.toast.offsetHeight,e=y.toast.currentStyle||window.getComputedStyle(y.toast),n=e.marginTop;n=n.split("px"),n=parseInt(n[0]);var i=e.marginBottom;i=i.split("px"),i=parseInt(i[0]),y.toastCapsule.style.visibility="",y.toastCapsule.style.height=t+i+n+"px",setTimeout((function(){y.toastCapsule.style.height="auto",s.target&&(y.toastCapsule.style.overflow="visible")}),500),s.timeout&&o.progress(s,y.toast).start()}),100),function(){var t=s.position;if(s.target)y.wrapper=document.querySelector(s.target),y.wrapper.classList.add(n+"-target"),s.targetFirst?y.wrapper.insertBefore(y.toastCapsule,y.wrapper.firstChild):y.wrapper.appendChild(y.toastCapsule);else{if(-1==l.indexOf(s.position))return void console.warn("["+n+"] Incorrect position. It can be › "+l);t=r||window.innerWidth<=c?"bottomLeft"==s.position||"bottomRight"==s.position||"bottomCenter"==s.position?n+"-wrapper-bottomCenter":"topLeft"==s.position||"topRight"==s.position||"topCenter"==s.position?n+"-wrapper-topCenter":n+"-wrapper-center":n+"-wrapper-"+t,y.wrapper=document.querySelector("."+n+"-wrapper."+t),y.wrapper||(y.wrapper=document.createElement("div"),y.wrapper.classList.add(n+"-wrapper"),y.wrapper.classList.add(t),document.body.appendChild(y.wrapper)),"topLeft"==s.position||"topCenter"==s.position||"topRight"==s.position?y.wrapper.insertBefore(y.toastCapsule,y.wrapper.firstChild):y.wrapper.appendChild(y.toastCapsule)}isNaN(s.zindex)?console.warn("["+n+"] Invalid zIndex."):y.wrapper.style.zIndex=s.zindex}(),s.overlay&&(null!==document.querySelector("."+n+"-overlay.fadeIn")?(y.overlay=document.querySelector("."+n+"-overlay"),y.overlay.setAttribute("data-iziToast-ref",y.overlay.getAttribute("data-iziToast-ref")+","+s.ref),isNaN(s.zindex)||null===s.zindex||(y.overlay.style.zIndex=s.zindex-1)):(y.overlay.classList.add(n+"-overlay"),y.overlay.classList.add("fadeIn"),y.overlay.style.background=s.overlayColor,y.overlay.setAttribute("data-iziToast-ref",s.ref),isNaN(s.zindex)||null===s.zindex||(y.overlay.style.zIndex=s.zindex-1),document.querySelector("body").appendChild(y.overlay)),s.overlayClose?(y.overlay.removeEventListener("click",{}),y.overlay.addEventListener("click",(function(t){o.hide(s,y.toast,"overlay")}))):y.overlay.removeEventListener("click",{})),function(){if(s.animateInside){y.toast.classList.add(n+"-animateInside");var t=[200,100,300];"bounceInLeft"!=s.transitionIn&&"bounceInRight"!=s.transitionIn||(t=[400,200,400]),s.title.length>0&&setTimeout((function(){y.strong.classList.add("slideIn")}),t[0]),s.message.length>0&&setTimeout((function(){y.p.classList.add("slideIn")}),t[1]),(s.icon||s.iconUrl)&&setTimeout((function(){y.icon.classList.add("revealIn")}),t[2]);var e=150;s.buttons.length>0&&y.buttons&&setTimeout((function(){f(y.buttons.childNodes,(function(t,n){setTimeout((function(){t.classList.add("revealIn")}),e),e+=150}))}),s.inputs.length>0?150:0),s.inputs.length>0&&y.inputs&&(e=150,f(y.inputs.childNodes,(function(t,n){setTimeout((function(){t.classList.add("revealIn")}),e),e+=150})))}}(),s.onOpening.apply(null,[s,y.toast]);try{var v=new CustomEvent(n+"-opening",{detail:s,bubbles:!0,cancelable:!0});document.dispatchEvent(v)}catch(t){console.warn(t)}setTimeout((function(){y.toast.classList.remove(n+"-opening"),y.toast.classList.add(n+"-opened");try{var t=new CustomEvent(n+"-opened",{detail:s,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}s.onOpened.apply(null,[s,y.toast])}),1e3),s.drag&&(a?(y.toast.addEventListener("touchstart",(function(t){m.startMoving(this,o,s,t)}),!1),y.toast.addEventListener("touchend",(function(t){m.stopMoving(this,t)}),!1)):(y.toast.addEventListener("mousedown",(function(t){t.preventDefault(),m.startMoving(this,o,s,t)}),!1),y.toast.addEventListener("mouseup",(function(t){t.preventDefault(),m.stopMoving(this,t)}),!1))),s.closeOnEscape&&document.addEventListener("keyup",(function(t){27==(t=t||window.event).keyCode&&o.hide(s,y.toast,"esc")})),s.closeOnClick&&y.toast.addEventListener("click",(function(t){o.hide(s,y.toast,"toast")})),o.toast=y.toast},e},"function"==typeof define&&n.amdO?define([],r()):"object"===("undefined"==typeof exports?"undefined":i(exports))?t.exports=r():e.iziToast=r(),this};const o=(new r).dispatch().iziToast},7863:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});n(1539),n(9714),n(4603),n(4916),n(9600),n(7042),n(8309),n(2481),n(5306),n(6992),n(3948),n(4723),n(4765),n(8783),n(285),n(1637),n(2526),n(1817),n(2165);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}t=n.hmd(t);var r=function(){};r.prototype.dispatch=function(){return function(e,r){"object"===("undefined"==typeof exports?"undefined":i(exports))?t.exports=r():"function"==typeof define&&n.amdO?define(r):e.page=r()}(this,(function(){var t=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},e=g,n=l,r=function(t){return c(l(t))},o=c,s=d,a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function l(t){for(var e,n=[],i=0,r=0,o="";null!=(e=a.exec(t));){var s=e[0],l=e[1],c=e.index;if(o+=t.slice(r,c),r=c+s.length,l)o+=l[1];else{o&&(n.push(o),o="");var u=e[2],p=e[3],f=e[4],d=e[5],g=e[6],m=e[7],y="+"===g||"*"===g,v="?"===g||"*"===g,_=u||"/",x=f||d||(m?".*":"[^"+_+"]+?");n.push({name:p||i++,prefix:u||"",delimiter:_,optional:v,repeat:y,pattern:h(x)})}}return r<t.length&&(o+=t.substr(r)),o&&n.push(o),n}function c(e){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===i(e[r])&&(n[r]=new RegExp("^"+e[r].pattern+"$"));return function(i){for(var r="",o=i||{},s=0;s<e.length;s++){var a=e[s];if("string"!=typeof a){var l,c=o[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(t(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<c.length;u++){if(l=encodeURIComponent(c[u]),!n[s].test(l))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');r+=(0===u?a.prefix:a.delimiter)+l}}else{if(l=encodeURIComponent(c),!n[s].test(l))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');r+=a.prefix+l}}else r+=a}return r}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function p(t,e){return t.keys=e,t}function f(t){return t.sensitive?"":"i"}function d(t,e){for(var n=(e=e||{}).strict,i=!1!==e.end,r="",o=t[t.length-1],s="string"==typeof o&&/\/$/.test(o),a=0;a<t.length;a++){var l=t[a];if("string"==typeof l)r+=u(l);else{var c=u(l.prefix),h=l.pattern;l.repeat&&(h+="(?:"+c+h+")*"),r+=h=l.optional?c?"(?:"+c+"("+h+"))?":"("+h+")?":c+"("+h+")"}}return n||(r=(s?r.slice(0,-2):r)+"(?:\\/(?=$))?"),r+=i?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+r,f(e))}function g(e,n,i){return t(n=n||[])?i||(i={}):(i=n,n=[]),e instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return p(t,e)}(e,n):t(e)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(g(t[r],e,n).source);return p(new RegExp("(?:"+i.join("|")+")",f(n)),e)}(e,n,i):function(t,e,n){for(var i=l(t),r=d(i,n),o=0;o<i.length;o++)"string"!=typeof i[o]&&e.push(i[o]);return p(r,e)}(e,n,i)}e.parse=n,e.compile=r,e.tokensToFunction=o,e.tokensToRegExp=s;var m=O;O.default=O,O.Context=A,O.Route=k,O.sameOrigin=F;var y,v,_,x="undefined"!=typeof document,b="undefined"!=typeof window,w="undefined"!=typeof history,E="undefined"!=typeof process,S=x&&document.ontouchstart?"touchstart":"click",C=b&&!(!window.history.location&&!window.location),I=!0,M=!0,L="",T=!1,P=!1;function O(t,e){if("function"==typeof t)return O("*",t);if("function"==typeof e)for(var n=new k(t),i=1;i<arguments.length;++i)O.callbacks.push(n.middleware(arguments[i]));else"string"==typeof t?O["string"==typeof e?"redirect":"show"](t,e):O.start(t)}function R(t){return"string"!=typeof t?t:M?decodeURIComponent(t.replace(/\+/g," ")):t}function A(t,e){var n=j();"/"===t[0]&&0!==t.indexOf(n)&&(t=n+(P?"#!":"")+t);var i=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(n,"")||"/",P&&(this.path=this.path.replace("#!","")||"/"),this.title=x&&_.document.title,this.state=e||{},this.state.path=t,this.querystring=~i?R(t.slice(i+1)):"",this.pathname=R(~i?t.slice(0,i):t),this.params={},this.hash="",!P){if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=this.pathname=r[0],this.hash=R(r[1])||"",this.querystring=this.querystring.split("#")[0]}}function k(t,n){(n=n||{}).strict=n.strict||T,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=e(this.path,this.keys=[],n)}O.callbacks=[],O.exits=[],O.current="",O.len=0,O.base=function(t){if(0===arguments.length)return L;L=t},O.strict=function(t){if(0===arguments.length)return T;T=t},O.start=function(t){if(t=t||{},!y&&(y=!0,_=t.window||b&&window,!1===t.dispatch&&(I=!1),!1===t.decodeURLComponents&&(M=!1),!1!==t.popstate&&b&&_.addEventListener("popstate",N,!1),!1!==t.click&&x&&_.document.addEventListener(S,D,!1),(P=!!t.hashbang)&&b&&!w&&_.addEventListener("hashchange",N,!1),I)){var e;if(C){var n=_.location;e=P&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:P?n.search+n.hash:n.pathname+n.search+n.hash}O.replace(e,null,!0,I)}},O.stop=function(){y&&(O.current="",O.len=0,y=!1,x&&_.document.removeEventListener(S,D,!1),b&&_.removeEventListener("popstate",N,!1),b&&_.removeEventListener("hashchange",N,!1))},O.show=function(t,e,n,i){var r=new A(t,e),o=v;return v=r,O.current=r.path,!1!==n&&O.dispatch(r,o),!1!==r.handled&&!1!==i&&r.pushState(),r},O.back=function(t,e){O.len>0?(w&&_.history.back(),O.len--):t?setTimeout((function(){O.show(t,e)})):setTimeout((function(){O.show(j(),e)}))},O.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&O(t,(function(t){setTimeout((function(){O.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){O.replace(t)}),0)},O.replace=function(t,e,n,i){var r=new A(t,e),o=v;return v=r,O.current=r.path,r.init=n,r.save(),!1!==i&&O.dispatch(r,o),r},O.dispatch=function(t,e){var n=0,i=0;function r(){var e=O.callbacks[n++];if(t.path===O.current)return e?void e(t,r):function(t){if(t.handled)return;var e;e=P?C&&j()+_.location.hash.replace("#!",""):C&&_.location.pathname+_.location.search;if(e===t.canonicalPath)return;O.stop(),t.handled=!1,C&&(_.location.href=t.canonicalPath)}(t);t.handled=!1}e?function t(){var n=O.exits[i++];if(!n)return r();n(e,t)}():r()},O.exit=function(t,e){if("function"==typeof t)return O.exit("*",t);for(var n=new k(t),i=1;i<arguments.length;++i)O.exits.push(n.middleware(arguments[i]))},O.Context=A,A.prototype.pushState=function(){O.len++,w&&_.history.pushState(this.state,this.title,P&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},A.prototype.save=function(){w&&"file:"!==_.location.protocol&&_.history.replaceState(this.state,this.title,P&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},O.Route=k,k.prototype.middleware=function(t){var e=this;return function(n,i){if(e.match(n.path,n.params))return t(n,i);i()}},k.prototype.match=function(t,e){var n=this.keys,i=t.indexOf("?"),r=~i?t.slice(0,i):t,o=this.regexp.exec(decodeURIComponent(r));if(!o)return!1;for(var s=1,a=o.length;s<a;++s){var l=n[s-1],c=R(o[s]);void 0===c&&hasOwnProperty.call(e,l.name)||(e[l.name]=c)}return!0};var N=function(){var t=!1;if(b)return x&&"complete"===document.readyState?t=!0:window.addEventListener("load",(function(){setTimeout((function(){t=!0}),0)})),function(e){if(t)if(e.state){var n=e.state.path;O.replace(n,e.state)}else if(C){var i=_.location;O.show(i.pathname+i.hash,void 0,void 0,!1)}}}();function D(t){if(1===function(t){return t=t||b&&window.event,null==t.which?t.button:t.which}(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){e=n[r];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var o="object"===i(e.href)&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var s=e.getAttribute("href");if((P||!function(t){if(!C)return!1;var e=_.location;return t.pathname===e.pathname&&t.search===e.search}(e)||!e.hash&&"#"!==s)&&!(s&&s.indexOf("mailto:")>-1)&&!(o?e.target.baseVal:e.target)&&(o||F(e.href))){var a=o?e.href.baseVal:e.pathname+e.search+(e.hash||"");a="/"!==a[0]?"/"+a:a,E&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var l=a,c=j();0===a.indexOf(c)&&(a=a.substr(L.length)),P&&(a=a.replace("#!","")),c&&l===a||(t.preventDefault(),O.show(l))}}}}}function F(t){if(!t||!C)return!1;var e=function(t){if("function"==typeof URL&&C)return new URL(t,location.toString());if(x){var e=document.createElement("a");return e.href=t,e}}(t),n=_.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&n.port===e.port}function j(){if(L)return L;var t=b&&_&&_.location;return b&&P&&t&&"file:"===t.protocol?t.pathname:L}return O.sameOrigin=F,m})),this};const o=(new r).dispatch().page},686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});n(4916),n(1539),n(9714),n(6977),n(5306),n(9600),n(2526),n(1817),n(2165),n(6992),n(8783),n(3948);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}t=n.hmd(t);var r=function(){};r.prototype.dispatch=function(){var e,n,r;return e=this,n="sprintf",r=function(){var t=function(){if(!arguments||arguments.length<1)throw new Error("sprintf: ERROR: not enough arguments");for(var t,e=0,n="",r=arguments[e++];t=/^([^%]*)%(?:(\d+)\$|\((.*?)\))?([#0 +'-]+)?(\*|\d+)?(\.\*|\.\d+)?([%diouxXfFeEcs])((?:.|[\r\n])*)$/.exec(r);){var o,s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],p=t[7],f=t[8];if("%"===p)o="%";else{var d,g=" ",m=!0;c?(c.indexOf("0")>=0&&(g="0"),c.indexOf("-")>=0&&(g=" ",m=!1)):c="";var y=-1;if(u)if("*"===u){if((d=e++)>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");y=arguments[d]}else y=parseInt(u,10);var v=-1;if(h)if(".*"===h){if((d=e++)>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");v=arguments[d]}else v=parseInt(h.substring(1),10);if(d=e++,a){if((d=parseInt(a,10))>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");o=arguments[d]}else if(l){if("object"!==i(arguments[1]))throw new Error("sprintf: ERROR: invalid non-object arguments for named argument");if(void 0===(o=arguments[1][l]))throw new Error("sprintf: ERROR: invalid undefined value for named argument")}else{if(d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");o=arguments[d]}var _="";switch(p){case"d":case"i":"number"!=typeof o&&(o=0),o=o.toString(10),c.indexOf("#")>=0&&o>=0&&(o="+"+o),c.indexOf(" ")>=0&&o>=0&&(o=" "+o);break;case"b":"number"!=typeof o&&(o=0),o=o.toString(2);break;case"o":"number"!=typeof o&&(o=0),o=o.toString(8);break;case"u":"number"!=typeof o&&(o=0),o=(o=Math.abs(o)).toString(10);break;case"x":"number"!=typeof o&&(o=0),o=o.toString(16).toLowerCase(),c.indexOf("#")>=0&&(_="0x");break;case"X":"number"!=typeof o&&(o=0),o=o.toString(16).toUpperCase(),c.indexOf("#")>=0&&(_="0X");break;case"f":case"F":if("number"!=typeof o&&(o=0),o=0+o,v>-1&&(o.toFixed?o=o.toFixed(v):(o=Math.round(o*Math.pow(10,v))/Math.pow(10,v),o=(o+="0000000000").substr(0,o.indexOf(".")+v+1))),o=""+o,c.indexOf("'")>=0)for(var x=0,b=o.length-1-3;b>=0;b-=3)o=o.substring(0,b)+(0===x?".":",")+o.substring(b),x=(x+1)%2;break;case"e":case"E":if("number"!=typeof o&&(o=0),o=0+o,v>-1){if(!o.toExponential)throw new Error("sprintf: ERROR: toExponential() method not supported");o=o.toExponential(v)}o=""+o,"E"===p&&(o=o.replace(/e\+/,"E+"));break;case"c":"number"!=typeof o&&(o=0),o=String.fromCharCode(o);break;case"s":"string"!=typeof o&&(o=String(o)),v>-1&&(o=o.substr(0,v));break;default:throw new Error('sprintf: ERROR: invalid conversion character "'+p+'"')}var w=y-o.toString().length-_.toString().length;if(w>0){var E=new Array(w+1);m?o=E.join(g)+o:o+=E.join(g)}o=_+o}n=n+s+o,r=f}return n+r};return t.version={text:"1.2.3",major:1,minor:2,micro:3},t},"function"==typeof define?define(n,(function(){return r()})):"object"===i(t)&&"object"===i(t.exports)?t.exports=r():e[n]=r(),this};const o=(new r).dispatch().sprintf},3842:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const s=i+1;if(s<this.length&&n(e[s],o)<0&&(i=s,o=e[s]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?kt:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function u(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function m(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},x={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,x);var b=function(){},w=function(){},E=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new v("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[b,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},C.DimensionalComparator.get=function(){return I},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return _.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(S,C);var I=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};I.prototype.compare=function(t,e){var n=t,i=e,r=I.compare(n.x,i.x);if(0!==r)return r;var o=I.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:I.compare(n.z,i.z)},I.prototype.interfaces_=function(){return[E]},I.prototype.getClass=function(){return I},I.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var M=function(){};M.prototype.create=function(){},M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M};var L=function(){},T={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new v("Unknown location value: "+t)},T.INTERIOR.get=function(){return 0},T.BOUNDARY.get=function(){return 1},T.EXTERIOR.get=function(){return 2},T.NONE.get=function(){return-1},Object.defineProperties(L,T);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},O=function(){},R={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}},O.average=function(t,e){return(t+e)/2},R.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,R);var A=function(t){this.str=t};A.prototype.append=function(t){this.str+=t},A.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},A.prototype.toString=function(t){return this.str};var k=function(t){this.value=t};k.prototype.intValue=function(){return this.value},k.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},k.isNaN=function(t){return Number.isNaN(t)};var N=function(){};N.isWhitespace=function(t){return t<=32&&t>=0||127===t},N.toUpperCase=function(t){return t.toUpperCase()};var D=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},D.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=D.magnitude(n._hi),r=D.TEN.pow(i);(n=n.divide(r)).gt(D.TEN)?(n=n.divide(D.TEN),i+=1):n.lt(D.ONE)&&(n=n.multiply(D.TEN),i-=1);for(var o=i+1,s=new A,a=D.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var u=!1,h=0;c>9?(u=!0,h="9"):h="0"+c,s.append(h),n=n.subtract(D.valueOf(c)).multiply(D.TEN),u&&n.selfAdd(D.TEN);var p=!0,f=D.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-l&&(p=!1),!p)break}return e[0]=i,s.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},D.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(t){return this.le(t)?this:t},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,l=null,c=null,u=null,h=null;return l=this._hi/n,h=(r=(c=D.SPLIT*l)-(r=c-l))*(s=(h=D.SPLIT*n)-(s=h-n))-(u=l*n)+r*(a=n-s)+(o=l-r)*s+o*a,h=l+(c=(this._hi-u-h+this._lo-l*i)/n),this._hi=h,this._lo=l-h+c,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,l=null;return n=(o=this._hi/t._hi)-(e=(s=D.SPLIT*o)-(e=s-o)),l=e*(i=(l=D.SPLIT*t._hi)-(i=l-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,s=(this._hi-a-l+this._lo-o*t._lo)/t._hi,new D(l=o+s,o-l+s)}if("number"==typeof arguments[0]){var c=arguments[0];return _.isNaN(c)?D.createNaN():D.copy(this).selfDivide(c,0)}},D.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},D.prototype.pow=function(t){if(0===t)return D.valueOf(1);var e=new D(this),n=D.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new D(t,e)},D.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},D.prototype.max=function(t){return this.ge(t)?this:t},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=D.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),i=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],c=arguments[1],u=null,h=null,p=null,f=null,d=null,g=null,m=null;f=this._hi+l,h=this._lo+c,d=f-(g=f-this._hi),p=h-(m=h-this._lo);var y=(u=f+(g=(d=l-g+(this._hi-d))+h))+(g=(p=c-m+(this._lo-p))+(g+(f-u))),v=g+(u-y);return this._hi=y,this._lo=v,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,l=null,c=null;r=(l=D.SPLIT*this._hi)-this._hi,c=D.SPLIT*n,r=l-r,o=this._hi-r,s=c-n;var u=(l=this._hi*n)+(c=r*(s=c-s)-l+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),h=c+(r=l-u);return this._hi=u,this._lo=h,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new D(t,e)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var t=arguments[0];return t.isNaN()?D.createNaN():D.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?D.createNaN():D.copy(this).selfMultiply(e,0)}},D.prototype.isNaN=function(){return _.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var t=D.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+D.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+D.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},D.prototype.reciprocal=function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;e=(r=1/this._hi)-(t=(o=D.SPLIT*r)-(t=o-r)),n=(a=D.SPLIT*this._hi)-this._hi;var l=r+(o=(1-(s=r*this._hi)-(a=t*(n=a-n)-s+t*(i=this._hi-n)+e*n+e*i)-r*this._lo)/this._hi);return new D(l,r-l+o)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=D.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},D.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var t=arguments[0];return D.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return D.copy(this).selfAdd(e)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof D){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},D.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[e,b,w]},D.prototype.getClass=function(){return D},D.sqr=function(t){return D.valueOf(t).selfMultiply(t)},D.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return D.parse(t)}if("number"==typeof arguments[0])return new D(arguments[0])},D.sqrt=function(t){return D.valueOf(t).sqrt()},D.parse=function(t){for(var e=0,n=t.length;N.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new D,s=0,a=0,l=0;!(e>=n);){var c=t.charAt(e);if(e++,N.isDigit(c)){var u=c-"0";o.selfMultiply(D.TEN),o.selfAdd(u),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{l=k.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-l;if(0===f)p=o;else if(f>0){var d=D.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=D.TEN.pow(-f);p=o.multiply(g)}return i?p.negate():p},D.createNaN=function(){return new D(_.NaN,_.NaN)},D.copy=function(t){return new D(t)},D.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},D.stringOfChar=function(t,e){for(var n=new A,i=0;i<e;i++)n.append(t);return n.toString()},F.PI.get=function(){return new D(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new D(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new D(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new D(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new D(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return D.valueOf(10)},F.ONE.get=function(){return D.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,F);var j=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var i=j.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=D.valueOf(e.x).selfAdd(-t.x),o=D.valueOf(e.y).selfAdd(-t.y),s=D.valueOf(n.x).selfAdd(-e.x),a=D.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},j.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,i){var r=D.valueOf(i.y).selfSubtract(n.y).selfMultiply(D.valueOf(e.x).selfSubtract(t.x)),o=D.valueOf(i.x).selfSubtract(n.x).selfMultiply(D.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=D.valueOf(i.x).selfSubtract(n.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),l=D.valueOf(i.y).selfSubtract(n.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(l).selfDivide(s).doubleValue(),u=D.valueOf(t.x).selfAdd(D.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=D.valueOf(e.x).selfSubtract(t.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),p=D.valueOf(e.y).selfSubtract(t.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=D.valueOf(n.y).selfAdd(D.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new S(u,d)},j.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return j.signum(s);i=r+o}else{if(!(r<0))return j.signum(s);if(o>=0)return j.signum(s);i=-r-o}var a=j.DP_SAFE_EPSILON*i;return s>=a||-s>=a?j.signum(s):2},j.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,B);var G=function(){},z={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};z.X.get=function(){return 0},z.Y.get=function(){return 1},z.Z.get=function(){return 2},z.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[w]},G.prototype.getClass=function(){return G},Object.defineProperties(G,z);var U=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(U),X=function(){};X.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},X.getProperty=function(t){return{"line.separator":"\n"}[t]};var V=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2];this.x=l,this.y=c,this.w=u}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,m=p.x-h.x,y=h.x*p.y-p.x*h.y,v=f.y-d.y,_=d.x-f.x,x=f.x*d.y-d.x*f.y;this.x=m*x-_*y,this.y=v*y-g*x,this.w=g*_-v*m}};V.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},V.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},V.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},V.prototype.interfaces_=function(){return[]},V.prototype.getClass=function(){return V},V.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,u=r*l-a*o,h=(o*c-l*s)/u,p=(a*s-r*c)/u;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(p)||_.isInfinite(p))throw new q;return new S(h,p)};var Y=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}},H={serialVersionUID:{configurable:!0}};Y.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Y.prototype.equals=function(t){if(!(t instanceof Y))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Y.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Y;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new Y(e,i,n,r)},Y.prototype.isNull=function(){return this._maxx<this._minx},Y.prototype.getMaxX=function(){return this._maxx},Y.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Y){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},Y.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},Y.prototype.getMinY=function(){return this._miny},Y.prototype.getMinX=function(){return this._minx},Y.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Y.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Y.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Y.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Y.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Y.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Y.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Y.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Y.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Y.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Y.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},Y.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Y.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Y.prototype.getMaxY=function(){return this._maxy},Y.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Y.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},Y.prototype.interfaces_=function(){return[b,e]},Y.prototype.getClass=function(){return Y},Y.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),c=Math.min(i.x,r.x),u=Math.max(i.x,r.x);return!(c>l||u<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),c=Math.min(i.y,r.y),u=Math.max(i.y,r.y),c>l||u<a))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Y,H);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Z=function(t){this.geometryFactory=t||new ye};Z.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=W.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=W.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],K[n]&&(e=K[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Z.prototype.write=function(t){return this.extractGeometry(t)},Z.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"};var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(W.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(W.trimParens,"$1"),n=K.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Z(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new A;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Y(this._inputLines[0][0],this._inputLines[0][1]),n=new Y(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,Y.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=V.intersection(t,n,i,r)}catch(s){if(!(s instanceof q))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=j.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);X.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&X.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new S(t),o=new S(e),s=new S(n),a=new S(i),l=new S;this.normalizeToEnvCentre(r,o,s,a,l);var c=this.safeHCoordinateIntersection(r,o,s,a);return c.x+=l.x,c.y+=l.y,c},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=Y.intersects(e,n,i),s=Y.intersects(e,n,r),a=Y.intersects(i,r,e),l=Y.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,c=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,f=((o>c?o:c)+(a<h?a:h))/2,d=((s>u?s:u)+(l<p?l:p))/2;r.x=f,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!Y.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(i,r,e),l=at.orientationIndex(i,r,n);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(i,r,o,s)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ot.signOfDet2x2(r,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==L.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?L.BOUNDARY:this._crossingCount%2==1?L.INTERIOR:L.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),n=new S,i=new S,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var l=o[a],c=o[a-1];if(s.countSegment(l,c),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(P(arguments[0],G)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new S,c=new S,u=new S;s.getCoordinate(0,c),s.getCoordinate(1,u);var h=c.x;u.x-=h;for(var p=0,f=1;f<a-1;f++)l.y=c.y,c.x=u.x,c.y=u.y,s.getCoordinate(f+1,u),u.x-=h,p+=c.x*(l.y-u.y);return p/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i);if(n.equals(i))return at.distancePointLine(i,t,e);var r=!1;if(Y.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?O.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==L.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new S;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,l=i.y,c=a-r,u=l-o;n+=Math.sqrt(c*c+u*u),r=a,o=l}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var l=t[s],c=t[a];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var u=at.computeOrientation(l,n,c);return 0===u?l.x>c.x:u>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var u=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l;return Math.abs(u)*Math.sqrt(l)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return at.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return at.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,lt);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var ut=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(t){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ut))return!1;var n=e;return this.equalsExact(n)}},ut.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ut.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Y(this._envelope)},ut.prototype.setSRID=function(t){this._SRID=t},ut.prototype.setUserData=function(t){this._userData=t},ut.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[w,b,e]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ut.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ut,ht);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return mt},gt.EndPointBoundaryNodeRule.get=function(){return yt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new mt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var mt=function(){};mt.prototype.isInBoundary=function(t){return t%2==1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var xt=function(){};xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(i.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],l);else for(var u=a.length-1;u>=0;u--)this.add(a[u],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var _=m;_!==y;_+=v)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),It=function(){},Mt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Mt.ForwardComparator.get=function(){return Lt},Mt.BidirectionalComparator.get=function(){return Tt},Mt.coordArrayType.get=function(){return new Array(0).fill(null)},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},It.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(It.indexOf(i,e)<0)return i}return null},It.scroll=function(t,e){var n=It.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);X.arraycopy(t,n,i,0,t.length-n),X.arraycopy(t,0,i,t.length-n,n),X.arraycopy(i,0,t,0,t.length)},It.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},It.intersection=function(t,e){for(var n=new Ct,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},It.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},It.removeRepeatedPoints=function(t){return It.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},It.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},It.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},It.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new S(i[r+l])},It.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},It.envelope=function(t){for(var e=new Y,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},It.toCoordinateArray=function(t){return t.toArray(It.coordArrayType)},It.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},It.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},It.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},It.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},It.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},It.extract=function(t,e,n){e=O.clamp(e,0,t.length);var i=(n=O.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(It,Mt);var Lt=function(){};Lt.prototype.compare=function(t,e){return It.compare(t,e)},Lt.prototype.interfaces_=function(){return[E]},Lt.prototype.getClass=function(){return Lt};var Tt=function(){};Tt.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=It.compare(n,i);return It.isEqualReversed(n,i)?0:r},Tt.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=It.increasingDirection(n),o=It.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var c=n[s].compareTo(i[a]);if(0!==c)return c;s+=r,a+=o}return 0},Tt.prototype.interfaces_=function(){return[E]},Tt.prototype.getClass=function(){return Tt};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){};var Rt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new At(this)},e}(o),At=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(bt),kt=0;(h.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:kt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:kt,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===c(a(a(t)))){var e=u(a(a(t)));1===s(e)?(l(a(t),kt),l(e,kt),l(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),kt),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=c(a(a(t)));1===s(n)?(l(a(t),kt),l(n,kt),l(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),kt),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=kt},h.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Nt=function(){};Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new r},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Dt(this)};var Dt=function(t){this.treeSet_=t,this.position_=0};Dt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Dt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Dt.prototype.remove=function(){throw new r};var Ft=function(){};Ft.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Ft.asList=function(t){for(var e=new Et,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var jt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new v("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(N.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(jt,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var zt=function(){};zt.prototype.filter=function(t,e){},zt.prototype.isDone=function(){},zt.prototype.isGeometryChanged=function(){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Ut=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Y,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Ft.asList(this._geometries)),n=new f(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),c=r.getGeometryN(a),u=l.compareToSameClass(c,i);if(0!==u)return u;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(P(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],zt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Gt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(P(arguments[0],ct)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ut),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Xt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Ut),Xt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Xt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Xt.prototype.getBoundary=function(){return this._geom instanceof Zt?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Xt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Xt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Xt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return It.toCoordinateArray(e)},Xt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Vt,this._endpointMap.put(t,e)),e.count++},Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.getBoundary=function(){return 1===arguments.length?new Xt(arguments[0]).getBoundary():2===arguments.length?new Xt(arguments[0],arguments[1]).getBoundary():void 0};var Vt=function(){this.count=null};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Yt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(Yt.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+Yt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Yt.split=function(t,e){for(var n=e.length,i=new Et,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),l=0;l<a.length;l++)a[l]=i.get(l);return a},Yt.toString=function(){if(1===arguments.length){var t=arguments[0];return Yt.SIMPLE_ORDINATE_FORMAT.format(t)}},Yt.spaces=function(t){return Yt.chars(" ",t)},Ht.NEWLINE.get=function(){return X.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Yt,Ht);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||_.isNaN(s)&&_.isNaN(a)))return!1}return!0},Wt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Wt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Wt.copy(e,r-1,i,o,1);return i},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Wt.swap(t,i,e-i)},Wt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Wt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Wt.copyCoord(t,e+o,n,i+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new A;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Yt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Wt.copy(e,0,i,0,r);for(var o=r;o<n;o++)Wt.copy(e,0,i,o,1);return i};var Zt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Y:this._points.expandEnvelope(new Y)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(P(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],zt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Xt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ut),$t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Y;var t=new Y;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],zt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Gt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ut),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),c=t.getY(a);if(l!==o==(c!==s))return!1;o=l,s=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);X.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=It.minCoordinate(e.getCoordinates());It.scroll(i,r),X.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&It.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,i);if(0!==a)return a;for(var l=this.getNumInteriorRing(),c=r.getNumInteriorRing(),u=0;u<l&&u<c;){var h=this.getInteriorRingN(u),p=r.getInteriorRingN(u),f=h.compareToSameClass(p,i);if(0!==f)return f;u++}return u<l?1:u<c?-1:0}},e.prototype.apply=function(t){if(P(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,zt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,Gt))t.filter(this);else if(P(t,ct)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ut),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Ut),ee=function(t){function e(e,n){e instanceof S&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Zt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Ut),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Ut?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Zt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Et,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Et,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Zt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var l=0;l<s;l++)this._coordinates[l]=new S}},ce={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new A(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[G,e]},le.prototype.getClass=function(){return le},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ce);var ue=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ue.prototype.readResolve=function(){return ue.instance()},ue.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(P(arguments[0],G))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ue.prototype.interfaces_=function(){return[M,e]},ue.prototype.getClass=function(){return ue},ue.instance=function(){return ue.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ue},Object.defineProperties(ue,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new k(n).compareTo(new k(i))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,b]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},me={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},me.serialVersionUID.get=function(){return-552860263173159e4},me.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,me),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ye=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],M)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Zt(this.getCoordinateSequenceFactory().create(t),this):P(t,G)?new Zt(t,this):void 0:new Zt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(ye.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(ye.toPolygonArray(t));if(a instanceof Zt)return this.createMultiLineString(ye.toLineStringArray(t));if(a instanceof Kt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],G))return new Kt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(P(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Wt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ue.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new ye};xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!be[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new S(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=be.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(be.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(we.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=we.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(we[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new xe(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ce=function(){},Ie={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Ie.ON.get=function(){return 0},Ie.LEFT.get=function(){return 1},Ie.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Ie),(g.prototype=new Error).name="EmptyStackException",(m.prototype=new wt).add=function(t){return this.array_.push(t),!0},m.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},m.prototype.push=function(t){return this.array_.push(t),t},m.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},m.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},m.prototype.empty=function(){return 0===this.array_.length},m.prototype.isEmpty=function(){return this.empty()},m.prototype.search=function(t){return this.array_.indexOf(t)},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Me=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Me.prototype.getCoordinate=function(){return this._minCoord},Me.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Me.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Me.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Ce.LEFT;return n[e].y<n[e+1].y&&(i=Ce.RIGHT),i},Me.prototype.getEdge=function(){return this._orientedDe},Me.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Me.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Me.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Le=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new S(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Te=function(){this.array_=[]};Te.prototype.addLast=function(t){this.array_.push(t)},Te.prototype.removeFirst=function(){return this.array_.shift()},Te.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Me};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Le("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Rt,n=new Te,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Y,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new m;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[b]},Pe.prototype.getClass=function(){return Pe};var Oe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=s,this.location[Ce.RIGHT]=a}};Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==L.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===L.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=L.NONE,e[Ce.RIGHT]=L.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===L.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ce.LEFT];this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Oe.prototype.toString=function(){var t=new A;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[Ce.LEFT])),t.append(L.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:L.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===L.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Oe(n.elt[0]),this.elt[1]=new Oe(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Oe(L.NONE),this.elt[1]=new Oe(L.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Oe(o,s,a),this.elt[1]=new Oe(o,s,a)}else if(4===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new Oe(L.NONE,L.NONE,L.NONE),this.elt[1]=new Oe(L.NONE,L.NONE,L.NONE),this.elt[l].setLocations(c,u,h)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new A;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(L.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ae=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Re(L.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ae.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Ae.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ae.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Le("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Le("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ae.prototype.getLinearRing=function(){return this._ring},Ae.prototype.getCoordinate=function(t){return this._pts.get(t)},Ae.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ae.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Ae.prototype.isHole=function(){return this._isHole},Ae.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ae.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ae.prototype.addHole=function(t){this._holes.add(t)},Ae.prototype.isShell=function(){return null===this._shell},Ae.prototype.getLabel=function(){return this._label},Ae.prototype.getEdges=function(){return this._edges},Ae.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ae.prototype.getShell=function(){return this._shell},Ae.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT);if(n===L.NONE)return null;if(this._label.getLocation(e)===L.NONE)return this._label.setLocation(e,n),null}},Ae.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ae.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var ke=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ae),Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ke(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ae),De=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};De.prototype.setVisited=function(t){this._isVisited=t},De.prototype.setInResult=function(t){this._isInResult=t},De.prototype.isCovered=function(){return this._isCovered},De.prototype.isCoveredSet=function(){return this._isCoveredSet},De.prototype.setLabel=function(t){this._label=t},De.prototype.getLabel=function(){return this._label},De.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},De.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},De.prototype.isInResult=function(){return this._isInResult},De.prototype.isVisited=function(){return this._isVisited},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,L.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=L.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==L.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===L.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=L.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case L.BOUNDARY:n=L.INTERIOR;break;case L.INTERIOR:default:n=L.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),je=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&e.add(i)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Be.NE:Be.SE:i.y>=n.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var ze=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};ze.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},ze.prototype.getDy=function(){return this._dy},ze.prototype.getCoordinate=function(){return this._p0},ze.prototype.setNode=function(t){this._node=t},ze.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ze.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},ze.prototype.getDirectedCoordinate=function(){return this._p1},ze.prototype.getDx=function(){return this._dx},ze.prototype.getLabel=function(){return this._label},ze.prototype.getEdge=function(){return this._edge},ze.prototype.getQuadrant=function(){return this._quadrant},ze.prototype.getNode=function(){return this._node},ze.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ze.prototype.computeLabel=function(t){},ze.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ze.prototype.interfaces_=function(){return[b]},ze.prototype.getClass=function(){return ze};var Ue=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Le("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===L.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===L.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,L.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,L.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ce.LEFT&&(i=-1);var r=Ce.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===L.EXTERIOR&&e===L.INTERIOR?1:t===L.INTERIOR&&e===L.EXTERIOR?-1:0},e}(ze),qe=function(){};qe.prototype.createNode=function(t){return new Fe(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Xe=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new je(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};Xe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Xe.prototype.find=function(t){return this._nodes.find(t)},Xe.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},Xe.prototype.getNodeIterator=function(){return this._nodes.iterator()},Xe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Xe.prototype.debugPrintln=function(t){X.out.println(t)},Xe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===L.BOUNDARY},Xe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Xe.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&at.computeOrientation(t,e,i)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,i)},Xe.prototype.getEdgeEnds=function(){return this._edgeEndList},Xe.prototype.debugPrint=function(t){X.out.print(t)},Xe.prototype.getEdgeIterator=function(){return this._edges.iterator()},Xe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Xe.prototype.insertEdge=function(t){this._edges.add(t)},Xe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Xe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new Ue(n,!0),r=new Ue(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Xe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Xe.prototype.getNodes=function(){return this._nodes.values()},Xe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe},Xe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ve=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ve.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Ve.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Ve.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Le("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Ve.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Et,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Ve.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ve.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ne(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Ve.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Ve.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ve.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(i)&&at.isPointInRing(r,c.getCoordinates())&&(h=!0),h&&(null===o||s.contains(u))&&(o=l)}return o},Ve.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ve.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Xe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Et,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ye=function(){};Ye.prototype.getBounds=function(){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[Ye,e]},He.prototype.getClass=function(){return He};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ze=function(){};Ze.prototype.visitItem=function(t){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var $e=function(){};$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Ye,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof He&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ke){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof He?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ke?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof He),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(P(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var r=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var l=s.get(a);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Ke?this.query(r,l,o):l instanceof He?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var c=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),c)&&(f instanceof Ke?this.query(c,f,u):f instanceof He?u.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,r))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var i=new Et(t);Qe.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Et;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(P(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var a=arguments[0],l=arguments[1],c=arguments[2];t.prototype.query.call(this,a,l,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Et(t);Qe.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],c=null,u=new We;for(u.add(a);!u.isEmpty()&&l>0;){var h=u.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,c=h):h.expandToQueue(u,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new He(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Y(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=ln.relativeSign(e.x,n.x),r=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(i,r);case 1:return ln.compareValue(r,i);case 2:return ln.compareValue(r,-i);case 3:return ln.compareValue(-i,r);case 4:return ln.compareValue(-i,-r);case 5:return ln.compareValue(-r,-i);case 6:return ln.compareValue(-r,i);case 7:return ln.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[b]},cn.prototype.getClass=function(){return cn};var un=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};un.prototype.getSplitCoordinates=function(){var t=new Ct;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},un.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},un.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},un.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new k(e+1))}},un.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new S(e.coord))},un.prototype.iterator=function(){return this._nodeMap.values().iterator()},un.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},un.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},un.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new k(e[0])),i=r}},un.prototype.getEdge=function(){return this._edge},un.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},un.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new S(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new S(e.coord)),new dn(o,this._edge.getData())},un.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},un.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+r)},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new v("Cannot compute the octant for two identical points "+r);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new un(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new S(arguments[0].getIntersection(i));this.addIntersection(r,n)}},dn.prototype.toString=function(){return J.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new S(e,n),this.p1=new S(i,r)}},mn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var i=arguments[0];return at.orientationIndex(this.p0,this.p1,i)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=_.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return V.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,l=e*o/s}return new S(n-l,i+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[b,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},mn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,mn);var yn=function(){this.tempEnv1=new Y,this.tempEnv2=new Y,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Y(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],l=n._pts[i],c=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<u&&(i<h&&this.computeOverlapsInternal(t,u,n,i,h,o),h<r&&this.computeOverlapsInternal(t,u,n,h,r,o)),u<e&&(i<h&&this.computeOverlapsInternal(u,e,n,i,h,o),h<r&&this.computeOverlapsInternal(u,e,n,h,r,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new k(e));do{var i=_n.findChainEnd(t,e);n.add(new k(i)),e=i}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Be.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Be.quadrant(t[r-1],t[r])===i);)r++;return r-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Et,r=_n.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new vn(e,r[o],r[o+1],n);i.add(s)}return i}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xn=function(){};xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(bn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,Cn);var In=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Mn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};In.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},In.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=In.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},In.prototype.isShallowConcavity=function(t,e,n,i){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<i},In.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/In.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},In.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},In.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},In.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===In.DELETE;)e++;return e},In.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},In.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==In.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.simplify=function(t,e){return new In(t).simplify(e)},Mn.INIT.get=function(){return 0},Mn.DELETE.get=function(){return 1},Mn.KEEP.get=function(){return 1},Mn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(In,Mn);var Ln=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},Tn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ln.prototype.getCoordinates=function(){return this._ptList.toArray(Ln.COORDINATE_ARRAY_TYPE)},Ln.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ln.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ln.prototype.revere=function(){},Ln.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Ln.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ln.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Ln.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ln.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Tn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ln,Tn);var Pn=function(){},On={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Pn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var i=Pn.angle(e,t),r=Pn.angle(e,n);return Math.abs(r-i)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var i=Pn.angle(e,t),r=Pn.angle(e,n);return Pn.diff(i,r)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var i=Pn.angle(e,t),r=Pn.angle(e,n)-i;return r<=-Math.PI?r+Pn.PI_TIMES_2:r>Math.PI?r-Pn.PI_TIMES_2:r},On.PI_TIMES_2.get=function(){return 2*Math.PI},On.PI_OVER_2.get=function(){return Math.PI/2},On.PI_OVER_4.get=function(){return Math.PI/4},On.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},On.CLOCKWISE.get=function(){return at.CLOCKWISE},On.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Pn,On);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},An={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===Ce.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Ce.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),i=new gn;this.computeOffsetSegment(n,Ce.LEFT,this._distance,i);var r=new gn;this.computeOffsetSegment(n,Ce.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Sn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Sn.CAP_SQUARE:var l=new S;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var c=new S(i.p1.x+l.x,i.p1.y+l.y),u=new S(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(c),this._segList.addPt(u)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=V.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof q))throw t;o=new S(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,c=n.y-t.y,u=Math.atan2(c,l);i===at.CLOCKWISE?a<=u&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,u,i,r),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Pn.angle(r,this._seg0.p0),s=Pn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Pn.normalize(o+s),l=Pn.normalize(a+Math.PI),c=i*n,u=n-c*Math.abs(Math.sin(s)),h=r.x+c*Math.cos(l),p=r.y+c*Math.sin(l),f=new S(h,p),d=new gn(r,f),g=d.pointAlongOffset(1,u),m=d.pointAlongOffset(1,-u);this._side===Ce.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Rn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*n*o/a,c=r*n*s/a;i.p0.x=t.p0.x-c,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-c,i.p1.y=t.p1.y+l},Rn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,c=0,u=new S;c<s;){var h=e+o*c;u.x=t.x+r*Math.cos(h),u.y=t.y+r*Math.sin(h),this._segList.addPt(u),c+=l}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ln,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},An.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},An.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,An);var kn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};kn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&It.reverse(o),o},kn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=In.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ce.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=In.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},kn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Ce.RIGHT&&(i=-i);var r=In.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},kn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=In.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ce.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=In.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ce.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},kn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},kn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},kn.prototype.getBufferParameters=function(){return this._bufParams},kn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},kn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return kn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},kn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=In.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ce.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=In.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},kn.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Nn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Dn={DepthSegment:{configurable:!0}};Nn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof Ue){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),c=0;c<l.length-1;c++)if(this._seg.p0=l[c],this._seg.p1=l[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var u=s.getDepth(Ce.LEFT);this._seg.p0.equals(l[c])||(u=s.getDepth(Ce.RIGHT));var h=new Fn(this._seg,u);a.add(h)}}else if(P(arguments[2],wt)&&arguments[0]instanceof S&&P(arguments[1],wt))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Nn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Dn.DepthSegment.get=function(){return Fn},Object.defineProperties(Nn,Dn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[b]},Fn.prototype.getClass=function(){return Fn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,i){return t*i-e*n},jn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,l=n.y-o,c=i.y-o,u=s*c-a*l,h=t.x-r,p=t.y-o,f=(c*h-a*p)/u,d=(-l*h+s*p)/u;return e.z+f*(n.z-e.z)+d*(i.z-e.z)},jn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},jn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,l=e.y-r,c=2*jn.det(o,s,a,l),u=jn.det(s,o*o+s*s,l,a*a+l*l),h=jn.det(o,o*o+s*s,a,a*a+l*l);return new S(i-u/c,r+h/c)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new V(t.x+n/2,t.y+i/2,1),o=new V(t.x-i+n/2,t.y+n+i/2,1);return new V(r,o)},jn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new S(t.x+r*o,t.y+r*s)},jn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,c=r*l-o*a,u=o*s-i*l,h=i*a-r*s,p=c*c+u*u+h*h;return Math.sqrt(p)/2},jn.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new S(i,r)},jn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,l=(i*t.y+r*e.y+o*n.y)/s;return new S(a,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT;this._distance<0&&(e=-this._distance,n=Ce.RIGHT);var i=t.getExteriorRing(),r=It.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,L.EXTERIOR,L.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=It.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ce.opposite(n),L.INTERIOR,L.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),i=n.inCentre();return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=It.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new dn(t,new Re(0,L.BOUNDARY,e,n));this._curveList.add(i)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=Ce.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Zt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ne||t instanceof Ut)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var zn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};zn.prototype.next=function(){if(this._atStart)return this._atStart=!1,zn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof Ut?(this._subcollectionIterator=new zn(t),this._subcollectionIterator.next()):t},zn.prototype.remove=function(){throw new Error(this.getClass().getName())},zn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zn.prototype.interfaces_=function(){return[bt]},zn.prototype.getClass=function(){return zn},zn.isAtomic=function(t){return!(t instanceof Ut)};var Un=function(){this._geom=null;var t=arguments[0];this._geom=t};Un.prototype.locate=function(t){return Un.locate(t,this._geom)},Un.prototype.interfaces_=function(){return[Gn]},Un.prototype.getClass=function(){return Un},Un.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Un.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Un.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Un.isPointInRing(t,r))return!1}return!0},Un.containsPoint=function(t,e){if(e instanceof Qt)return Un.containsPointInPolygon(t,e);if(e instanceof Ut)for(var n=new zn(e);n.hasNext();){var i=n.next();if(i!==e&&Un.containsPoint(t,i))return!0}return!1},Un.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:Un.containsPoint(t,e)?L.INTERIOR:L.EXTERIOR};var qn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[L.NONE,L.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=L.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Ce.LEFT)!==L.NONE&&(e=i.getLocation(t,Ce.LEFT))}if(e===L.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ce.ON)===L.NONE&&a.setLocation(t,Ce.ON,r),a.isArea(t)){var l=a.getLocation(t,Ce.LEFT),c=a.getLocation(t,Ce.RIGHT);if(c!==L.NONE){if(c!==r)throw new Le("side location conflict",s.getCoordinate());l===L.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else et.isTrue(a.getLocation(t,Ce.LEFT)===L.NONE,"found single null side"),a.setLocation(t,Ce.RIGHT,r),a.setLocation(t,Ce.LEFT,r)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){X.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ce.LEFT);et.isTrue(i!==L.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ce.LEFT),l=s.getLocation(t,Ce.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===L.NONE&&(this._ptInAreaLocation[t]=Un.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new A;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===L.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var c=L.NONE;if(e[l])c=L.EXTERIOR;else{var u=s.getCoordinate();c=this.getLocation(l,u,t)}a.setAllLocationsIfNull(l,c)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Xn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Le("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Be.isNorthern(r)&&Be.isNorthern(o)?n:Be.isNorthern(r)||Be.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){X.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),i=t.getDepth(Ce.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Le("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a);l.setEdgeDepths(Ce.RIGHT,s),s=l.getDepth(Ce.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=L.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=L.INTERIOR;break}if(i.isInResult()){t=L.EXTERIOR;break}}}if(t===L.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===L.INTERIOR):(s.isInResult()&&(r=L.EXTERIOR),a.isInResult()&&(r=L.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(L.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==L.INTERIOR&&o!==L.BOUNDARY||this._label.setLocation(r,L.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qn),Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Xn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),Yn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Yn.prototype.compareTo=function(t){var e=t;return Yn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Yn.prototype.interfaces_=function(){return[b]},Yn.prototype.getClass=function(){return Yn},Yn.orientation=function(t){return 1===It.increasingDirection(t)},Yn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,c=i?0:n.length-1;;){var u=t[l].compareTo(n[c]);if(0!==u)return u;var h=(l+=r)===s,p=(c+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Hn=function(){this._edges=new Et,this._ocaMap=new h};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new Yn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new Yn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,i){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Zn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Zn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Zn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Zn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Zn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Zn.prototype.getLineIntersector=function(){return this._li},Zn.prototype.hasProperIntersection=function(){return this._hasProper},Zn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Zn.prototype.hasIntersection=function(){return this._hasIntersection},Zn.prototype.isDone=function(){return!1},Zn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Zn.prototype.interfaces_=function(){return[Wn]},Zn.prototype.getClass=function(){return Zn},Zn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[b]},$n.prototype.getClass=function(){return $n};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new S(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new ni(o,new Re(this.edge._label))},Kn.prototype.add=function(t,e,n){var i=new $n(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new k(e));do{var i=this.findChainEnd(t,e);n.add(new k(i)),e=i}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Be.quadrant(t[i-1],t[i])===n;)i++;return i-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Y,this.env2=new Y;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],c=arguments[5],u=this.pts[r],h=this.pts[o],p=s.pts[a],f=s.pts[l];if(o-r==1&&l-a==1)return c.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(u,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+l)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,c),g<l&&this.computeIntersectsForChain(r,d,s,g,l,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<l&&this.computeIntersectsForChain(d,o,s,g,l,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?L.EXTERIOR:L.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==L.EXTERIOR&&i!==L.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===L.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Y;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new S(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new A;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(De),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Re(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new Et,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Nn(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Pe;r.create(i),e.add(r)}}return Qe.sort(e,Qe.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Zn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new kn(n,this._bufParams),r=new Bn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Xe(new Vn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ve(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new Re(s));this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT);return e===L.INTERIOR&&n===L.EXTERIOR?1:e===L.EXTERIOR&&n===L.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new ye,n=new Et;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(P(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&X.out.println(n)}},ri.prototype.scale=function(){if(P(arguments[0],xt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var i=n.next();e.add(new dn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new S(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return It.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[xn]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},si={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(r,l,o,c);else if(4===arguments.length){var u=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(u===p&&h===f)return null;var d=u.getCoordinates()[h],g=u.getCoordinates()[h+1],m=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new ye},Object.defineProperties(oi,si);var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},li={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Y(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},li.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,li);var ci=function(){this.tempEnv1=new Y,this.selectedSegment=new gn};ci.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var ui=function(){this._index=null;var t=arguments[0];this._index=t},hi={HotPixelSnapAction:{configurable:!0}};ui.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new pi(e,n,i);return this._index.query(r,{interfaces_:function(){return[Ze]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},hi.HotPixelSnapAction.get=function(){return pi},Object.defineProperties(ui,hi);var pi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),fi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};fi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},fi.prototype.isDone=function(){return!1},fi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fi.prototype.interfaces_=function(){return[Wn]},fi.prototype.getClass=function(){return fi};var di=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};di.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof U))throw t;t.printStackTrace()}},di.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},di.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},di.prototype.findInteriorIntersections=function(t,e){var n=new fi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},di.prototype.computeVertexSnaps=function(){if(P(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},di.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new ui(this._noder.getIndex()),this.snapRound(t,this._li)},di.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},di.prototype.interfaces_=function(){return[xn]},di.prototype.getClass=function(){return di};var gi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gi.prototype.bufferFixedPrecision=function(t){var e=new ri(new di(new fe(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Le))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gi.precisionScaleFactor(this._argGeom,this._distance,n),r=new fe(i);this.bufferFixedPrecision(r)}},gi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new gi(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var r=arguments[1];return new gi(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new gi(arguments[0]);return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},gi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=O.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},mi.CAP_ROUND.get=function(){return Sn.CAP_ROUND},mi.CAP_BUTT.get=function(){return Sn.CAP_FLAT},mi.CAP_FLAT.get=function(){return Sn.CAP_FLAT},mi.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},mi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gi,mi);var yi=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};yi.prototype.getCoordinates=function(){return this._pt},yi.prototype.getCoordinate=function(t){return this._pt[t]},yi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},yi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},yi.prototype.getDistance=function(){return this._distance},yi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){};vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.computeDistance=function(){if(arguments[2]instanceof yi&&arguments[0]instanceof Zt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new gn,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yi&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1],l=arguments[2];vi.computeDistance(s.getExteriorRing(),a,l);for(var c=0;c<s.getNumInteriorRing();c++)vi.computeDistance(s.getInteriorRingN(c),a,l)}else if(arguments[2]instanceof yi&&arguments[0]instanceof ut&&arguments[1]instanceof S){var u=arguments[0],h=arguments[1],p=arguments[2];if(u instanceof Zt)vi.computeDistance(u,h,p);else if(u instanceof Qt)vi.computeDistance(u,h,p);else if(u instanceof Ut)for(var f=u,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);vi.computeDistance(g,h,p)}else p.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof yi&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m);y.setMinimum(v,m)}};var _i=function(t){this._maxPtDist=new yi,this._inputGeom=t||null},xi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_i.prototype.computeMaxMidpointDistance=function(t){var e=new wi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_i.prototype.computeMaxVertexDistance=function(t){var e=new bi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_i.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_i.prototype.getDistancePoints=function(){return this._maxPtDist},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i},xi.MaxPointDistanceFilter.get=function(){return bi},xi.MaxMidpointDistanceFilter.get=function(){return wi},Object.defineProperties(_i,xi);var bi=function(t){this._maxPtDist=new yi,this._minPtDist=new yi,this._geom=t||null};bi.prototype.filter=function(t){this._minPtDist.initialize(),vi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bi.prototype.getMaxPointDistance=function(){return this._maxPtDist},bi.prototype.interfaces_=function(){return[ft]},bi.prototype.getClass=function(){return bi};var wi=function(t){this._maxPtDist=new yi,this._minPtDist=new yi,this._geom=t||null};wi.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new S((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),vi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wi.prototype.isDone=function(){return!1},wi.prototype.isGeometryChanged=function(){return!1},wi.prototype.getMaxPointDistance=function(){return this._maxPtDist},wi.prototype.interfaces_=function(){return[zt]},wi.prototype.getClass=function(){return wi};var Ei=function(t){this._comps=t||null};Ei.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Ei.prototype.interfaces_=function(){return[Gt]},Ei.prototype.getClass=function(){return Ei},Ei.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ei.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Ut&&e.apply(new Ei(n)),n}};var Si=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Si.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zt&&this._lines.add(t)},Si.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Si.prototype.interfaces_=function(){return[ct]},Si.prototype.getClass=function(){return Si},Si.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Si.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Si.getLines(e,n))}},Si.getLines=function(){if(1===arguments.length){var t=arguments[0];return Si.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],xt)&&P(arguments[1],xt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();Si.getLines(i,e)}return e}if(arguments[0]instanceof ut&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=new Et;return r.apply(new Si(s,o)),s}if(arguments[0]instanceof ut&&P(arguments[1],xt)){var a=arguments[0],l=arguments[1];return a instanceof Zt?l.add(a):a.apply(new Si(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],xt)&&P(arguments[1],xt)){for(var c=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Si.getLines(p,c,u)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ut&&P(arguments[1],xt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new Si(f,d)),f}}};var Ci=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Ci.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return L.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===L.EXTERIOR)return L.EXTERIOR;if(i===L.BOUNDARY)return L.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===L.INTERIOR)return L.EXTERIOR;if(s===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Zt){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return L.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?at.isOnLine(a,c)?L.INTERIOR:L.EXTERIOR:L.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?L.INTERIOR:L.EXTERIOR}},Ci.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):L.EXTERIOR},Ci.prototype.intersects=function(t,e){return this.locate(t,e)!==L.EXTERIOR},Ci.prototype.updateLocationInfo=function(t){t===L.INTERIOR&&(this._isIn=!0),t===L.BOUNDARY&&this._numBoundaries++},Ci.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Ut)for(var l=new zn(e);l.hasNext();){var c=l.next();c!==e&&this.computeLocation(t,c)}},Ci.prototype.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:e instanceof Zt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?L.BOUNDARY:this._numBoundaries>0||this._isIn?L.INTERIOR:L.EXTERIOR)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ii=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._component=e,this._segIndex=n,this._pt=i}},Mi={INSIDE_AREA:{configurable:!0}};Ii.prototype.isInsideArea=function(){return this._segIndex===Ii.INSIDE_AREA},Ii.prototype.getCoordinate=function(){return this._pt},Ii.prototype.getGeometryComponent=function(){return this._component},Ii.prototype.getSegmentIndex=function(){return this._segIndex},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Mi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ii,Mi);var Li=function(t){this._pts=t||null};Li.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Li.prototype.interfaces_=function(){return[Gt]},Li.prototype.getClass=function(){return Li},Li.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Li.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Ut&&e.apply(new Li(n)),n}};var Ti=function(){this._locations=null;var t=arguments[0];this._locations=t};Ti.prototype.filter=function(t){(t instanceof Kt||t instanceof Zt||t instanceof Qt)&&this._locations.add(new Ii(t,0,t.getCoordinate()))},Ti.prototype.interfaces_=function(){return[Gt]},Ti.prototype.getClass=function(){return Ti},Ti.getLocations=function(t){var e=new Et;return t.apply(new Ti(e)),e};var Pi=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ci,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Pi.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ei.getPolygons(this._geom[e]);if(r.size()>0){var o=Ti.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var s=arguments[0],a=arguments[1],l=arguments[2],c=0;c<s.size();c++)for(var u=s.get(c),h=0;h<a.size();h++)if(this.computeContainmentDistance(u,a.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ii&&arguments[1]instanceof Qt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(L.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Ii(f,g),null}},Pi.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Pi.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Si.getLines(this._geom[0]),n=Si.getLines(this._geom[1]),i=Li.getPoints(this._geom[0]),r=Li.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Pi.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pi.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pi.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pi.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(i[o],i[o+1]).closestPoint(r);n[0]=new Ii(t,o,a),n[1]=new Ii(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var l=arguments[0],c=arguments[1],u=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),p=c.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new gn(h[f],h[f+1]),y=new gn(p[d],p[d+1]),v=m.closestPoints(y);u[0]=new Ii(l,f,v[0]),u[1]=new Ii(c,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pi.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ii(r,0,r.getCoordinate()),n[1]=new Ii(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pi.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pi.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.distance=function(t,e){return new Pi(t,e).distance()},Pi.isWithinDistance=function(t,e,n){return new Pi(t,e,n).distance()<=n},Pi.nearestPoints=function(t,e){return new Pi(t,e).nearestPoints()};var Oi=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Oi.prototype.getCoordinates=function(){return this._pt},Oi.prototype.getCoordinate=function(t){return this._pt[t]},Oi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Oi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Oi.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Oi.prototype.getDistance=function(){return this._distance},Oi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.computeDistance=function(){if(arguments[2]instanceof Oi&&arguments[0]instanceof Zt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new gn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Oi&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var a=arguments[0],l=arguments[1],c=arguments[2];Ri.computeDistance(a.getExteriorRing(),l,c);for(var u=0;u<a.getNumInteriorRing();u++)Ri.computeDistance(a.getInteriorRingN(u),l,c)}else if(arguments[2]instanceof Oi&&arguments[0]instanceof ut&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Zt)Ri.computeDistance(h,p,f);else if(h instanceof Qt)Ri.computeDistance(h,p,f);else if(h instanceof Ut)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Ri.computeDistance(m,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Oi&&arguments[0]instanceof gn&&arguments[1]instanceof S){var y=arguments[1],v=arguments[2],_=arguments[0].closestPoint(y);v.setMinimum(_,y)}};var Ai=function(){this._g0=null,this._g1=null,this._ptDist=new Oi,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},ki={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ai.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ai.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ai.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ai.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ai.prototype.computeOrientedDistance=function(t,e,n){var i=new Ni(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Di(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Ai.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.distance=function(){if(2===arguments.length)return new Ai(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Ai(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},ki.MaxPointDistanceFilter.get=function(){return Ni},ki.MaxDensifiedByFractionDistanceFilter.get=function(){return Di},Object.defineProperties(Ai,ki);var Ni=function(){this._maxPtDist=new Oi,this._minPtDist=new Oi,this._euclideanDist=new Ri,this._geom=null;var t=arguments[0];this._geom=t};Ni.prototype.filter=function(t){this._minPtDist.initialize(),Ri.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ni.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ni.prototype.interfaces_=function(){return[ft]},Ni.prototype.getClass=function(){return Ni};var Di=function(){this._maxPtDist=new Oi,this._minPtDist=new Oi,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Di.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,l=n.y+s*o,c=new S(a,l);this._minPtDist.initialize(),Ri.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Di.prototype.isDone=function(){return!1},Di.prototype.isGeometryChanged=function(){return!1},Di.prototype.getMaxPointDistance=function(){return this._maxPtDist},Di.prototype.interfaces_=function(){return[zt]},Di.prototype.getClass=function(){return Di};var Fi=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ji={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fi.prototype.checkMaximumDistance=function(t,e,n){var i=new Ai(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(r[0],r[1])+")"}},Fi.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fi.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fi.VERBOSE&&X.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fi.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Ut))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fi.prototype.getErrorIndicator=function(){return this._errorIndicator},Fi.prototype.checkMinimumDistance=function(t,e,n){var i=new Pi(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(r[0],r[1])+" )"}},Fi.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fi.prototype.getErrorLocation=function(){return this._errorLocation},Fi.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Si(e),i=Ei.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Fi.prototype.getErrorMessage=function(){return this._errMsg},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},ji.VERBOSE.get=function(){return!1},ji.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fi,ji);var Bi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Y(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Y(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Bi.prototype.checkDistance=function(){var t=new Fi(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bi.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bi.prototype.getErrorIndicator=function(){return this._errorIndicator},Bi.prototype.getErrorLocation=function(){return this._errorLocation},Bi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bi.prototype.report=function(t){if(!Bi.VERBOSE)return null;X.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bi.prototype.getErrorMessage=function(){return this._errorMsg},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isValidMsg=function(t,e,n){var i=new Bi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Bi.isValid=function(t,e,n){return!!new Bi(t,e,n).isValid()},Gi.VERBOSE.get=function(){return!1},Gi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bi,Gi);var zi=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};zi.prototype.getCoordinates=function(){return this._pts},zi.prototype.size=function(){return this._pts.length},zi.prototype.getCoordinate=function(t){return this._pts[t]},zi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},zi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},zi.prototype.setData=function(t){this._data=t},zi.prototype.getData=function(){return this._data},zi.prototype.toString=function(){return J.toLineString(new le(this._pts))},zi.prototype.interfaces_=function(){return[pn]},zi.prototype.getClass=function(){return zi};var Ui=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Ui.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ui.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Ui.prototype.getIntersectionSegments=function(){return this._intSegments},Ui.prototype.count=function(){return this._intersectionCount},Ui.prototype.getIntersections=function(){return this._intersections},Ui.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ui.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Ui.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ui.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Ui.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ui.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ui.prototype.interfaces_=function(){return[Wn]},Ui.prototype.getClass=function(){return Ui},Ui.createAllIntersectionsFinder=function(t){var e=new Ui(t);return e.setFindAllIntersections(!0),e},Ui.createAnyIntersectionFinder=function(t){return new Ui(t)},Ui.createIntersectionCounter=function(t){var e=new Ui(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qi=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qi.prototype.getIntersections=function(){return this._segInt.getIntersections()},qi.prototype.isValid=function(){return this.execute(),this._isValid},qi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ui(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Le(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.computeIntersections=function(t){var e=new qi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Xi=function t(){this._nv=null;var e=arguments[0];this._nv=new qi(t.toSegmentStrings(e))};Xi.prototype.checkValid=function(){this._nv.checkValid()},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next();e.add(new zi(i.getCoordinates(),i))}return e},Xi.checkValid=function(t){new Xi(t).checkValid()};var Vi=function(t){this._mapOp=t};Vi.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.map=function(t,e){return new Vi(e).map(t)};var Yi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Yi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Yi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yi.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ir.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Yi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Yi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Yi.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ir.isResultOfOp(i,e)&&e===Ir.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var Hi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ir.INTERSECTION)){var i=n.getLabel();Ir.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Hi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var Wi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new Et,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new Et;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Wi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wi.prototype.getInputGeometry=function(){return this._inputGeom},Wi.prototype.transformMultiLineString=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformMultiPoint=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.copy=function(t){return t.copy()},Wi.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},Wi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Zt)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Ut)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Wi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Zi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Zi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new S(o)),0===i&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Zi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zi.prototype.snapTo=function(t){var e=new Ct(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new S(r),!1)}},Zi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Zi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},Zi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $i=function(t){this._srcGeom=t||null},Ki={SNAP_PRECISION_FACTOR:{configurable:!0}};$i.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Ji(e,n).transform(this._srcGeom)},$i.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ji(t,n,!0).transform(this._srcGeom),r=i;return e&&P(r,Jt)&&(r=i.buffer(0)),r},$i.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$i.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},$i.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.snap=function(t,e,n){var i=new Array(2).fill(null),r=new $i(t);i[0]=r.snapTo(e,n);var o=new $i(e);return i[1]=o.snapTo(i[0],n),i},$i.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$i.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min($i.computeOverlaySnapTolerance(r),$i.computeOverlaySnapTolerance(o))}},$i.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$i.SNAP_PRECISION_FACTOR},$i.snapToSelf=function(t,e,n){return new $i(t).snapToSelf(e,n)},Ki.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($i,Ki);var Ji=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Zi(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wi),Qi=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qi.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qi.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qi.signExpBits(this._commonBits),this._isFirst=!1,null):Qi.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qi.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qi.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qi.signExpBits=function(t){return t>>52},Qi.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qi.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Qi.getBit(t,i)!==Qi.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new Qi,this._commonBitsY=new Qi};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[ft]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[zt]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new $i(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ir.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||X.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=$i.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return $i.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Ir.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Ir.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Ir.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Ir.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Ir.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Ir.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Ir.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Ir.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Ir.DIFFERENCE)};var sr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},lr={INSERT:{configurable:!0},DELETE:{configurable:!0}};ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[b]},ar.prototype.getClass=function(){return ar},lr.INSERT.get=function(){return 1},lr.DELETE.get=function(){return 2},Object.defineProperties(ar,lr);var cr=function(){};cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ur=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ur.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(ur.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},ur.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ur.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ur.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ur.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},ur.prototype.hasProperIntersection=function(){return this._hasProper},ur.prototype.hasIntersection=function(){return this._hasIntersection},ur.prototype.isDone=function(){return this._isDone},ur.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ur.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ur.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hr=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ur&&P(arguments[0],wt)&&P(arguments[1],wt)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof ur){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),pr=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},fr={NodeComparator:{configurable:!0}};pr.prototype.getMin=function(){return this._min},pr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pr.prototype.getMax=function(){return this._max},pr.prototype.toString=function(){return J.toLineString(new S(this._min,0),new S(this._max,0))},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},fr.NodeComparator.get=function(){return dr},Object.defineProperties(pr,fr);var dr=function(){};dr.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},dr.prototype.interfaces_=function(){return[E]},dr.prototype.getClass=function(){return dr};var gr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pr),mr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pr),yr=function(){this._leaves=new Et,this._root=null,this._level=0};yr.prototype.buildTree=function(){Qe.sort(this._leaves,new pr.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yr.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gr(t,e,n))},yr.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yr.prototype.printNode=function(t){X.out.println(J.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},yr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new mr(t.get(n),t.get(n+1));e.add(r)}}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){this._items=new Et};vr.prototype.visitItem=function(t){this._items.add(t)},vr.prototype.getItems=function(){return this._items},vr.prototype.interfaces_=function(){return[Ze]},vr.prototype.getClass=function(){return vr};var _r=function(){this._index=null;var t=arguments[0];if(!P(t,Jt))throw new v("Argument must be Polygonal");this._index=new wr(t)},xr={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_r.prototype.locate=function(t){var e=new st(t),n=new br(e);return this._index.query(t.y,t.y,n),e.getLocation()},_r.prototype.interfaces_=function(){return[Gn]},_r.prototype.getClass=function(){return _r},xr.SegmentVisitor.get=function(){return br},xr.IntervalIndexedGeometry.get=function(){return wr},Object.defineProperties(_r,xr);var br=function(){this._counter=null;var t=arguments[0];this._counter=t};br.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},br.prototype.interfaces_=function(){return[Ze]},br.prototype.getClass=function(){return br};var wr=function(){this._index=new yr;var t=arguments[0];this.init(t)};wr.prototype.init=function(t){for(var e=Si.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wr.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},wr.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Er=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ci,2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;L.NONE,i.getLocation(t,Ce.ON)===L.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new ur(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,r,a),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new ur(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,L.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,L.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,L.INTERIOR,L.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],L.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],L.BOUNDARY)},e.prototype.addLineString=function(t){var e=It.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new Re(this._argIndex,L.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===L.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=It.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;at.isCCW(i)&&(r=n,o=e);var s=new ni(i,new Re(this._argIndex,L.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],L.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Re(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Zt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Ut))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _r(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?L.BOUNDARY:L.INTERIOR},e}(Xe),Sr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Er(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,e,i),this._arg[1]=new Er(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,r,s),this._arg[1]=new Er(1,o,s)}};Sr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Cr=function(){};Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.map=function(){if(arguments[0]instanceof ut&&P(arguments[1],Cr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],xt)&&P(arguments[1],Cr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Et,l=o.iterator();l.hasNext();){var c=l.next(),u=s.map(c);null!==u&&a.add(u)}return a}},Cr.MapOp=function(){};var Ir=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ci,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Xe(new Vn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Re(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==L.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ve(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Yi(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Hi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ce.RIGHT),r.getLocation(1,Ce.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ce.LEFT,i.getLocation(r,Ce.LEFT)),et.isTrue(!i.isNull(r,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ce.RIGHT,i.getLocation(r,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sr);Ir.overlayOp=function(t,e,n){return new Ir(t,e).getResultGeometry(n)},Ir.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ir.createEmptyResult(Ir.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Vi.map(t,{interfaces_:function(){return[Cr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Ir.INTERSECTION)},Ir.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ir.createEmptyResult(Ir.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Ir.SYMDIFFERENCE)},Ir.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Ir.INTERSECTION:o=Math.min(i,r);break;case Ir.UNION:o=Math.max(i,r);break;case Ir.DIFFERENCE:o=i;break;case Ir.SYMDIFFERENCE:o=Math.max(i,r)}return o},Ir.createEmptyResult=function(t,e,n,i){var r=null;switch(Ir.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Ir.difference=function(t,e){return t.isEmpty()?Ir.createEmptyResult(Ir.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Ir.DIFFERENCE))},Ir.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Ir.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===L.BOUNDARY&&(r=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),s){case Ir.INTERSECTION:return r===L.INTERIOR&&o===L.INTERIOR;case Ir.UNION:return r===L.INTERIOR||o===L.INTERIOR;case Ir.DIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR;case Ir.SYMDIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR||r!==L.INTERIOR&&o===L.INTERIOR}return!1}},Ir.INTERSECTION=1,Ir.UNION=2,Ir.DIFFERENCE=3,Ir.SYMDIFFERENCE=4;var Mr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ci,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Mr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Mr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?L.BOUNDARY:this._ptLocator.locate(t,this._g)},Mr.prototype.extractLinework=function(t){var e=new Lr;t.apply(e);var n=e.getLinework(),i=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var Lr=function(){this._linework=null,this._linework=new Et};Lr.prototype.getLinework=function(){return this._linework},Lr.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Lr.prototype.interfaces_=function(){return[Gt]},Lr.prototype.getClass=function(){return Lr};var Tr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Tr.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Tr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Tr.prototype.getPoints=function(t){for(var e=new Et,n=Si.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Tr.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,l=n*o/s,c=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var h=new S(c-l,u+a);i.add(h)}if(this._doRight){var p=new S(c+l,u-a);i.add(p)}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var Pr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Mr(this._geom[0],this._boundaryDistanceTolerance),new Mr(this._geom[1],this._boundaryDistanceTolerance),new Mr(this._geom[2],this._boundaryDistanceTolerance)]},Or={TOLERANCE:{configurable:!0}};Pr.prototype.reportResult=function(t,e,n){X.out.println("Overlay result invalid - A:"+L.toLocationSymbol(e[0])+" B:"+L.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+L.toLocationSymbol(e[2]))},Pr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Pr.hasLocation(this._location,L.BOUNDARY)||this.isValidResult(i,this._location)}},Pr.prototype.addTestPts=function(t){var e=new Tr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pr.prototype.isValidResult=function(t,e){var n=Ir.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===L.INTERIOR);return i||this.reportResult(t,e,n),i},Pr.prototype.getInvalidLocation=function(){return this._invalidLocation},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pr.computeBoundaryDistanceTolerance=function(t,e){return Math.min($i.computeSizeBasedSnapTolerance(t),$i.computeSizeBasedSnapTolerance(e))},Pr.isValid=function(t,e,n,i){return new Pr(t,e,i).isValid(n)},Or.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pr,Or);var Rr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Rr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Rr.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.combine=function(){if(1===arguments.length)return new Rr(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Rr(Rr.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Rr(Rr.createList(n,i,r)).combine()}},Rr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Rr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new Et;return s.add(i),s.add(r),s.add(o),s}};var Ar=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},kr={STRTREE_NODE_CAPACITY:{configurable:!0}};Ar.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next(),r=null;P(i,wt)?r=this.unionTree(i):i instanceof ut&&(r=i),e.add(r)}return e},Ar.prototype.extractByEnvelope=function(t,e,n){for(var i=new Et,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Ar.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Rr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Ar.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Ar.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Ar.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Ar.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Ar.getGeometry(e,n),Ar.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Ar.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Ar.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ar.prototype.unionActual=function(t,e){return Ar.restrictToPolygons(t.union(e))},Ar.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ar.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Et,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Rr.combine(i)},Ar.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.restrictToPolygons=function(t){if(P(t,Jt))return t;var e=Ei.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Ar.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ar.union=function(t){return new Ar(t).union()},kr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ar,kr);var Nr=function(){};Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ir.createEmptyResult(Ir.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Ir.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Se,t.OverlayOp=Ir,t.UnionOp=Nr,t.BufferOp=gi,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";n(1539),n(8674),n(1249),n(2222),n(9600),n(7327),n(4916),n(7941),n(5306),n(4747),n(8309),n(6992),n(8783),n(3948),n(561),n(7042),n(2707),n(4723),n(489),n(2419),n(6649),n(6078),n(2526),n(1817),n(9653),n(2165),n(2443),n(3680),n(3706),n(2703),n(1038),n(9714);function t(t,e){var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}function e(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function i(t,n){void 0===t&&(t={}),void 0===n&&(n={}),Object.keys(n).forEach((function(r){void 0===t[r]?t[r]=n[r]:e(n[r])&&e(t[r])&&Object.keys(n[r]).length>0&&i(t[r],n[r])}))}var r={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function o(){var t="undefined"!=typeof document?document:{};return i(t,r),t}var s={document:r,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function a(){var t="undefined"!=typeof window?window:{};return i(t,s),t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e,n){return u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&c(r,n.prototype),r},u.apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return u(t,arguments,l(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,t)},h(t)}var p=function(t){var e,n;function i(e){var n,i,r;return n=t.call.apply(t,[this].concat(e))||this,i=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n),r=i.__proto__,Object.defineProperty(i,"__proto__",{get:function(){return r},set:function(t){r.__proto__=t}}),n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(h(Array));function f(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,f(t)):e.push(t)})),e}function d(t,e){return Array.prototype.filter.call(t,e)}function g(t,e){var n=a(),i=o(),r=[];if(!e&&t instanceof p)return t;if(!t)return new p(r);if("string"==typeof t){var s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select");var c=i.createElement(l);c.innerHTML=s;for(var u=0;u<c.childNodes.length;u+=1)r.push(c.childNodes[u])}else r=function(t,e){if("string"!=typeof t)return[t];for(var n=[],i=e.querySelectorAll(t),r=0;r<i.length;r+=1)n.push(i[r]);return n}(t.trim(),e||i)}else if(t.nodeType||t===n||t===i)r.push(t);else if(Array.isArray(t)){if(t instanceof p)return t;r=t}return new p(function(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(r))}g.fn=p.prototype;var m="resize scroll".split(" ");function y(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(void 0===n[0]){for(var r=0;r<this.length;r+=1)m.indexOf(t)<0&&(t in this[r]?this[r][t]():g(this[r]).trigger(t));return this}return this.on.apply(this,[t].concat(n))}}y("click"),y("blur"),y("focus"),y("focusin"),y("focusout"),y("keyup"),y("keydown"),y("keypress"),y("submit"),y("change"),y("mousedown"),y("mousemove"),y("mouseup"),y("mouseenter"),y("mouseleave"),y("mouseout"),y("mouseover"),y("touchstart"),y("touchend"),y("touchmove"),y("resize"),y("scroll");var v={addClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=f(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).add.apply(e,i)})),this},removeClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=f(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).remove.apply(e,i)})),this},hasClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=f(e.map((function(t){return t.split(" ")})));return d(this,(function(t){return i.filter((function(e){return t.classList.contains(e)})).length>0})).length>0},toggleClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=f(e.map((function(t){return t.split(" ")})));this.forEach((function(t){i.forEach((function(e){t.classList.toggle(e)}))}))},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(t,e);else for(var i in t)this[n][i]=t[i],this[n].setAttribute(i,t[i]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},transform:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transform=t;return this},transition:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transitionDuration="string"!=typeof t?t+"ms":t;return this},on:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e[1],o=e[2],s=e[3];function a(t){var e=t.target;if(e){var n=t.target.dom7EventData||[];if(n.indexOf(t)<0&&n.unshift(t),g(e).is(r))o.apply(e,n);else for(var i=g(e).parents(),s=0;s<i.length;s+=1)g(i[s]).is(r)&&o.apply(i[s],n)}}function l(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),o.apply(this,e)}"function"==typeof e[1]&&(i=e[0],o=e[1],s=e[2],r=void 0),s||(s=!1);for(var c,u=i.split(" "),h=0;h<this.length;h+=1){var p=this[h];if(r)for(c=0;c<u.length;c+=1){var f=u[c];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:o,proxyListener:a}),p.addEventListener(f,a,s)}else for(c=0;c<u.length;c+=1){var d=u[c];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[d]||(p.dom7Listeners[d]=[]),p.dom7Listeners[d].push({listener:o,proxyListener:l}),p.addEventListener(d,l,s)}}return this},off:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e[1],o=e[2],s=e[3];"function"==typeof e[1]&&(i=e[0],o=e[1],s=e[2],r=void 0),s||(s=!1);for(var a=i.split(" "),l=0;l<a.length;l+=1)for(var c=a[l],u=0;u<this.length;u+=1){var h=this[u],p=void 0;if(!r&&h.dom7Listeners?p=h.dom7Listeners[c]:r&&h.dom7LiveListeners&&(p=h.dom7LiveListeners[c]),p&&p.length)for(var f=p.length-1;f>=0;f-=1){var d=p[f];o&&d.listener===o||o&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===o?(h.removeEventListener(c,d.proxyListener,s),p.splice(f,1)):o||(h.removeEventListener(c,d.proxyListener,s),p.splice(f,1))}}return this},trigger:function(){for(var t=a(),e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=n[0].split(" "),o=n[1],s=0;s<r.length;s+=1)for(var l=r[s],c=0;c<this.length;c+=1){var u=this[c];if(t.CustomEvent){var h=new t.CustomEvent(l,{detail:o,bubbles:!0,cancelable:!0});u.dom7EventData=n.filter((function(t,e){return e>0})),u.dispatchEvent(h),u.dom7EventData=[],delete u.dom7EventData}}return this},transitionEnd:function(t){var e=this;return t&&e.on("transitionend",(function n(i){i.target===this&&(t.call(this,i),e.off("transitionend",n))})),this},outerWidth:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var t=a();return this[0]?t.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var t=a(),e=o(),n=this[0],i=n.getBoundingClientRect(),r=e.body,s=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,c=n===t?t.scrollY:n.scrollTop,u=n===t?t.scrollX:n.scrollLeft;return{top:i.top+c-s,left:i.left+u-l}}return null},css:function(t,e){var n,i=a();if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n+=1)for(var r in t)this[n].style[r]=t[r];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this},each:function(t){return t?(this.forEach((function(e,n){t.apply(e,[e,n])})),this):this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(t){var e,n,i=a(),r=o(),s=this[0];if(!s||void 0===t)return!1;if("string"==typeof t){if(s.matches)return s.matches(t);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(t);if(s.msMatchesSelector)return s.msMatchesSelector(t);for(e=g(t),n=0;n<e.length;n+=1)if(e[n]===s)return!0;return!1}if(t===r)return s===r;if(t===i)return s===i;if(t.nodeType||t instanceof p){for(e=t.nodeType?[t]:t,n=0;n<e.length;n+=1)if(e[n]===s)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e=this.length;if(t>e-1)return g([]);if(t<0){var n=e+t;return g(n<0?[]:[this[n]])}return g([this[t]])},append:function(){for(var t,e=o(),n=0;n<arguments.length;n+=1){t=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t;r.firstChild;)this[i].appendChild(r.firstChild)}else if(t instanceof p)for(var s=0;s<t.length;s+=1)this[i].appendChild(t[s]);else this[i].appendChild(t)}return this},prepend:function(t){var e,n,i=o();for(e=0;e<this.length;e+=1)if("string"==typeof t){var r=i.createElement("div");for(r.innerHTML=t,n=r.childNodes.length-1;n>=0;n-=1)this[e].insertBefore(r.childNodes[n],this[e].childNodes[0])}else if(t instanceof p)for(n=0;n<t.length;n+=1)this[e].insertBefore(t[n],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&g(this[0].nextElementSibling).is(t)?g([this[0].nextElementSibling]):g([]):this[0].nextElementSibling?g([this[0].nextElementSibling]):g([]):g([])},nextAll:function(t){var e=[],n=this[0];if(!n)return g([]);for(;n.nextElementSibling;){var i=n.nextElementSibling;t?g(i).is(t)&&e.push(i):e.push(i),n=i}return g(e)},prev:function(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&g(e.previousElementSibling).is(t)?g([e.previousElementSibling]):g([]):e.previousElementSibling?g([e.previousElementSibling]):g([])}return g([])},prevAll:function(t){var e=[],n=this[0];if(!n)return g([]);for(;n.previousElementSibling;){var i=n.previousElementSibling;t?g(i).is(t)&&e.push(i):e.push(i),n=i}return g(e)},parent:function(t){for(var e=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(t?g(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return g(e)},parents:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].parentNode;i;)t?g(i).is(t)&&e.push(i):e.push(i),i=i.parentNode;return g(e)},closest:function(t){var e=this;return void 0===t?g([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].querySelectorAll(t),r=0;r<i.length;r+=1)e.push(i[r]);return g(e)},children:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].children,r=0;r<i.length;r+=1)t&&!g(i[r]).is(t)||e.push(i[r]);return g(e)},filter:function(t){return g(d(this,t))},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}};Object.keys(v).forEach((function(t){Object.defineProperty(g.fn,t,{value:v[t],writable:!0})}));const _=g;function x(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function b(){return Date.now()}function w(t,e){void 0===e&&(e="x");var n,i,r,o=a(),s=function(t){var e,n=a();return n.getComputedStyle&&(e=n.getComputedStyle(t,null)),!e&&t.currentStyle&&(e=t.currentStyle),e||(e=t.style),e}(t);return o.WebKitCSSMatrix?((i=s.transform||s.webkitTransform).split(",").length>6&&(i=i.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),r=new o.WebKitCSSMatrix("none"===i?"":i)):n=(r=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(i=o.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(i=o.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}function E(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function S(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"],n="undefined"!=typeof window?window.HTMLElement:void 0,i=1;i<arguments.length;i+=1){var r=i<0||arguments.length<=i?void 0:arguments[i];if(null!=r&&!(n&&r instanceof n))for(var o=Object.keys(Object(r)).filter((function(t){return e.indexOf(t)<0})),s=0,a=o.length;s<a;s+=1){var l=o[s],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(E(t[l])&&E(r[l])?r[l].__swiper__?t[l]=r[l]:S(t[l],r[l]):!E(t[l])&&E(r[l])?(t[l]={},r[l].__swiper__?t[l]=r[l]:S(t[l],r[l])):t[l]=r[l])}}return t}function C(t,e){Object.keys(e).forEach((function(n){E(e[n])&&Object.keys(e[n]).forEach((function(i){"function"==typeof e[n][i]&&(e[n][i]=e[n][i].bind(t))})),t[n]=e[n]}))}function I(t){return void 0===t&&(t=""),"."+t.trim().replace(/([\.:\/])/g,"\\$1").replace(/ /g,".")}function M(t,e,n,i){var r=o();return n&&Object.keys(i).forEach((function(n){if(!e[n]&&!0===e.auto){var o=r.createElement("div");o.className=i[n],t.append(o),e[n]=o}})),e}var L,T,P;function O(){return L||(L=function(){var t=a(),e=o();return{touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>=0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,n)}catch(t){}return e}(),gestures:"ongesturestart"in t}}()),L}function R(t){return void 0===t&&(t={}),T||(T=function(t){var e=(void 0===t?{}:t).userAgent,n=O(),i=a(),r=i.navigator.platform,o=e||i.navigator.userAgent,s={ios:!1,android:!1},l=i.screen.width,c=i.screen.height,u=o.match(/(Android);?[\s\/]+([\d.]+)?/),h=o.match(/(iPad).*OS\s([\d_]+)/),p=o.match(/(iPod)(.*OS\s([\d_]+))?/),f=!h&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===r,g="MacIntel"===r;return!h&&g&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+c)>=0&&((h=o.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),g=!1),u&&!d&&(s.os="android",s.android=!0),(h||f||p)&&(s.os="ios",s.ios=!0),s}(t)),T}function A(){return P||(P=function(){var t=a();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:function(){var e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),P}const k={name:"resize",create:function(){var t=this;S(t,{resize:{observer:null,createObserver:function(){t&&!t.destroyed&&t.initialized&&(t.resize.observer=new ResizeObserver((function(e){var n=t.width,i=t.height,r=n,o=i;e.forEach((function(e){var n=e.contentBoxSize,i=e.contentRect,s=e.target;s&&s!==t.el||(r=i?i.width:(n[0]||n).inlineSize,o=i?i.height:(n[0]||n).blockSize)})),r===n&&o===i||t.resize.resizeHandler()})),t.resize.observer.observe(t.el))},removeObserver:function(){t.resize.observer&&t.resize.observer.unobserve&&t.el&&(t.resize.observer.unobserve(t.el),t.resize.observer=null)},resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(t){var e=a();t.params.resizeObserver&&void 0!==a().ResizeObserver?t.resize.createObserver():(e.addEventListener("resize",t.resize.resizeHandler),e.addEventListener("orientationchange",t.resize.orientationChangeHandler))},destroy:function(t){var e=a();t.resize.removeObserver(),e.removeEventListener("resize",t.resize.resizeHandler),e.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}};function N(){return N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},N.apply(this,arguments)}var D={attach:function(t,e){void 0===e&&(e={});var n=a(),i=this,r=new(n.MutationObserver||n.WebkitMutationObserver)((function(t){if(1!==t.length){var e=function(){i.emit("observerUpdate",t[0])};n.requestAnimationFrame?n.requestAnimationFrame(e):n.setTimeout(e,0)}else i.emit("observerUpdate",t[0])}));r.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),i.observer.observers.push(r)},init:function(){var t=this;if(t.support.observer&&t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)t.observer.attach(e[n]);t.observer.attach(t.$el[0],{childList:t.params.observeSlideChildren}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}};const F={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){C(this,{observer:N({},D,{observers:[]})})},on:{init:function(t){t.observer.init()},destroy:function(t){t.observer.destroy()}}},j={useParams:function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var i=e.modules[n];i.params&&S(t,i.params)}))},useModules:function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var i=e.modules[n],r=t[n]||{};i.on&&e.on&&Object.keys(i.on).forEach((function(t){e.on(t,i.on[t])})),i.create&&i.create.bind(e)(r)}))}},B={on:function(t,e,n){var i=this;if("function"!=typeof e)return i;var r=n?"unshift":"push";return t.split(" ").forEach((function(t){i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][r](e)})),i},once:function(t,e,n){var i=this;if("function"!=typeof e)return i;function r(){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];e.apply(i,o)}return r.__emitterProxy=e,i.on(t,r,n)},onAny:function(t,e){var n=this;if("function"!=typeof t)return n;var i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny:function(t){var e=this;if(!e.eventsAnyListeners)return e;var n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off:function(t,e){var n=this;return n.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?n.eventsListeners[t]=[]:n.eventsListeners[t]&&n.eventsListeners[t].forEach((function(i,r){(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[t].splice(r,1)}))})),n):n},emit:function(){var t,e,n,i=this;if(!i.eventsListeners)return i;for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return"string"==typeof o[0]||Array.isArray(o[0])?(t=o[0],e=o.slice(1,o.length),n=i):(t=o[0].events,e=o[0].data,n=o[0].context||i),e.unshift(n),(Array.isArray(t)?t:t.split(" ")).forEach((function(t){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(n,[t].concat(e))})),i.eventsListeners&&i.eventsListeners[t]&&i.eventsListeners[t].forEach((function(t){t.apply(n,e)}))})),i}};const G={updateSize:function(){var t,e,n=this,i=n.$el;t=void 0!==n.params.width&&null!==n.params.width?n.params.width:i[0].clientWidth,e=void 0!==n.params.height&&null!==n.params.height?n.params.height:i[0].clientHeight,0===t&&n.isHorizontal()||0===e&&n.isVertical()||(t=t-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),e=e-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),S(n,{width:t,height:e,size:n.isHorizontal()?t:e}))},updateSlides:function(){var t=this;function e(e){return t.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}function n(t,n){return parseFloat(t.getPropertyValue(e(n))||0)}var i=t.params,r=t.$wrapperEl,o=t.size,s=t.rtlTranslate,a=t.wrongRTL,l=t.virtual&&i.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=r.children("."+t.params.slideClass),h=l?t.virtual.slides.length:u.length,p=[],f=[],d=[],g=i.slidesOffsetBefore;"function"==typeof g&&(g=i.slidesOffsetBefore.call(t));var m=i.slidesOffsetAfter;"function"==typeof m&&(m=i.slidesOffsetAfter.call(t));var y=t.snapGrid.length,v=t.slidesGrid.length,_=i.spaceBetween,x=-g,b=0,w=0;if(void 0!==o){var E,C;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*o),t.virtualSize=-_,s?u.css({marginLeft:"",marginTop:""}):u.css({marginRight:"",marginBottom:""}),i.slidesPerColumn>1&&(E=Math.floor(h/i.slidesPerColumn)===h/t.params.slidesPerColumn?h:Math.ceil(h/i.slidesPerColumn)*i.slidesPerColumn,"auto"!==i.slidesPerView&&"row"===i.slidesPerColumnFill&&(E=Math.max(E,i.slidesPerView*i.slidesPerColumn)));for(var I,M,L,T=i.slidesPerColumn,P=E/T,O=Math.floor(h/i.slidesPerColumn),R=0;R<h;R+=1){C=0;var A=u.eq(R);if(i.slidesPerColumn>1){var k=void 0,N=void 0,D=void 0;if("row"===i.slidesPerColumnFill&&i.slidesPerGroup>1){var F=Math.floor(R/(i.slidesPerGroup*i.slidesPerColumn)),j=R-i.slidesPerColumn*i.slidesPerGroup*F,B=0===F?i.slidesPerGroup:Math.min(Math.ceil((h-F*T*i.slidesPerGroup)/T),i.slidesPerGroup);k=(N=j-(D=Math.floor(j/B))*B+F*i.slidesPerGroup)+D*E/T,A.css({"-webkit-box-ordinal-group":k,"-moz-box-ordinal-group":k,"-ms-flex-order":k,"-webkit-order":k,order:k})}else"column"===i.slidesPerColumnFill?(D=R-(N=Math.floor(R/T))*T,(N>O||N===O&&D===T-1)&&(D+=1)>=T&&(D=0,N+=1)):N=R-(D=Math.floor(R/P))*P;A.css(e("margin-top"),0!==D?i.spaceBetween&&i.spaceBetween+"px":"")}if("none"!==A.css("display")){if("auto"===i.slidesPerView){var G=getComputedStyle(A[0]),z=A[0].style.transform,U=A[0].style.webkitTransform;if(z&&(A[0].style.transform="none"),U&&(A[0].style.webkitTransform="none"),i.roundLengths)C=t.isHorizontal()?A.outerWidth(!0):A.outerHeight(!0);else{var q=n(G,"width"),X=n(G,"padding-left"),V=n(G,"padding-right"),Y=n(G,"margin-left"),H=n(G,"margin-right"),W=G.getPropertyValue("box-sizing");if(W&&"border-box"===W)C=q+Y+H;else{var Z=A[0],$=Z.clientWidth;C=q+X+V+Y+H+(Z.offsetWidth-$)}}z&&(A[0].style.transform=z),U&&(A[0].style.webkitTransform=U),i.roundLengths&&(C=Math.floor(C))}else C=(o-(i.slidesPerView-1)*_)/i.slidesPerView,i.roundLengths&&(C=Math.floor(C)),u[R]&&(u[R].style[e("width")]=C+"px");u[R]&&(u[R].swiperSlideSize=C),d.push(C),i.centeredSlides?(x=x+C/2+b/2+_,0===b&&0!==R&&(x=x-o/2-_),0===R&&(x=x-o/2-_),Math.abs(x)<.001&&(x=0),i.roundLengths&&(x=Math.floor(x)),w%i.slidesPerGroup==0&&p.push(x),f.push(x)):(i.roundLengths&&(x=Math.floor(x)),(w-Math.min(t.params.slidesPerGroupSkip,w))%t.params.slidesPerGroup==0&&p.push(x),f.push(x),x=x+C+_),t.virtualSize+=C+_,b=C,w+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+m,s&&a&&("slide"===i.effect||"coverflow"===i.effect)&&r.css({width:t.virtualSize+i.spaceBetween+"px"}),i.setWrapperSize)r.css(((M={})[e("width")]=t.virtualSize+i.spaceBetween+"px",M));if(i.slidesPerColumn>1)if(t.virtualSize=(C+i.spaceBetween)*E,t.virtualSize=Math.ceil(t.virtualSize/i.slidesPerColumn)-i.spaceBetween,r.css(((L={})[e("width")]=t.virtualSize+i.spaceBetween+"px",L)),i.centeredSlides){I=[];for(var K=0;K<p.length;K+=1){var J=p[K];i.roundLengths&&(J=Math.floor(J)),p[K]<t.virtualSize+p[0]&&I.push(J)}p=I}if(!i.centeredSlides){I=[];for(var Q=0;Q<p.length;Q+=1){var tt=p[Q];i.roundLengths&&(tt=Math.floor(tt)),p[Q]<=t.virtualSize-o&&I.push(tt)}p=I,Math.floor(t.virtualSize-o)-Math.floor(p[p.length-1])>1&&p.push(t.virtualSize-o)}if(0===p.length&&(p=[0]),0!==i.spaceBetween){var et,nt=t.isHorizontal()&&s?"marginLeft":e("marginRight");u.filter((function(t,e){return!i.cssMode||e!==u.length-1})).css(((et={})[nt]=_+"px",et))}if(i.centeredSlides&&i.centeredSlidesBounds){var it=0;d.forEach((function(t){it+=t+(i.spaceBetween?i.spaceBetween:0)}));var rt=(it-=i.spaceBetween)-o;p=p.map((function(t){return t<0?-g:t>rt?rt+m:t}))}if(i.centerInsufficientSlides){var ot=0;if(d.forEach((function(t){ot+=t+(i.spaceBetween?i.spaceBetween:0)})),(ot-=i.spaceBetween)<o){var st=(o-ot)/2;p.forEach((function(t,e){p[e]=t-st})),f.forEach((function(t,e){f[e]=t+st}))}}S(t,{slides:u,snapGrid:p,slidesGrid:f,slidesSizesGrid:d}),h!==c&&t.emit("slidesLengthChange"),p.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),f.length!==v&&t.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&t.updateSlidesOffset()}},updateAutoHeight:function(t){var e,n=this,i=[],r=n.virtual&&n.params.virtual.enabled,o=0;"number"==typeof t?n.setTransition(t):!0===t&&n.setTransition(n.params.speed);var s=function(t){return r?n.slides.filter((function(e){return parseInt(e.getAttribute("data-swiper-slide-index"),10)===t}))[0]:n.slides.eq(t)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(t){i.push(t)}));else for(e=0;e<Math.ceil(n.params.slidesPerView);e+=1){var a=n.activeIndex+e;if(a>n.slides.length&&!r)break;i.push(s(a))}else i.push(s(n.activeIndex));for(e=0;e<i.length;e+=1)if(void 0!==i[e]){var l=i[e].offsetHeight;o=l>o?l:o}o&&n.$wrapperEl.css("height",o+"px")},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this,n=e.params,i=e.slides,r=e.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();var o=-t;r&&(o=t),i.removeClass(n.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var s=0;s<i.length;s+=1){var a=i[s],l=(o+(n.centeredSlides?e.minTranslate():0)-a.swiperSlideOffset)/(a.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var c=-(o-a.swiperSlideOffset),u=c+e.slidesSizesGrid[s];(c>=0&&c<e.size-1||u>1&&u<=e.size||c<=0&&u>=e.size)&&(e.visibleSlides.push(a),e.visibleSlidesIndexes.push(s),i.eq(s).addClass(n.slideVisibleClass))}a.progress=r?-l:l}e.visibleSlides=_(e.visibleSlides)}},updateProgress:function(t){var e=this;if(void 0===t){var n=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*n||0}var i=e.params,r=e.maxTranslate()-e.minTranslate(),o=e.progress,s=e.isBeginning,a=e.isEnd,l=s,c=a;0===r?(o=0,s=!0,a=!0):(s=(o=(t-e.minTranslate())/r)<=0,a=o>=1),S(e,{progress:o,isBeginning:s,isEnd:a}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",o)},updateSlidesClasses:function(){var t,e=this,n=e.slides,i=e.params,r=e.$wrapperEl,o=e.activeIndex,s=e.realIndex,a=e.virtual&&i.virtual.enabled;n.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(t=a?e.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+o+'"]'):n.eq(o)).addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass));var l=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=n.eq(0)).addClass(i.slideNextClass);var c=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===c.length&&(c=n.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),c.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(t){var e,n=this,i=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,o=n.snapGrid,s=n.params,a=n.activeIndex,l=n.realIndex,c=n.snapIndex,u=t;if(void 0===u){for(var h=0;h<r.length;h+=1)void 0!==r[h+1]?i>=r[h]&&i<r[h+1]-(r[h+1]-r[h])/2?u=h:i>=r[h]&&i<r[h+1]&&(u=h+1):i>=r[h]&&(u=h);s.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if(o.indexOf(i)>=0)e=o.indexOf(i);else{var p=Math.min(s.slidesPerGroupSkip,u);e=p+Math.floor((u-p)/s.slidesPerGroup)}if(e>=o.length&&(e=o.length-1),u!==a){var f=parseInt(n.slides.eq(u).attr("data-swiper-slide-index")||u,10);S(n,{snapIndex:e,realIndex:f,previousIndex:a,activeIndex:u}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==f&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else e!==c&&(n.snapIndex=e,n.emit("snapIndexChange"))},updateClickedSlide:function(t){var e,n=this,i=n.params,r=_(t.target).closest("."+i.slideClass)[0],o=!1;if(r)for(var s=0;s<n.slides.length;s+=1)if(n.slides[s]===r){o=!0,e=s;break}if(!r||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(_(r).attr("data-swiper-slide-index"),10):n.clickedIndex=e,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};const z={getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this,n=e.params,i=e.rtlTranslate,r=e.translate,o=e.$wrapperEl;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;var s=w(o[0],t);return i&&(s=-s),s||0},setTranslate:function(t,e){var n=this,i=n.rtlTranslate,r=n.params,o=n.$wrapperEl,s=n.wrapperEl,a=n.progress,l=0,c=0;n.isHorizontal()?l=i?-t:t:c=t,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||o.transform("translate3d("+l+"px, "+c+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c;var u=n.maxTranslate()-n.minTranslate();(0===u?0:(t-n.minTranslate())/u)!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0),void 0===i&&(i=!0);var o=this,s=o.params,a=o.wrapperEl;if(o.animating&&s.preventInteractionOnTransition)return!1;var l,c=o.minTranslate(),u=o.maxTranslate();if(l=i&&t>c?c:i&&t<u?u:t,o.updateProgress(l),s.cssMode){var h,p=o.isHorizontal();if(0===e)a[p?"scrollLeft":"scrollTop"]=-l;else if(a.scrollTo)a.scrollTo(((h={})[p?"left":"top"]=-l,h.behavior="smooth",h));else a[p?"scrollLeft":"scrollTop"]=-l;return!0}return 0===e?(o.setTransition(0),o.setTranslate(l),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(l),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}};const U={slideTo:function(t,e,n,i,r){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0),"number"!=typeof t&&"string"!=typeof t)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof t+"] given.");if("string"==typeof t){var o=parseInt(t,10);if(!isFinite(o))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+t+"] given.");t=o}var s=this,a=t;a<0&&(a=0);var l=s.params,c=s.snapGrid,u=s.slidesGrid,h=s.previousIndex,p=s.activeIndex,f=s.rtlTranslate,d=s.wrapperEl,g=s.enabled;if(s.animating&&l.preventInteractionOnTransition||!g&&!i&&!r)return!1;var m=Math.min(s.params.slidesPerGroupSkip,a),y=m+Math.floor((a-m)/s.params.slidesPerGroup);y>=c.length&&(y=c.length-1),(p||l.initialSlide||0)===(h||0)&&n&&s.emit("beforeSlideChangeStart");var v,_=-c[y];if(s.updateProgress(_),l.normalizeSlideIndex)for(var x=0;x<u.length;x+=1){var b=-Math.floor(100*_),w=Math.floor(100*u[x]),E=Math.floor(100*u[x+1]);void 0!==u[x+1]?b>=w&&b<E-(E-w)/2?a=x:b>=w&&b<E&&(a=x+1):b>=w&&(a=x)}if(s.initialized&&a!==p){if(!s.allowSlideNext&&_<s.translate&&_<s.minTranslate())return!1;if(!s.allowSlidePrev&&_>s.translate&&_>s.maxTranslate()&&(p||0)!==a)return!1}if(v=a>p?"next":a<p?"prev":"reset",f&&-_===s.translate||!f&&_===s.translate)return s.updateActiveIndex(a),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(_),"reset"!==v&&(s.transitionStart(n,v),s.transitionEnd(n,v)),!1;if(l.cssMode){var S,C=s.isHorizontal(),I=-_;if(f&&(I=d.scrollWidth-d.offsetWidth-I),0===e)d[C?"scrollLeft":"scrollTop"]=I;else if(d.scrollTo)d.scrollTo(((S={})[C?"left":"top"]=I,S.behavior="smooth",S));else d[C?"scrollLeft":"scrollTop"]=I;return!0}return 0===e?(s.setTransition(0),s.setTranslate(_),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(n,v),s.transitionEnd(n,v)):(s.setTransition(e),s.setTranslate(_),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(n,v),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(t){s&&!s.destroyed&&t.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,v))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0);var r=this,o=t;return r.params.loop&&(o+=r.loopedSlides),r.slideTo(o,e,n,i)},slideNext:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.params,o=i.animating;if(!i.enabled)return i;var s=i.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(o&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return i.slideTo(i.activeIndex+s,t,e,n)},slidePrev:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.params,o=i.animating,s=i.snapGrid,a=i.slidesGrid,l=i.rtlTranslate;if(!i.enabled)return i;if(r.loop){if(o&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function c(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var u,h=c(l?i.translate:-i.translate),p=s.map((function(t){return c(t)})),f=s[p.indexOf(h)-1];return void 0===f&&r.cssMode&&s.forEach((function(t){!f&&h>=t&&(f=t)})),void 0!==f&&(u=a.indexOf(f))<0&&(u=i.activeIndex-1),i.slideTo(u,t,e,n)},slideReset:function(t,e,n){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,n)},slideToClosest:function(t,e,n,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===i&&(i=.5);var r=this,o=r.activeIndex,s=Math.min(r.params.slidesPerGroupSkip,o),a=s+Math.floor((o-s)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){var c=r.snapGrid[a];l-c>(r.snapGrid[a+1]-c)*i&&(o+=r.params.slidesPerGroup)}else{var u=r.snapGrid[a-1];l-u<=(r.snapGrid[a]-u)*i&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,t,e,n)},slideToClickedSlide:function(){var t,e=this,n=e.params,i=e.$wrapperEl,r="auto"===n.slidesPerView?e.slidesPerViewDynamic():n.slidesPerView,o=e.clickedIndex;if(n.loop){if(e.animating)return;t=parseInt(_(e.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=i.children("."+n.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),x((function(){e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=i.children("."+n.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),x((function(){e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};const q={loopCreate:function(){var t=this,e=o(),n=t.params,i=t.$wrapperEl;i.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var r=i.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var s=n.slidesPerGroup-r.length%n.slidesPerGroup;if(s!==n.slidesPerGroup){for(var a=0;a<s;a+=1){var l=_(e.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);i.append(l)}r=i.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),t.loopedSlides+=n.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var c=[],u=[];r.each((function(e,n){var i=_(e);n<t.loopedSlides&&u.push(e),n<r.length&&n>=r.length-t.loopedSlides&&c.push(e),i.attr("data-swiper-slide-index",n)}));for(var h=0;h<u.length;h+=1)i.append(_(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var p=c.length-1;p>=0;p-=1)i.prepend(_(c[p].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var t=this;t.emit("beforeLoopFix");var e,n=t.activeIndex,i=t.slides,r=t.loopedSlides,o=t.allowSlidePrev,s=t.allowSlideNext,a=t.snapGrid,l=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var c=-a[n]-t.getTranslate();if(n<r)e=i.length-3*r+n,e+=r,t.slideTo(e,0,!1,!0)&&0!==c&&t.setTranslate((l?-t.translate:t.translate)-c);else if(n>=i.length-r){e=-i.length+n+r,e+=r,t.slideTo(e,0,!1,!0)&&0!==c&&t.setTranslate((l?-t.translate:t.translate)-c)}t.allowSlidePrev=o,t.allowSlideNext=s,t.emit("loopFix")},loopDestroy:function(){var t=this,e=t.$wrapperEl,n=t.params,i=t.slides;e.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}};const X={appendSlide:function(t){var e=this,n=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),"object"==typeof t&&"length"in t)for(var r=0;r<t.length;r+=1)t[r]&&n.append(t[r]);else n.append(t);i.loop&&e.loopCreate(),i.observer&&e.support.observer||e.update()},prependSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&e.loopDestroy();var o=r+1;if("object"==typeof t&&"length"in t){for(var s=0;s<t.length;s+=1)t[s]&&i.prepend(t[s]);o=r+t.length}else i.prepend(t);n.loop&&e.loopCreate(),n.observer&&e.support.observer||e.update(),e.slideTo(o,0,!1)},addSlide:function(t,e){var n=this,i=n.$wrapperEl,r=n.params,o=n.activeIndex;r.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.slides=i.children("."+r.slideClass));var s=n.slides.length;if(t<=0)n.prependSlide(e);else if(t>=s)n.appendSlide(e);else{for(var a=o>t?o+1:o,l=[],c=s-1;c>=t;c-=1){var u=n.slides.eq(c);u.remove(),l.unshift(u)}if("object"==typeof e&&"length"in e){for(var h=0;h<e.length;h+=1)e[h]&&i.append(e[h]);a=o>t?o+e.length:o}else i.append(e);for(var p=0;p<l.length;p+=1)i.append(l[p]);r.loop&&n.loopCreate(),r.observer&&n.support.observer||n.update(),r.loop?n.slideTo(a+n.loopedSlides,0,!1):n.slideTo(a,0,!1)}},removeSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&(r-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+n.slideClass));var o,s=r;if("object"==typeof t&&"length"in t){for(var a=0;a<t.length;a+=1)o=t[a],e.slides[o]&&e.slides.eq(o).remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=t,e.slides[o]&&e.slides.eq(o).remove(),o<s&&(s-=1),s=Math.max(s,0);n.loop&&e.loopCreate(),n.observer&&e.support.observer||e.update(),n.loop?e.slideTo(s+e.loopedSlides,0,!1):e.slideTo(s,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}};function V(t){var e=this,n=o(),i=a(),r=e.touchEventsData,s=e.params,l=e.touches;if(e.enabled&&(!e.animating||!s.preventInteractionOnTransition)){var c=t;c.originalEvent&&(c=c.originalEvent);var u=_(c.target);if("wrapper"!==s.touchEventsTarget||u.closest(e.wrapperEl).length)if(r.isTouchEvent="touchstart"===c.type,r.isTouchEvent||!("which"in c)||3!==c.which)if(!(!r.isTouchEvent&&"button"in c&&c.button>0))if(!r.isTouched||!r.isMoved)if(!!s.noSwipingClass&&""!==s.noSwipingClass&&c.target&&c.target.shadowRoot&&t.path&&t.path[0]&&(u=_(t.path[0])),s.noSwiping&&u.closest(s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass)[0])e.allowClick=!0;else if(!s.swipeHandler||u.closest(s.swipeHandler)[0]){l.currentX="touchstart"===c.type?c.targetTouches[0].pageX:c.pageX,l.currentY="touchstart"===c.type?c.targetTouches[0].pageY:c.pageY;var h=l.currentX,p=l.currentY,f=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,d=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(f&&(h<=d||h>=i.innerWidth-d)){if("prevent"!==f)return;t.preventDefault()}if(S(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=h,l.startY=p,r.touchStartTime=b(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==c.type){var g=!0;u.is(r.focusableElements)&&(g=!1),n.activeElement&&_(n.activeElement).is(r.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();var m=g&&e.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!m||u[0].isContentEditable||c.preventDefault()}e.emit("touchStart",c)}}}function Y(t){var e=o(),n=this,i=n.touchEventsData,r=n.params,s=n.touches,a=n.rtlTranslate;if(n.enabled){var l=t;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===l.type){var c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u="touchmove"===l.type?c.pageX:l.pageX,h="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=u,void(s.startY=h);if(!n.allowTouchMove)return n.allowClick=!1,void(i.isTouched&&(S(s,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=b()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(u<s.startX&&n.translate<=n.maxTranslate()||u>s.startX&&n.translate>=n.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&_(l.target).is(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){s.currentX=u,s.currentY=h;var p=s.currentX-s.startX,f=s.currentY-s.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(f,2))<n.params.threshold)){var d;if(void 0===i.isScrolling)n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:p*p+f*f>=25&&(d=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,i.isScrolling=n.isHorizontal()?d>r.touchAngle:90-d>r.touchAngle);if(i.isScrolling&&n.emit("touchMoveOpposite",l),void 0===i.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),i.isMoved=!0;var g=n.isHorizontal()?p:f;s.diff=g,g*=r.touchRatio,a&&(g=-g),n.swipeDirection=g>0?"prev":"next",i.currentTranslate=g+i.startTranslate;var m=!0,y=r.resistanceRatio;if(r.touchReleaseOnEdges&&(y=0),g>0&&i.currentTranslate>n.minTranslate()?(m=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+i.startTranslate+g,y))):g<0&&i.currentTranslate<n.maxTranslate()&&(m=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-i.startTranslate-g,y))),m&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(g)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}r.followFinger&&!r.cssMode&&((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&(0===i.velocities.length&&i.velocities.push({position:s[n.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:s[n.isHorizontal()?"currentX":"currentY"],time:b()})),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l)}}function H(t){var e=this,n=e.touchEventsData,i=e.params,r=e.touches,o=e.rtlTranslate,s=e.$wrapperEl,a=e.slidesGrid,l=e.snapGrid;if(e.enabled){var c=t;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var u,h=b(),p=h-n.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(c),e.emit("tap click",c),p<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",c)),n.lastClickTime=b(),x((function(){e.destroyed||(e.allowClick=!0)})),!n.isTouched||!n.isMoved||!e.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,u=i.followFinger?o?e.translate:-e.translate:-n.currentTranslate,!i.cssMode)if(i.freeMode){if(u<-e.minTranslate())return void e.slideTo(e.activeIndex);if(u>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(i.freeModeMomentum){if(n.velocities.length>1){var f=n.velocities.pop(),d=n.velocities.pop(),g=f.position-d.position,m=f.time-d.time;e.velocity=g/m,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(m>150||b()-f.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,n.velocities.length=0;var y=1e3*i.freeModeMomentumRatio,v=e.velocity*y,_=e.translate+v;o&&(_=-_);var w,E,S=!1,C=20*Math.abs(e.velocity)*i.freeModeMomentumBounceRatio;if(_<e.maxTranslate())i.freeModeMomentumBounce?(_+e.maxTranslate()<-C&&(_=e.maxTranslate()-C),w=e.maxTranslate(),S=!0,n.allowMomentumBounce=!0):_=e.maxTranslate(),i.loop&&i.centeredSlides&&(E=!0);else if(_>e.minTranslate())i.freeModeMomentumBounce?(_-e.minTranslate()>C&&(_=e.minTranslate()+C),w=e.minTranslate(),S=!0,n.allowMomentumBounce=!0):_=e.minTranslate(),i.loop&&i.centeredSlides&&(E=!0);else if(i.freeModeSticky){for(var I,M=0;M<l.length;M+=1)if(l[M]>-_){I=M;break}_=-(_=Math.abs(l[I]-_)<Math.abs(l[I-1]-_)||"next"===e.swipeDirection?l[I]:l[I-1])}if(E&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(y=o?Math.abs((-_-e.translate)/e.velocity):Math.abs((_-e.translate)/e.velocity),i.freeModeSticky){var L=Math.abs((o?-_:_)-e.translate),T=e.slidesSizesGrid[e.activeIndex];y=L<T?i.speed:L<2*T?1.5*i.speed:2.5*i.speed}}else if(i.freeModeSticky)return void e.slideToClosest();i.freeModeMomentumBounce&&S?(e.updateProgress(w),e.setTransition(y),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,s.transitionEnd((function(){e&&!e.destroyed&&n.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(i.speed),setTimeout((function(){e.setTranslate(w),s.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(e.updateProgress(_),e.setTransition(y),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,s.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):(e.emit("_freeModeNoMomentumRelease"),e.updateProgress(_)),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(i.freeModeSticky)return void e.slideToClosest();i.freeMode&&e.emit("_freeModeNoMomentumRelease")}(!i.freeModeMomentum||p>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var P=0,O=e.slidesSizesGrid[0],R=0;R<a.length;R+=R<i.slidesPerGroupSkip?1:i.slidesPerGroup){var A=R<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==a[R+A]?u>=a[R]&&u<a[R+A]&&(P=R,O=a[R+A]-a[R]):u>=a[R]&&(P=R,O=a[a.length-1]-a[a.length-2])}var k=(u-a[P])/O,N=P<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(p>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(k>=i.longSwipesRatio?e.slideTo(P+N):e.slideTo(P)),"prev"===e.swipeDirection&&(k>1-i.longSwipesRatio?e.slideTo(P+N):e.slideTo(P))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(P+N):e.slideTo(P):("next"===e.swipeDirection&&e.slideTo(P+N),"prev"===e.swipeDirection&&e.slideTo(P))}}}}function W(){var t=this,e=t.params,n=t.el;if(!n||0!==n.offsetWidth){e.breakpoints&&t.setBreakpoint();var i=t.allowSlideNext,r=t.allowSlidePrev,o=t.snapGrid;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}}function Z(t){var e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function $(){var t=this,e=t.wrapperEl,n=t.rtlTranslate;if(t.enabled){t.previousTranslate=t.translate,t.isHorizontal()?t.translate=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:-e.scrollLeft:t.translate=-e.scrollTop,-0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();var i=t.maxTranslate()-t.minTranslate();(0===i?0:(t.translate-t.minTranslate())/i)!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}}var K=!1;function J(){}const Q={attachEvents:function(){var t=this,e=o(),n=t.params,i=t.touchEvents,r=t.el,s=t.wrapperEl,a=t.device,l=t.support;t.onTouchStart=V.bind(t),t.onTouchMove=Y.bind(t),t.onTouchEnd=H.bind(t),n.cssMode&&(t.onScroll=$.bind(t)),t.onClick=Z.bind(t);var c=!!n.nested;if(!l.touch&&l.pointerEvents)r.addEventListener(i.start,t.onTouchStart,!1),e.addEventListener(i.move,t.onTouchMove,c),e.addEventListener(i.end,t.onTouchEnd,!1);else{if(l.touch){var u=!("touchstart"!==i.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(i.start,t.onTouchStart,u),r.addEventListener(i.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),r.addEventListener(i.end,t.onTouchEnd,u),i.cancel&&r.addEventListener(i.cancel,t.onTouchEnd,u),K||(e.addEventListener("touchstart",J),K=!0)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!l.touch&&a.ios)&&(r.addEventListener("mousedown",t.onTouchStart,!1),e.addEventListener("mousemove",t.onTouchMove,c),e.addEventListener("mouseup",t.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.addEventListener("click",t.onClick,!0),n.cssMode&&s.addEventListener("scroll",t.onScroll),n.updateOnWindowResize?t.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",W,!0):t.on("observerUpdate",W,!0)},detachEvents:function(){var t=this,e=o(),n=t.params,i=t.touchEvents,r=t.el,s=t.wrapperEl,a=t.device,l=t.support,c=!!n.nested;if(!l.touch&&l.pointerEvents)r.removeEventListener(i.start,t.onTouchStart,!1),e.removeEventListener(i.move,t.onTouchMove,c),e.removeEventListener(i.end,t.onTouchEnd,!1);else{if(l.touch){var u=!("onTouchStart"!==i.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(i.start,t.onTouchStart,u),r.removeEventListener(i.move,t.onTouchMove,c),r.removeEventListener(i.end,t.onTouchEnd,u),i.cancel&&r.removeEventListener(i.cancel,t.onTouchEnd,u)}(n.simulateTouch&&!a.ios&&!a.android||n.simulateTouch&&!l.touch&&a.ios)&&(r.removeEventListener("mousedown",t.onTouchStart,!1),e.removeEventListener("mousemove",t.onTouchMove,c),e.removeEventListener("mouseup",t.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.removeEventListener("click",t.onClick,!0),n.cssMode&&s.removeEventListener("scroll",t.onScroll),t.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",W)}};const tt={setBreakpoint:function(){var t=this,e=t.activeIndex,n=t.initialized,i=t.loopedSlides,r=void 0===i?0:i,o=t.params,s=t.$el,a=o.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var l=t.getBreakpoint(a,t.params.breakpointsBase,t.el);if(l&&t.currentBreakpoint!==l){var c=l in a?a[l]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=c[t];void 0!==e&&(c[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var u=c||t.originalParams,h=o.slidesPerColumn>1,p=u.slidesPerColumn>1,f=o.enabled;h&&!p?(s.removeClass(o.containerModifierClass+"multirow "+o.containerModifierClass+"multirow-column"),t.emitContainerClasses()):!h&&p&&(s.addClass(o.containerModifierClass+"multirow"),"column"===u.slidesPerColumnFill&&s.addClass(o.containerModifierClass+"multirow-column"),t.emitContainerClasses());var d=u.direction&&u.direction!==o.direction,g=o.loop&&(u.slidesPerView!==o.slidesPerView||d);d&&n&&t.changeDirection(),S(t.params,u);var m=t.params.enabled;S(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),f&&!m?t.disable():!f&&m&&t.enable(),t.currentBreakpoint=l,t.emit("_beforeBreakpoint",u),g&&n&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-r+t.loopedSlides,0,!1)),t.emit("breakpoint",u)}}},getBreakpoint:function(t,e,n){if(void 0===e&&(e="window"),t&&("container"!==e||n)){var i=!1,r=a(),o="window"===e?r.innerHeight:n.clientHeight,s=Object.keys(t).map((function(t){if("string"==typeof t&&0===t.indexOf("@")){var e=parseFloat(t.substr(1));return{value:o*e,point:t}}return{value:t,point:t}}));s.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var l=0;l<s.length;l+=1){var c=s[l],u=c.point,h=c.value;"window"===e?r.matchMedia("(min-width: "+h+"px)").matches&&(i=u):h<=n.clientWidth&&(i=u)}return i||"max"}}};const et={addClasses:function(){var t,e,n,i=this,r=i.classNames,o=i.params,s=i.rtl,a=i.$el,l=i.device,c=i.support,u=(t=["initialized",o.direction,{"pointer-events":c.pointerEvents&&!c.touch},{"free-mode":o.freeMode},{autoheight:o.autoHeight},{rtl:s},{multirow:o.slidesPerColumn>1},{"multirow-column":o.slidesPerColumn>1&&"column"===o.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":o.cssMode}],e=o.containerModifierClass,n=[],t.forEach((function(t){"object"==typeof t?Object.keys(t).forEach((function(i){t[i]&&n.push(e+i)})):"string"==typeof t&&n.push(e+t)})),n);r.push.apply(r,u),a.addClass([].concat(r).join(" ")),i.emitContainerClasses()},removeClasses:function(){var t=this,e=t.$el,n=t.classNames;e.removeClass(n.join(" ")),t.emitContainerClasses()}};const nt={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function it(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var rt={modular:j,eventsEmitter:B,update:G,translate:z,transition:{setTransition:function(t,e){var n=this;n.params.cssMode||n.$wrapperEl.transition(t),n.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.params,o=n.previousIndex;if(!r.cssMode){r.autoHeight&&n.updateAutoHeight();var s=e;if(s||(s=i>o?"next":i<o?"prev":"reset"),n.emit("transitionStart"),t&&i!==o){if("reset"===s)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===s?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.previousIndex,o=n.params;if(n.animating=!1,!o.cssMode){n.setTransition(0);var s=e;if(s||(s=i>r?"next":i<r?"prev":"reset"),n.emit("transitionEnd"),t&&i!==r){if("reset"===s)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===s?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}},slide:U,loop:q,grabCursor:{setGrabCursor:function(t){var e=this;if(!(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)){var n=e.el;n.style.cursor="move",n.style.cursor=t?"-webkit-grabbing":"-webkit-grab",n.style.cursor=t?"-moz-grabbin":"-moz-grab",n.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){var t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.el.style.cursor="")}},manipulation:X,events:Q,breakpoints:tt,checkOverflow:{checkOverflow:function(){var t=this,e=t.params,n=t.isLocked,i=t.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(t.slides.length-1)+t.slides[0].offsetWidth*t.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?t.isLocked=i<=t.size:t.isLocked=1===t.snapGrid.length,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,n!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),n&&n!==t.isLocked&&(t.isEnd=!1,t.navigation&&t.navigation.update())}},classes:et,images:{loadImage:function(t,e,n,i,r,o){var s,l=a();function c(){o&&o()}_(t).parent("picture")[0]||t.complete&&r?c():e?((s=new l.Image).onload=c,s.onerror=c,i&&(s.sizes=i),n&&(s.srcset=n),e&&(s.src=e)):c()},preloadImages:function(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var n=0;n<t.imagesToLoad.length;n+=1){var i=t.imagesToLoad[n];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}}},ot={},st=function(){function t(){for(var e,n,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?n=r[0]:(e=r[0],n=r[1]),n||(n={}),n=S({},n),e&&!n.el&&(n.el=e),n.el&&_(n.el).length>1){var s=[];return _(n.el).each((function(e){var i=S({},n,{el:e});s.push(new t(i))})),s}var a=this;a.__swiper__=!0,a.support=O(),a.device=R({userAgent:n.userAgent}),a.browser=A(),a.eventsListeners={},a.eventsAnyListeners=[],void 0===a.modules&&(a.modules={}),Object.keys(a.modules).forEach((function(t){var e=a.modules[t];if(e.params){var i=Object.keys(e.params)[0],r=e.params[i];if("object"!=typeof r||null===r)return;if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===n[i]&&(n[i]={auto:!0}),!(i in n)||!("enabled"in r))return;!0===n[i]&&(n[i]={enabled:!0}),"object"!=typeof n[i]||"enabled"in n[i]||(n[i].enabled=!0),n[i]||(n[i]={enabled:!1})}}));var l,c,u=S({},nt);return a.useParams(u),a.params=S({},u,ot,n),a.originalParams=S({},a.params),a.passedParams=S({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach((function(t){a.on(t,a.params.on[t])})),a.params&&a.params.onAny&&a.onAny(a.params.onAny),a.$=_,S(a,{enabled:a.params.enabled,el:e,classNames:[],slides:_(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===a.params.direction},isVertical:function(){return"vertical"===a.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEvents:(l=["touchstart","touchmove","touchend","touchcancel"],c=["mousedown","mousemove","mouseup"],a.support.pointerEvents&&(c=["pointerdown","pointermove","pointerup"]),a.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},a.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},a.support.touch||!a.params.simulateTouch?a.touchEventsTouch:a.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:b(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.useModules(),a.emit("_swiper"),a.params.init&&a.init(),a}var e,n,i,r=t.prototype;return r.enable=function(){var t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))},r.disable=function(){var t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))},r.setProgress=function(t,e){var n=this;t=Math.min(Math.max(t,0),1);var i=n.minTranslate(),r=(n.maxTranslate()-i)*t+i;n.translateTo(r,void 0===e?0:e),n.updateActiveIndex(),n.updateSlidesClasses()},r.emitContainerClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=t.el.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-container")||0===e.indexOf(t.params.containerModifierClass)}));t.emit("_containerClasses",e.join(" "))}},r.getSlideClasses=function(t){var e=this;return t.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=[];t.slides.each((function(n){var i=t.getSlideClasses(n);e.push({slideEl:n,classNames:i}),t.emit("_slideClass",n,i)})),t.emit("_slideClasses",e)}},r.slidesPerViewDynamic=function(){var t=this,e=t.params,n=t.slides,i=t.slidesGrid,r=t.size,o=t.activeIndex,s=1;if(e.centeredSlides){for(var a,l=n[o].swiperSlideSize,c=o+1;c<n.length;c+=1)n[c]&&!a&&(s+=1,(l+=n[c].swiperSlideSize)>r&&(a=!0));for(var u=o-1;u>=0;u-=1)n[u]&&!a&&(s+=1,(l+=n[u].swiperSlideSize)>r&&(a=!0))}else for(var h=o+1;h<n.length;h+=1)i[h]-i[o]<r&&(s+=1);return s},r.update=function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,n=t.params;n.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(i(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||i(),n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function i(){var e=t.rtlTranslate?-1*t.translate:t.translate,n=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(n),t.updateActiveIndex(),t.updateSlidesClasses()}},r.changeDirection=function(t,e){void 0===e&&(e=!0);var n=this,i=n.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(n.$el.removeClass(""+n.params.containerModifierClass+i).addClass(""+n.params.containerModifierClass+t),n.emitContainerClasses(),n.params.direction=t,n.slides.each((function(e){"vertical"===t?e.style.width="":e.style.height=""})),n.emit("changeDirection"),e&&n.update()),n},r.mount=function(t){var e=this;if(e.mounted)return!0;var n=_(t||e.params.el);if(!(t=n[0]))return!1;t.swiper=e;var i=function(){return"."+(e.params.wrapperClass||"").trim().split(" ").join(".")},r=function(){if(t&&t.shadowRoot&&t.shadowRoot.querySelector){var e=_(t.shadowRoot.querySelector(i()));return e.children=function(t){return n.children(t)},e}return n.children(i())}();if(0===r.length&&e.params.createElements){var s=o().createElement("div");r=_(s),s.className=e.params.wrapperClass,n.append(s),n.children("."+e.params.slideClass).each((function(t){r.append(t)}))}return S(e,{$el:n,el:t,$wrapperEl:r,wrapperEl:r[0],mounted:!0,rtl:"rtl"===t.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===r.css("display")}),!0},r.init=function(t){var e=this;return e.initialized||!1===e.mount(t)||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.attachEvents(),e.initialized=!0,e.emit("init"),e.emit("afterInit")),e},r.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n=this,i=n.params,r=n.$el,o=n.$wrapperEl,s=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),e&&(n.removeClasses(),r.removeAttr("style"),o.removeAttr("style"),s&&s.length&&s.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(t){n.off(t)})),!1!==t&&(n.$el[0].swiper=null,function(t){var e=t;Object.keys(e).forEach((function(t){try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))}(n)),n.destroyed=!0),null},t.extendDefaults=function(t){S(ot,t)},t.installModule=function(e){t.prototype.modules||(t.prototype.modules={});var n=e.name||Object.keys(t.prototype.modules).length+"_"+b();t.prototype.modules[n]=e},t.use=function(e){return Array.isArray(e)?(e.forEach((function(e){return t.installModule(e)})),t):(t.installModule(e),t)},e=t,i=[{key:"extendedDefaults",get:function(){return ot}},{key:"defaults",get:function(){return nt}}],(n=null)&&it(e.prototype,n),i&&it(e,i),t}();Object.keys(rt).forEach((function(t){Object.keys(rt[t]).forEach((function(e){st.prototype[e]=rt[t][e]}))})),st.use([k,F]);const at=st;function lt(){return lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lt.apply(this,arguments)}at.prototype.slideToMapID=function(t){if(this.$el[0].querySelector(".swiper-slide-active").getAttribute("data")!=t)for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var i=e[n];if(i.getAttribute("data")==t)return this.slideToLoop(parseInt(i.getAttribute("data-swiper-slide-index")))}},at.prototype.slideToIndex=function(t){var e=this.$el[0].querySelector(".swiper-slide-active");parseInt(e.getAttribute("data-swiper-slide-index"))!=t&&this.slideToLoop(t)},at.prototype.setSlideMapID=function(t){this.slideToMapID(t),this.setSlideMapIDAsSelected(t)},at.prototype.setSlideIndex=function(t){this.slideToIndex(t),this.setSlideIndexAsSelected(t)},at.prototype.setSlideIndexAsSelected=function(t){for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var i=e[n];i.getAttribute("data-swiper-slide-index")==t?i.classList.add("selected"):i.classList.remove("selected")}},at.prototype.setSlideMapIDAsSelected=function(t){for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var i=e[n];i.getAttribute("data")==t?i.classList.add("selected"):i.classList.remove("selected")}};var ct={toggleEl:function(t,e){t[e?"addClass":"removeClass"](this.params.navigation.disabledClass),t[0]&&"BUTTON"===t[0].tagName&&(t[0].disabled=e)},update:function(){var t=this,e=t.params.navigation,n=t.navigation.toggleEl;if(!t.params.loop){var i=t.navigation,r=i.$nextEl,o=i.$prevEl;o&&o.length>0&&(t.isBeginning?n(o,!0):n(o,!1),t.params.watchOverflow&&t.enabled&&o[t.isLocked?"addClass":"removeClass"](e.lockClass)),r&&r.length>0&&(t.isEnd?n(r,!0):n(r,!1),t.params.watchOverflow&&t.enabled&&r[t.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(t){var e=this;t.preventDefault(),e.isBeginning&&!e.params.loop||e.slidePrev()},onNextClick:function(t){var e=this;t.preventDefault(),e.isEnd&&!e.params.loop||e.slideNext()},init:function(){var t,e,n=this,i=n.params.navigation;(n.params.navigation=M(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),i.nextEl||i.prevEl)&&(i.nextEl&&(t=_(i.nextEl),n.params.uniqueNavElements&&"string"==typeof i.nextEl&&t.length>1&&1===n.$el.find(i.nextEl).length&&(t=n.$el.find(i.nextEl))),i.prevEl&&(e=_(i.prevEl),n.params.uniqueNavElements&&"string"==typeof i.prevEl&&e.length>1&&1===n.$el.find(i.prevEl).length&&(e=n.$el.find(i.prevEl))),t&&t.length>0&&t.on("click",n.navigation.onNextClick),e&&e.length>0&&e.on("click",n.navigation.onPrevClick),S(n.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}),n.enabled||(t&&t.addClass(i.lockClass),e&&e.addClass(i.lockClass)))},destroy:function(){var t=this,e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n.length&&(n.off("click",t.navigation.onNextClick),n.removeClass(t.params.navigation.disabledClass)),i&&i.length&&(i.off("click",t.navigation.onPrevClick),i.removeClass(t.params.navigation.disabledClass))}};const ut={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){C(this,{navigation:lt({},ct)})},on:{init:function(t){t.navigation.init(),t.navigation.update()},toEdge:function(t){t.navigation.update()},fromEdge:function(t){t.navigation.update()},destroy:function(t){t.navigation.destroy()},"enable disable":function(t){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),i&&i[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)},click:function(t,e){var n=t.navigation,i=n.$nextEl,r=n.$prevEl,o=e.target;if(t.params.navigation.hideOnClick&&!_(o).is(r)&&!_(o).is(i)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;var s;i?s=i.hasClass(t.params.navigation.hiddenClass):r&&(s=r.hasClass(t.params.navigation.hiddenClass)),!0===s?t.emit("navigationShow"):t.emit("navigationHide"),i&&i.toggleClass(t.params.navigation.hiddenClass),r&&r.toggleClass(t.params.navigation.hiddenClass)}}}};function ht(){return ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ht.apply(this,arguments)}var pt={update:function(){var t=this,e=t.rtl,n=t.params.pagination;if(n.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var i,r=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,o=t.pagination.$el,s=t.params.loop?Math.ceil((r-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?((i=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup))>r-1-2*t.loopedSlides&&(i-=r-2*t.loopedSlides),i>s-1&&(i-=s),i<0&&"bullets"!==t.params.paginationType&&(i=s+i)):i=void 0!==t.snapIndex?t.snapIndex:t.activeIndex||0,"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){var a,l,c,u=t.pagination.bullets;if(n.dynamicBullets&&(t.pagination.bulletSize=u.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(t.isHorizontal()?"width":"height",t.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==t.previousIndex&&(t.pagination.dynamicBulletIndex+=i-t.previousIndex,t.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?t.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:t.pagination.dynamicBulletIndex<0&&(t.pagination.dynamicBulletIndex=0)),a=i-t.pagination.dynamicBulletIndex,c=((l=a+(Math.min(u.length,n.dynamicMainBullets)-1))+a)/2),u.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),o.length>1)u.each((function(t){var e=_(t),r=e.index();r===i&&e.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=a&&r<=l&&e.addClass(n.bulletActiveClass+"-main"),r===a&&e.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),r===l&&e.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var h=u.eq(i),p=h.index();if(h.addClass(n.bulletActiveClass),n.dynamicBullets){for(var f=u.eq(a),d=u.eq(l),g=a;g<=l;g+=1)u.eq(g).addClass(n.bulletActiveClass+"-main");if(t.params.loop)if(p>=u.length-n.dynamicMainBullets){for(var m=n.dynamicMainBullets;m>=0;m-=1)u.eq(u.length-m).addClass(n.bulletActiveClass+"-main");u.eq(u.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else f.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),d.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else f.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),d.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var y=Math.min(u.length,n.dynamicMainBullets+4),v=(t.pagination.bulletSize*y-t.pagination.bulletSize)/2-c*t.pagination.bulletSize,x=e?"right":"left";u.css(t.isHorizontal()?x:"top",v+"px")}}if("fraction"===n.type&&(o.find(I(n.currentClass)).text(n.formatFractionCurrent(i+1)),o.find(I(n.totalClass)).text(n.formatFractionTotal(s))),"progressbar"===n.type){var b;b=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";var w=(i+1)/s,E=1,S=1;"horizontal"===b?E=w:S=w,o.find(I(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+E+") scaleY("+S+")").transition(t.params.speed)}"custom"===n.type&&n.renderCustom?(o.html(n.renderCustom(t,i+1,s)),t.emit("paginationRender",o[0])):t.emit("paginationUpdate",o[0]),t.params.watchOverflow&&t.enabled&&o[t.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,i=t.pagination.$el,r="";if("bullets"===e.type){var o=t.params.loop?Math.ceil((n-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&!t.params.loop&&o>n&&(o=n);for(var s=0;s<o;s+=1)e.renderBullet?r+=e.renderBullet.call(t,s,e.bulletClass):r+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(r),t.pagination.bullets=i.find(I(e.bulletClass))}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(r)),"custom"!==e.type&&t.emit("paginationRender",t.pagination.$el[0])}},init:function(){var t=this;t.params.pagination=M(t.$el,t.params.pagination,t.params.createElements,{el:"swiper-pagination"});var e=t.params.pagination;if(e.el){var n=_(e.el);0!==n.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&n.length>1&&(n=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&n.addClass(e.clickableClass),n.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(n.addClass(""+e.modifierClass+e.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.addClass(e.progressbarOppositeClass),e.clickable&&n.on("click",I(e.bulletClass),(function(e){e.preventDefault();var n=_(this).index()*t.params.slidesPerGroup;t.params.loop&&(n+=t.loopedSlides),t.slideTo(n)})),S(t.pagination,{$el:n,el:n[0]}),t.enabled||n.addClass(e.lockClass))}},destroy:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.pagination.$el;n.removeClass(e.hiddenClass),n.removeClass(e.modifierClass+e.type),t.pagination.bullets&&t.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&n.off("click",I(e.bulletClass))}}};const ft={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){C(this,{pagination:ht({dynamicBulletIndex:0},pt)})},on:{init:function(t){t.pagination.init(),t.pagination.render(),t.pagination.update()},activeIndexChange:function(t){(t.params.loop||void 0===t.snapIndex)&&t.pagination.update()},snapIndexChange:function(t){t.params.loop||t.pagination.update()},slidesLengthChange:function(t){t.params.loop&&(t.pagination.render(),t.pagination.update())},snapGridLengthChange:function(t){t.params.loop||(t.pagination.render(),t.pagination.update())},destroy:function(t){t.pagination.destroy()},"enable disable":function(t){var e=t.pagination.$el;e&&e[t.enabled?"removeClass":"addClass"](t.params.pagination.lockClass)},click:function(t,e){var n=e.target;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&t.pagination.$el.length>0&&!_(n).hasClass(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&n===t.navigation.nextEl||t.navigation.prevEl&&n===t.navigation.prevEl))return;!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow"):t.emit("paginationHide"),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass)}}}};const dt=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};const gt=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};function mt(t,e){return t>e?1:t<e?-1:0}function yt(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"==typeof n){for(let r=1;r<i;++r){const i=t[r];if(i===e)return r;if(i<e)return n(e,t[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return i-1}function vt(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function _t(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function xt(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function bt(){return!0}function wt(){return!1}function Et(){}function St(t){let e,n,i,r=!1;return function(){const o=Array.prototype.slice.call(arguments);return r&&this===i&&xt(o,n)||(r=!0,i=this,n=o,e=t.apply(this,arguments)),e}}function Ct(t){for(const e in t)delete t[e]}function It(t){let e;for(e in t)return!1;return!e}const Mt=class extends dt{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const r=e?new gt(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let a;n in o||(o[n]=0,s[n]=0),++o[n];for(let t=0,e=i.length;t<e;++t)if(a="handleEvent"in i[t]?i[t].handleEvent(r):i[t].call(this,r),!1===a||r.propagationStopped){a=!1;break}if(0==--o[n]){let t=s[n];for(delete s[n];t--;)this.removeEventListener(n,Et);delete o[n]}return a}disposeInternal(){this.listeners_&&Ct(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=Et,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}};var Lt=n(7863),Tt=n(6901);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function At(t,e,n){return e&&Rt(t.prototype,e),n&&Rt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}function Dt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}function Ft(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}function jt(t){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jt(t)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function zt(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xt={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},Vt=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,t),this.init(e,n)}return At(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||Xt,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,qt(qt({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}},{key:"clone",value:function(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new t(this.logger,e)}}]),t}()),Yt=function(){function t(){Ot(this,t),this.observers={}}return At(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach((function(t){t.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(e){e.apply(e,[t].concat(n))}))}}]),t}();function Ht(){var t,e,n=new Promise((function(n,i){t=n,e=i}));return n.resolve=t,n.reject=e,n}function Wt(t){return null==t?"":""+t}function Zt(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!t[s]&&n&&(t[s]=new n),t=Object.prototype.hasOwnProperty.call(t,s)?t[s]:{}}return r()?{}:{obj:t,k:i(o.shift())}}function $t(t,e,n){var i=Zt(t,e,Object);i.obj[i.k]=n}function Kt(t,e){var n=Zt(t,e),i=n.obj,r=n.k;if(i)return i[r]}function Jt(t,e,n){var i=Kt(t,n);return void 0!==i?i:Kt(e,n)}function Qt(t,e,n){for(var i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):Qt(t[i],e[i],n):t[i]=e[i]);return t}function te(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ne(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return ee[t]})):t}var ie="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,re=[" ",",","?","!",";"];function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=jt(t);if(e){var r=jt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ft(this,n)}}function le(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var i=e.split(n),r=t,o=0;o<i.length;++o){if(!r)return;if("string"==typeof r[i[o]]&&o+1<i.length)return;if(void 0===r[i[o]]){for(var s=2,a=i.slice(o,o+s).join(n),l=r[a];void 0===l&&i.length>o+s;)s++,l=r[a=i.slice(o,o+s).join(n)];if(void 0===l)return;if(null===l)return null;if(e.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=i.slice(o+s).join(n);return c?le(l,c,n):void 0}r=r[i[o]]}return r}}var ce=function(t){Dt(n,t);var e=ae(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ot(this,n),i=e.call(this),ie&&Yt.call(kt(i)),i.data=t||{},i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return At(n,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure,s=[t,e];n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(s=t.split("."));var a=Kt(this.data,s);return a||!o||"string"!=typeof n?a:le(this.data&&this.data[t]&&this.data[t][e],n,r)}},{key:"addResource",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[t,e];n&&(s=s.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(i=e,e=(s=t.split("."))[1]),this.addNamespaces(e),$t(this.data,s,i),r.silent||this.emit("added",t,e,n,i)}},{key:"addResources",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(t,e,r,n[r],{silent:!0});i.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[t,e];t.indexOf(".")>-1&&(i=n,n=e,e=(s=t.split("."))[1]),this.addNamespaces(e);var a=Kt(this.data,s)||{};i?Qt(a,n,r):a=se(se({},a),n),$t(this.data,s,a),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?se(se({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),n}(Yt),ue={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,i,r))})),e}};function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=jt(t);if(e){var r=jt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ft(this,n)}}var de={},ge=function(t){Dt(n,t);var e=fe(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot(this,n),i=e.call(this),ie&&Yt.call(kt(i)),function(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,kt(i)),i.options=r,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=Vt.create("translator"),i}return At(n,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,r=e.ns||this.options.defaultNS||[],o=n&&t.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,n){e=e||"",n=n||"";var i=re.filter((function(t){return e.indexOf(t)<0&&n.indexOf(t)<0}));if(0===i.length)return!0;var r=new RegExp("(".concat(i.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),o=!r.test(t);if(!o){var s=t.indexOf(n);s>0&&!r.test(t.substring(0,s))&&(o=!0)}return o}(t,n,i));if(o&&!s){var a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:r};var l=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(r=l.shift()),t=l.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}},{key:"translate",value:function(t,e,i){var r=this;if("object"!==Pt(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var o=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,s=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],e),l=a.key,c=a.namespaces,u=c[c.length-1],h=e.lng||this.language,p=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&"cimode"===h.toLowerCase()){if(p){var f=e.nsSeparator||this.options.nsSeparator;return o?(d.res="".concat(u).concat(f).concat(l),d):"".concat(u).concat(f).concat(l)}return o?(d.res=l,d):l}var d=this.resolve(t,e),g=d&&d.res,m=d&&d.usedKey||l,y=d&&d.exactUsedKey||l,v=Object.prototype.toString.apply(g),_=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&g&&("string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(v)<0&&("string"!=typeof _||"[object Array]"!==v)){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,g,pe(pe({},e),{},{ns:c})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return o?(d.res=b,d):b}if(s){var w="[object Array]"===v,E=w?[]:{},S=w?y:m;for(var C in g)if(Object.prototype.hasOwnProperty.call(g,C)){var I="".concat(S).concat(s).concat(C);E[C]=this.translate(I,pe(pe({},e),{joinArrays:!1,ns:c})),E[C]===I&&(E[C]=g[C])}g=E}}else if(x&&"string"==typeof _&&"[object Array]"===v)(g=g.join(_))&&(g=this.extendTranslation(g,t,e,i));else{var M=!1,L=!1,T=void 0!==e.count&&"string"!=typeof e.count,P=n.hasDefaultValue(e),O=T?this.pluralResolver.getSuffix(h,e.count,e):"",R=e["defaultValue".concat(O)]||e.defaultValue;!this.isValidLookup(g)&&P&&(M=!0,g=R),this.isValidLookup(g)||(L=!0,g=l);var A=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:g,k=P&&R!==g&&this.options.updateMissing;if(L||M||k){if(this.logger.log(k?"updateKey":"missingKey",h,u,l,k?R:g),s){var N=this.resolve(l,pe(pe({},e),{},{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var D=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var j=0;j<F.length;j++)D.push(F[j]);else"all"===this.options.saveMissingTo?D=this.languageUtils.toResolveHierarchy(e.lng||this.language):D.push(e.lng||this.language);var B=function(t,n,i){var o=P&&i!==g?i:A;r.options.missingKeyHandler?r.options.missingKeyHandler(t,u,n,o,k,e):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(t,u,n,o,k,e),r.emit("missingKey",t,u,n,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?D.forEach((function(t){r.pluralResolver.getSuffixes(t,e).forEach((function(n){B([t],l+n,e["defaultValue".concat(n)]||R)}))})):B(D,l,R))}g=this.extendTranslation(g,t,e,d,i),L&&g===l&&this.options.appendNamespaceToMissingKey&&(g="".concat(u,":").concat(l)),(L||M)&&this.options.parseMissingKeyHandler&&(g="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(u,":").concat(l):l,M?g:void 0):this.options.parseMissingKeyHandler(g))}return o?(d.res=g,d):g}},{key:"extendTranslation",value:function(t,e,n,i,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,pe(pe({},this.options.interpolation.defaultVariables),n),i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(pe(pe({},n),{interpolation:pe(pe({},this.options.interpolation),n.interpolation)}));var s,a="string"==typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=t.match(this.interpolator.nestingRegexp);s=l&&l.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=pe(pe({},this.options.interpolation.defaultVariables),c)),t=this.interpolator.interpolate(t,c,n.lng||this.language,n),a){var u=t.match(this.interpolator.nestingRegexp);s<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r&&r[0]===i[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(e[0])),null):o.translate.apply(o,i.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,p="string"==typeof h?[h]:h;return null!=t&&p&&p.length&&!1!==n.applyPostProcessor&&(t=ue.handle(p,t,e,this.options&&this.options.postProcessPassResolved?pe({i18nResolved:i},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!s.isValidLookup(e)){var l=s.extractFromKey(t,a),c=l.key;n=c;var u=l.namespaces;s.options.fallbackNS&&(u=u.concat(s.options.fallbackNS));var h=void 0!==a.count&&"string"!=typeof a.count,p=h&&!a.ordinal&&0===a.count&&s.pluralResolver.shouldUseIntlApi(),f=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,d=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);u.forEach((function(t){s.isValidLookup(e)||(o=t,!de["".concat(d[0],"-").concat(t)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(de["".concat(d[0],"-").concat(t)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!s.isValidLookup(e)){r=n;var o,l=[c];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(l,c,n,t,a);else{var u;h&&(u=s.pluralResolver.getSuffix(n,a.count,a));var d="".concat(s.options.pluralSeparator,"zero");if(h&&(l.push(c+u),p&&l.push(c+d)),f){var g="".concat(c).concat(s.options.contextSeparator).concat(a.context);l.push(g),h&&(l.push(g+u),p&&l.push(g+d))}}for(;o=l.pop();)s.isValidLookup(e)||(i=o,e=s.getResource(n,t,o,a))}})))}))}})),{res:e,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,12)&&void 0!==t[n])return!0;return!1}}]),n}(Yt);function me(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ye=function(){function t(e){Ot(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Vt.create("languageUtils")}return At(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=me(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=me(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=me(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var i=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(i)||(e=i)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var i=n.getLanguagePartFromCode(t);if(n.isSupportedCode(i))return e=i;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(i))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],o=function(t){t&&(n.isSupportedCode(t)?r.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),i.forEach((function(t){r.indexOf(t)<0&&o(n.formatLanguageCode(t))})),r}}]),t}(),ve=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_e={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},xe=["v1","v2","v3"],be={zero:0,one:1,two:2,few:3,many:4,other:5};var we=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,t),this.languageUtils=e,this.options=i,this.logger=Vt.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},ve.forEach((function(t){t.lngs.forEach((function(e){n[e]={numbers:t.nr,plurals:_e[t.fc]}}))})),n)}return At(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRule(t,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((function(t,e){return be[t]-be[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):i.numbers.map((function(i){return e.getSuffix(t,i,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getRule(t,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(e)):this.getSuffixRetroCompatible(i,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,i=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),r=t.numbers[i];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var o=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_".concat(r.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!xe.includes(this.options.compatibilityJSON)}}]),t}();function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ot(this,t),this.logger=Vt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return At(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:ne,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?te(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?te(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?te(e.nestingPrefix):e.nestingPrefixEscaped||te("$t("),this.nestingSuffix=e.nestingSuffix?te(e.nestingSuffix):e.nestingSuffixEscaped||te(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,i){var r,o,s,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(t){return t.replace(/\$/g,"$$$$")}var u=function(t){if(t.indexOf(a.formatSeparator)<0){var r=Jt(e,l,t);return a.alwaysFormat?a.format(r,void 0,n,Se(Se(Se({},i),e),{},{interpolationkey:t})):r}var o=t.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(Jt(e,l,s),c,n,Se(Se(Se({},i),e),{},{interpolationkey:s}))};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,f=[{regex:this.regexpUnescape,safeValue:function(t){return c(t)}},{regex:this.regexp,safeValue:function(t){return a.escapeValue?c(a.escape(t)):c(t)}}];return f.forEach((function(e){for(s=0;r=e.regex.exec(t);){var n=r[1].trim();if(void 0===(o=u(n)))if("function"==typeof h){var l=h(t,r,i);o="string"==typeof l?l:""}else if(i&&i.hasOwnProperty(n))o="";else{if(p){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(t)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=Wt(o));var c=e.safeValue(o);if(t=t.replace(r[0],c),p?(e.regex.lastIndex+=o.length,e.regex.lastIndex-=r[0].length):e.regex.lastIndex=0,++s>=a.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Se({},o);function a(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var i=t.split(new RegExp("".concat(n,"[ ]*{"))),r="{".concat(i[1]);t=i[0];var o=(r=this.interpolate(r,s)).match(/'/g),a=r.match(/"/g);(o&&o.length%2==0&&!a||a.length%2!=0)&&(r=r.replace(/'/g,'"'));try{s=JSON.parse(r),e&&(s=Se(Se({},e),s))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(r)}return delete s.defaultValue,t}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(t);){var l=[],c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=u.shift(),l=u,c=!0}if((i=e(a.call(this,n[1].trim(),s),s))&&n[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=Wt(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),i=""),c&&(i=l.reduce((function(t,e){return r.format(t,e,o.lng,Se(Se({},o),{},{interpolationkey:n[1].trim()}))}),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}]),t}();function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Le(t){var e={};return function(n,i,r){var o=i+JSON.stringify(r),s=e[o];return s||(s=t(i,r),e[o]=s),s(n)}}var Te=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ot(this,t),this.logger=Vt.create("formatter"),this.options=e,this.formats={number:Le((function(t,e){var n=new Intl.NumberFormat(t,e);return function(t){return n.format(t)}})),currency:Le((function(t,e){var n=new Intl.NumberFormat(t,Me(Me({},e),{},{style:"currency"}));return function(t){return n.format(t)}})),datetime:Le((function(t,e){var n=new Intl.DateTimeFormat(t,Me({},e));return function(t){return n.format(t)}})),relativetime:Le((function(t,e){var n=new Intl.RelativeTimeFormat(t,Me({},e));return function(t){return n.format(t,e.range||"day")}})),list:Le((function(t,e){var n=new Intl.ListFormat(t,Me({},e));return function(t){return n.format(t)}}))},this.init(e)}return At(t,[{key:"init",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"addCached",value:function(t,e){this.formats[t.toLowerCase().trim()]=Le(e)}},{key:"format",value:function(t,e,n,i){var r=this,o=e.split(this.formatSeparator).reduce((function(t,e){var o=function(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var i=t.split("(");e=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);"currency"===e&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach((function(t){if(t){var e=zt(t.split(":")),i=e[0],r=e.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[i.trim()]||(n[i.trim()]=r),"false"===r&&(n[i.trim()]=!1),"true"===r&&(n[i.trim()]=!0),isNaN(r)||(n[i.trim()]=parseInt(r,10))}}))}return{formatName:e,formatOptions:n}}(e),s=o.formatName,a=o.formatOptions;if(r.formats[s]){var l=t;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},u=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[s](t,u,Me(Me(Me({},a),i),c))}catch(t){r.logger.warn(t)}return l}return r.logger.warn("there was no format function for ".concat(s)),t}),t);return o}}]),t}();function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=jt(t);if(e){var r=jt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ft(this,n)}}var Ae=function(t){Dt(n,t);var e=Re(n);function n(t,i,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ot(this,n),o=e.call(this),ie&&Yt.call(kt(o)),o.backend=t,o.store=i,o.services=r,o.languageUtils=r.languageUtils,o.options=s,o.logger=Vt.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,s.backend,s),o}return At(n,[{key:"queueLoad",value:function(t,e,n,i){var r=this,o={},s={},a={},l={};return t.forEach((function(t){var i=!0;e.forEach((function(e){var a="".concat(t,"|").concat(e);!n.reload&&r.store.hasResourceBundle(t,e)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?void 0===s[a]&&(s[a]=!0):(r.state[a]=1,i=!1,void 0===s[a]&&(s[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===l[e]&&(l[e]=!0)))})),i||(a[t]=!0)})),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}},{key:"loaded",value:function(t,e,n){var i=t.split("|"),r=i[0],o=i[1];e&&this.emit("failedLoading",r,o,e),n&&this.store.addResourceBundle(r,o,n),this.state[t]=e?-1:2;var s={};this.queue.forEach((function(n){!function(t,e,n,i){var r=Zt(t,e,Object),o=r.obj,s=r.k;o[s]=o[s]||[],i&&(o[s]=o[s].concat(n)),i||o[s].push(n)}(n.loaded,[r],o),function(t,e){void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)}(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(t){s[t]||(s[t]={});var e=n.loaded[t];e.length&&e.forEach((function(e){void 0===s[t][e]&&(s[t][e]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;return t.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:o,callback:s}):(this.readingCalls++,this.backend[n](t,e,(function(a,l){if(i.readingCalls--,i.waitingReads.length>0){var c=i.waitingReads.shift();i.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}a&&l&&r<i.maxRetries?setTimeout((function(){i.read.call(i,t,e,n,r+1,2*o,s)}),o):s(a,l)}))):s(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&e.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&e.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),e.loaded(t,i,s)}))}},{key:"saveMissing",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,i,null,Oe(Oe({},o),{},{isUpdate:r})),t&&t[0]&&this.store.addResource(t[0],e,n,i))}}]),n}(Yt);function ke(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=jt(t);if(e){var r=jt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ft(this,n)}}function je(){}var Be=function(t){Dt(n,t);var e=Fe(n);function n(){var t,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Ot(this,n),t=e.call(this),ie&&Yt.call(kt(t)),t.options=ke(r),t.services={},t.logger=Vt,t.modules={external:[]},i=kt(t),Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach((function(t){"function"==typeof i[t]&&(i[t]=i[t].bind(i))})),o&&!t.isInitialized&&!r.isClone){if(!t.options.initImmediate)return t.init(r,o),Ft(t,kt(t));setTimeout((function(){t.init(r,o)}),0)}return t}return At(n,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(n=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var i={debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===Pt(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===Pt(t[2])||"object"===Pt(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}};function r(t){return t?"function"==typeof t?new t:t:null}if(this.options=De(De(De({},i),this.options),ke(e)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=De(De({},i.interpolation),this.options.interpolation)),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){var o;this.modules.logger?Vt.init(r(this.modules.logger),this.options):Vt.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=Te);var s=new ye(this.options);this.store=new ce(this.options.resources,this.options);var a=this.services;a.logger=Vt,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new we(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(a.formatter=r(o),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new Ce(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new Ae(r(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.languageDetector&&(a.languageDetector=r(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=r(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new ge(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.format=this.options.interpolation.format,n||(n=je),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var c=Ht(),u=function(){var e=function(e,i){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),c.resolve(i),n(e,i)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je,i="string"==typeof t?t:this.language;if("function"==typeof t&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],o=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){r.indexOf(t)<0&&r.push(t)}))};if(i)o(i);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(t){return o(t)}));this.options.preload&&this.options.preload.forEach((function(t){return o(t)})),this.services.backendConnector.load(r,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),n(t)}))}else n(null)}},{key:"reloadResources",value:function(t,e,n){var i=Ht();return t||(t=this.languages),e||(e=this.options.ns),n||(n=je),this.services.backendConnector.reload(t,e,(function(t){i.resolve(),n(t)})),i}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&ue.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var i=Ht();this.emit("languageChanging",t);var r=function(t){n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.resolvedLanguage=void 0,n.setResolvedLanguage(t)},o=function(o){t||o||!n.services.languageDetector||(o=[]);var s="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);s&&(n.language||r(s),n.translator.language||n.translator.changeLanguage(s),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(s)),n.loadResources(s,(function(t){!function(t,o){o?(r(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,s)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(t):o(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(t,e,n){var i=this,r=function t(e,r){var o;if("object"!==Pt(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([e,r].concat(a))}else o=De({},r);o.lng=o.lng||t.lng,o.lngs=o.lngs||t.lngs,o.ns=o.ns||t.ns,o.keyPrefix=o.keyPrefix||n||t.keyPrefix;var c=i.options.keySeparator||".",u=o.keyPrefix?"".concat(o.keyPrefix).concat(c).concat(e):e;return i.t(u,o)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=n,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(t,n){var i=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(i,t)||r&&!s(o,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,i=Ht();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){i.resolve(),e&&e(t)})),i):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=Ht();"string"==typeof t&&(t=[t]);var i=this.options.preload||[],r=t.filter((function(t){return i.indexOf(t)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je,r=De(De(De({},this.options),e),{isClone:!0}),o=new n(r);void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e));return["store","services","language"].forEach((function(e){o[e]=t[e]})),o.services=De({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new ge(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.emit.apply(o,[t].concat(n))})),o.init(r,i),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(Yt);Bt(Be,"createInstance",(function(){return new Be(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var Ge=Be.createInstance();Ge.createInstance=Be.createInstance;Ge.createInstance,Ge.init,Ge.loadResources,Ge.reloadResources,Ge.use,Ge.changeLanguage,Ge.getFixedT,Ge.t,Ge.exists,Ge.setDefaultNamespace,Ge.hasLoadedNamespace,Ge.loadNamespaces,Ge.loadLanguages;const ze=Ge;var Ue=[],qe=Ue.forEach,Xe=Ue.slice;function Ve(t,e){if(e&&"object"===Pt(e)){var n="",i=encodeURIComponent;for(var r in e)n+="&"+i(r)+"="+i(e[r]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function Ye(t,e,n,i,r){i&&"object"===Pt(i)&&(r||(i._t=new Date),i=Ve("",i).slice(1)),e.queryStringParams&&(t=Ve(t,e.queryStringParams));try{var o;(o=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(i?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,i&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var s=e.customHeaders;if(s="function"==typeof s?s():s)for(var a in s)o.setRequestHeader(a,s[a]);o.onreadystatechange=function(){o.readyState>3&&n&&n(o.responseText,o)},o.send(i)}catch(t){console&&console.log(t)}}var He=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ot(this,t),this.init(e,n),this.type="backend"}return At(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=function(t){return qe.call(Xe.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}(e,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(t,e,n){return Bt({},e,n||"")},crossDomain:!1,ajax:Ye})}},{key:"readMulti",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(t,e));var r=this.services.interpolator.interpolate(i,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(r,n)}},{key:"read",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([t],[e]));var r=this.services.interpolator.interpolate(i,{lng:t,ns:e});this.loadUrl(r,n)}},{key:"loadUrl",value:function(t,e){var n=this;this.options.ajax(t,this.options,(function(i,r){if(r.status>=500&&r.status<600)return e("failed loading "+t,!0);if(r.status>=400&&r.status<500)return e("failed loading "+t,!1);var o,s;try{o=n.options.parse(i,t)}catch(e){s="failed parsing "+t+" to json"}if(s)return e(s,!1);e(null,o)}))}},{key:"create",value:function(t,e,n,i){var r=this;"string"==typeof t&&(t=[t]);var o=this.options.parsePayload(e,n,i);t.forEach((function(t){var n=r.services.interpolator.interpolate(r.options.addPath,{lng:t,ns:e});r.options.ajax(n,r.options,(function(t,e){}),o)}))}}]),t}();He.type="backend";const We=He;class Ze extends gt{constructor(t,e){super(t),this.detail=e}}const $e=()=>{const t=window.navigator.userAgent.toLowerCase();try{let e;return-1!=t.indexOf("chrome")?(e=(navigator.languages[0]||navigator.browserLanguage||navigator.language||navigator.userLanguage).split(";"),e[0]):(e=(navigator.browserLanguage||navigator.language||navigator.userLanguage).split(";"),e[0])}catch(t){return""}},Ke=["ALL","OFF"],Je={ALL:-99,DEBUG:-1,INFO:0,WARN:1,ERROR:2,OFF:99};class Qe{constructor(t=Je.INFO){this.level=t,this.make()}make(){const t=Object.keys(Je).filter((t=>!Ke.includes(t)));for(const e of t){const t=Je[e];this[e.toLowerCase()]=this.level<=t?console.log:()=>{}}}}const tn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};const en=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||tn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},nn=6378137,rn=Math.PI*nn,on=[-rn,-rn,rn,rn],sn=[-180,-85,180,85],an=nn*Math.log(Math.tan(Math.PI/2));class ln extends en{constructor(t){super({code:t,units:"m",extent:on,global:!0,worldExtent:sn,getPointResolution:function(t,e){return t/Math.cosh(e[1]/nn)}})}}const cn=[new ln("EPSG:3857"),new ln("EPSG:102100"),new ln("EPSG:102113"),new ln("EPSG:900913"),new ln("http://www.opengis.net/def/crs/EPSG/0/3857"),new ln("http://www.opengis.net/gml/srs/epsg.xml#3857")];function un(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=rn*t[r]/180;let n=nn*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>an?n=an:n<-an&&(n=-an),e[r+1]=n}return e}function hn(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/rn,e[r+1]=360*Math.atan(Math.exp(t[r+1]/nn))/Math.PI-90;return e}const pn=[-180,-90,180,90],fn=6378137*Math.PI/180;class dn extends en{constructor(t,e){super({code:t,units:"degrees",extent:pn,axisOrientation:e,global:!0,metersPerUnit:fn,worldExtent:pn})}}const gn=[new dn("CRS:84"),new dn("EPSG:4326","neu"),new dn("urn:ogc:def:crs:OGC:1.3:CRS84"),new dn("urn:ogc:def:crs:OGC:2:84"),new dn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new dn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new dn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let mn={};let yn={};function vn(t,e,n){const i=t.getCode(),r=e.getCode();i in yn||(yn[i]={}),yn[i][r]=n}const _n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xn(t){const e=Ln();for(let n=0,i=t.length;n<i;++n)kn(e,t[n]);return e}function bn(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function wn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function En(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function Sn(t,e){return In(t,e[0],e[1])}function Cn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function In(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Mn(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1];let l=_n.UNKNOWN;return s<n?l|=_n.LEFT:s>r&&(l|=_n.RIGHT),a<i?l|=_n.BELOW:a>o&&(l|=_n.ABOVE),l===_n.UNKNOWN&&(l=_n.INTERSECTING),l}function Ln(){return[1/0,1/0,-1/0,-1/0]}function Tn(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function Pn(t){return Tn(1/0,1/0,-1/0,-1/0,t)}function On(t,e){const n=t[0],i=t[1];return Tn(n,i,n,i,e)}function Rn(t,e,n,i,r){return Nn(Pn(r),t,e,n,i)}function An(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function kn(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Nn(t,e,n,i,r){for(;n<i;n+=r)Dn(t,e[n],e[n+1]);return t}function Dn(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Fn(t,e){let n;return n=e(Bn(t)),n||(n=e(Gn(t)),n||(n=e(Wn(t)),n||(n=e(Hn(t)),n||!1)))}function jn(t){let e=0;return Kn(t)||(e=Zn(t)*Vn(t)),e}function Bn(t){return[t[0],t[1]]}function Gn(t){return[t[2],t[1]]}function zn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Un(t,e){let n;if("bottom-left"===e)n=Bn(t);else if("bottom-right"===e)n=Gn(t);else if("top-left"===e)n=Hn(t);else{if("top-right"!==e)throw new Error("Invalid corner");n=Wn(t)}return n}function qn(t,e,n,i,r){const[o,s,a,l,c,u,h,p]=Xn(t,e,n,i);return Tn(Math.min(o,a,c,h),Math.min(s,l,u,p),Math.max(o,a,c,h),Math.max(s,l,u,p),r)}function Xn(t,e,n,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,c=r*a,u=o*s,h=o*a,p=t[0],f=t[1];return[p-l+h,f-c-u,p-l-h,f-c+u,p+l-h,f+c+u,p+l+h,f+c-u,p-l+h,f-c-u]}function Vn(t){return t[3]-t[1]}function Yn(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return $n(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Pn(i),i}function Hn(t){return[t[0],t[3]]}function Wn(t){return[t[2],t[3]]}function Zn(t){return t[2]-t[0]}function $n(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Kn(t){return t[2]<t[0]||t[3]<t[1]}function Jn(t,e,n,i){if(Kn(t))return Pn(n);let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let o=0;o<i;++o)r.push(t[0]+e*o/i,t[1],t[2],t[1]+n*o/i,t[2]-e*o/i,t[3],t[0],t[3]-n*o/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const o=[],s=[];for(let t=0,e=r.length;t<e;t+=2)o.push(r[t]),s.push(r[t+1]);return function(t,e,n){return Tn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(o,s,n)}function Qn(t,e){const n=e.getExtent(),i=zn(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=Zn(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function ti(t,e,n){return Math.min(Math.max(t,e),n)}function ei(t,e,n,i,r,o){const s=r-n,a=o-i;if(0!==s||0!==a){const l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return ni(t,e,n,i)}function ni(t,e,n,i){const r=n-t,o=i-e;return r*r+o*o}function ii(t){return 180*t/Math.PI}function ri(t){return t*Math.PI/180}function oi(t,e){const n=t%e;return n*e<0?n+e:n}function si(t,e,n){return t+n*(e-t)}function ai(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function li(t,e){return Math.floor(ai(t,e))}function ci(t,e){return Math.ceil(ai(t,e))}function ui(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function hi(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function pi(t,e){if(e.canWrapX()){const n=Zn(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let r=0;e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||Zn(i),r=Math.floor((t[0]-i[0])/n));return r}(t,e,n);i&&(t[0]-=i*n)}return t}const fi=6371008.8;function di(t,e,n){n=n||fi;const i=ri(t[1]),r=ri(e[1]),o=(r-i)/2,s=ri(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function gi(t,e,n,i){i=i||fi;const r=ri(t[1]),o=ri(t[0]),s=e/i,a=Math.asin(Math.sin(r)*Math.cos(s)+Math.cos(r)*Math.sin(s)*Math.cos(n));return[ii(o+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(r),Math.cos(s)-Math.sin(r)*Math.sin(a))),ii(a)]}const mi={info:1,warn:2,error:3,none:4};let yi=mi.info;function vi(...t){yi>mi.warn||console.warn(...t)}let _i=!0;function xi(t){_i=!(void 0===t||t)}function bi(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function wi(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Ei(t){!function(t,e){mn[t]=e}(t.getCode(),t),vn(t,t,bi)}function Si(t){return"string"==typeof t?mn[e=t]||mn[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Ci(t,e,n,i){let r;const o=(t=Si(t)).getPointResolutionFunc();if(o){if(r=o(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/tn[i])}}else{const o=t.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const s=Ri(t,Si("EPSG:4326"));if(s===wi&&"degrees"!==o)r=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=s(t,t,2);r=(di(t.slice(0,2),t.slice(2,4))+di(t.slice(4,6),t.slice(6,8)))/2}const a=i?tn[i]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function Ii(t){!function(t){t.forEach(Ei)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&vn(e,t,bi)}))}))}function Mi(t,e){return t?"string"==typeof t?Si(t):t:Si(e)}function Li(t){return function(e,n,i){const r=e.length;i=void 0!==i?i:2,n=void 0!==n?n:new Array(r);for(let o=0;o<r;o+=i){const r=t(e.slice(o,o+i)),s=r.length;for(let t=0,a=i;t<a;++t)n[o+t]=t>=s?e[o+t]:r[t]}return n}}function Ti(t,e,n,i){const r=Si(t),o=Si(e);vn(r,o,Li(n)),vn(o,r,Li(i))}function Pi(t,e){const n=ki(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=oi(i+180,360)-180),n}function Oi(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return Ri(t,e)===bi&&n}function Ri(t,e){let n=function(t,e){let n;return t in yn&&e in yn[t]&&(n=yn[t][e]),n}(t.getCode(),e.getCode());return n||(n=wi),n}function Ai(t,e){return Ri(Si(t),Si(e))}function ki(t,e,n){return Ai(e,n)(t,void 0,t.length)}function Ni(t,e,n,i){return Jn(t,Ai(e,n),void 0,i)}let Di=null;function Fi(){return Di}function ji(t,e){return Di?ki(t,e,Di):t}function Bi(t,e){return Di?ki(t,Di,e):(_i&&!ui(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(_i=!1,vi("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Gi(t,e){return Di?Ni(t,e,Di):t}function zi(t,e){return Di?Ni(t,Di,e):t}function Ui(t,e){if(!Di)return t;const n=Si(e).getMetersPerUnit(),i=Di.getMetersPerUnit();return n&&i?t*n/i:t}var qi,Xi,Vi;Ii(cn),Ii(gn),qi=cn,Xi=un,Vi=hn,gn.forEach((function(t){qi.forEach((function(e){vn(t,e,Xi),vn(e,t,Vi)}))}));const Yi=20037508.342789244,Hi=[[0,0],[0,1],[1,0],[0,-1],[-1,0]],Wi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAB3RJTUUH3QgIBToaSbAjlwAAABd0RVh0U29mdHdhcmUAR0xEUE5HIHZlciAzLjRxhaThAAAACHRwTkdHTEQzAAAAAEqAKR8AAAAEZ0FNQQAAsY8L/GEFAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgBDwABHHIJwwAAAABJRU5ErkJggg==",Zi=256,$i=`<canvas width="256" height="256" src="${Wi}"></canvas>`;async function Ki(t){return"string"==typeof t?new Promise(((e,n)=>{const i=t.match(/\//)?t:`pois/${t}`,r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="json",r.onload=function(t){if(200==this.status||0==this.status)try{let t=this.response;"string"==typeof t&&(t=JSON.parse(t)),e(t)}catch(t){n(t)}else n("Fail to load poi json")},r.send()})):t}async function Ji(t,e){if(t=await Ki(t),Array.isArray(t))t=(t=await Promise.all(t.map((async t=>await Ki(t))))).length>0&&"FeatureCollection"===t[0].type?t.reduce(((t,n,i)=>{let r=n.id||n.properties&&n.properties.id;if(!r){if(0!==i)throw"POI layers include bad key setting";r="main"}return t[r]=Qi(n,r,e),t}),{}):{main:Qi(t,"main",e)};else if("FeatureCollection"===t.type){const n=t.id||t.properties&&t.properties.id||"main";t={[n]:Qi(t,n,e)}}else Object.keys(t).map((n=>{t[n]=Qi(t[n],n,e)}));return t.main||(t.main=Qi([],"main",e)),Object.keys(t).map((n=>{er(t,n,e)})),t}function Qi(t,e,n){if(Array.isArray(t))t={pois:t.map((t=>tr(t)))};else if("FeatureCollection"===t.type){const e=Object.assign({},t.properties||{});t.name&&(e.name=t.name),e.pois=t.features.map((t=>tr(t))),t=e}if(void 0===t.id)t.id=e;else if(t.id!==e)throw"POI layers include bad key setting";return t.namespaceID||(t.namespaceID=`${n.namespace?`${n.namespace}#`:""}${e}`),t.name||(t.name="main"===e?n.name:e),t.pois||(t.pois=[]),t}function tr(t){if("Feature"===t.type){const e=Object.assign({},t.properties||{});e.lnglat=t.geometry.coordinates,e.id||(e.id=t.id),e.name||(e.name=t.name),t=e}return t.lnglat||(t.lnglat=[t.lng||t.longitude,t.lat||t.latitude]),delete t.lng,delete t.lat,delete t.longitude,delete t.latitude,t}function er(t,e,n){if(!t[e])return;const i=t[e],r=i.pois;i.__nextId||(i.__nextId=0),r.map((t=>{t.id||(t.id=`${e}_${i.__nextId}`,i.__nextId++),t.namespaceID||(t.namespaceID=`${n.namespace?`${n.namespace}#`:""}${t.id}`)}))}var nr=n(9346);function ir(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function rr(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!or(t[0])||!or(t[1]))throw new Error("coordinates must contain numbers");return ir({type:"Point",coordinates:t},e,n)}function or(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function sr(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===sr(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}const ar=function(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return sr(t,(function(t){n+=t[0],i+=t[1],r++}),!0),rr([n/r,i/r],e.properties)};function lr(t){return class extends t{constructor(){super(...arguments),this.officialTitle="",this.title="",this.mapID="",this.label="",this.homeMarginPixels=0}getCacheEnable(){return!!this.weiwudi}async getTileCacheStatsAsync(){if(!this.weiwudi)return{};try{return await this.weiwudi.stats()}catch(t){return{}}}async getTileCacheSizeAsync(){return(await this.getTileCacheStatsAsync()).size||0}async fetchAllTileCacheAsync(t){if(this.weiwudi)try{const e=e=>{t(e.type,e.detail)},n=t=>{this.weiwudi.removeEventListener("proceed",e),this.weiwudi.removeEventListener("finish",n),this.weiwudi.removeEventListener("stop",n),this.weiwudi.removeEventListener("canceled",n),e(t)};this.weiwudi.addEventListener("proceed",e),this.weiwudi.addEventListener("finish",n),this.weiwudi.addEventListener("stop",n),this.weiwudi.addEventListener("canceled",n),await this.weiwudi.fetchAll()}catch(t){}}async cancelTileCacheAsync(){if(this.weiwudi)try{await this.weiwudi.cancel()}catch(t){}}async clearTileCacheAsync(){if(this.weiwudi)try{await this.weiwudi.clean()}catch(t){}}getMap(){return this._map}setMap(t){this._map=t}setViewpointRadian(t){let e,n;const i=t.mercZoom,r=t.zoom,o=t.direction,s=t.rotation,a=this.getMap(),l=null==a?void 0:a.getView();void 0!==t.latitude&&void 0!==t.longitude&&(e=ki([t.longitude,t.latitude],"EPSG:4326","EPSG:3857")),void 0!==t.x&&null!=t.y&&(n=[t.x,t.y]),this.viewpoint2MercsAsync().then((t=>this.mercs2MercViewpoint(t))).then((t=>{const a=this.mercViewpoint2Mercs([e||t[0],i||t[1]||17,null!==o?o:t[2]]);this.mercs2ViewpointAsync(a).then((t=>{null!=e?null==l||l.setCenter(t[0]):null!=n&&(null==l||l.setCenter(n)),null!=i?null==l||l.setZoom(t[1]):null!=r&&(null==l||l.setZoom(r)),null!=o?null==l||l.setRotation(t[2]):null!=s&&(null==l||l.setRotation(s))}))}))}setViewpoint(t){t.rotation&&(t.rotation=t.rotation*Math.PI/180),t.direction&&(t.direction=t.direction*Math.PI/180),this.setViewpointRadian(t)}goHome(){const t=this.getMap();let e=t.getTarget();"string"==typeof e&&(e=document.getElementById(e));const n=t.homeMarginPixels,i=[1*(e.clientWidth-n-10),1*(e.clientHeight-n-10)],r={longitude:this.homePosition[0],latitude:this.homePosition[1],zoom:this.defZoom(i)};this.getMap().northUp?r.direction=0:r.rotation=0,this.setViewpointRadian(r)}resetRotation(){this.setViewpointRadian({rotation:0})}resetDirection(){this.setViewpointRadian({direction:0})}resetCirculation(){this.getMap().northUp?this.resetDirection():this.resetRotation()}setGPSMarkerAsync(t,e=!1){const n=this.getMap(),i=null==n?void 0:n.getView();if(!t)return new Promise(((t,e)=>{null==n||n.setGPSPosition(null),t(!0)}));const r=this.mercsFromGPSValue(t.lnglat,t.acc);return this.mercs2SysCoordsAsync_multiLayer([r]).then((t=>{const r=!t[0],o=r?t[1]:t[0],s=r?null:t[1],a={xy:o[0][0]};if(!this.insideCheckSysCoord(o[0][0]))return null==n||n.handleGPS(!1,!0),!1;const l=o[0].slice(1);return a.rad=l.reduce(((t,e,n)=>{const i=t+Math.sqrt(Math.pow(e[0]-a.xy[0],2)+Math.pow(e[1]-a.xy[1],2));return 3===n?i/4:i}),0),e||null==i||i.setCenter(a.xy),null==n||n.setGPSPosition(a,r?"hide":null),s&&(null==n||n.setGPSPosition({xy:s[0][0]},"sub")),!0})).catch((t=>{throw t}))}setGPSMarker(t,e=!1){this.setGPSMarkerAsync(t,e).then((()=>{}))}mercsFromGPSValue(t,e){const n=ki(t,"EPSG:4326","EPSG:3857"),i=t[1]*Math.PI/180,r=e/Math.cos(i);return Hi.map((t=>[t[0]*r+n[0],t[1]*r+n[1]]))}rotateMatrix(t,e){void 0===e&&(e=this.getMap().getView().getRotation());const n=[];for(let i=0;i<t.length;i++){const r=t[i],o=r[0]*Math.cos(e)-r[1]*Math.sin(e),s=r[0]*Math.sin(e)+r[1]*Math.cos(e);n.push([o,s])}return n}async resolvePois(t){this.pois=await Ji(t||[],{name:this.officialTitle||this.title,namespace:this.mapID})}getPoi(t){let e;return Object.keys(this.pois).map((n=>{this.pois[n].pois.map(((i,r)=>{i.id===t&&(e=this.pois[n].pois[r])}))})),e}addPoi(t,e){if(e||(e="main"),this.pois[e])return t=tr(t),this.pois[e].pois.push(t),er(this.pois,e,{name:this.officialTitle||this.title,namespace:this.mapID}),t.namespaceID}removePoi(t){Object.keys(this.pois).map((e=>{this.pois[e].pois.map(((n,i)=>{n.id===t&&delete this.pois[e].pois[i]}))}))}clearPoi(t){t||(t="main"),"all"===t?Object.keys(this.pois).map((t=>{this.pois[t].pois=[]})):this.pois[t]&&(this.pois[t].pois=[])}listPoiLayers(t=!1,e=!1){return Object.keys(this.pois).sort(((t,e)=>"main"===t?-1:"main"===e?1:t<e?-1:t>e?1:0)).map((t=>this.pois[t])).filter((n=>e?t?n.pois.length&&n.hide:n.pois.length:!t||n.hide))}getPoiLayer(t){return this.pois[t]}addPoiLayer(t,e){"main"!==t&&(this.pois[t]||(this.pois[t]=Qi(e||[],t,{name:this.officialTitle||this.title,namespace:this.mapID})))}removePoiLayer(t){"main"!==t&&this.pois[t]&&delete this.pois[t]}merc2SysCoordAsync_ignoreBackground(t){return this.merc2XyAsync_ignoreBackground(t).then((t=>t?this.xy2SysCoord(t):void 0))}merc2SysCoordAsync(t){return this.merc2XyAsync(t).then((t=>t?this.xy2SysCoord(t):t))}sysCoord2MercAsync(t){const e=this.sysCoord2Xy(t);return this.xy2MercAsync(e)}zoom2Radius(t,e){const n=Math.floor(Math.min(t[0],t[1])/4);return void 0===e&&(e=this.getMap().getView().getDecimalZoom()),n*Yi/128/Math.pow(2,e)}viewpoint2SysCoords(t,e){return this.mercViewpoint2Mercs(t,e)}mercViewpoint2Mercs(t,e){let n=t?t[0]:void 0;const i=t?t[1]:void 0,r=t?t[2]:void 0;void 0===n&&(n=this.getMap().getView().getCenter()),void 0===e&&(e=this.getMap().getSize());const o=this.zoom2Radius(e,i);return[this.rotateMatrix(Hi,r).map((t=>[t[0]*o+n[0],t[1]*o+n[1]])),e]}sysCoords2Viewpoint(t){return this.mercs2MercViewpoint(t)}mercs2MercViewpoint(t){const e=t[0][0];let n=t[1];const i=t[0].slice(1,5).map((t=>[t[0]-e[0],t[1]-e[1]])),r=[[0,1],[1,0],[0,-1],[-1,0]];let o=0,s=0,a=0;for(let t=0;t<4;t++){const e=i[t],n=r[t],l=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));o+=l;const c=e[0]*n[1]-e[1]*n[0],u=Math.acos((e[0]*n[0]+e[1]*n[1])/l),h=c>0?-1*u:u;s+=Math.cos(h),a+=Math.sin(h)}const l=o/4,c=Math.atan2(a,s);n||(n=this.getMap().getSize());const u=Math.floor(Math.min(n[0],n[1])/4),h=Math.log(u*Yi/128/l)/Math.log(2);return[e,h,c]}sysCoords2Xys(t){return[t[0].map((t=>this.sysCoord2Xy(t))),t[1]]}xys2SysCoords(t){return[t[0].map((t=>this.xy2SysCoord(t))),t[1]]}mercs2XysAsync(t){return Promise.all(t[0].map((t=>this.merc2XyAsync(t)))).then((e=>[e,t[1]]))}xys2MercsAsync(t){return Promise.all(t[0].map((t=>this.xy2MercAsync(t)))).then((e=>[e,t[1]]))}}}const cr=["title","officialTitle","author","createdAt","era","contributor","mapper","license","dataLicense","attr","dataAttr","reference","description"],ur=["title","official_title","author","created_at","era","contributor","mapper","license","data_license","attr","data_attr","reference","description"];function hr(t,e){var n;if(e=mr(e),t.mapID=e.mapID,t.homePosition=e.homePosition,t.mercZoom=e.mercZoom,t.label=e.label,t.maxZoom=e.maxZoom,t.minZoom=e.minZoom,t.poiTemplate=e.poiTemplate,t.poiStyle=e.poiStyle,t.iconTemplate=e.iconTemplate,t.icon=e.icon,t.selectedIcon=e.selectedIcon,t.mercatorXShift=e.mercatorXShift,t.mercatorYShift=e.mercatorYShift,t.weiwudi=e.weiwudi,e.envelopeLngLats){const i=e.envelopeLngLats.map((t=>ki(t,"EPSG:4326","EPSG:3857")));i.push(i[0]),t.envelope=(0,nr.yu)([i]),t.centroid=null===(n=ar(t.envelope).geometry)||void 0===n?void 0:n.coordinates}for(let n=0;n<cr.length;n++){const i=cr[n],r=ur[n];t[i]=e[r]||e[i]}const i=e.thumbnail?new Promise((n=>{t.thumbnail=e.thumbnail,n(void 0)})):new Promise((n=>{t.thumbnail=`./tmbs/${e.mapID}.jpg`,fetch(t.thumbnail).then((i=>{i.ok||(t.thumbnail=`./tmbs/${e.mapID}_menu.jpg`),n(void 0)})).catch((i=>{t.thumbnail=`./tmbs/${e.mapID}_menu.jpg`,n(void 0)}))})).catch((n=>{t.thumbnail=`./tmbs/${e.mapID||e.sourceID}_menu.jpg`})),r=t.resolvePois(e.pois);t.initialWait=Promise.all([r,i])}function pr(t){const e=t;t.setTileLoadFunction(function(){const t=e.getTileLoadFunction();return function(n,i){const r=n.tileCoord[0];let o=n.tileCoord[1],s=n.tileCoord[2],a=Math.round(128*(e.mercatorXShift||0)*Math.pow(2,r)/Yi),l=Math.round(-128*(e.mercatorYShift||0)*Math.pow(2,r)/Yi);for(;a<0||a>=256;)a<0?(a+=256,o++):(a-=256,o--);for(;l<0||l>=256;)l<0?(l+=256,s++):(l-=256,s--);const c=document.createElement("div");c.innerHTML=$i;const u=c.childNodes[0],h=[[[r,o,s],0,0,256-a,256-l]];0!==a&&h.push([[r,o-1,s],256-a,0,a,256-l]),0!==l&&(h.push([[r,o,s-1],0,256-l,256-a,l]),0!==a&&h.push([[r,o-1,s-1],256-a,256-l,a,l])),Promise.all(h.map((t=>{const n=e.tileUrlFunction(t[0],e.tilePixelRatio_,e.projection_);return function(t,e,n,i,r,o,s){return new Promise(((t,a)=>{const l=function(e,a=void 0){0;const c=document.createElement("img");c.crossOrigin="Anonymous",c.onload=c.onerror=function(){if(c.width&&c.height){const e=n.getContext("2d"),a=0===i?256-o:0,l=0===r?256-s:0;o=i+o>c.width?c.width-i:o,s=r+s>c.height?c.height-r:s,e.drawImage(c,i,r,o,s,a,l,o,s),t(void 0)}else a?l(a):t("tileLoadError");0},c.src=e};l(e)}))}(t[0],n,u,t[1],t[2],t[3],t[4])}))).then((e=>{const i=e.reduce(((t,e)=>t&&e),!0);if(i)n.handleImageError_();else{const e=u.toDataURL();n.getImage().crossOrigin=null,t(n,e)}})).catch((t=>{n.handleImageError_()}))}}())}function fr(t){const e=document,n=e.createDocumentFragment(),i=[];t=t.replace(/(<\/?)d([ >])/g,"$1div$2").replace(/(<\/?)s([ >])/g,"$1span$2").replace(/ din="/g,' data-i18n="').replace(/ dinh="/g,' data-i18n-html="').replace(/ c="/g,' class="');const r=n.appendChild(e.createElement("div"));r.innerHTML=t;for(let t=0;t<r.childNodes.length;t++){const n=r.childNodes[t];if(n.nodeName&&"script"===n.nodeName.toLowerCase()){const r=e.createElement("script");n.type&&(r.type=n.type),n.src?r.src=n.src:r.text=n.text,i[t]=r}else i[t]=n}return i}function dr(t){for(;!(t<=180&&t>-180);){t+=360*(t>0?-1:1)}return t}function gr(t){if(!t)return;const e={mapID:t.mapID};for(let n=0;n<cr.length;n++){const i=cr[n];t[i]&&(e[i]=t[i])}return e}function mr(t){const e={max_zoom:"maxZoom",min_zoom:"minZoom",envelope_lnglats:"envelopeLngLats",envelopLngLats:"envelopeLngLats",image_extention:"imageExtension",image_extension:"imageExtension",imageExtention:"imageExtension",map_id:"mapID",sourceID:"mapID",source_id:"mapID",merc_max_zoom:"mercMaxZoom",merc_min_zoom:"mercMinZoom",zoom_restriction:"zoomRestriction",enable_cache:"enableCache",default_zoom:"defaultZoom",start_from:"startFrom",home_position:"homePosition",fake_radius:"fakeRadius",fake_center:"fakeCenter",fake_gps:"fakeGps",app_name:"appName",setting_file:"settingFile",merc_zoom:"mercZoom",mapbox_token:"mapboxToken",translate_ui:"translateUI",restore_session:"restoreSession",no_rotate:"noRotate",poi_template:"poiTemplate",poi_style:"poiStyle",icon_template:"iconTemplate",default_center:"defaultCenter",default_rotation:"defaultRotation",selected_icon:"selectedIcon",namespace_id:"namespaceID",mercator_x_shift:"mercatorXShift",mercator_y_shift:"mercatorYShift"};return Object.keys(e).reduce(((t,n)=>(t[n]&&(t[e[n]]=t[n],delete t[n]),t)),t)}const yr="propertychange",vr="change",_r="error",xr="contextmenu",br="click",wr="dblclick",Er="keydown",Sr="keypress",Cr="load",Ir="touchmove",Mr="wheel";function Lr(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function Tr(t,e,n,i){return Lr(t,e,n,i,!0)}function Pr(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ct(t))}class Or extends Mt{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(vr)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Lr(this,t[r],e);return i}return Lr(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=Tr(this,t[r],e)}else n=Tr(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Pr(t[e]);else Pr(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}Or.prototype.on,Or.prototype.once,Or.prototype.un;const Rr=Or;function Ar(){throw new Error("Unimplemented abstract method.")}let kr=0;function Nr(t){return t.ol_uid||(t.ol_uid=String(++kr))}class Dr extends gt{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}const Fr=class extends Rr{constructor(t){super(),this.on,this.once,this.un,Nr(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Dr(n,t,e)),n=yr,this.hasListener(n)&&this.dispatchEvent(new Dr(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],It(this.values_)&&(this.values_=null),e||this.notify(t,n)}}},jr="add",Br="remove",Gr="length";class zr extends gt{constructor(t,e,n){super(t),this.element=e,this.index=n}}const Ur=class extends Fr{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Gr)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new zr(jr,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new zr(Br,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new zr(Br,n,t)),this.dispatchEvent(new zr(jr,e,t))}updateLength_(){this.set(Gr,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}},qr="opacity",Xr="visible",Vr="extent",Yr="zIndex",Hr="maxResolution",Wr="minResolution",Zr="maxZoom",$r="minZoom",Kr="source",Jr="map";function Qr(t,e){if(!t)throw new Error(e)}const to=class extends Fr{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[qr]=void 0!==t.opacity?t.opacity:1,Qr("number"==typeof e[qr],"Layer opacity must be a number"),e[Xr]=void 0===t.visible||t.visible,e[Yr]=t.zIndex,e[Hr]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Wr]=void 0!==t.minResolution?t.minResolution:0,e[$r]=void 0!==t.minZoom?t.minZoom:-1/0,e[Zr]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=ti(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Ar()}getLayerStatesArray(t){return Ar()}getExtent(){return this.get(Vr)}getMaxResolution(){return this.get(Hr)}getMinResolution(){return this.get(Wr)}getMinZoom(){return this.get($r)}getMaxZoom(){return this.get(Zr)}getOpacity(){return this.get(qr)}getSourceState(){return Ar()}getVisible(){return this.get(Xr)}getZIndex(){return this.get(Yr)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Vr,t)}setMaxResolution(t){this.set(Hr,t)}setMinResolution(t){this.set(Wr,t)}setMaxZoom(t){this.set(Zr,t)}setMinZoom(t){this.set($r,t)}setOpacity(t){Qr("number"==typeof t,"Layer opacity must be a number"),this.set(qr,t)}setVisible(t){this.set(Xr,t)}setZIndex(t){this.set(Yr,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},eo="prerender",no="postrender",io="precompose",ro="postcompose",oo="rendercomplete",so=0,ao=1,lo={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},co=42,uo=256;function ho(t,e,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const l=e?0:o[0]*r,c=e?0:o[1]*r,u=a?a[0]:0,h=a?a[1]:0;let p=t[0]+l/2+u,f=t[2]-l/2+u,d=t[1]+c/2+h,g=t[3]-c/2+h;p>f&&(p=(f+p)/2,f=p),d>g&&(d=(g+d)/2,g=d);let m=ti(i[0],p,f),y=ti(i[1],d,g);if(s&&n&&r){const t=30*r;m+=-t*Math.log(1+Math.max(0,p-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-f)/t),y+=-t*Math.log(1+Math.max(0,d-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-g)/t)}return[m,y]}}function po(t){return t}function fo(t,e,n,i){const r=Zn(e)/n[0],o=Vn(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function go(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),ti(i,n/2,2*e)}function mo(t,e,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?fo(t,i,a,r):t;return n&&l?go(o,s,e):ti(o,e,s)}}}function yo(t){if(void 0!==t)return 0}function vo(t){if(void 0!==t)return t}function _o(t){return Math.pow(t,3)}function xo(t){return 1-_o(1-t)}function bo(t){return 3*t*t-2*t*t*t}function wo(t){return t}new Array(6);function Eo(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function So(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Co(t,e,n,i,r,o,s,a){const l=Math.sin(o),c=Math.cos(o);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=s*i*c-a*i*l+e,t[5]=s*r*l+a*r*c+n,t}function Io(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;Qr(0!==n,"Transformation matrix cannot be inverted");const r=e[0],o=e[1],s=e[2],a=e[3],l=e[4],c=e[5];return t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*c-a*l)/n,t[5]=-(r*c-o*l)/n,t}const Mo=[1e6,1e6,1e6,1e6,2,2];function Lo(t){const e="matrix("+t.map(((t,e)=>Math.round(t*Mo[e])/Mo[e])).join(", ")+")";return e}function To(t,e,n,i,r,o){o=o||[];let s=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];o[s++]=r[0]*e+r[2]*n+r[4],o[s++]=r[1]*e+r[3]*n+r[5]}return o&&o.length!=s&&(o.length=s),o}function Po(t,e,n,i,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),c=o[0],u=o[1];let h=0;for(let r=e;r<n;r+=i){const e=t[r]-c,n=t[r+1]-u;s[h++]=c+e*a-n*l,s[h++]=u+e*l+n*a;for(let e=r+2;e<r+i;++e)s[h++]=t[e]}return s&&s.length!=h&&(s.length=h),s}const Oo=[1,0,0,1,0,0];const Ro=class extends Fr{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=St(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Ar()}closestPointXY(t,e,n,i){return Ar()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Ar()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Pn(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){Ar()}scale(t,e,n){Ar()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Ar()}getType(){return Ar()}applyTransform(t){Ar()}intersectsExtent(t){return Ar()}translate(t,e){Ar()}transform(t,e){const n=Si(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const o=n.getExtent(),s=n.getWorldExtent(),a=Vn(s)/Vn(o);return Co(Oo,s[0],s[3],a,-a,0,0,0),To(t,0,t.length,r,Oo,i),Ai(n,e)(t,i,r)}:Ai(n,e);return this.applyTransform(i),this}};function Ao(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const ko=class extends Ro{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return Rn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Ar()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Ao(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Ar()}setLayout(t,e,n){let i;if(t)i=Ao(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Po(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=zn(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();!function(t,e,n,i,r,o,s,a){a=a||[];const l=s[0],c=s[1];let u=0;for(let s=e;s<n;s+=i){const e=t[s]-l,n=t[s+1]-c;a[u++]=l+r*e,a[u++]=c+o*n;for(let e=s+2;e<s+i;++e)a[u++]=t[e]}a&&a.length!=u&&(a.length=u)}(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,r,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o;for(let e=l+2;e<l+i;++e)s[a++]=t[e]}s&&s.length!=a&&(s.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}};function No(t,e,n,i,r,o,s){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(0===c&&0===u)h=e;else{const p=((r-a)*c+(o-l)*u)/(c*c+u*u);if(p>1)h=n;else{if(p>0){for(let r=0;r<i;++r)s[r]=si(t[e+r],t[n+r],p);return void(s.length=i)}h=e}}for(let e=0;e<i;++e)s[e]=t[h+e];s.length=i}function Do(t,e,n,i,r){let o=t[e],s=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=ni(o,s,n,i);a>r&&(r=a),o=n,s=i}return r}function Fo(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];r=Do(t,e,s,i,r),e=s}return r}function jo(t,e,n,i,r,o,s,a,l,c,u){if(e==n)return c;let h,p;if(0===r){if(p=ni(s,a,t[e],t[e+1]),p<c){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,p}return c}u=u||[NaN,NaN];let f=e+i;for(;f<n;)if(No(t,f-i,f,i,s,a,u),p=ni(s,a,u[0],u[1]),p<c){for(c=p,h=0;h<i;++h)l[h]=u[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(p)-Math.sqrt(c))/r|0,1);if(o&&(No(t,n-i,e,i,s,a,u),p=ni(s,a,u[0],u[1]),p<c)){for(c=p,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function Bo(t,e,n,i,r,o,s,a,l,c,u){u=u||[NaN,NaN];for(let h=0,p=n.length;h<p;++h){const p=n[h];c=jo(t,e,p,i,r,o,s,a,l,c,u),e=p}return c}function Go(t,e,n,i){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}function zo(t,e,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function Uo(t,e,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=zo(t,e,n[s],i);r[o++]=a,e=a}return r.length=o,r}function qo(t,e,n,i,r,o,s){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-i];let u=0;for(;c.length>0;){const n=c.pop(),o=c.pop();let s=0;const a=t[o],h=t[o+1],p=t[n],f=t[n+1];for(let e=o+i;e<n;e+=i){const n=ei(t[e],t[e+1],a,h,p,f);n>s&&(u=e,s=n)}s>r&&(l[(u-e)/i]=1,o+i<u&&c.push(o,u),u+i<n&&c.push(u,n))}for(let n=0;n<a;++n)l[n]&&(o[s++]=t[e+n*i],o[s++]=t[e+n*i+1]);return s}function Xo(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=qo(t,e,c,i,r,o,s),a.push(s),e=c}return s}function Vo(t,e){return e*Math.round(t/e)}function Yo(t,e,n,i,r,o,s){if(e==n)return s;let a,l,c=Vo(t[e],r),u=Vo(t[e+1],r);e+=i,o[s++]=c,o[s++]=u;do{if(a=Vo(t[e],r),l=Vo(t[e+1],r),(e+=i)==n)return o[s++]=a,o[s++]=l,s}while(a==c&&l==u);for(;e<n;){const n=Vo(t[e],r),h=Vo(t[e+1],r);if(e+=i,n==a&&h==l)continue;const p=a-c,f=l-u,d=n-c,g=h-u;p*g==f*d&&(p<0&&d<p||p==d||p>0&&d>p)&&(f<0&&g<f||f==g||f>0&&g>f)?(a=n,l=h):(o[s++]=a,o[s++]=l,c=a,u=l,a=n,l=h)}return o[s++]=a,o[s++]=l,s}function Ho(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=Yo(t,e,c,i,r,o,s),a.push(s),e=c}return s}function Wo(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i);return r.length=o,r}function Zo(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=Wo(t,e,a,i,r[o]),e=a}return r.length=o,r}function $o(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=1===a.length&&a[0]===e?[]:Zo(t,e,a,i,r[o]),e=a[a.length-1]}return r.length=o,r}function Ko(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=s*n-o*i,o=n,s=i}return r/2}function Jo(t,e,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o];r+=Ko(t,e,s,i),e=s}return r}class Qo extends ko{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Qo(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<En(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Do(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Ko(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=qo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Qo(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zo(this.flatCoordinates,0,t,this.stride),this.changed()}}const ts=Qo;class es extends ko{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new es(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=ni(t,e,r[0],r[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return On(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return In(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Go(this.flatCoordinates,0,t,this.stride),this.changed()}}const ns=es;function is(t,e,n,i,r){return!Fn(r,(function(r){return!rs(t,e,n,i,r[0],r[1])}))}function rs(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function os(t,e,n,i,r,o){if(0===n.length)return!1;if(!rs(t,e,n[0],i,r,o))return!1;for(let e=1,s=n.length;e<s;++e)if(rs(t,n[e-1],n[e],i,r,o))return!1;return!0}function ss(t,e,n,i,r,o,s){let a,l,c,u,h,p,f;const d=r[o+1],g=[];for(let r=0,o=n.length;r<o;++r){const o=n[r];for(u=t[o-i],p=t[o-i+1],a=e;a<o;a+=i)h=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(c=(d-p)/(f-p)*(h-u)+u,g.push(c)),u=h,p=f}let m=NaN,y=-1/0;for(g.sort(mt),u=g[0],a=1,l=g.length;a<l;++a){h=g[a];const r=Math.abs(h-u);r>y&&(c=(u+h)/2,os(t,e,n,i,c,d)&&(m=c,y=r)),u=h}return isNaN(m)&&(m=r[o]),s?(s.push(m,d,y),s):[m,d,y]}function as(t,e,n,i,r){let o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o;return!1}function ls(t,e,n,i,r){const o=Nn([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!$n(r,o)&&(!!Cn(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||as(t,e,n,i,(function(t,e){return function(t,e,n){let i=!1;const r=Mn(t,e),o=Mn(t,n);if(r===_n.INTERSECTING||o===_n.INTERSECTING)i=!0;else{const s=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],p=n[0],f=n[1],d=(f-h)/(p-u);let g,m;o&_n.ABOVE&&!(r&_n.ABOVE)&&(g=p-(f-c)/d,i=g>=s&&g<=l),i||!(o&_n.RIGHT)||r&_n.RIGHT||(m=f-(p-l)*d,i=m>=a&&m<=c),i||!(o&_n.BELOW)||r&_n.BELOW||(g=p-(f-a)/d,i=g>=s&&g<=l),i||!(o&_n.LEFT)||r&_n.LEFT||(m=f-(p-s)*d,i=m>=a&&m<=c)}return i}(r,t,e)})))))}function cs(t,e,n,i,r){return!!ls(t,e,n,i,r)||(!!rs(t,e,n,i,r[0],r[1])||(!!rs(t,e,n,i,r[0],r[3])||(!!rs(t,e,n,i,r[2],r[1])||!!rs(t,e,n,i,r[2],r[3]))))}function us(t,e,n,i,r){if(!cs(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let e=1,o=n.length;e<o;++e)if(is(t,n[e-1],n[e],i,r)&&!ls(t,n[e-1],n[e],i,r))return!1;return!0}function hs(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function ps(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function fs(t,e,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=ps(t,e,s,i);if(0===o){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=s}return!0}function ds(t,e,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=ps(t,e,s,i);(0===o?r&&a||!r&&!a:r&&!a||!r&&a)&&hs(t,e,s,i),e=s}return e}class gs extends ko{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?_t(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new gs(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<En(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Bo(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return os(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Jo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ds(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Zo(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=zn(this.getExtent());this.flatInteriorPoint_=ss(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ns(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ts(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new ts(e.slice(r,s),t);i.push(a),r=s}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;fs(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ds(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Ho(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new gs(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return us(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Uo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const ms=gs;function ys(t){if(Kn(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new gs(o,"XY",[o.length])}function vs(t,e){setTimeout((function(){t(e)}),0)}function _s(t){return!(t.sourceCenter&&t.targetCenter&&!ui(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function xs(t,e,n,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s;return[a*o-l*s,l*o+a*s]}const bs=class extends Fr{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Mi(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&xi(),t.center&&(t.center=Bi(t.center,this.projection_)),t.extent&&(t.extent=zi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in lo)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;const r=28,o=2;let s=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:r;const l=void 0!==t.zoomFactor?t.zoomFactor:o,c=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,p=Mi(t.projection,"EPSG:3857"),f=p.getExtent();let d=t.constrainOnlyCenter,g=t.extent;c||g||!p.isGlobal()||(d=!1,g=f);if(void 0!==t.resolutions){const r=t.resolutions;n=r[s],i=void 0!==r[a]?r[a]:r[r.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,o,s,a){if(void 0!==r){const l=t[0],c=t[t.length-1],u=n?fo(l,n,s,i):l;if(a)return e?go(r,u,c):ti(r,c,u);const h=Math.min(u,r),p=Math.floor(yt(t,h,o));return t[p]>u&&p<t.length-1?t[p+1]:t[p]}}}(r,u,!d&&g,h):mo(n,i,u,!d&&g,h)}else{const c=(f?Math.max(Zn(f),Vn(f)):360*tn.degrees/p.getMetersPerUnit())/uo/Math.pow(o,0),m=c/Math.pow(o,r-0);n=t.maxResolution,void 0!==n?s=0:n=c/Math.pow(l,s),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,a):c/Math.pow(l,a):m),a=s+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-s),e=t.constrainResolution?function(t,e,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,c){if(void 0!==s){const u=r?fo(e,r,l,o):e;if(c)return i?go(s,u,n):ti(s,n,u);const h=1e-9,p=Math.ceil(Math.log(e/u)/Math.log(t)-h),f=-a*(.5-h)+.5,d=Math.min(u,s),g=Math.floor(Math.log(e/d)/Math.log(t)+f),m=Math.max(p,g);return ti(e/Math.pow(t,m),n,u)}}}(l,n,i,u,!d&&g,h):mo(n,i,u,!d&&g,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:s,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ho(t.extent,t.constrainOnlyCenter,e)}const e=Mi(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ho(t,!1,!1)}return po}(t),r=n.constraint,o=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?function(t){const e=void 0===t?ri(5):t;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===e?vo:"number"==typeof e?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):vo}return yo}(t);this.constraints_={center:i,resolution:r,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),s=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=Bi(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Bi(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&vs(e,!0));let r=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;i<n;++i){const t=arguments[i],n={start:r,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||bo,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=s,n.targetResolution=this.getResolutionForZoom(t.zoom),s=n.targetResolution):t.resolution&&(n.sourceResolution=s,n.targetResolution=t.resolution,s=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=oi(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}_s(n)?n.complete=!0:r+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(so,1),this.updateAnimations_()}getAnimating(){return this.hints_[so]>0}getInteracting(){return this.hints_[ao]>0}cancelAnimations(){let t;this.setHint(so,-this.hints_[so]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&vs(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let r=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const s=t-o.start;let a=o.duration>0?s/o.duration:1;a>=1?(o.complete=!0,a=1):r=!1;const l=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const r=t+l*(n-t),s=e+l*(i-e);this.targetCenter_=[r,s]}if(o.sourceResolution&&o.targetResolution){const t=1===l?o.targetResolution:o.sourceResolution+l*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===l?oi(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+l*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(r){this.animations_[n]=null,this.setHint(so,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&vs(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],hi(n,t-this.getRotation()),function(t,e){t[0]+=+e[0],t[1]+=+e[1]}(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?ji(t,this.getProjection()):t}getCenterInternal(){return this.get(lo.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Gi(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Qr(e,"The view center is not defined");const n=this.getResolution();Qr(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return Qr(void 0!==i,"The view rotation is not defined"),qn(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(lo.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(zi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Zn(t)/e[0],i=Vn(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(lo.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=xs(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=yt(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=ti(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,ti(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Qr(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Qr(!Kn(t),"Cannot fit empty extent provided as `geometry`");n=ys(zi(t,this.getProjection()))}else if("Circle"===t.getType()){const e=zi(t.getExtent(),this.getProjection());n=ys(e),n.rotate(this.getRotation(),zn(e))}else{const e=Fi();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let t=0,e=r.length;t<e;t+=o){const e=r[t]*n-r[t+1]*i,o=r[t]*i+r[t+1]*n;s=Math.min(s,e),a=Math.min(a,o),l=Math.max(l,e),c=Math.max(c,o)}return[s,a,l,c]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),h=zn(s);h[0]+=(i[1]-i[3])/2*a,h[1]+=(i[0]-i[2])/2*a;const p=h[0]*u-h[1]*c,f=h[1]*u+h[0]*c,d=this.getConstrainedCenter([p,f],a),g=e.callback?e.callback:Et;void 0!==e.duration?this.animateInternal({resolution:a,center:d,duration:e.duration,easing:e.easing},g):(this.targetResolution_=a,this.targetCenter_=d,this.applyTargetState_(!1,!0),vs(g,!0))}centerOn(t,e,n){this.centerOnInternal(Bi(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(xs(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=xs(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=ji(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Bi(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Bi(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Bi(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),s=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(lo.ROTATION)!==i&&this.set(lo.ROTATION,i),this.get(lo.RESOLUTION)!==o&&(this.set(lo.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(lo.CENTER)&&ui(this.get(lo.CENTER),s)||this.set(lo.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&ui(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:xo,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ao,1)}endInteraction(t,e,n){n=n&&Bi(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(ao,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};function ws(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const Es=class extends to{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Kr,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(Kr)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Pr(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Lr(t,vr,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof bs?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const r=this.getExtent();return ws(i,e.viewState)&&(!r||$n(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let i=e(t instanceof bs?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Jr,t)}getMapInternal(){return this.get(Jr)}setMap(t){this.mapPrecomposeKey_&&(Pr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Pr(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Lr(t,io,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Qr(!e.some((function(t){return t.layer===n.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}),this),this.mapRenderKey_=Lr(this,vr,t.render,t),this.changed())}setSource(t){this.set(Kr,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};var Ss=n(4331);const Cs={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Is(t){return t[0]>0&&t[1]>0}function Ms(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}class Ls{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ms(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Ls({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ar()}getImage(t){return Ar()}getHitDetectionImage(){return Ar()}getPixelRatio(t){return 1}getImageState(){return Ar()}getImageSize(){return Ar()}getOrigin(){return Ar()}getSize(){return Ar()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ms(t)}listenImageChange(t){Ar()}load(){Ar()}unlistenImageChange(t){Ar()}ready(){return Promise.resolve()}}const Ts=Ls,Ps={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Os={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Os.max=Os.whitepoint[2].D65,Os.rgb=function(t,e){e=e||Os.whitepoint[2].E;var n,i,r,o=t[0]/e[0],s=t[1]/e[1],a=t[2]/e[2];return i=-.96924363628087*o+1.87596750150772*s+.041555057407175*a,r=.055630079696993*o+-.20397695888897*s+1.056971514242878*a,n=(n=3.240969941904521*o+-1.537383177570093*s+-.498610760293*a)>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]},Ps.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255,o=.21263900587151*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.71516867876775*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.072192315360733*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),s=.019330818715591*n+.11919477979462*i+.95053215224966*r;return[(.41239079926595*n+.35758433938387*i+.18048078840183*r)*(e=e||Os.whitepoint[2].E)[0],o*e[1],s*e[2]]};const Rs=Os,As={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,o,s,a,l,c,u,h;if(o=t[0],s=t[1],a=t[2],0===o)return[0,0,0];return e=e||"D65",n=n||2,i=s/(13*o)+4*(c=Rs.whitepoint[n][e][0])/(c+15*(u=Rs.whitepoint[n][e][1])+3*(h=Rs.whitepoint[n][e][2]))||0,r=a/(13*o)+9*u/(c+15*u+3*h)||0,[9*(l=o>8?u*Math.pow((o+16)/116,3):u*o*.0011070564598794539)*i/(4*r)||0,l,l*(12-3*i-20*r)/(4*r)||0]}};Rs.luv=function(t,e,n){var i,r,o,s,a,l,c,u,h,p,f;e=e||"D65",n=n||2,p=4*(c=Rs.whitepoint[n][e][0])/(c+15*(u=Rs.whitepoint[n][e][1])+3*(h=Rs.whitepoint[n][e][2])),f=9*u/(c+15*u+3*h),i=4*(s=t[0])/(s+15*(a=t[1])+3*(l=t[2]))||0,r=9*a/(s+15*a+3*l)||0;var d=a/u;return[o=d<=.008856451679035631?903.2962962962961*d:116*Math.pow(d,1/3)-16,13*o*(i-p),13*o*(r-f)]};var ks={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},xyz:function(t){return As.xyz(ks.luv(t))}};const Ns=ks;As.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),o=360*Math.atan2(i,n)/2/Math.PI;return o<0&&(o+=360),[e,r,o]},Rs.lchuv=function(t){return As.lchuv(Rs.luv(t))};var Ds=n(8874);const Fs=function(t){var e,n,i=[],r=1;if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Ds[t])i=Ds[t].slice(),n="rgb";else if("transparent"===t)r=0,n="rgb",i=[0,0,0];else if("#"===t[0]){var o=t.slice(1),s=o.length;r=1,s<=4?(i=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===s&&(r=parseInt(o[3]+o[3],16)/255)):(i=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===s&&(r=parseInt(o[6]+o[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var a=e[1],l="cmyk"===(n=a.replace(/a$/,""))?4:"gray"===n?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),r=(i=i.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t;if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==js[t])return js[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>l?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:n,values:i,alpha:r}};var js={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const Bs={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,i,r,o,s=t[0]/360,a=t[1]/100,l=t[2]/100,c=0;if(0===a)return[o=255*l,o,o];for(e=2*l-(n=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];c<3;)(i=s+1/3*-(c-1))<0?i++:i>1&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[c++]=255*o;return r}};Ps.hsl=function(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),l=a-s;return a===s?e=0:i===a?e=(r-o)/l:r===a?e=2+(o-i)/l:o===a&&(e=4+(i-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+a)/2,[e,100*(a===s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]};const Gs=1024,zs={};let Us=0;function qs(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function Xs(t){const e=Rs.lchuv(Ps.xyz(t));return e[3]=t[3],e}function Vs(t){if(zs.hasOwnProperty(t))return zs[t];if(Us>=Gs){let t=0;for(const e in zs)0==(3&t++)&&(delete zs[e],--Us)}const e=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var n=Fs(t);if(!n.space)return[];const i="h"===n.space[0]?Bs.min:Ps.min,r="h"===n.space[0]?Bs.max:Ps.max;return(e=Array(3))[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),"h"===n.space[0]&&(e=Bs.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}(t);if(4!==e.length)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return Hs(e),zs[t]=e,++Us,e}function Ys(t){return Array.isArray(t)?t:Vs(t)}function Hs(t){return t[0]=ti(t[0]+.5|0,0,255),t[1]=ti(t[1]+.5|0,0,255),t[2]=ti(t[2]+.5|0,0,255),t[3]=ti(t[3],0,1),t}function Ws(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}const Zs="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",$s=Zs.includes("firefox"),Ks=(Zs.includes("safari")&&!Zs.includes("chrom")&&(Zs.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Zs)),Zs.includes("webkit")&&!Zs.includes("edge")),Js=Zs.includes("macintosh"),Qs="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,ta="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,ea="undefined"!=typeof Image&&Image.prototype.decode,na=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function ia(t,e,n,i){let r;return r=n&&n.length?n.shift():ta?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let ra;function oa(){return ra||(ra=ia(1,1)),ra}function sa(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function aa(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function la(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ca(t,e){return e&&(t.src=e),t.src&&ea?new Promise(((e,n)=>t.decode().then((()=>e(t))).catch((i=>t.complete&&t.width?e(t):n(i))))):function(t,e){return new Promise(((n,i)=>{function r(){s(),n(t)}function o(){s(),i(new Error("Image load error"))}function s(){t.removeEventListener("load",r),t.removeEventListener("error",o)}t.addEventListener("load",r),t.addEventListener("error",o),e&&(t.src=e)}))}(t)}class ua{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=ha(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=ha(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,i,r){const o=ha(t,e,n),s=o in this.cache_;this.cache_[o]=i,r&&(i.getImageState()===Cs.IDLE&&i.load(),i.getImageState()===Cs.LOADING?i.ready().then((()=>{this.patternCache_[o]=oa().createPattern(i.getImage(1),"repeat")})):this.patternCache_[o]=oa().createPattern(i.getImage(1),"repeat")),s||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function ha(t,e,n){return e+":"+t+":"+(n?Ys(n):"null")}const pa=new ua;let fa=null;class da extends Mt{constructor(t,e,n,i,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=void 0===i?Cs.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Cs.LOADED){fa||(fa=ia(1,1,void 0,{willReadFrequently:!0})),fa.drawImage(this.image_,0,0);try{fa.getImageData(0,0,1,1),this.tainted_=!1}catch(t){fa=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(vr)}handleImageError_(){this.imageState_=Cs.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Cs.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=ia(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Cs.IDLE){this.image_||this.initializeImage_(),this.imageState_=Cs.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ca(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Cs.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");var r;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle="string"==typeof(r=this.color_)?r:Ws(r),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise((t=>{this.imageState_===Cs.LOADED||this.imageState_===Cs.ERROR?t():this.addEventListener(vr,(function e(){this.imageState_!==Cs.LOADED&&this.imageState_!==Cs.ERROR||(this.removeEventListener(vr,e),t())}))}))),this.ready_}}function ga(t,e,n,i,r,o){let s=void 0===e?void 0:pa.get(e,n,r);return s||(s=new da(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,r),pa.set(e,n,r,s,o)),o&&s&&!pa.getPattern(e,n,r)&&pa.set(e,n,r,s,o),s}function ma(t){return t?Array.isArray(t)?Ws(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return pa.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=pa.getPattern(e,void 0,t.color);if(n)return n;const i=pa.get(t.src,"anonymous",null);if(i.getImageState()!==Cs.LOADED)return null;const r=ia(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),ga(r.canvas,e,void 0,Cs.LOADED,t.color,!0),pa.getPattern(e,void 0,t.color)}(t):t:null}const ya="ol-hidden",va="ol-unselectable",_a="ol-control",xa="ol-collapsed",ba=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),wa=["style","variant","weight","size","lineHeight","family"],Ea=function(t){const e=t.match(ba);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,i=wa.length;t<i;++t){const i=e[t+1];void 0!==i&&(n[wa[t]]=i)}return n.families=n.family.split(/,\s?/),n},Sa="10px sans-serif",Ca="#000",Ia="round",Ma=[],La="round",Ta="#000",Pa="center",Oa="middle",Ra=[0,0,0,0],Aa=new Fr;let ka,Na=null;const Da={},Fa=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let r,o;function s(r,s,a){let l=!0;for(let c=0;c<n;++c){const n=e[c];if(o=Ga(r+" "+s+" "+t+n,i),a!=n){const e=Ga(r+" "+s+" "+t+a+","+n,i);l=l&&e!=o}}return!!l}function a(){let t=!0;const e=Aa.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];Aa.get(i)<100&&(s.apply(this,i.split("\n"))?(Ct(Da),Na=null,ka=void 0,Aa.set(i,100)):(Aa.set(i,Aa.get(i)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=Ea(t);if(!e)return;const n=e.families;for(let t=0,i=n.length;t<i;++t){const i=n[t],o=e.style+"\n"+e.weight+"\n"+i;void 0===Aa.get(o)&&(Aa.set(o,100,!0),s(e.style,e.weight,i)||(Aa.set(o,0,!0),void 0===r&&(r=setInterval(a,32))))}}}(),ja=function(){let t;return function(e){let n=Da[e];if(null==n){if(ta){const t=Ea(e),i=Ba(e,"Žg");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Da[e]=n}return n}}();function Ba(t,e){return Na||(Na=ia(1,1)),t!=ka&&(Na.font=t,ka=Na.font),Na.measureText(e)}function Ga(t,e){return Ba(t,e).width}function za(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,Ga(t,n))),0);return n[e]=i,i}function Ua(t,e,n,i,r,o,s,a,l,c,u){t.save(),1!==n&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),function(t,e){const n=t.contextInstructions;for(let t=0,i=n.length;t<i;t+=2)Array.isArray(n[t+1])?e[n[t]].apply(e,n[t+1]):e[n[t]]=n[t+1]}(i,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,c,s*u[0],a*u[1]),t.restore()}class qa extends Ts{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Cs.LOADING:Cs.LOADED,this.imageState_===Cs.LOADING&&this.ready().then((()=>this.imageState_=Cs.LOADED)),this.render()}clone(){const t=this.getScale(),e=new qa({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=ia(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=i-Math.sqrt(r*r-a*a),c=Math.sqrt(a*a+l*l),u=c/a;if("miter"===t&&u<=n)return u*e;const h=e/2/u,p=e/2*(l/c),f=Math.sqrt((i+h)*(i+h)+p*p)-i;if(void 0===this.radius2_||"bevel"===t)return 2*f;const d=i*Math.sin(s),g=r-Math.sqrt(i*i-d*d),m=Math.sqrt(d*d+g*g)/d;if(m<=n){const t=m*e/2-r-i;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=Ia,n=La,i=0,r=null,o=0,s=0;this.stroke_&&(t=ma(this.stroke_.getColor()??Ta),s=this.stroke_.getWidth()??1,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??La,e=this.stroke_.getLineCap()??Ia,i=this.stroke_.getMiterLimit()??10);const a=this.calculateLineJoinSize_(n,s,i),l=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:s,size:Math.ceil(2*l+a),lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=Ca),e.fillStyle=ma(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;"string"==typeof n&&(n=Ys(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=ia(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let s=0;s<e;s++){const e=r+s*o,a=s%2==0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ca,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const Xa=qa;class Va extends Xa{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Va({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const Ya=Va;class Ha{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new Ha({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){const e=ga(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===Cs.IDLE&&e.load(),e.getImageState()===Cs.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const Wa=Ha;class Za{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Za({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const $a=Za;class Ka{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=tl,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new Ka({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=tl,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let Ja=null;function Qa(t,e){if(!Ja){const t=new Wa({color:"rgba(255,255,255,0.4)"}),e=new $a({color:"#3399CC",width:1.25});Ja=[new Ka({image:new Ya({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Ja}function tl(t){return t.getGeometry()}const el=Ka;function nl(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class il extends Ts{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const o=void 0!==t.img?t.img:null;let s,a=t.src;if(Qr(!(void 0!==a&&o),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!o||(a=o.src||Nr(o)),Qr(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Qr(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?s=Cs.IDLE:void 0!==o&&(s=o instanceof HTMLImageElement?o.complete?o.src?Cs.LOADED:Cs.IDLE:Cs.LOADING:Cs.LOADED),this.color_=void 0!==t.color?Ys(t.color):null,this.iconImage_=ga(o,a,this.crossOrigin_,s,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,n;if(t.size)[e,n]=t.size;else{const i=this.getImage(1);if(i.width&&i.height)e=i.width,n=i.height;else if(i instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const n=this.iconImage_.getSize();this.setScale(nl(n[0],n[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(nl(e,n,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new il({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==Cs.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==Cs.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(vr,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(vr,t)}ready(){return this.iconImage_.ready()}}const rl=il;class ol{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ms(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Wa({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new ol({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ms(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const sl=ol;let al=0;const ll=0,cl=1<<al++,ul=1<<al++,hl=1<<al++,pl=1<<al++,fl=1<<al++,dl=Math.pow(2,5)-1,gl={[cl]:"boolean",[ul]:"number",[hl]:"string",[pl]:"color",[fl]:"number[]"},ml=Object.keys(gl).map(Number).sort(mt);function yl(t){const e=[];for(const i of ml)(t&(n=i))===n&&e.push(gl[i]);var n;return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function vl(t,e){return!!(t&e)}function _l(t,e){return t===e}class xl{constructor(t,e){this.type=t,this.value=e}}class bl{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function wl(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function El(t,e,n){switch(typeof t){case"boolean":return new xl(cl,t);case"number":return new xl(ul,t);case"string":{let e=hl;return function(t){try{return Vs(t),!0}catch(t){return!1}}(t)&&(e|=pl),_l(e&n,ll)||(e&=n),new xl(e,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"==typeof t[0])return function(t,e,n){const i=t[0],r=Cl[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}(t,e,n);for(const e of t)if("number"!=typeof e)throw new Error("Expected an array of numbers");let i=fl;return 3!==t.length&&4!==t.length||(i|=pl),n&&(i&=n),new xl(i,t)}const Sl={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},Cl={[Sl.Get]:Ol((([t,e])=>void 0!==e?function(t){switch(t){case"string":return hl;case"color":return pl;case"number":return ul;case"boolean":return cl;case"number[]":return fl;default:throw new Error(`Unrecognized type hint: ${t}`)}}(e.value):dl),Ml(1,2),(function(t,e){const n=El(t[1],e);if(!(n instanceof xl))throw new Error("Expected a literal argument for get operation");if("string"!=typeof n.value)throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),3===t.length){return[n,El(t[2],e)]}return[n]})),[Sl.Var]:Ol((([t])=>t.type),Ml(1,1),(function(t,e,n,i){const r=t[1];if("string"!=typeof r)throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||void 0===e.style.variables[r])return[new xl(dl,r)];const o=El(e.style.variables[r],e);if(o.value=r,i&&!vl(i,o.type))throw new Error(`The variable ${r} has type ${yl(o.type)} but the following type was expected: ${yl(i)}`);return[o]})),[Sl.Id]:Ol(ul|hl,Il,(function(t,e){e.featureId=!0})),[Sl.Concat]:Ol(hl,Ml(2,1/0),Ll(dl)),[Sl.GeometryType]:Ol(hl,Il,(function(t,e){e.geometryType=!0})),[Sl.Resolution]:Ol(ul,Il),[Sl.Zoom]:Ol(ul,Il),[Sl.Time]:Ol(ul,Il),[Sl.Any]:Ol(cl,Ml(2,1/0),Ll(cl)),[Sl.All]:Ol(cl,Ml(2,1/0),Ll(cl)),[Sl.Not]:Ol(cl,Ml(1,1),Ll(cl)),[Sl.Equal]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.NotEqual]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.GreaterThan]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.GreaterThanOrEqualTo]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.LessThan]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.LessThanOrEqualTo]:Ol(cl,Ml(2,2),Ll(dl),Tl),[Sl.Multiply]:Ol((t=>{let e=ul|pl;for(let n=0;n<t.length;n++)e&=t[n].type;return e}),Ml(2,1/0),Ll(ul|pl),Tl),[Sl.Coalesce]:Ol((t=>{let e=dl;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Ml(2,1/0),Ll(dl),Tl),[Sl.Divide]:Ol(ul,Ml(2,2),Ll(ul)),[Sl.Add]:Ol(ul,Ml(2,1/0),Ll(ul)),[Sl.Subtract]:Ol(ul,Ml(2,2),Ll(ul)),[Sl.Clamp]:Ol(ul,Ml(3,3),Ll(ul)),[Sl.Mod]:Ol(ul,Ml(2,2),Ll(ul)),[Sl.Pow]:Ol(ul,Ml(2,2),Ll(ul)),[Sl.Abs]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Floor]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Ceil]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Round]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Sin]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Cos]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Atan]:Ol(ul,Ml(1,2),Ll(ul)),[Sl.Sqrt]:Ol(ul,Ml(1,1),Ll(ul)),[Sl.Match]:Ol((t=>{let e=dl;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Ml(4,1/0),Pl,(function(t,e,n,i){const r=t.length-1;let o=El(t[1],e).type;const s=El(t[t.length-1],e);let a=void 0!==i?i&s.type:s.type;const l=new Array(r-2);for(let n=0;n<r-2;n+=2){const i=El(t[n+2],e),r=El(t[n+3],e);o&=i.type,a&=r.type,l[n]=i,l[n+1]=r}const c=hl|ul|cl;if(!vl(c,o))throw new Error(`Expected an input of type ${yl(c)} for the interpolate operation, got ${yl(o)} instead`);if(_l(a,ll))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let n=0;n<r-2;n+=2){const i=El(t[n+2],e,o),r=El(t[n+3],e,a);l[n]=i,l[n+1]=r}return[El(t[1],e,o),...l,El(t[t.length-1],e,a)]})),[Sl.Between]:Ol(cl,Ml(3,3),Ll(ul)),[Sl.Interpolate]:Ol((t=>{let e=pl|ul;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e}),Ml(6,1/0),Pl,(function(t,e,n,i){const r=t[1];let o;switch(r[0]){case"linear":o=1;break;case"exponential":if(o=r[1],"number"!=typeof o)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);break;default:o=null}if(!o)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);o=El(o,e);let s=El(t[2],e);if(!vl(ul,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${yl(s.type)} instead`);s=El(t[2],e,ul);const a=new Array(t.length-3);for(let n=0;n<a.length;n+=2){let i=El(t[n+3],e);if(!vl(ul,i.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${yl(i.type)} at position ${n+2} instead`);let r=El(t[n+4],e);if(!vl(ul|pl,r.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${yl(r.type)} at position ${n+3} instead`);i=El(t[n+3],e,ul),r=El(t[n+4],e,ul|pl),a[n]=i,a[n+1]=r}return[o,s,...a]})),[Sl.Case]:Ol((t=>{let e=dl;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Ml(3,1/0),(function(t,e){const n=t[0],i=t.length-1;if(i%2==0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}),(function(t,e,n,i){const r=El(t[t.length-1],e);let o=void 0!==i?i&r.type:r.type;const s=new Array(t.length-1);for(let n=0;n<s.length-1;n+=2){const i=El(t[n+1],e),r=El(t[n+2],e);if(!vl(cl,i.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${yl(i.type)} at position ${n} instead`);o&=r.type,s[n]=i,s[n+1]=r}if(_l(o,ll))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let n=0;n<s.length-1;n+=2)s[n+1]=El(t[n+2],e,o);return s[s.length-1]=El(t[t.length-1],e,o),s})),[Sl.In]:Ol(cl,Ml(2,2),(function(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof n[0]){if("literal"!==n[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=hl|ul;const r=new Array(n.length);for(let t=0;t<r.length;t++){const o=El(n[t],e);i&=o.type,r[t]=o}if(_l(i,ll))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[El(t[1],e,i),...r]})),[Sl.Number]:Ol(ul,Ml(1,1/0),Ll(dl)),[Sl.String]:Ol(hl,Ml(1,1/0),Ll(dl)),[Sl.Array]:Ol((t=>3===t.length||4===t.length?fl|pl:fl),Ml(1,1/0),Ll(ul)),[Sl.Color]:Ol(pl,Ml(1,4),Ll(ul)),[Sl.Band]:Ol(ul,Ml(1,3),Ll(ul)),[Sl.Palette]:Ol(pl,Ml(2,2),(function(t,e){const n=El(t[1],e,ul);if(n.type!==ul)throw new Error(`The first argument of palette must be an number, got ${yl(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let t=0;t<r.length;t++){const n=El(i[t],e,pl);if(!(n instanceof xl))throw new Error(`The palette color at index ${t} must be a literal value`);if(!vl(n.type,pl))throw new Error(`The palette color at index ${t} should be of type color, got ${yl(n.type)} instead`);r[t]=n}return[n,...r]}))};function Il(t,e){const n=t[0];if(1!==t.length)throw new Error(`Expected no arguments for ${n} operation`);return[]}function Ml(t,e){return function(n,i){const r=n[0],o=n.length-1;if(t===e){if(o!==t){throw new Error(`Expected ${t} argument${1===t?"":"s"} for ${r}, got ${o}`)}}else if(o<t||o>e){throw new Error(`Expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${r}, got ${o}`)}}}function Ll(t){return function(e,n){const i=e[0],r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const r=El(e[s+1],n);if(!vl(t,r.type)){const e=yl(t),n=yl(r.type);throw new Error(`Unexpected type for argument ${s} of ${i} operation, got ${e} but expected ${n}`)}r.type&=t,o[s]=r}return o}}function Tl(t,e,n){const i=t[0],r=t.length-1;let o=dl;for(let t=0;t<n.length;++t)o&=n[t].type;if(o===ll)throw new Error(`No common type could be found for arguments of ${i} operation`);const s=new Array(r);for(let n=0;n<r;++n)s[n]=El(t[n+1],e,o);return s}function Pl(t,e){const n=t[0],i=t.length-1;if(i%2==1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function Ol(t,...e){return function(n,i,r){const o=n[0];let s=[];for(let t=0;t<e.length;t++)s=e[t](n,i,s,r)||s;let a="function"==typeof t?t(s):t;if(void 0!==r){if(!vl(a,r))throw new Error(`The following expression was expected to return ${yl(r)}, but returns ${yl(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===ll)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new bl(a,o,...s)}}function Rl(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Rl(t.getGeometries()[0]);default:return""}}function Al(t,e,n){const i=El(t,n);if(!vl(e,i.type)){const t=yl(e),n=yl(i.type);throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return kl(i,n)}function kl(t,e){if(t instanceof xl){if(t.type===pl&&"string"==typeof t.value){const e=Vs(t.value);return function(){return e}}return function(){return t.value}}const n=t.operator;switch(n){case Sl.Number:case Sl.String:case Sl.Coalesce:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=kl(t.args[n],e);switch(n){case Sl.Coalesce:return t=>{for(let e=0;e<i;++e){const n=r[e](t);if(null!=n)return n}throw new Error("Expected one of the values to be non-null")};case Sl.Number:case Sl.String:return t=>{for(let e=0;e<i;++e){const i=r[e](t);if(typeof i===n)return i}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}(t,e);case Sl.Get:case Sl.Var:return function(t,e){const n=t.args[0],i=n.value;switch(t.operator){case Sl.Get:return t=>t.properties[i];case Sl.Var:return t=>t.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t);case Sl.Id:return t=>t.featureId;case Sl.GeometryType:return t=>t.geometryType;case Sl.Concat:{const n=t.args.map((t=>kl(t,e)));return t=>"".concat(...n.map((e=>e(t).toString())))}case Sl.Resolution:return t=>t.resolution;case Sl.Any:case Sl.All:case Sl.Not:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=kl(t.args[n],e);switch(n){case Sl.Any:return t=>{for(let e=0;e<i;++e)if(r[e](t))return!0;return!1};case Sl.All:return t=>{for(let e=0;e<i;++e)if(!r[e](t))return!1;return!0};case Sl.Not:return t=>!r[0](t);default:throw new Error(`Unsupported logical operator ${n}`)}}(t,e);case Sl.Equal:case Sl.NotEqual:case Sl.LessThan:case Sl.LessThanOrEqualTo:case Sl.GreaterThan:case Sl.GreaterThanOrEqualTo:return function(t,e){const n=t.operator,i=kl(t.args[0],e),r=kl(t.args[1],e);switch(n){case Sl.Equal:return t=>i(t)===r(t);case Sl.NotEqual:return t=>i(t)!==r(t);case Sl.LessThan:return t=>i(t)<r(t);case Sl.LessThanOrEqualTo:return t=>i(t)<=r(t);case Sl.GreaterThan:return t=>i(t)>r(t);case Sl.GreaterThanOrEqualTo:return t=>i(t)>=r(t);default:throw new Error(`Unsupported comparison operator ${n}`)}}(t,e);case Sl.Multiply:case Sl.Divide:case Sl.Add:case Sl.Subtract:case Sl.Clamp:case Sl.Mod:case Sl.Pow:case Sl.Abs:case Sl.Floor:case Sl.Ceil:case Sl.Round:case Sl.Sin:case Sl.Cos:case Sl.Atan:case Sl.Sqrt:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=kl(t.args[n],e);switch(n){case Sl.Multiply:return t=>{let e=1;for(let n=0;n<i;++n)e*=r[n](t);return e};case Sl.Divide:return t=>r[0](t)/r[1](t);case Sl.Add:return t=>{let e=0;for(let n=0;n<i;++n)e+=r[n](t);return e};case Sl.Subtract:return t=>r[0](t)-r[1](t);case Sl.Clamp:return t=>{const e=r[0](t),n=r[1](t);if(e<n)return n;const i=r[2](t);return e>i?i:e};case Sl.Mod:return t=>r[0](t)%r[1](t);case Sl.Pow:return t=>Math.pow(r[0](t),r[1](t));case Sl.Abs:return t=>Math.abs(r[0](t));case Sl.Floor:return t=>Math.floor(r[0](t));case Sl.Ceil:return t=>Math.ceil(r[0](t));case Sl.Round:return t=>Math.round(r[0](t));case Sl.Sin:return t=>Math.sin(r[0](t));case Sl.Cos:return t=>Math.cos(r[0](t));case Sl.Atan:return 2===i?t=>Math.atan2(r[0](t),r[1](t)):t=>Math.atan(r[0](t));case Sl.Sqrt:return t=>Math.sqrt(r[0](t));default:throw new Error(`Unsupported numeric operator ${n}`)}}(t,e);case Sl.Case:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=kl(t.args[r],e);return t=>{for(let e=0;e<n-1;e+=2){if(i[e](t))return i[e+1](t)}return i[n-1](t)}}(t,e);case Sl.Match:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=kl(t.args[r],e);return t=>{const e=i[0](t);for(let r=1;r<n;r+=2)if(e===i[r](t))return i[r+1](t);return i[n-1](t)}}(t,e);case Sl.Interpolate:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=kl(t.args[r],e);return t=>{const e=i[0](t),r=i[1](t);let o,s;for(let a=2;a<n;a+=2){const n=i[a](t);let l=i[a+1](t);const c=Array.isArray(l);if(c&&(l=qs(l)),n>=r)return 2===a?l:c?Dl(e,r,o,s,n,l):Nl(e,r,o,s,n,l);o=n,s=l}return s}}(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function Nl(t,e,n,i,r,o){const s=r-n;if(0===s)return i;const a=e-n;return i+(1===t?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1))*(o-i)}function Dl(t,e,n,i,r,o){if(0===r-n)return i;const s=Xs(i),a=Xs(o);let l=a[2]-s[2];l>180?l-=360:l<-180&&(l+=360);return Hs(function(t){const e=Rs.rgb(Ns.xyz(t));return e[3]=t[3],e}([Nl(t,e,n,s[0],r,a[0]),Nl(t,e,n,s[1],r,a[1]),s[2]+Nl(t,e,n,0,r,l),Nl(t,e,n,i[3],r,o[3])]))}function Fl(t){return!0}function jl(t){const e=wl(),n=function(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],o="filter"in n?Al(n.filter,cl,e):Fl;let s;if(Array.isArray(n.style)){const t=n.style.length;s=new Array(t);for(let i=0;i<t;++i)s[i]=Gl(n.style[i],e)}else s=[Gl(n.style,e)];i[r]={filter:o,styles:s}}return function(e){const r=[];let o=!1;for(let s=0;s<n;++s){if((0,i[s].filter)(e)&&(!t[s].else||!o)){o=!0;for(const t of i[s].styles){const n=t(e);n&&r.push(n)}}}return r}}(t,e),i={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(t,r){if(i.properties=t.getPropertiesInternal(),i.resolution=r,e.featureId){const e=t.getId();i.featureId=void 0!==e?e:null}return e.geometryType&&(i.geometryType=Rl(t.getGeometry())),n(i)}}function Bl(t){const e=wl(),n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Gl(t[r],e);const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(n);return function(t,s){if(r.properties=t.getPropertiesInternal(),r.resolution=s,e.featureId){const e=t.getId();r.featureId=void 0!==e?e:null}let a=0;for(let t=0;t<n;++t){const e=i[t](r);e&&(o[a]=e,a+=1)}return o.length=a,o}}function Gl(t,e){const n=zl(t,"",e),i=Ul(t,"",e),r=function(t,e){const n="text-",i=Xl(t,n+"value",e);if(!i)return null;const r=zl(t,n,e),o=zl(t,n+"background-",e),s=Ul(t,n,e),a=Ul(t,n+"background-",e),l=Xl(t,n+"font",e),c=ql(t,n+"max-angle",e),u=ql(t,n+"offset-x",e),h=ql(t,n+"offset-y",e),p=Vl(t,n+"overflow",e),f=Xl(t,n+"placement",e),d=ql(t,n+"repeat",e),g=$l(t,n+"scale",e),m=Vl(t,n+"rotate-with-view",e),y=ql(t,n+"rotation",e),v=Xl(t,n+"align",e),_=Xl(t,n+"justify",e),x=Xl(t,n+"baseline",e),b=Hl(t,n+"padding",e),w=tc(t,n+"declutter-mode"),E=new sl({declutterMode:w});return function(t){if(E.setText(i(t)),r&&E.setFill(r(t)),o&&E.setBackgroundFill(o(t)),s&&E.setStroke(s(t)),a&&E.setBackgroundStroke(a(t)),l&&E.setFont(l(t)),c&&E.setMaxAngle(c(t)),u&&E.setOffsetX(u(t)),h&&E.setOffsetY(h(t)),p&&E.setOverflow(p(t)),f){const e=f(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");E.setPlacement(e)}if(d&&E.setRepeat(d(t)),g&&E.setScale(g(t)),m&&E.setRotateWithView(m(t)),y&&E.setRotation(y(t)),v){const e=v(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(e)}if(_){const e=_(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");E.setJustify(e)}if(x){const e=x(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(e)}return b&&E.setPadding(b(t)),E}}(t,e),o=function(t,e){if("icon-src"in t)return function(t,e){const n="icon-",i=n+"src",r=nc(t[i],i),o=Wl(t,n+"anchor",e),s=$l(t,n+"scale",e),a=ql(t,n+"opacity",e),l=Wl(t,n+"displacement",e),c=ql(t,n+"rotation",e),u=Vl(t,n+"rotate-with-view",e),h=Jl(t,n+"anchor-origin"),p=Ql(t,n+"anchor-x-units"),f=Ql(t,n+"anchor-y-units"),d=function(t,e){const n=t[e];if(void 0===n)return;return rc(n,e)}(t,n+"color"),g=function(t,e){const n=t[e];if(void 0===n)return;if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);return n}(t,n+"cross-origin"),m=function(t,e){const n=t[e];if(void 0===n)return;return ec(n,e)}(t,n+"offset"),y=Jl(t,n+"offset-origin"),v=Kl(t,n+"width"),_=Kl(t,n+"height"),x=function(t,e){const n=t[e];if(void 0===n)return;if("number"==typeof n)return Ms(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw new Error(`Expected a number or size array for ${e}`);return n}(t,n+"size"),b=tc(t,n+"declutter-mode"),w=new rl({src:r,anchorOrigin:h,anchorXUnits:p,anchorYUnits:f,color:d,crossOrigin:g,offset:m,offsetOrigin:y,height:_,width:v,size:x,declutterMode:b});return function(t){return a&&w.setOpacity(a(t)),l&&w.setDisplacement(l(t)),c&&w.setRotation(c(t)),u&&w.setRotateWithView(u(t)),s&&w.setScale(s(t)),o&&w.setAnchor(o(t)),w}}(t,e);if("shape-points"in t)return function(t,e){const n="shape-",i=n+"points",r=n+"radius",o=ic(t[i],i),s=ic(t[r],r),a=zl(t,n,e),l=Ul(t,n,e),c=$l(t,n+"scale",e),u=Wl(t,n+"displacement",e),h=ql(t,n+"rotation",e),p=Vl(t,n+"rotate-with-view",e),f=Kl(t,n+"radius2"),d=Kl(t,n+"angle"),g=tc(t,n+"declutter-mode"),m=new Xa({points:o,radius:s,radius2:f,angle:d,declutterMode:g});return function(t){return a&&m.setFill(a(t)),l&&m.setStroke(l(t)),u&&m.setDisplacement(u(t)),h&&m.setRotation(h(t)),p&&m.setRotateWithView(p(t)),c&&m.setScale(c(t)),m}}(t,e);if("circle-radius"in t)return function(t,e){const n="circle-",i=zl(t,n,e),r=Ul(t,n,e),o=ql(t,n+"radius",e),s=$l(t,n+"scale",e),a=Wl(t,n+"displacement",e),l=ql(t,n+"rotation",e),c=Vl(t,n+"rotate-with-view",e),u=tc(t,n+"declutter-mode"),h=new Ya({radius:5,declutterMode:u});return function(t){return o&&h.setRadius(o(t)),i&&h.setFill(i(t)),r&&h.setStroke(r(t)),a&&h.setDisplacement(a(t)),l&&h.setRotation(l(t)),c&&h.setRotateWithView(c(t)),s&&h.setScale(s(t)),h}}(t,e);return null}(t,e),s=ql(t,"z-index",e);if(!(n||i||r||o||It(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new el;return function(t){let e=!0;if(n){const i=n(t);i&&(e=!1),a.setFill(i)}if(i){const n=i(t);n&&(e=!1),a.setStroke(n)}if(r){const n=r(t);n&&(e=!1),a.setText(n)}if(o){const n=o(t);n&&(e=!1),a.setImage(n)}return s&&a.setZIndex(s(t)),e?null:a}}function zl(t,e,n){let i;if(i=e+"fill-pattern-src"in t?function(t,e,n){const i=Xl(t,e+"pattern-src",n),r=Zl(t,e+"pattern-offset",n),o=Zl(t,e+"pattern-size",n),s=Yl(t,e+"color",n);return function(t){return{src:i(t),offset:r&&r(t),size:o&&o(t),color:s&&s(t)}}}(t,e+"fill-",n):Yl(t,e+"fill-color",n),!i)return null;const r=new Wa;return function(t){const e=i(t);return"none"===e?null:(r.setColor(e),r)}}function Ul(t,e,n){const i=ql(t,e+"stroke-width",n),r=Yl(t,e+"stroke-color",n);if(!i&&!r)return null;const o=Xl(t,e+"stroke-line-cap",n),s=Xl(t,e+"stroke-line-join",n),a=Hl(t,e+"stroke-line-dash",n),l=ql(t,e+"stroke-line-dash-offset",n),c=ql(t,e+"stroke-miter-limit",n),u=new $a;return function(t){if(r){const e=r(t);if("none"===e)return null;u.setColor(e)}if(i&&u.setWidth(i(t)),o){const e=o(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");u.setLineCap(e)}if(s){const e=s(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(e)}return a&&u.setLineDash(a(t)),l&&u.setLineDashOffset(l(t)),c&&u.setMiterLimit(c(t)),u}}function ql(t,e,n){if(!(e in t))return;const i=Al(t[e],ul,n);return function(t){return ic(i(t),e)}}function Xl(t,e,n){if(!(e in t))return null;const i=Al(t[e],hl,n);return function(t){return nc(i(t),e)}}function Vl(t,e,n){if(!(e in t))return null;const i=Al(t[e],cl,n);return function(t){const n=i(t);if("boolean"!=typeof n)throw new Error(`Expected a boolean for ${e}`);return n}}function Yl(t,e,n){if(!(e in t))return null;const i=Al(t[e],pl|hl,n);return function(t){return rc(i(t),e)}}function Hl(t,e,n){if(!(e in t))return null;const i=Al(t[e],fl,n);return function(t){return ec(i(t),e)}}function Wl(t,e,n){if(!(e in t))return null;const i=Al(t[e],fl,n);return function(t){const n=ec(i(t),e);if(2!==n.length)throw new Error(`Expected two numbers for ${e}`);return n}}function Zl(t,e,n){if(!(e in t))return null;const i=Al(t[e],fl,n);return function(t){return oc(i(t),e)}}function $l(t,e,n){if(!(e in t))return null;const i=Al(t[e],fl|ul,n);return function(t){return function(t,e){if("number"==typeof t)return t;return oc(t,e)}(i(t),e)}}function Kl(t,e){const n=t[e];if(void 0!==n){if("number"!=typeof n)throw new Error(`Expected a number for ${e}`);return n}}function Jl(t,e){const n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function Ql(t,e){const n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`);return n}}function tc(t,e){const n=t[e];if(void 0!==n){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function ec(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if("number"!=typeof t[i])throw new Error(`Expected an array of numbers for ${e}`);return t}function nc(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}function ic(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}function rc(t,e){if("string"==typeof t)return t;const n=ec(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function oc(t,e){const n=ec(t,e);if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`);return n}const sc="renderOrder";const ac=class extends Es{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(sc)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter==!1&&(t.declutter[n]=new Ss(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(sc,t)}setStyle(t){this.style_=function(t){if(void 0===t)return Qa;if(!t)return null;if("function"==typeof t)return t;if(t instanceof el)return t;if(!Array.isArray(t))return Bl([t]);if(0===t.length)return[];const e=t.length,n=t[0];if(n instanceof el){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!(e instanceof el))throw new Error("Expected a list of style instances");n[i]=e}return n}if("style"in n){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!("style"in e))throw new Error("Expected a list of rules with a style property");n[i]=e}return jl(n)}const i=t;return Bl(i)}(t),this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:(Qr("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()}};function lc(t,e){pa.expire()}const cc=class extends dt{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Ar()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Co(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Io(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,o,s,a){let l;const c=e.viewState;function u(t,e,n,i){return r.call(o,e,t?n:null,i)}const h=c.projection,p=pi(t.slice(),h),f=[[0,0]];if(h.canWrapX()&&i){const t=Zn(h.getExtent());f.push([-t,0],[t,0])}const d=e.layerStatesArray,g=d.length,m=[],y=[];for(let i=0;i<f.length;i++)for(let r=g-1;r>=0;--r){const o=d[r],h=o.layer;if(h.hasRenderer()&&ws(o,c)&&s.call(a,h)){const r=h.getRenderer(),s=h.getSource();if(r&&s){const a=s.getWrapX()?p:t,c=u.bind(null,o.managed);y[0]=a[0]+f[i][0],y[1]=a[1]+f[i][1],l=r.forEachFeatureAtCoordinate(y,e,n,c,m)}if(l)return l}}if(0===m.length)return;const v=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*v)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,bt,this,r,o)}getMap(){return this.map_}renderFrame(t){Ar()}scheduleExpireIconCache(t){pa.canExpireCache()&&t.postRenderFunctions.push(lc)}};const uc=class extends gt{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}};const hc=class extends cc{constructor(t){super(t),this.fontChangeListenerKey_=Lr(Aa,yr,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=va+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new uc(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Pr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(io,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex}));e.some((t=>t.layer instanceof ac&&t.layer.getDeclutter()))&&(t.declutter={});const n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=e.length;o<s;++o){const s=e[o];t.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!ws(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const c=a.render(t,r);c&&(c!==r&&(this.children_.push(c),r=c),i.push(s))}this.declutter(t,i),function(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(ro,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){for(let n=e.length-1;n>=0;--n){const i=e[n],r=i.layer;r.getDeclutter()&&r.renderDeclutter(t,i)}e.forEach((e=>e.layer.renderDeferred(t)))}};class pc extends gt{constructor(t,e){super(t),this.layer=e}}const fc="layers";class dc extends to{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(fc,this.handleLayersChanged_),n?Array.isArray(n)?n=new Ur(n.slice(),{unique:!0}):Qr("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new Ur(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Pr),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Lr(t,jr,this.handleLayersAdd_,this),Lr(t,Br,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(Pr);Ct(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new pc("addlayer",n))}this.changed()}registerLayerListeners_(t){const e=[Lr(t,yr,this.handleLayerChange_,this),Lr(t,vr,this.handleLayerChange_,this)];t instanceof dc&&e.push(Lr(t,"addlayer",this.handleLayerGroupAdd_,this),Lr(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Nr(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new pc("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new pc("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new pc("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=Nr(e);this.listenerKeys_[n].forEach(Pr),delete this.listenerKeys_[n],this.dispatchEvent(new pc("removelayer",e)),this.changed()}getLayers(){return this.get(fc)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new pc("removelayer",t[e]))}this.set(fc,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let t=n,o=e.length;t<o;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=Yn(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=r)}return e}getSourceState(){return"ready"}}const gc=dc;const mc=class extends gt{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}};const yc=class extends mc{constructor(t,e,n,i,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},vc={SINGLECLICK:"singleclick",CLICK:br,DBLCLICK:wr,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},_c="pointermove",xc="pointerdown";const bc=class extends Mt{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Lr(n,xc,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Lr(n,_c,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ir,this.boundHandleTouchMove_,!!na&&{passive:!1})}emulateClick_(t){let e=new yc(vc.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new yc(vc.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new yc(vc.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==vc.POINTERUP||e.type==vc.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=vc.POINTERDOWN&&e.type!=vc.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new yc(vc.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Pr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new yc(vc.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Lr(t,vc.POINTERMOVE,this.handlePointerMove_,this),Lr(t,vc.POINTERUP,this.handlePointerUp_,this),Lr(this.element_,vc.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(Lr(this.element_.getRootNode(),vc.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new yc(vc.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new yc(vc.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Pr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ir,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Pr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Pr),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},wc="postrender",Ec="movestart",Sc="moveend",Cc="loadstart",Ic="loadend",Mc="layergroup",Lc="size",Tc="target",Pc="view",Oc=1/0;const Rc=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ct(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){Qr(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Oc&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<i&&n[o]<n[r]?o:r;e[t]=e[s],n[t]=n[s],t=s}e[t]=r,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let o,s,a;for(s=0;s<r;++s)o=e[s],a=t(o),a==Oc?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,e[i++]=o);e.length=i,n.length=i,this.heapify_()}},Ac=0,kc=1,Nc=2,Dc=3,Fc=4;const jc=class extends Rc{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(vr,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===Nc||n===Dc||n===Fc){n!==Dc&&e.removeEventListener(vr,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==Ac||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}};const Bc=class extends Fr{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){la(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&la(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)Pr(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Et&&this.listenerKeys.push(Lr(t,wc,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}};const Gc=class extends Bc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"›",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const s=void 0!==t.label?t.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(br,this.handleClick_.bind(this),!1);const l=e+" "+va+" "+_a+(this.collapsed_&&this.collapsible_?" "+xa:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=l,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),n=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!xt(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(xa),this.collapsed_?aa(this.collapseLabel_,this.label_):aa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};const zc=class extends Bc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"⇧",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(br,this.handleClick_.bind(this),!1);const s=e+" "+va+" "+_a,a=this.element;a.className=s,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ya)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:xo}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(ya);t||0!==n?t&&0!==n&&this.element.classList.remove(ya):this.element.classList.add(ya)}this.label_.style.transform=t}this.rotation_=n}};const Uc=class extends Bc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=a,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(br,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof s?document.createTextNode(s):s),u.addEventListener(br,this.handleClick_.bind(this,-n),!1);const h=e+" "+va+" "+_a,p=this.element;p.className=h,p.appendChild(c),p.appendChild(u),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:xo})):e.setZoom(i)}}};const qc="active";function Xc(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==i?i:250,easing:xo})}const Vc=class extends Fr{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(qc)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(qc,t)}setMap(t){this.map_=t}};const Yc=class extends Vc{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==vc.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;Xc(i.getView(),o,r,this.duration_),n.preventDefault(),e=!0}return!e}};function Hc(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}const Wc=class extends Vc{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==vc.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==vc.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==vc.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==vc.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Zc(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const $c=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Kc=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Jc=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Qc=bt,tu=function(t){const e=t.originalEvent;return 0==e.button&&!(Ks&&Js&&e.ctrlKey)},eu=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},nu=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},iu=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},ru=function(t){const e=t.originalEvent;return Qr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},ou=function(t){const e=t.originalEvent;return Qr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};const su=class extends Wc{constructor(t){super({stopDown:wt}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Zc(eu,ou);this.condition_=t.onFocusOnly?Zc(Jc,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Hc(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();!function(t,e){t[0]*=e,t[1]*=e}(e,n.getResolution()),hi(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:xo})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};const au=class extends Wc{constructor(t){t=t||{},super({stopDown:wt}),this.condition_=t.condition?t.condition:Kc,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!ru(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===yo)return;const i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){if(!ru(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!ru(t))return!1;if(tu(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}};const lu=class extends dt{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ms([n])}getGeometry(){return this.geometry_}},cu="boxstart",uu="boxdrag",hu="boxend",pu="boxcancel";class fu extends gt{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const du=class extends Wc{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new lu(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:tu,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new fu(uu,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new fu(e?hu:pu,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fu(cu,t.coordinate,t)),!0)}onBoxEnd(t){}};const gu=class extends du{constructor(t){super({condition:(t=t||{}).condition?t.condition:nu,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:xo})}},mu="ArrowLeft",yu="ArrowUp",vu="ArrowRight",_u="ArrowDown";const xu=class extends Vc{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return eu(t)&&iu(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Er){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==_u||i==mu||i==vu||i==yu)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_;let s=0,a=0;i==_u?a=-o:i==mu?s=-o:i==vu?s=o:a=o;const l=[s,a];hi(l,r.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:wo,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}};const bu=class extends Vc{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return Js?e.metaKey:e.ctrlKey}(t)&&iu(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==Er||t.type==Sr){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const r=t.map,o="+"===i?this.delta_:-this.delta_;Xc(r.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}};const wu=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};const Eu=class extends Vc{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Qc;this.condition_=t.onFocusOnly?Zc(Jc,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==Mr)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Mr&&(i=n.deltaY,$s&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Qs),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=i;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-ti(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Xc(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}};const Su=class extends Wc{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=wt),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const o=t.map,s=o.getView();s.getConstraints().rotation!==yo&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Hc(this.targetPointers))),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};const Cu=class extends Wc{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=wt),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Hc(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function Iu(t){t=t||{};const e=new Ur,n=new wu(-.005,.05,100);(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new au);(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Yc({delta:t.zoomDelta,duration:t.zoomDuration}));(void 0===t.dragPan||t.dragPan)&&e.push(new su({onFocusOnly:t.onFocusOnly,kinetic:n}));(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Su);(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Cu({duration:t.zoomDuration}));(void 0===t.keyboard||t.keyboard)&&(e.push(new xu),e.push(new bu({delta:t.zoomDelta,duration:t.zoomDuration})));(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Eu({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));return(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new gu({duration:t.zoomDuration})),e}function Mu(t){t instanceof Es?t.setMapInternal(null):t instanceof gc&&t.getLayers().forEach(Mu)}function Lu(t,e){if(t instanceof Es)t.setMapInternal(e);else if(t instanceof gc){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)Lu(n[t],e)}}const Tu=class extends Fr{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new gc({layers:t.layers});let r,o,s;n[Mc]=i,n[Tc]=t.target,n[Pc]=t.view instanceof bs?t.view:new bs,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Ur(t.controls.slice()):(Qr("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new Ur(t.interactions.slice()):(Qr("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?s=new Ur(t.overlays.slice()):(Qr("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),s=t.overlays):s=new Ur;return{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Qs,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new Ur;return(void 0===t.zoom||t.zoom)&&e.push(new Uc(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new zc(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Gc(t.attributionOptions)),e}(),this.interactions=e.interactions||Iu({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jc(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Mc,this.handleLayerGroupChanged_),this.addChangeListener(Pc,this.handleViewChanged_),this.addChangeListener(Lc,this.handleSizeChanged_),this.addChangeListener(Tc,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof bs||t.view.then((function(t){n.setView(new bs(t))})),this.controls.addEventListener(jr,(t=>{t.element.setMap(this)})),this.controls.addEventListener(Br,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(jr,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(Br,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(jr,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(Br,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Lu(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:bt,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof gc?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:bt,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],r=e.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/i,(o.clientY-e.top)/r]}getTarget(){return this.get(Tc)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ji(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?So(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Mc)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Ur)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Bi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?So(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Lc)}getView(){return this.get(Pc)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return Oc;if(!t.wantedTiles[n][e.getKey()])return Oc;const o=t.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new yc(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===xc||n===Mr||n===Er){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[so]||e[ao]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(oo)&&this.renderer_.dispatchRenderEvent(oo,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new mc(Ic,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new mc(Cc,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Pr(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(xr,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Mr,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,la(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new hc(this)),this.mapBrowserEventHandler_=new bc(this,this.moveTolerance_);for(const t in vc)this.mapBrowserEventHandler_.addEventListener(vc[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(xr,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Mr,this.boundHandleBrowserEvent_,!!na&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Lr(t,Er,this.handleBrowserEvent,this),Lr(t,Sr,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Pr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Pr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Lr(t,yr,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Lr(t,vr,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Pr),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new pc("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Lr(t,yr,this.render,this),Lr(t,vr,this.render,this),Lr(t,"addlayer",this.handleLayerAdd_,this),Lr(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Mu(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Is(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:qn(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:Nr(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=qn(o.nextCenter,o.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!Kn(this.previousExtent_)&&!An(r.extent,this.previousExtent_))&&(this.dispatchEvent(new mc(Ec,this,i)),this.previousExtent_=Pn(this.previousExtent_))}this.previousExtent_&&!r.viewHints[so]&&!r.viewHints[ao]&&!An(r.extent,this.previousExtent_)&&(this.dispatchEvent(new mc(Sc,this,r)),wn(r.extent,this.previousExtent_))}this.dispatchEvent(new mc(wc,this,r)),this.renderComplete_=this.hasListener(Cc)||this.hasListener(Ic)||this.hasListener(oo)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new pc("removelayer",e)),this.set(Mc,t)}setSize(t){this.set(Lc,t)}setTarget(t){this.set(Tc,t)}setView(t){if(!t||t instanceof bs)return void this.set(Pc,t);this.set(Pc,new bs);const e=this;t.then((function(t){e.setView(new bs(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!Is(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&vi("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&xt(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};class Pu extends Fr{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Pu(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Pr(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Lr(t,vr,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;if(Array.isArray(t))e=t;else{Qr("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");e=[t]}return function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Ou=Pu,Ru="accuracy",Au="accuracyGeometry",ku="altitude",Nu="altitudeAccuracy",Du="heading",Fu="position",ju="projection",Bu="speed",Gu="tracking",zu="trackingOptions",Uu="error";class qu extends gt{constructor(t){super(Uu),this.code=t.code,this.message=t.message}}const Xu=class extends Fr{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=wi,this.watchId_=void 0,this.addChangeListener(ju,this.handleProjectionChanged_),this.addChangeListener(Gu,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=Ri(Si("EPSG:4326"),t),this.position_&&this.set(Fu,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(Ru,e.accuracy),this.set(ku,null===e.altitude?void 0:e.altitude),this.set(Nu,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Du,null===e.heading?void 0:ri(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const n=this.transform_(this.position_);this.set(Fu,n.slice()),this.set(Bu,null===e.speed?void 0:e.speed);const i=function(t,e,n,i){n=n||32;const r=[];for(let o=0;o<n;++o)_t(r,gi(t,e,2*Math.PI*o/n,i));return r.push(r[0],r[1]),new gs(r,"XY",[r.length])}(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set(Au,i),this.changed()}positionError_(t){this.dispatchEvent(new qu(t))}getAccuracy(){return this.get(Ru)}getAccuracyGeometry(){return this.get(Au)||null}getAltitude(){return this.get(ku)}getAltitudeAccuracy(){return this.get(Nu)}getHeading(){return this.get(Du)}getPosition(){return this.get(Fu)}getProjection(){return this.get(ju)}getSpeed(){return this.get(Bu)}getTracking(){return this.get(Gu)}getTrackingOptions(){return this.get(zu)}setProjection(t){this.set(ju,Si(t))}setTracking(t){this.set(Gu,t)}setTrackingOptions(t){this.set(zu,t)}};bs.prototype.getDecimalZoom=function(){const t=this.getResolution(),e=Math.log(this.maxResolution_/t)/Math.log(2);return void 0!==e?this.minZoom_+e:e};const Vu={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Yu=[Vu.FILL],Hu=[Vu.STROKE],Wu=[Vu.BEGIN_PATH],Zu=[Vu.CLOSE_PATH],$u=Vu;const Ku=class{drawCustom(t,e,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}};const Ju=class extends Ku{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let s=0,a=t.length;s<a;s+=e)i[0]=t[s],i[1]=t[s+1],Sn(n,i)&&(r[o++]=i[0],r[o++]=i[1]);return o}appendFlatLineCoordinates(t,e,n,i,r,o){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();o&&(e+=i);let c=t[e],u=t[e+1];const h=this.tmpCoordinate_;let p,f,d,g=!0;for(p=e+i;p<n;p+=i)h[0]=t[p],h[1]=t[p+1],d=Mn(l,h),d!==f?(g&&(s[a++]=c,s[a++]=u,g=!1),s[a++]=h[0],s[a++]=h[1]):d===_n.INTERSECTING?(s[a++]=h[0],s[a++]=h[1],g=!1):g=!0,c=h[0],u=h[1],f=d;return(r&&g||p===e+i)&&(s[a++]=c,s[a++]=u),a}drawCustomCoordinates_(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o],a=this.appendFlatLineCoordinates(t,e,s,i,!1,!1);r.push(a),e=s}return e}drawCustom(t,e,n,i,r){this.beginGeometry(t,e,r);const o=t.getType(),s=t.getStride(),a=this.coordinates.length;let l,c,u,h,p;switch(o){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();p=0;for(let t=0,n=e.length;t<n;++t){const n=[];p=this.drawCustomCoordinates_(l,p,e[t],s,n),h.push(n)}this.instructions.push([$u.CUSTOM,a,h,t,n,$o,r]),this.hitDetectionInstructions.push([$u.CUSTOM,a,h,t,i||n,$o,r]);break;case"Polygon":case"MultiLineString":u=[],l="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(l,0,t.getEnds(),s,u),this.instructions.push([$u.CUSTOM,a,u,t,n,Zo,r]),this.hitDetectionInstructions.push([$u.CUSTOM,a,u,t,i||n,Zo,r]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,s,!1,!1),this.instructions.push([$u.CUSTOM,a,c,t,n,Wo,r]),this.hitDetectionInstructions.push([$u.CUSTOM,a,c,t,i||n,Wo,r]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,s),c>a&&(this.instructions.push([$u.CUSTOM,a,c,t,n,Wo,r]),this.hitDetectionInstructions.push([$u.CUSTOM,a,c,t,i||n,Wo,r]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([$u.CUSTOM,a,c,t,n,void 0,r]),this.hitDetectionInstructions.push([$u.CUSTOM,a,c,t,i||n,void 0,r])}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[$u.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[$u.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,o=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==$u.END_GEOMETRY?o=e:r==$u.BEGIN_GEOMETRY&&(i[2]=e,vt(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillPatternScale=e&&"object"==typeof e&&"src"in e?this.pixelRatio:1,n.fillStyle=ma(e||Ca)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=ma(t||Ta);const i=e.getLineCap();n.lineCap=void 0!==i?i:Ia;const r=e.getLineDash();n.lineDash=r?r.slice():Ma;const o=e.getLineDashOffset();n.lineDashOffset=o||0;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:La;const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[$u.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[$u.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!xt(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[$u.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=wn(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;bn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};const Qu=class extends Ju{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!Sn(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(i,r);this.instructions.push([$u.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$u.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=[];for(let e=0,n=i.length;e<n;e+=t.getStride())this.maxExtent&&!Sn(this.maxExtent,i.slice(e,e+2))||r.push(i[e],i[e+1]);const o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,2);this.instructions.push([$u.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$u.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}};const th=class extends Ju{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[$u.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0===r||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([$u.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ma,0],Wu);const s=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(Hu),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0===r||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([$u.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ma,0],Wu);const s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let t=0,e=s.length;t<e;++t)c=this.drawFlatCoordinates_(a,c,s[t],l);this.hitDetectionInstructions.push(Hu),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Hu),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Hu),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Wu)}};const eh=class extends Ju{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=n.length;this.instructions.push(Wu),this.hitDetectionInstructions.push(Wu);for(let r=0;r<a;++r){const o=n[r],a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,o,i,!0,!s),c=[$u.MOVE_TO_LINE_TO,a,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),s&&(this.instructions.push(Zu),this.hitDetectionInstructions.push(Zu)),e=o}return o&&(this.instructions.push(Yu),this.hitDetectionInstructions.push(Yu)),s&&(this.instructions.push(Hu),this.hitDetectionInstructions.push(Hu)),e}drawCircle(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([$u.SET_FILL_STYLE,Ca]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([$u.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ma,0]);const s=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1);const c=[$u.CIRCLE,l];this.instructions.push(Wu,c),this.hitDetectionInstructions.push(Wu,c),void 0!==i.fillStyle&&(this.instructions.push(Yu),this.hitDetectionInstructions.push(Yu)),void 0!==i.strokeStyle&&(this.instructions.push(Hu),this.hitDetectionInstructions.push(Hu)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([$u.SET_FILL_STYLE,Ca]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([$u.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ma,0]);const s=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,s,l),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([$u.SET_FILL_STYLE,Ca]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([$u.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ma,0]);const s=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let t=0,e=s.length;t<e;++t)c=this.drawFlatCoordinatess_(a,c,s[t],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Vo(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function nh(t,e,n,i,r){const o=[];let s=n,a=0,l=e.slice(n,2);for(;a<t&&s+r<i;){const[n,i]=l.slice(-2),c=e[s+r],u=e[s+r+1],h=Math.sqrt((c-n)*(c-n)+(u-i)*(u-i));if(a+=h,a>=t){const e=(t-a+h)/h,p=si(n,c,e),f=si(i,u,e);l.push(p,f),o.push(l),l=[p,f],a==t&&(s+=r),a=0}else if(a<t)l.push(e[s+r],e[s+r+1]),s+=r;else{const t=h-a,e=si(n,c,t/h),p=si(i,u,t/h);l.push(e,p),o.push(l),l=[e,p],a=0,s+=r}}return a>0&&o.push(l),o}function ih(t,e,n,i,r){let o,s,a,l,c,u,h,p,f,d,g=n,m=n,y=0,v=0,_=n;for(s=n;s<i;s+=r){const n=e[s],i=e[s+1];void 0!==c&&(f=n-c,d=i-u,l=Math.sqrt(f*f+d*d),void 0!==h&&(v+=a,o=Math.acos((h*f+p*d)/(a*l)),o>t&&(v>y&&(y=v,g=_,m=s),v=0,_=s-r)),a=l,h=f,p=d),c=n,u=i}return v+=l,v>y?[_,s]:[g,m]}const rh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const oh=class extends Ju{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ca]={fillStyle:Ca},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!i&&!r)return;const s=this.coordinates;let a=s.length;const l=t.getType();let c=null,u=t.getStride();if("line"!==o.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let i=o.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),o.overflow||i.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();c=[];for(let t=0,n=e.length;t<n;t+=3)o.overflow||i.push(e[t+2]/this.resolution),c.push(e[t],e[t+1]);if(0===c.length)return;u=2}const r=this.appendFlatPointCoordinates(c,u);if(r===a)return;if(i&&(r-a)/2!=c.length/u){let t=a/2;i=i.filter(((e,n)=>{const i=s[2*(t+n)]===c[n*u]&&s[2*(t+n)+1]===c[n*u+1];return i||--t,i}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n);let h=o.padding;if(h!=Ra&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],n=o.padding[2],i=o.padding[3];o.scale[0]<0&&(e=-e,i=-i),o.scale[1]<0&&(t=-t,n=-n),h=[t,e,n,i]}const p=this.pixelRatio;this.instructions.push([$u.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,h==Ra?Ra:h.map((function(t){return t*p})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const f=1/p,d=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Ca,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([$u.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[f,f],NaN,this.declutterMode_,this.declutterImageWithText_,h,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ca:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),o.backgroundFill&&(this.state.fillStyle=d,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!$n(this.maxExtent,t.getExtent()))return;let i;if(c=t.getFlatCoordinates(),"LineString"==l)i=[c.length];else if("MultiLineString"==l)i=t.getEnds();else if("Polygon"==l)i=t.getEnds().slice(0,1);else if("MultiPolygon"==l){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e,n);const r=o.repeat,h=r?void 0:o.textAlign;let p=0;for(let t=0,e=i.length;t<e;++t){let e;e=r?nh(r*this.resolution,c,p,i[t],u):[c.slice(p,i[t])];for(let n=0,r=e.length;n<r;++n){const r=e[n];let l=0,c=r.length;if(null==h){const t=ih(o.maxAngle,r,0,r.length,2);l=t[0],c=t[1]}for(let t=l;t<c;t+=u)s.push(r[t],r[t+1]);const f=s.length;p=i[t],this.drawChars_(a,f),a=f}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Pa,justify:e.justify,textBaseline:e.textBaseline||Oa,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=rh[i.textBaseline],c=this.textOffsetY_*a,u=this.text_,h=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([$u.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,a,c,r,h*a,u,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([$u.DRAW_CHARS,t,e,l,i.overflow,s?Ca:s,i.maxAngle,a,c,r,h*a,u,o,1/a,this.declutterMode_])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=ma(e.getColor()||Ca)):(i=null,this.textFillState_=i);const o=t.getStroke();if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),i=o.getMiterLimit();r.lineCap=o.getLineCap()||Ia,r.lineDash=t?t.slice():Ma,r.lineDashOffset=void 0===e?0:e,r.lineJoin=o.getLineJoin()||La,r.lineWidth=void 0===n?1:n,r.miterLimit=void 0===i?10:i,r.strokeStyle=ma(o.getColor()||Ta)}else r=null,this.textStrokeState_=r;n=this.textState_;const s=t.getFont()||Sa;Fa(s);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=s,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Oa,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Ra,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),c=t.getOffsetY(),u=t.getRotateWithView(),h=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==u&&u,this.textRotation_=void 0===h?0:h,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Nr(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?"string"==typeof i.fillStyle?i.fillStyle:"|"+Nr(i.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},sh={Circle:eh,Default:Ju,Image:Qu,LineString:th,Polygon:eh,Text:oh};const ah=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){r=new(0,sh[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}};const lh=class extends Rr{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Ar()}getData(t){return null}prepareFrame(t){return Ar()}renderFrame(t,e){return Ar()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,r)=>{const o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==Cs.LOADED&&e.getState()!==Cs.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Cs.LOADED&&e!=Cs.ERROR&&t.addEventListener(vr,this.boundHandleImageChange_),e==Cs.IDLE&&(t.load(),e=t.getState()),e==Cs.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}};const ch=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(t,e)=>{if("function"==typeof oa()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushMethodArgs_=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this);getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let n=0,i=e.length;n<i;n+=2){const i=e[n],r=e[n+1];if("function"==typeof t[i])t[i](...r);else{if("function"==typeof r){t[i]=r(t);continue}t[i]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},uh=[];let hh=null;const ph=class extends lh{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;hh||(hh=ia(1,1,void 0,{willReadFrequently:!0})),hh.clearRect(0,0,1,1);try{hh.drawImage(t,e,n,1,1,0,0,1,1),i=hh.getImageData(0,0,1,1).data}catch(t){return hh=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,o;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&xt(Ys(t.style.backgroundColor),Ys(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",o=ia();const e=o.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Hn(n),r=Wn(n),o=Gn(n),s=Bn(n);So(e.coordinateToPixelTransform,i),So(e.coordinateToPixelTransform,r),So(e.coordinateToPixelTransform,o),So(e.coordinateToPixelTransform,s);const a=this.inversePixelTransform;So(a,i),So(a,r),So(a,o),So(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new uc(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(eo,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(no,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new ch),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(eo,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(no,this.context,t))}getRenderTransform(t,e,n,i,r,o,s){const a=r/2,l=o/2,c=i/e,u=-c,h=-t[0]+s,p=-t[1];return Co(this.tempTransform,a,l,c,u,-n,h,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}};function fh(t,e,n,i,r,o,s,a,l,c,u,h){let p=t[e],f=t[e+1],d=0,g=0,m=0,y=0;function v(){d=p,g=f,p=t[e+=i],f=t[e+1],y+=m,m=Math.sqrt((p-d)*(p-d)+(f-g)*(f-g))}do{v()}while(e<n-i&&y+m<o);let _=0===m?0:(o-y)/m;const x=si(d,p,_),b=si(g,f,_),w=e-i,E=y,S=o+a*l(c,r,u);for(;e<n-i&&y+m<S;)v();_=0===m?0:(S-y)/m;const C=si(d,p,_),I=si(g,f,_);let M;if(h){const t=[x,b,C,I];Po(t,0,4,2,h,t,t),M=t[0]>t[2]}else M=x>C;const L=Math.PI,T=[],P=w+i===e;let O;if(m=0,y=E,p=t[e=w],f=t[e+1],P){v(),O=Math.atan2(f-g,p-d),M&&(O+=O>0?-L:L);const t=(C+x)/2,e=(I+b)/2;return T[0]=[t,e,(S-o)/2,O,r],T}for(let t=0,h=(r=r.replace(/\n/g," ")).length;t<h;){v();let x=Math.atan2(f-g,p-d);if(M&&(x+=x>0?-L:L),void 0!==O){let t=x-O;if(t+=t>L?-2*L:t<-L?2*L:0,Math.abs(t)>s)return null}O=x;const b=t;let w=0;for(;t<h;++t){const s=a*l(c,r[M?h-t-1:t],u);if(e+i<n&&y+m<o+w+s/2)break;w+=s}if(t===b)continue;const E=M?r.substring(h-b,h-t):r.substring(b,t);_=0===m?0:(o+w/2-y)/m;const S=si(d,p,_),C=si(g,f,_);T.push([S,C,w/2,x,E]),o+=w}return T}function dh(t,e,n,i){let r=t[e],o=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),r=e,o=n}return s}const gh=[1/0,1/0,-1/0,-1/0],mh=[],yh=[],vh=[],_h=[];function xh(t){return t[3].declutterBox}const bh=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function wh(t,e){return"start"===e?e=bh.test(t)?"right":"left":"end"===e&&(e=bh.test(t)?"left":"right"),rh[e]}function Eh(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}const Sh=class{constructor(t,e,n,i,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new ch:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,c=[a.scale[0]*l,a.scale[1]*l],u=Array.isArray(t),h=a.justify?rh[a.justify]:wh(Array.isArray(t)?t[0]:t,a.textAlign||Pa),p=i&&o.lineWidth?o.lineWidth:0,f=u?t:t.split("\n").reduce(Eh,[]),{width:d,height:g,widths:m,heights:y,lineWidths:v}=function(t,e){const n=[],i=[],r=[];let o=0,s=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if("\n"===h||c===u){o=Math.max(o,s),r.push(s),s=0,a+=l;continue}const p=e[c+1]||t.font,f=Ga(p,h);n.push(f),s+=f;const d=ja(p);i.push(d),l=Math.max(l,d)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}(a,f),_=d+p,x=[],b=(_+2)*c[0],w=(g+p)*c[1],E={width:b<0?Math.floor(b):Math.ceil(b),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:x};1==c[0]&&1==c[1]||x.push("scale",c),i&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",p),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),n&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const S=.5-h;let C=h*_+S*p;const I=[],M=[];let L,T=0,P=0,O=0,R=0;for(let t=0,e=f.length;t<e;t+=2){const e=f[t];if("\n"===e){P+=T,T=0,C=h*_+S*p,++R;continue}const r=f[t+1]||a.font;r!==L&&(i&&I.push("font",r),n&&M.push("font",r),L=r),T=Math.max(T,y[O]);const o=[e,C+S*m[O]+h*(m[O]-v[R]),.5*(p+T)+P];C+=m[O],i&&I.push("strokeText",o),n&&M.push("fillText",o),++O}return Array.prototype.push.apply(x,I),Array.prototype.push.apply(x,M),this.labels_[r]=E,E}replayTextBackground_(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,s,a,l,c,u,h,p,f,d,g){let m=n-(s*=h[0]),y=i-(a*=h[1]);const v=r+l>t?t-l:r,_=o+c>e?e-c:o,x=f[3]+v*h[0]+f[1],b=f[0]+_*h[1]+f[2],w=m-f[3],E=y-f[0];let S;return(d||0!==u)&&(mh[0]=w,_h[0]=w,mh[1]=E,yh[1]=E,yh[0]=w+x,vh[0]=yh[0],vh[1]=E+b,_h[1]=vh[1]),0!==u?(S=Co([1,0,0,1,0,0],n,i,1,1,u,-n,-i),So(S,mh),So(S,yh),So(S,vh),So(S,_h),Tn(Math.min(mh[0],yh[0],vh[0],_h[0]),Math.min(mh[1],yh[1],vh[1],_h[1]),Math.max(mh[0],yh[0],vh[0],_h[0]),Math.max(mh[1],yh[1],vh[1],_h[1]),gh)):Tn(Math.min(w,w+x),Math.min(E,E+b),Math.max(w,w+x),Math.max(E,E+b),gh),p&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:v,drawImageH:_,originX:l,originY:c,declutterBox:{minX:gh[0],minY:gh[1],maxX:gh[2],maxY:gh[3],value:g},canvasTransform:S,scale:h}}replayImageOrLabel_(t,e,n,i,r,o,s){const a=!(!o&&!s),l=i.declutterBox,c=s?s[2]*i.scale[0]/2:0;return l.minX-c<=e[0]&&l.maxX+c>=0&&l.minY-c<=e[1]&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t,mh,yh,vh,_h,o,s),Ua(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=So(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],a=this.pixelRatio,l=wh(Array.isArray(t)?t[0]:t,r.textAlign||Pa),c=rh[r.textBaseline||Oa],u=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*u,anchorY:c*o.height/a+2*(.5-c)*u}}execute_(t,e,n,i,r,o,s,a){const l=this.zIndexContext_;let c;var u,h;this.pixelCoordinates_&&xt(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=To(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),u=this.renderedTransform_,h=n,u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5]);let p=0;const f=i.length;let d,g,m,y,v,_,x,b,w,E,S,C,I,M=0,L=0,T=0,P=null,O=null;const R=this.coordinateCache_,A=this.viewRotation_,k=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},D=this.instructions!=i||this.overlaps?0:200;let F,j,B,G;for(;p<f;){const n=i[p];switch(n[0]){case $u.BEGIN_GEOMETRY:F=n[1],G=n[3],F.getGeometry()?void 0===s||$n(s,G.getExtent())?++p:p=n[2]+1:p=n[2],l&&(l.zIndex=n[4]);break;case $u.BEGIN_PATH:L>D&&(this.fill_(t),L=0),T>D&&(t.stroke(),T=0),L||T||(t.beginPath(),v=NaN,_=NaN),++p;break;case $u.CIRCLE:M=n[1];const i=c[M],u=c[M+1],h=c[M+2]-i,f=c[M+3]-u,z=Math.sqrt(h*h+f*f);t.moveTo(i+z,u),t.arc(i,u,z,0,2*Math.PI,!0),++p;break;case $u.CLOSE_PATH:t.closePath(),++p;break;case $u.CUSTOM:M=n[1],d=n[2];const U=n[3],q=n[4],X=n[5];N.geometry=U,N.feature=F,p in R||(R[p]=[]);const V=R[p];X?X(c,M,d,2,V):(V[0]=c[M],V[1]=c[M+1],V.length=2),l&&(l.zIndex=n[6]),q(V,N),++p;break;case $u.DRAW_IMAGE:M=n[1],d=n[2],w=n[3],g=n[4],m=n[5];let Y=n[6];const H=n[7],W=n[8],Z=n[9],$=n[10];let K=n[11];const J=n[12];let Q=n[13];y=n[14]||"declutter";const tt=n[15];if(!w&&n.length>=20){E=n[19],S=n[20],C=n[21],I=n[22];const t=this.drawLabelWithPointPlacement_(E,S,C,I);w=t.label,n[3]=w;const e=n[23];g=(t.anchorX-e)*this.pixelRatio,n[4]=g;const i=n[24];m=(t.anchorY-i)*this.pixelRatio,n[5]=m,Y=w.height,n[6]=Y,Q=w.width,n[13]=Q}let et,nt,it,rt;n.length>25&&(et=n[25]),n.length>17?(nt=n[16],it=n[17],rt=n[18]):(nt=Ra,it=!1,rt=!1),$&&k?K+=A:$||k||(K-=A);let ot=0;for(;M<d;M+=2){if(et&&et[ot++]<Q/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(w.width,w.height,c[M],c[M+1],Q,Y,g,m,W,Z,K,J,r,nt,it||rt,F),i=[t,e,w,n,H,it?P:null,rt?O:null];if(a){let t,e,r,o,s;if(tt){const n=d-M;if(!tt[n]){tt[n]={args:i,declutterMode:y};continue}const o=tt[n];t=o.args,e=o.declutterMode,delete tt[n],r=xh(t)}if(!t||"declutter"===e&&a.collides(r)||(o=!0),"declutter"===y&&a.collides(n.declutterBox)||(s=!0),"declutter"===e&&"declutter"===y){const t=o&&s;o=t,s=t}o&&("none"!==e&&a.insert(r),this.replayImageOrLabel_.apply(this,t)),s&&("none"!==y&&a.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,i))}else this.replayImageOrLabel_.apply(this,i)}++p;break;case $u.DRAW_CHARS:const st=n[1],at=n[2],lt=n[3],ct=n[4];I=n[5];const ut=n[6],ht=n[7],pt=n[8];C=n[9];const ft=n[10];E=n[11],S=n[12];const dt=[n[13],n[13]];y=n[14]||"declutter";const gt=this.textStates[S],mt=gt.font,yt=[gt.scale[0]*ht,gt.scale[1]*ht];let vt;mt in this.widths_?vt=this.widths_[mt]:(vt={},this.widths_[mt]=vt);const _t=dh(c,st,at,2),xt=Math.abs(yt[0])*za(mt,E,vt);if(ct||xt<=_t){const n=fh(c,st,at,2,E,(_t-xt)*wh(E,this.textStates[S].textAlign),ut,Math.abs(yt[0]),za,mt,vt,k?0:this.viewRotation_);t:if(n){const i=[];let r,o,s,l,c;if(C)for(r=0,o=n.length;r<o;++r){c=n[r],s=c[4],l=this.createLabel(s,S,"",C),g=c[2]+(yt[0]<0?-ft:ft),m=lt*l.height+2*(.5-lt)*ft*yt[1]/yt[0]-pt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,g,m,0,0,c[3],dt,!1,Ra,!1,F);if(a&&"declutter"===y&&a.collides(o.declutterBox))break t;i.push([t,e,l,o,1,null,null])}if(I)for(r=0,o=n.length;r<o;++r){c=n[r],s=c[4],l=this.createLabel(s,S,I,""),g=c[2],m=lt*l.height-pt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,g,m,0,0,c[3],dt,!1,Ra,!1,F);if(a&&"declutter"===y&&a.collides(o.declutterBox))break t;i.push([t,e,l,o,1,null,null])}a&&"none"!==y&&a.load(i.map(xh));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++p;break;case $u.END_GEOMETRY:if(void 0!==o){F=n[1];const t=o(F,G);if(t)return t}++p;break;case $u.FILL:D?L++:this.fill_(t),++p;break;case $u.MOVE_TO_LINE_TO:for(M=n[1],d=n[2],j=c[M],B=c[M+1],x=j+.5|0,b=B+.5|0,x===v&&b===_||(t.moveTo(j,B),v=x,_=b),M+=2;M<d;M+=2)j=c[M],B=c[M+1],x=j+.5|0,b=B+.5|0,M!=d-2&&x===v&&b===_||(t.lineTo(j,B),v=x,_=b);++p;break;case $u.SET_FILL_STYLE:P=n,this.alignAndScaleFill_=n[2],L&&(this.fill_(t),L=0,T&&(t.stroke(),T=0)),t.fillStyle=n[1],++p;break;case $u.SET_STROKE_STYLE:O=n,T&&(t.stroke(),T=0),this.setStrokeStyle_(t,n),++p;break;case $u.STROKE:D?T++:t.stroke(),++p;break;default:++p}}L&&this.fill_(t),T&&t.stroke()}execute(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,r)}},Ch=["Polygon","Circle","LineString","Image","Text","Default"],Ih=["Image","Text"],Mh=Ch.filter((t=>!Ih.includes(t)));const Lh={};const Th=class{constructor(t,e,n,i,r,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_=[],this.createExecutors_(r,s)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];void 0===i&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const t in r){const n=r[t];i[t]=new Sh(this.resolution_,this.pixelRatio_,this.overlaps_,n,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,o){const s=2*(i=Math.round(i))+1,a=Co(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=ia(s,s,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let u;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):l||c.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(u=[1/0,1/0,-1/0,-1/0],kn(u,t),bn(u,e*(this.renderBuffer_+i),u));const h=function(t){if(void 0!==Lh[t])return Lh[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let o=0;o<=t;++o){const s=r*r+o*o;if(s>n)break;let a=i[s];a||(a=[],i[s]=a),a.push(4*((t+r)*e+(t+o))+3),r>0&&a.push(4*((t-r)*e+(t+o))+3),o>0&&(a.push(4*((t+r)*e+(t-o))+3),r>0&&a.push(4*((t-r)*e+(t-o))+3))}const r=[];for(let t=0,e=i.length;t<e;++t)i[t]&&r.push(...i[t]);return Lh[t]=r,r}(i);let p;function f(t,e){const n=c.getImageData(0,0,s,s).data;for(let a=0,l=h.length;a<l;a++)if(n[h[a]]>0){if(!o||"Image"!==p&&"Text"!==p||o.includes(t)){const n=(h[a]-3)/4,o=i-n%s,l=i-(n/s|0),c=r(t,e,o*o+l*l);if(c)return c}c.clearRect(0,0,s,s);break}}const d=Object.keys(this.executorsByZIndex_).map(Number);let g,m,y,v,_;for(d.sort(mt),g=d.length-1;g>=0;--g){const t=d[g].toString();for(y=this.executorsByZIndex_[t],m=Ch.length-1;m>=0;--m)if(p=Ch[m],v=y[p],void 0!==v&&(_=v.executeHitDetection(c,a,n,f,u),_))return _}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return To(s,0,8,2,t,s),s}isEmpty(){return It(this.executorsByZIndex_)}execute(t,e,n,i,r,o,s){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,c,u,h,p,f;for(a.sort(mt),o=o||Ch,s&&a.reverse(),l=0,c=a.length;l<c;++l){const c=a[l].toString();for(p=this.executorsByZIndex_[c],u=0,h=o.length;u<h;++u){const c=o[u];if(f=p[c],void 0!==f){const o=null===s?void 0:f.getZIndexContext(),u=o?o.getContext():t,h=this.maxExtent_&&"Image"!==c&&"Text"!==c;if(h&&(u.save(),this.clip(u,n)),f.execute(u,e,n,i,r,s),h&&u.restore(),o){o.offset();const t=a[l];this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){this.deferredZIndexContexts_.forEach((t=>{t.forEach((t=>{t.draw(this.renderedContext_),t.clear()}))}))}};const Ph=class extends Ku{constructor(t,e,n,i,r,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?ai(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,n,i){if(!this.image_)return;const r=To(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){const e=r[t]-this.imageAnchorX_,n=r[t+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,i=n+this.imageAnchorY_;Co(s,t,i,1,1,l,-t,-i),o.save(),o.transform.apply(o,s),o.translate(t,i),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=To(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const o=this.context_,s=To(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let a=s.length;r&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(s[t],s[t+1]);return r&&o.closePath(),n}drawRings_(t,e,n,i){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),$n(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return To(i,0,i.length,r,e,n)}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,n=e.length;t<n;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),$n(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if($n(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)i=this.moveToLineTo_(n,i,r[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),$n(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),$n(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];i=this.drawRings_(n,i,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),xt(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Pa;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:ma(e||Ca)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=i||Ma;this.strokeState_={lineCap:void 0!==n?n:Ia,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||0)*this.pixelRatio_,lineJoin:void 0!==o?o:La,lineWidth:(void 0!==s?s:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:ma(t||Ta)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:ma(t||Ca)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),o=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:Ia,lineDash:i||Ma,lineDashOffset:r||0,lineJoin:void 0!==o?o:La,lineWidth:void 0!==s?s:1,miterLimit:void 0!==a?a:10,strokeStyle:ma(t||Ta)}}else this.textStrokeState_=null;const i=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),c=t.getText(),u=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:void 0!==i?i:Sa,textAlign:void 0!==u?u:Pa,textBaseline:void 0!==h?h:Oa},this.text_=void 0!==c?Array.isArray(c)?c.reduce(((t,e,n)=>t+(n%2?" ":e)),""):c:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},Oh=.5;const Rh=.5,Ah={Point:function(t,e,n,i,r,o){const s=n.getImage(),a=n.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=Cs.LOADED)return;const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(s,c),o.drawPoint(e,i,r)}if(l){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(a,c),o.drawText(e,i,r)}},LineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const s=t.getBuilder(n.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,i,r)}const s=n.getText();if(s&&s.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i,r)}},Polygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i,r)}},MultiPoint:function(t,e,n,i,r,o){const s=n.getImage(),a=s&&0!==s.getOpacity(),l=n.getText(),c=l&&l.getText(),u=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=Cs.LOADED)return;const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(s,u),o.drawMultiPoint(e,i,r)}if(c){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l,u),o.drawText(e,i,r)}},MultiLineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const s=t.getBuilder(n.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,i,r)}const s=n.getText();if(s&&s.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i,r)}},MultiPolygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i,r)}},GeometryCollection:function(t,e,n,i,r,o){const s=e.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a){(0,Ah[s[a].getType()])(t,s[a],n,i,r,o)}},Circle:function(t,e,n,i){const r=n.getFill(),o=n.getStroke();if(r||o){const s=t.getBuilder(n.getZIndex(),"Circle");s.setFillStrokeStyle(r,o),s.drawCircle(e,i)}const s=n.getText();if(s&&s.getText()){const r=t.getBuilder(n.getZIndex(),"Text");r.setTextStyle(s),r.drawText(e,i)}}};function kh(t,e){return parseInt(Nr(t),10)-parseInt(Nr(e),10)}function Nh(t,e){const n=Dh(t,e);return n*n}function Dh(t,e){return Rh*t/e}function Fh(t,e,n,i,r,o,s,a){const l=[],c=n.getImage();if(c){let t=!0;const e=c.getImageState();e==Cs.LOADED||e==Cs.ERROR?t=!1:e==Cs.IDLE&&c.load(),t&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then((()=>r(null))),function(t,e,n,i,r,o,s){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r),c=n.getRenderer();if(c)jh(t,l,n,e,s);else{(0,Ah[l.getType()])(t,l,n,e,s,o)}}(t,e,n,i,o,s,a),h}function jh(t,e,n,i,r){if("GeometryCollection"==e.getType()){const o=e.getGeometries();for(let e=0,s=o.length;e<s;++e)jh(t,o[e],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}const Bh=class extends ph{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,c=a.getExtent(),u=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),p=e.pixelRatio,f=e.viewHints,d=!(f[so]||f[ao]),g=this.compositionContext_,m=Math.round(e.size[0]*p),y=Math.round(e.size[1]*p),v=u.getWrapX()&&a.canWrapX(),_=v?Zn(c):null,x=v?Math.ceil((i[2]-c[2])/_)+1:1;let b=v?Math.floor((i[0]-c[0])/_):0;do{const i=this.getRenderTransform(o,s,l,p,m,y,b*_);t.execute(g,[g.canvas.width,g.canvas.height],i,l,d,void 0===n?Ch:n?Ih:Mh,n?h&&e.declutter[h]:void 0)}while(++b<x)}setupCompositionContext_(){if(1!==this.opacity_){const t=ia(this.context.canvas.width,this.context.canvas.height,uh);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,sa(this.compositionContext_),uh.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.getLayer().getDeclutter()&&(this.setupCompositionContext_(),this.renderWorlds(this.replayGroup_,t,!0),this.releaseCompositionContext_())}renderDeferredInternal(t){this.replayGroup_.renderDeferred()}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];!function(t,e,n){Eo(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),Io(this.inversePixelTransform,this.pixelTransform);const r=Lo(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,s=o.canvas,a=this.replayGroup_;let l=a&&!a.isEmpty();if(!l){if(!(this.getLayer().hasListener(eo)||this.getLayer().hasListener(no)))return null}const c=Math.round(t.size[0]*n),u=Math.round(t.size[1]*n);s.width!=c||s.height!=u?(s.width=c,s.height=u,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,c,u),this.preRender(o,t);const h=t.viewState,p=h.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let f=!1;if(l&&i.extent&&this.clipping){const e=zi(i.extent,p);l=$n(e,t.extent),f=l&&!Cn(e,t.extent),f&&this.clipUnrotated(this.compositionContext_,t,e)}return l&&this.renderWorlds(a,t,!this.getLayer().getDeclutter()&&void 0),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];So(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=t[0]*Oh,c=t[1]*Oh;a.push(this.getRenderTransform(e,n,i,Oh,l,c,0).slice());const u=s.getSource(),h=r.getExtent();if(u.getWrapX()&&r.canWrapX()&&!Cn(h,o)){let t=o[0];const r=Zn(h);let s,u=0;for(;t<h[0];)--u,s=r*u,a.push(this.getRenderTransform(e,n,i,Oh,l,c,s).slice()),t+=r;for(u=0,t=o[2];t>h[2];)++u,s=r*u,a.push(this.getRenderTransform(e,n,i,Oh,l,c,s).slice()),t-=r}const p=Fi();this.hitDetectionImageData_=function(t,e,n,i,r,o,s,a,l){const c=l?Gi(r,l):r,u=ia(t[0]*Oh,t[1]*Oh);u.imageSmoothingEnabled=!1;const h=u.canvas,p=new Ph(u,Oh,r,null,s,a,l?Ri(Fi(),l):null),f=n.length,d=Math.floor(16777215/f),g={};for(let t=1;t<=f;++t){const e=n[t-1],r=e.getStyleFunction()||i;if(!r)continue;let s=r(e,o);if(!s)continue;Array.isArray(s)||(s=[s]);const a=(t*d).toString(16).padStart(7,"#00000");for(let t=0,n=s.length;t<n;++t){const n=s[t],i=n.getGeometryFunction()(e);if(!i||!$n(c,i.getExtent()))continue;const r=n.clone(),o=r.getFill();o&&o.setColor(a);const l=r.getStroke();l&&(l.setColor(a),l.setLineDash(null)),r.setText(void 0);const u=n.getImage();if(u){const t=u.getImageSize();if(!t)continue;const e=ia(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=a,e.fillRect(0,0,n.width,n.height),r.setImage(new rl({img:n,anchor:u.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:u.getOrigin(),opacity:1,size:u.getSize(),scale:u.getScale(),rotation:u.getRotation(),rotateWithView:u.getRotateWithView()}))}const h=r.getZIndex()||0;let p=g[h];p||(p={},g[h]=p,p.Polygon=[],p.Circle=[],p.LineString=[],p.Point=[]);const f=i.getType();if("GeometryCollection"===f){const t=i.getGeometriesArrayRecursive();for(let e=0,n=t.length;e<n;++e){const n=t[e];p[n.getType().replace("Multi","")].push(n,r)}}else p[f.replace("Multi","")].push(i,r)}}const m=Object.keys(g).map(Number).sort(mt);for(let t=0,n=m.length;t<n;++t){const n=g[m[t]];for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t+=2){p.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)p.setTransform(e[n]),p.drawGeometry(i[t])}}}return u.getImageData(0,0,h.width,h.height)}(t,a,this.renderedFeatures_,s.getStyleFunction(),o,n,i,Nh(n,this.renderedPixelRatio_),p?r:null)}e(function(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*Oh),o=Math.floor(Math.round(t[1])*Oh),s=4*(ti(r,0,n.width-1)+ti(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],c=n.data[s+2]+256*(l+256*a),u=Math.floor(16777215/e.length);c&&c%u==0&&i.push(e[c/u-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},c=function(t,e,n){const o=Nr(t),s=l[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(t,a,e);r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let u;const h=[this.replayGroup_],p=this.getLayer().getDeclutter();return h.some((i=>u=i.forEachFeatureAtCoordinate(t,o,s,n,c,p&&e.declutter[p]?e.declutter[p].all().map((t=>t.value)):null))),u}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[so],r=t.viewHints[ao],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&i||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,c=l.projection,u=l.resolution,h=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer();let d=e.getRenderOrder();void 0===d&&(d=kh);const g=l.center.slice(),m=bn(a,f*u),y=m.slice(),v=[m.slice()],_=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!Cn(_,t.extent)){const t=Zn(_),e=Math.max(Zn(m)/2,t);m[0]=_[0]-e,m[2]=_[2]+e,pi(g,c);const n=Qn(v[0],c);n[0]<_[0]&&n[2]<_[2]?v.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>_[0]&&n[2]>_[2]&&v.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&Cn(this.wrappedRenderedExtent_,m))return xt(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new ah(Dh(u,h),m,u,h),b=Fi();let w;if(b){for(let t=0,e=v.length;t<e;++t){const e=Gi(v[t],c);n.loadFeatures(e,Ui(u,c),b)}w=Ri(b,c)}else for(let t=0,e=v.length;t<e;++t)n.loadFeatures(v[t],u,c);const E=Nh(u,h);let S=!0;const C=(t,n)=>{let i;const r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,u)),i){const e=this.renderFeature(t,E,i,x,w,this.getLayer().getDeclutter(),n);S=S&&!e}},I=Gi(m,c),M=n.getFeaturesInExtent(I);d&&M.sort(d);for(let t=0,e=M.length;t<e;++t)C(M[t],t);this.renderedFeatures_=M,this.ready=S;const L=x.finish(),T=new Th(m,u,h,n.getOverlaps(),L,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=g,this.renderedProjection_=c,this.renderedPixelRatio_=h,this.replayGroup_=T,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,o,s){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Fh(i,t,n[l],e,this.boundHandleStyleImageChange_,r,o,s)||a;else a=Fh(i,t,n,e,this.boundHandleStyleImageChange_,r,o,s);return a}};const Gh=class extends ac{constructor(t){super(t)}createRenderer(){return new Bh(this)}},zh="preload",Uh="useInterimTilesOnError";const qh=class extends Es{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(zh)}setPreload(t){this.set(zh,t)}getUseInterimTilesOnError(){return this.get(Uh)}setUseInterimTilesOnError(t){this.set(Uh,t)}getData(t){return super.getData(t)}};const Xh=class extends Mt{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(vr)}release(){this.state===Dc&&this.setState(Fc)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile;if(!t)return this;do{if(t.getState()==Nc)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){let t=this.interimTile;if(!t)return;let e=this;do{if(t.getState()==Nc){t.interimTile=null;break}t.getState()==kc?e=t:t.getState()==Ac?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Dc&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Ar()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:_o(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}};const Vh=class extends Xh{constructor(t,e,n,i,r,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Nc,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Dc,this.unlistenImage_(),this.image_=function(){const t=ia(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Nc:this.state=Fc,this.unlistenImage_(),this.changed()}load(){this.state==Dc&&(this.state=Ac,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ac&&(this.state=kc,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,e,n){const i=t;let r=!0,o=!1,s=!1;const a=[Tr(i,Cr,(function(){s=!0,o||e()}))];return i.src&&ea?(o=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(s?e():n())}))):a.push(Tr(i,_r,n)),function(){r=!1,a.forEach(Pr)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};const Yh=class{constructor(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;let s={};const a=Ai(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Zn(i)>=Zn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Zn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Zn(this.targetProj_.getExtent()):null;const l=Hn(n),c=Wn(n),u=Gn(n),h=Bn(n),p=this.transformInv_(l),f=this.transformInv_(c),d=this.transformInv_(u),g=this.transformInv_(h),m=10+(o?Math.max(0,Math.ceil(Math.log2(jn(n)/(o*o*256*256)))):0);if(this.addQuad_(l,c,u,h,p,f,d,g,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}))}s={}}addTriangle_(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})}addQuad_(t,e,n,i,r,o,s,a,l){const c=xn([r,o,s,a]),u=this.sourceWorldWidth_?Zn(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1;let f=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){f=Zn(xn([t,e,n,i]))/this.targetWorldWidth_>.25||f}!p&&this.sourceProj_.isGlobal()&&u&&(f=u>.25||f)}if(!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!$n(c,this.maxSourceExtent_))return;let d=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)f=!0;else if(d=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=d&&2!=d&&4!=d&&8!=d)return;if(l>0){if(!f){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let o;if(p){o=(oi(r[0],h)+oi(s[0],h))/2-oi(i[0],h)}else o=(r[0]+s[0])/2-i[0];const a=(r[1]+s[1])/2-i[1];f=o*o+a*a>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const c=[(e[0]+n[0])/2,(e[1]+n[1])/2],u=this.transformInv_(c),h=[(i[0]+t[0])/2,(i[1]+t[1])/2],p=this.transformInv_(h);this.addQuad_(t,e,c,h,r,o,u,p,l-1),this.addQuad_(h,c,n,i,p,u,s,a,l-1)}else{const c=[(t[0]+e[0])/2,(t[1]+e[1])/2],u=this.transformInv_(c),h=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(h);this.addQuad_(t,c,h,i,r,u,p,a,l-1),this.addQuad_(c,e,n,h,u,o,s,p,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,n,i,r,s,a),0==(14&d)&&this.addTriangle_(t,n,e,r,s,o),d&&(0==(13&d)&&this.addTriangle_(e,i,t,o,a,r),0==(7&d)&&this.addTriangle_(e,i,n,o,a,s))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){const r=e.source;kn(t,r[0]),kn(t,r[1]),kn(t,r[2])})),t}getTriangles(){return this.triangles_}};let Hh;const Wh=[];function Zh(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function $h(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Kh(t,e,n,i){const r=ki(n,e,t);let o=Ci(e,i,n);const s=e.getMetersPerUnit();void 0!==s&&(o*=s);const a=t.getMetersPerUnit();void 0!==a&&(o/=a);const l=t.getExtent();if(!l||Sn(l,r)){const e=Ci(t,o,r)/o;isFinite(e)&&e>0&&(o/=e)}return o}function Jh(t,e,n,i,r,o,s,a,l,c,u,h,p,f){const d=ia(Math.round(n*t),Math.round(n*e),Wh);if(h||(d.imageSmoothingEnabled=!1),0===l.length)return d.canvas;function g(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";const m=[1/0,1/0,-1/0,-1/0];let y;l.forEach((function(t,e,n){var i,r;i=m,(r=t.extent)[0]<i[0]&&(i[0]=r[0]),r[2]>i[2]&&(i[2]=r[2]),r[1]<i[1]&&(i[1]=r[1]),r[3]>i[3]&&(i[3]=r[3])}));const v=n/i,_=(h?1:1+Math.pow(2,-24))/v;if(!p||1!==l.length||0!==c){if(y=ia(Math.round(Zn(m)*v),Math.round(Vn(m)*v),Wh),h||(y.imageSmoothingEnabled=!1),r&&f){const t=(r[0]-m[0])*v,e=-(r[3]-m[3])*v,n=Zn(r)*v,i=Vn(r)*v;y.rect(t,e,n,i),y.clip()}l.forEach((function(t,e,n){const i=(t.extent[0]-m[0])*v,r=-(t.extent[3]-m[3])*v,o=Zn(t.extent)*v,s=Vn(t.extent)*v;t.image.width>0&&t.image.height>0&&y.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,h?i:Math.round(i),h?r:Math.round(r),h?o:Math.round(i+o)-Math.round(i),h?s:Math.round(r+s)-Math.round(r))}))}const x=Hn(s);return a.getTriangles().forEach((function(t,e,n){const i=t.source,r=t.target;let s=i[0][0],a=i[0][1],c=i[1][0],u=i[1][1],p=i[2][0],f=i[2][1];const v=g((r[0][0]-x[0])/o),b=g(-(r[0][1]-x[1])/o),w=g((r[1][0]-x[0])/o),E=g(-(r[1][1]-x[1])/o),S=g((r[2][0]-x[0])/o),C=g(-(r[2][1]-x[1])/o),I=s,M=a;s=0,a=0,c-=I,u-=M,p-=I,f-=M;const L=function(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let o=n+1;o<e;o++){const e=Math.abs(t[o][n]);e>r&&(r=e,i=o)}if(0===r)return null;const o=t[i];t[i]=t[n],t[n]=o;for(let i=n+1;i<e;i++){const r=-t[i][n]/t[n][n];for(let o=n;o<e+1;o++)n==o?t[i][o]=0:t[i][o]+=r*t[n][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}([[c,u,0,0,w-v],[p,f,0,0,S-v],[0,0,c,u,E-b],[0,0,p,f,C-b]]);if(!L)return;if(d.save(),d.beginPath(),function(){if(void 0===Hh){const t=ia(6,6,Wh);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Zh(t,4,5,4,0),Zh(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Hh=$h(e,0)||$h(e,4)||$h(e,8),sa(t),Wh.push(t.canvas)}return Hh}()||!h){d.moveTo(w,E);const t=4,e=v-w,n=b-E;for(let i=0;i<t;i++)d.lineTo(w+g((i+1)*e/t),E+g(i*n/(t-1))),i!=t-1&&d.lineTo(w+g((i+1)*e/t),E+g((i+1)*n/(t-1)));d.lineTo(S,C)}else d.moveTo(w,E),d.lineTo(v,b),d.lineTo(S,C);let T;if(d.clip(),d.transform(L[0],L[2],L[1],L[3],v,b),d.translate(m[0]-I,m[3]-M),y)T=y.canvas,d.scale(_,-_);else{const t=l[0],e=t.extent;T=t.image,d.scale(Zn(e)/T.width,-Vn(e)/T.height)}d.drawImage(T,0,0),d.restore()})),y&&(sa(y),Wh.push(y.canvas)),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-x[0])/o,s=-(i[0][1]-x[1])/o,a=(i[1][0]-x[0])/o,l=-(i[1][1]-x[1])/o,c=(i[2][0]-x[0])/o,u=-(i[2][1]-x[1])/o;d.beginPath(),d.moveTo(a,l),d.lineTo(r,s),d.lineTo(c,u),d.closePath(),d.stroke()})),d.restore()),d.canvas}const Qh=class extends Xh{constructor(t,e,n,i,r,o,s,a,l,c,u,h){super(r,Ac,h),this.renderEdges_=void 0!==u&&u,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let d=this.sourceTileGrid_.getExtent();const g=f?Yn(p,f):p;if(0===jn(g))return void(this.state=Fc);const m=t.getExtent();m&&(d=d?Yn(d,m):m);const y=i.getResolution(this.wrappedTileCoord_[0]),v=function(t,e,n,i){const r=zn(n);let o=Kh(t,e,r,i);return(!isFinite(o)||o<=0)&&Fn(n,(function(n){return o=Kh(t,e,n,i),isFinite(o)&&o>0})),o}(t,n,g,y);if(!isFinite(v)||v<=0)return void(this.state=Fc);const _=void 0!==c?c:.5;if(this.triangulation_=new Yh(t,n,g,d,v*_,y),0===this.triangulation_.getTriangles().length)return void(this.state=Fc);this.sourceZ_=e.getZForResolution(v);let x=this.triangulation_.calculateSourceExtent();if(d&&(t.canWrapX()?(x[1]=ti(x[1],d[1],d[3]),x[3]=ti(x[3],d[1],d[3])):x=Yn(x,d)),jn(x)){const t=e.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=l(this.sourceZ_,e,n,s);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=Fc)}else this.state=Fc}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==Nc&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=Dc;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jh(i,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Nc}this.changed()}load(){if(this.state==Ac){this.state=kc,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState();if(n==Ac||n==kc){t++;const n=Lr(e,vr,(function(i){const r=e.getState();r!=Nc&&r!=Dc&&r!=Fc||(Pr(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==Ac&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Pr),this.sourcesListenerKeys_=null}release(){this.canvas_&&(sa(this.canvas_.getContext("2d")),Wh.push(this.canvas_),this.canvas_=null),super.release()}};class tp{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function ep(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new tp(t,e,n,i)}const np=tp;const ip=class extends ph{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new np(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==Nc||n==Fc||n==Dc&&!i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer();let a=s.getSource().getTile(t,e,n,r,o);return a.getState()==Dc&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=So(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Sn(r,i))return null;const o=e.pixelRatio,s=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),c=l.getTileGridForProjection(a.projection),u=l.getTilePixelRatio(e.pixelRatio);for(let t=c.getZForResolution(a.resolution);t>=c.getMinZoom();--t){const e=c.getTileCoordForCoordAndZ(i,t),n=l.getTile(t,e[1],e[2],o,s);if(!(n instanceof Vh||n instanceof Qh)||n instanceof Qh&&n.getState()===Fc)return null;if(n.getState()!==Nc)continue;const r=c.getOrigin(t),h=Ms(c.getTileSize(t)),p=c.getResolution(t),f=Math.floor(u*((i[0]-r[0])/p-e[1]*h[0])),d=Math.floor(u*((r[1]-i[1])/p-e[2]*h[1])),g=Math.round(u*l.getGutterForProjection(a.projection));return this.getImageData(n.getImage(),f+g,d+g)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,s=i.center,a=i.rotation,l=t.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getRevision(),p=u.getTileGridForProjection(r),f=p.getZForResolution(o,u.zDirection),d=p.getResolution(f);let g=t.extent;const m=t.viewState.resolution,y=u.getTilePixelRatio(l),v=Math.round(Zn(g)/m*l),_=Math.round(Vn(g)/m*l),x=n.extent&&zi(n.extent,r);x&&(g=Yn(g,zi(n.extent,r)));const b=d*v/2/y,w=d*_/2/y,E=[s[0]-b,s[1]-w,s[0]+b,s[1]+w],S=p.getTileRangeForExtentAndZ(g,f),C={};C[f]={};const I=this.createLoadedTileFinder(u,r,C),M=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const T=a?Xn(i.center,m,a,t.size):void 0;for(let e=S.minX;e<=S.maxX;++e)for(let i=S.minY;i<=S.maxY;++i){if(a&&!p.tileCoordIntersectsViewport([f,e,i],T))continue;const r=this.getTile(f,e,i,t);if(this.isDrawableTile(r)){const e=Nr(this);if(r.getState()==Nc){C[f][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==n.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}const o=p.getTileCoordChildTileRange(r.tileCoord,L,M);let s=!1;o&&(s=I(f+1,o)),s||p.forEachTileCoordParentTileRange(r.tileCoord,I,L,M)}const P=d/o*l/y;Co(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-v/2,-_/2);const O=Lo(this.pixelTransform);this.useContainer(e,O,this.getBackground(t));const R=this.getRenderContext(t),A=this.context.canvas;Io(this.inversePixelTransform,this.pixelTransform),Co(this.tempTransform,v/2,_/2,P,P,0,-v/2,-_/2),A.width!=v||A.height!=_?(A.width=v,A.height=_):this.containerReused||R.clearRect(0,0,v,_),x&&this.clipUnrotated(R,t,x),u.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,t),this.renderedTiles.length=0;let k,N,D,F=Object.keys(C).map(Number);F.sort(mt),1!==n.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(k=[],N=[]):F=F.reverse();for(let e=F.length-1;e>=0;--e){const n=F[e],i=u.getTilePixelSize(n,l,r),o=p.getResolution(n)/d,s=i[0]*o*P,a=i[1]*o*P,c=p.getTileCoordForCoordAndZ(Hn(E),n),h=p.getTileCoordExtent(c),g=So(this.tempTransform,[y*(h[0]-E[0])/d,y*(E[3]-h[3])/d]),m=y*u.getGutterForProjection(r),v=C[n];for(const e in v){const i=v[e],r=i.tileCoord,o=c[1]-r[1],l=Math.round(g[0]-(o-1)*s),h=c[2]-r[2],p=Math.round(g[1]-(h-1)*a),d=Math.round(g[0]-o*s),y=Math.round(g[1]-h*a),_=l-d,x=p-y,b=f===n,w=b&&1!==i.getAlpha(Nr(this),t.time);let E=!1;if(!w)if(k){D=[d,y,d+_,y,d+_,y+x,d,y+x];for(let t=0,e=k.length;t<e;++t)if(f!==n&&n<N[t]){const e=k[t];$n([d,y,d+_,y+x],[e[0],e[3],e[4],e[7]])&&(E||(R.save(),E=!0),R.beginPath(),R.moveTo(D[0],D[1]),R.lineTo(D[2],D[3]),R.lineTo(D[4],D[5]),R.lineTo(D[6],D[7]),R.moveTo(e[6],e[7]),R.lineTo(e[4],e[5]),R.lineTo(e[2],e[3]),R.lineTo(e[0],e[1]),R.clip())}k.push(D),N.push(n)}else R.clearRect(d,y,_,x);this.drawTileImage(i,t,d,y,_,x,m,b),k&&!w?(E&&R.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,u,i)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!An(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,u,p,l,r,g,f,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(this.context,t),n.extent&&R.restore(),R.imageSmoothingEnabled=!0,O!==A.style.transform&&(A.style.transform=O),this.container}drawTileImage(t,e,n,i,r,o,s,a){const l=this.getTileImage(t);if(!l)return;const c=this.getRenderContext(e),u=Nr(this),h=e.layerStatesArray[e.layerIndex],p=h.opacity*(a?t.getAlpha(u,e.time):1),f=p!==c.globalAlpha;f&&(c.save(),c.globalAlpha=p),c.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),f&&c.restore(),p!==h.opacity?e.animate=!0:a&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=Nr(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=Nr(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,o,s,a,l){const c=Nr(e);c in t.wantedTiles||(t.wantedTiles[c]={});const u=t.wantedTiles[c],h=t.tileQueue,p=n.getMinZoom(),f=t.viewState.rotation,d=f?Xn(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let g,m,y,v,_,x,b=0;for(x=p;x<=s;++x)for(m=n.getTileRangeForExtentAndZ(o,x,m),y=n.getResolution(x),v=m.minX;v<=m.maxX;++v)for(_=m.minY;_<=m.maxY;++_)f&&!n.tileCoordIntersectsViewport([x,v,_],d)||(s-x<=a?(++b,g=e.getTile(x,v,_,i,r),g.getState()==Ac&&(u[g.getKey()]=!0,h.isKeyQueued(g.getKey())||h.enqueue([g,c,n.getTileCoordCenter(g.tileCoord),y])),void 0!==l&&l(g)):e.useTile(x,v,_,r));e.updateCacheSize(b,r)}};const rp=class extends qh{constructor(t){super(t)}createRenderer(){return new ip(this)}};const op=class{constructor(t){this.rbush_=new Ss(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Nr(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],o=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};n[i]=s,this.items_[Nr(o)]=s}this.rbush_.load(n)}remove(t){const e=Nr(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[Nr(e)];An([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return It(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Tn(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function sp(t,e,n,i,r,o,s){let a,l;const c=(n-e)/i;if(1===c)a=e;else if(2===c)a=e,l=r;else if(0!==c){let o=t[e],s=t[e+1],c=0;const u=[0];for(let r=e+i;r<n;r+=i){const e=t[r],n=t[r+1];c+=Math.sqrt((e-o)*(e-o)+(n-s)*(n-s)),u.push(c),o=e,s=n}const h=r*c,p=function(t,e,n){let i,r;n=n||mt;let o=0,s=t.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+n(t[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}(u,h);p<0?(l=(h-u[-p-2])/(u[-p-1]-u[-p-2]),a=e+(-p-2)*i):a=e+p*i}s=s>1?s:2,o=o||new Array(s);for(let e=0;e<s;++e)o[e]=void 0===a?NaN:void 0===l?t[a+e]:si(t[a+e],t[a+i+e],l);return o}function ap(t,e,n,i,r,o){if(n==e)return null;let s;if(r<t[e+i-1])return o?(s=t.slice(e,e+i),s[i-1]=r,s):null;if(t[n-1]<r)return o?(s=t.slice(n-i,n),s[i-1]=r,s):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;r<t[(e+1)*i-1]?l=e:a=e+1}const c=t[a*i-1];if(r==c)return t.slice((a-1)*i,(a-1)*i+i);const u=(r-c)/(t[(a+1)*i-1]-c);s=[];for(let e=0;e<i-1;++e)s.push(si(t[(a-1)*i+e],t[a*i+e],u));return s.push(r),s}const lp=[1,0,0,1,0,0];class cp{constructor(t,e,n,i,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?On(this.flatCoordinates_):Rn(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=zn(this.getExtent());this.flatInteriorPoints_=ss(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function(t,e){const n=[];let i,r=0,o=0;for(let s=0,a=e.length;s<a;++s){const a=e[s],l=ps(t,r,a,2);if(void 0===i&&(i=l),l===i)n.push(e.slice(o,s+1));else{if(0===n.length)continue;n[n.length-1].push(e[o])}o=s+1,r=a}return n}(this.flatCoordinates_,this.ends_),e=function(t,e,n,i){const r=[];let o=[1/0,1/0,-1/0,-1/0];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=Rn(t,e,a[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=a[a.length-1]}return r}(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=function(t,e,n,i,r){let o=[];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=ss(t,e,a,i,r,2*s,o),e=a[a.length-1]}return o}(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=sp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,r=n.length;i<r;++i){const r=n[i],o=sp(t,e,r,2,.5);_t(this.flatMidpoints_,o),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=Si(t)).getExtent(),n=t.getWorldExtent();if(e&&n){const t=Vn(n)/Vn(e);Co(lp,n[0],n[3],t,-t,0,0,0),To(this.flatCoordinates_,0,this.flatCoordinates_.length,2,lp,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new cp(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=St(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=qo(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=Xo(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=Ho(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new cp(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}cp.prototype.getFlatCoordinates=cp.prototype.getOrientedFlatCoordinates;const up=cp;function hp(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const pp=class extends Fr{constructor(t){super(),this.projection=Si(t.projection),this.attributions_=hp(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=hp(t),this.changed()}setState(t){this.state_=t,this.changed()}},fp="addfeature",dp="changefeature",gp="clear",mp="removefeature",yp="featuresloadstart",vp="featuresloadend",_p="featuresloaderror";function xp(t,e){return[[-1/0,-1/0,1/0,1/0]]}let bp=!1;function wp(t,e){return function(n,i,r,o,s){const a=this;!function(t,e,n,i,r,o,s){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=bp,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t?i=JSON.parse(a.responseText):"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?o(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):s()}else s()},a.onerror=s,a.send()}(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||Et)}}class Ep extends gt{constructor(t,e,n){super(t),this.feature=e,this.features=n}}const Sp=class extends pp{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=Et,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(Qr(this.format_,"`format` must be set when `url` is set"),this.loader_=wp(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:xp;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,i;this.featuresRtree_=e?new op:null,this.loadedExtentsRtree_=new op,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),e||void 0!==n||(n=new Ur(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Nr(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ep(fp,t))}setupChangeEvents_(t,e){e instanceof up||(this.featureChangeKeys_[t]=[Lr(e,vr,this.handleFeatureChange_,this),Lr(e,yr,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof up){const i=this.idIndex_[t];i instanceof up?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1;else this.idIndex_[t]=e}return n&&(Qr(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],r=Nr(i);this.addToIndex_(r,i)&&n.push(i)}for(let t=0,r=n.length;t<r;t++){const r=n[t],o=Nr(r);this.setupChangeEvents_(o,r);const s=r.getGeometry();if(s){const t=s.getExtent();e.push(t),i.push(r)}else this.nullGeometryFeatures_[o]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(fp))for(let t=0,e=n.length;t<e;t++)this.dispatchEvent(new Ep(fp,n[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(fp,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(mp,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(jr,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(Br,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(Pr)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ep(gp);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){const i=n.getGeometry();if(i instanceof up||i.intersectsCoordinate(t))return e(n)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){const i=n.getGeometry();if(i instanceof up||i.intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),It(this.nullGeometryFeatures_)||_t(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=function(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];Qn(t,e);const i=Zn(n);if(Zn(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}(t,e);return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const o=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||bt,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s;if(s=e instanceof up?0:e.closestPointXY(n,i,o,s),s<l){r=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=Nr(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Ep(dp,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:Nr(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&It(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let t=0,o=r.length;t<o;++t){const o=r[t],s=i.forEachInExtent(o,(function(t){return Cn(t.extent,o)}));s||(++this.loadingExtentsCount_,this.dispatchEvent(new Ep(yp)),this.loader_.call(this,o,e,n,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ep(vp,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ep(_p))})),i.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if(An(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=Nr(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Nr(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(Pr),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Ep(mp,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_){const i=this.idIndex_[n];if(t instanceof up&&Array.isArray(i)&&i.includes(t))i.splice(i.indexOf(t),1);else if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){Qr(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(wp(t,this.format_))}};class Cp extends ko{constructor(t,e,n){super(),void 0!==n&&void 0===e?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new Cp(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=r[0]+t*o,n[1]=r[1]+t*s;for(let t=2;t<this.stride;++t)n[t]=r[t]}return n.length=this.stride,a}return i}containsXY(t,e){const n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return Tn(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){if($n(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||Fn(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let n=1;n<e;++n)i[e+n]=t[n];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let r=Go(i,0,t,this.stride);i[r++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[r++]=i[t];i.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter(Po(n,0,n.length,i,t,e,n)),this.changed()}}Cp.prototype.transform;const Ip=Cp;class Mp extends ko{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){_t(this.flatCoordinates,t),this.changed()}clone(){const t=new Mp(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<En(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Do(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,ap(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return sp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return dh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=qo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Mp(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zo(this.flatCoordinates,0,t,this.stride),this.changed()}}const Lp=Mp;const Tp=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Qr(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Qr(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Qr(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}};function Pp(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Op(t,e,n){return t+"/"+e+"/"+n}function Rp(t){return Op(t[0],t[1],t[2])}const Ap=class extends Tp{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey()),e=t[0];this.forEach((t=>{t.tileCoord[0]!==e&&(this.remove(Rp(t.tileCoord)),t.release())}))}},kp="tileloadstart",Np="tileloadend",Dp="tileloaderror",Fp=[0,0,0];const jp=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Qr(function(t,e,n){const i=e||mt;return t.every((function(e,r){if(0===r)return!0;const o=i(t[r-1],e);return!(o>0||n&&0===o)}))}(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Qr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Hn(n)),Qr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Qr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:uo,Qr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const i=new np(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i})):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let t=i.minX,r=i.maxX;t<=r;++t)for(let r=i.minY,o=i.maxY;r<=o;++r)n([e,t,r])}forEachTileCoordParentTileRange(t,e,n,i){let r,o,s,a=null,l=t[0]-1;for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(void 0!==o&&void 0!==s?(o=Math.floor(o/2),s=Math.floor(s/2),r=ep(o,o,s,s,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return ep(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],r=t[1],o=t[2];if(e===i)return ep(r,o,r,o,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*t),a=Math.floor(o*t);if(e<i)return ep(s,s,a,a,n);return ep(s,Math.floor(t*(r+1))-1,a,Math.floor(t*(o+1))-1,n)}const s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Fp);const i=Fp[1],r=Fp[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Fp);return ep(i,Fp[1],r,Fp[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Ms(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Ms(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]-(t[2]+1)*r[1]*i;return Tn(o,s,o+r[0]*i,s+r[1]*i,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),l=Ms(this.getTileSize(o),this.tmpSize_);let c=s*(t-a[0])/n/l[0],u=s*(a[1]-e)/n/l[1];return i?(c=ci(c,5)-1,u=ci(u,5)-1):(c=li(c,5),u=li(u,5)),Pp(o,c,u,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const o=this.getOrigin(n),s=this.getResolution(n),a=Ms(this.getTileSize(n),this.tmpSize_);let l=(t-o[0])/s/a[0],c=(o[1]-e)/s/a[1];return i?(l=ci(l,5)-1,c=ci(c,5)-1):(l=li(l,5),c=li(c,5)),Pp(n,l,c,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return ti(yt(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return cs(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}};function Bp(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){const r=Up(t);return function(t,e,n,i){i=void 0!==i?i:"top-left";const r=zp(t,e,n);return new jp({extent:t,origin:Un(t,i),resolutions:r,tileSize:n})}(r,e,n,i)}(t),t.setDefaultTileGrid(e)),e}function Gp(t){const e=t||{},n=e.extent||Si("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:zp(n,e.maxZoom,e.tileSize,e.maxResolution)};return new jp(i)}function zp(t,e,n,i){e=void 0!==e?e:co,n=Ms(void 0!==n?n:uo);const r=Vn(t),o=Zn(t);i=i>0?i:Math.max(o/n[0],r/n[1]);const s=e+1,a=new Array(s);for(let t=0;t<s;++t)a[t]=i/Math.pow(2,t);return a}function Up(t){let e=(t=Si(t)).getExtent();if(!e){const n=180*tn.degrees/t.getMetersPerUnit();e=Tn(-n,-n,n,n)}return e}class qp extends gt{constructor(t,e){super(t),this.tile=e}}const Xp=class extends pp{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Ms(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Ap(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,s,a,l=!0;for(let t=n.minX;t<=n.maxX;++t)for(let c=n.minY;c<=n.maxY;++c)s=Op(e,t,c),a=!1,r.containsKey(s)&&(o=r.get(s),a=o.getState()===Nc,a&&(a=!1!==i(o))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,r){return Ar()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Bp(t)}getTileCacheForProjection(t){const e=this.getProjection();return Qr(null===e||Oi(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Ms(i.getTileSize(t),this.tmpSize);return 1==r?o:(s=o,a=r,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=s[0]*a+.5|0,l[1]=s[1]*a+.5|0,l);var s,a,l}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),o=Up(n);if(!Sn(o,r)){const e=Zn(o),n=Math.ceil((o[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}return e}(n,t,e)),function(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const o=e.getFullTileRange(n);return!o||o.containsXY(i,r)}(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}};function Vp(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){if(s)return t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){const t=s[0],n=e.getFullTileRange(t);if(!n)throw new Error("The {-y} placeholder requires a tile grid with extent");return(n.getHeight()-s[2]-1).toString()}))}}function Yp(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Vp(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(!e)return;const r=function(t){return(t[1]<<t[0])+t[2]}(e),o=oi(r,t.length);return t[o](e,n,i)}}(i)}function Hp(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}class Wp extends Xp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Wp.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=Nr(e),i=e.getState();let r;i==kc?(this.tileLoadingKeys_[n]=!0,r=kp):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==Dc?Dp:i==Nc?Np:void 0),null!=r&&this.dispatchEvent(new qp(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=Hp(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Yp(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=Op(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}const Zp=Wp;function $p(t,e){t.getImage().src=e}const Kp=class extends Zp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:$p,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Vh,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const t in this.tileCacheForProjection){const i=this.tileCacheForProjection[t];i.expireCache(i==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Oi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!Oi(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Oi(e,t)))return this.tileGrid;const n=Nr(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Bp(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Oi(e,t))return this.tileCache;const n=Nr(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ap(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,r,o){const s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,r),l=a?this.tileUrlFunction(a,i,r):void 0,c=new this.tileClass(s,void 0!==l?Ac:Fc,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(vr,this.handleTileChange.bind(this)),c}getTile(t,e,n,i,r){const o=this.getProjection();if(!o||!r||Oi(o,r))return this.getTileInternal(t,e,n,i,o||r);const s=this.getTileCacheForProjection(r),a=[t,e,n];let l;const c=Rp(a);s.containsKey(c)&&(l=s.get(c));const u=this.getKey();if(l&&l.key==u)return l;const h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(a,r),d=new Qh(o,h,r,p,a,f,this.getTilePixelRatio(i),this.getGutter(),((t,e,n,i)=>this.getTileInternal(t,e,n,i,o)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=u,l?(d.interimTile=l,d.refreshInterimChain(),s.replace(c,d)):s.set(c,d),d}getTileInternal(t,e,n,i,r){let o=null;const s=Op(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=a){const l=o;o=this.createTile_(t,e,n,i,r,a),l.getState()==Ac?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,a),this.tileCache.set(s,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=Si(t);if(n){const t=Nr(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};const Jp=class extends Kp{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:Gp({extent:Up(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};const Qp=class extends Jp{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}};function tf(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ef(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function nf(t){return"Feature"===t.type?t.geometry:t}function rf(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=tf(t),r=nf(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var l=!1,c=0;c<a.length&&!l;c++)if(of(i,a[c][0],n.ignoreBoundary)){for(var u=!1,h=1;h<a[c].length&&!u;)of(i,a[c][h],!n.ignoreBoundary)&&(u=!0),h++;u||(l=!0)}return l}function of(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],l=e[o][0],c=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+c*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(l-s)*(t[1]-a)/(c-a)+s&&(i=!i)}return i}function sf(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function af(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!cf(t[0])||!cf(t[1]))throw new Error("coordinates must contain numbers");return sf({type:"Point",coordinates:t},e,n)}function lf(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function cf(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function uf(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function hf(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return uf({type:"LineString",coordinates:t},e,n)}function pf(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function ff(t,e){var n,i,r,o,s,a,l,c,u,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},u=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}function df(t,e){ff(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(uf(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(uf({type:s,coordinates:c},i),n,l))return!1}}))}const gf=function(t){if(!t)throw new Error("geojson is required");var e=[];return df(t,(function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=ef(i);break;case"LineString":n=[ef(i)]}n.forEach((function(n){var i=function(t,e){var n=[];return t.reduce((function(t,i){var r=hf([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1],s=n<r?n:r,a=i<o?i:o,l=n>r?n:r,c=i>o?i:o;return[s,a,l,c]}(t,i),n.push(r),i})),n}(n,t.properties);i.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),pf(e)};function mf(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}var yf=n(1787);function vf(t,e){var n=ef(t),i=ef(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],l=i[0][0],c=i[0][1],u=i[1][0],h=i[1][1],p=(h-c)*(s-r)-(u-l)*(a-o),f=(u-l)*(o-c)-(h-c)*(r-l),d=(s-r)*(o-c)-(a-o)*(r-l);if(0===p)return null;var g=f/p,m=d/p;return g>=0&&g<=1&&m>=0&&m<=1?af([r+g*(s-r),o+g*(a-o)]):null}const _f=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=sf(t)),"LineString"===e.type&&(e=sf(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=vf(t,e);return r&&i.push(r),lf(i)}var o=yf();return o.load(gf(e)),mf(gf(t),(function(t){mf(o.search(t),(function(e){var r=vf(t,e);if(r){var o=ef(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),lf(i)};class xf extends(lr(Qp)){constructor(t={}){super(((t=mr(t)).imageExtension||(t.imageExtension="jpg"),!t.mapID||t.url||t.urls||(t.url=t.tms?`tiles/${t.mapID}/{z}/{x}/{-y}.${t.imageExtension}`:`tiles/${t.mapID}/{z}/{x}/{y}.${t.imageExtension}`),t)),t.mapID&&(this.mapID=t.mapID),hr(this,t),pr(this)}static async createAsync(t){return new xf(t)}insideCheckXy(t){return!this.envelope||rf(t,this.envelope)}insideCheckSysCoord(t){return this.insideCheckXy(t)}modulateXyInside(t){if(!this.centroid)return t;const e=(0,nr.Tu)([t,this.centroid]),n=_f(this.envelope,e);return n.features.length>0&&n.features[0].geometry?n.features[0].geometry.coordinates:t}modulateSysCoordInside(t){return this.modulateXyInside(t)}merc2XyAsync(t){return Promise.resolve(t)}merc2XyAsync_ignoreBackground(t){return this.merc2XyAsync(t)}xy2MercAsync(t){return Promise.resolve(t)}xy2SysCoord(t){return t}sysCoord2Xy(t){return t}viewpoint2MercsAsync(t,e){const n=this.viewpoint2SysCoords(t,e),i=this.sysCoords2Xys(n);return this.xys2MercsAsync(i)}mercs2ViewpointAsync(t){return this.mercs2XysAsync(t).then((t=>{const e=this.xys2SysCoords(t);return this.sysCoords2Viewpoint(e)}))}mercs2SysCoordsAsync_multiLayer(t){return Promise.all(t[0].map((t=>this.merc2SysCoordAsync(t)))).then((e=>[[e,t[1]]]))}defZoom(){return this.mercZoom}}class bf extends xf{constructor(t={}){super(t),this.style="",this.accessToken="",this.style=t.style,this.mapboxMap=t.mapboxMap}static async createAsync(t){return new bf(t)}}function wf(t,e){return t+(Math.random()-.5)*e}function Ef(t,e){if(t instanceof Array)return t.map((t=>Ef(t,e)));const n=Math.pow(10,e);return Math.round(t*n)/n}function Sf(t){return t*Math.PI/180}class Cf extends Es{constructor(t){super({render:function(t){const e=this.getSource(),n=e.mapboxMap;n.setStyle(e.style);const i=n.getCanvas(),r=t.viewState,o=this.getVisible();i.style.display=o?"block":"none";const s=this.getOpacity();i.style.opacity=s;const a=-180*r.rotation/Math.PI,l=Pi(r.center),c=r.zoom-1,u=n.getBearing(),h=n.getCenter().toArray(),p=n.getZoom();return a==u&&l[0]==h[0]&&l[1]==h[1]&&c==p||(a!=u&&n.rotateTo(a,{animate:!1}),l[0]==h[0]&&l[1]==h[1]&&c==p||n.jumpTo({center:l,zoom:c,animate:!1}),n._frame&&(n._frame.cancel(),n._frame=null),n._render()),i},source:t.source})}}const If="assets/images/9ac6d81f417d6a5626b7c8d5a087c32b.png",Mf=new el({image:new rl({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/images/6e1f2f2f6fed3c5cddeb925e7ae75aba.png"})}),Lf=new el({image:new rl({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/images/6c5dba7f7d76e74c3a8c7c5b1c3fc544.png"})}),Tf=new el({image:new rl({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/images/0beac2cb41dfab43ddfd9df80b32b85d.png"})}),Pf=new el({fill:new Wa({color:[128,128,256,.2]}),stroke:new $a({color:[128,128,256,1],width:3})}),Of=new el({image:new rl({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:If})});class Rf extends Tu{constructor(t){t=mr(t||{});const e=new Gh({source:new Sp({wrapX:!1})});e.set("name","gps");const n=new Gh({source:new Sp({wrapX:!1})});n.set("name","marker");const i=new Gh({source:new Sp({wrapX:!1})});i.set("name","feature");const r=new Gh({source:new Sp({wrapX:!1})});r.set("name","envelope");const o=Rf.spawnLayer(null,t.source,t.target),s=new gc;s.set("name","overlay");const a={controls:t.controls?t.controls:[],layers:[o,s,r,i,e,n],target:t.div,view:new bs({center:t.defaultCenter||[0,0],zoom:t.defaultZoom||2,rotation:t.defaultRotation||0,multiWorld:!0})};t.interactions&&(a.interactions=t.interactions),super(a),this._overlay_group=s,this.fakeGps=t.fakeGps,this.fakeRadius=t.fakeRadius,this.homePosition=t.homePosition,this.northUp=t.northUp,this.tapDuration=t.tapDuration,this.homeMarginPixels=t.homeMarginPixels,this.tapUIVanish=t.tapUIVanish;const l=this.getView();this.__AvoidFirstMoveStart=!0;const c=()=>{this.__AvoidFirstMoveStart||this.dispatchEvent("movestart"),this.__AvoidFirstMoveStart=!1,l.un("propertychange",c)};l.on("propertychange",c),this.on("moveend",(()=>{l.on("propertychange",c)}))}static spawnLayer(t,e,n){return e instanceof bf||!(t instanceof rp)?(t=e instanceof bf?new Cf({style:e.style,accessToken:e.accessToken,container:n,source:e}):new rp({source:e})).set("name","base"):t.setSource(e),t}getLayer(t="base"){const e=n=>{const i=n.getArray().map((n=>n.get("name")==t?n:n.getLayers?e(n.getLayers()):void 0)).filter((t=>t));if(0!=i.length)return i[0]};return e(this.getLayers())}getSource(t="base"){const e=this.getLayer(t);if(e)return e.getSource()}setFeature(t,e,n){const i=this.getSource(n),r=new Ou(t);return e&&r.setStyle(e),i.addFeature(r),r}removeFeature(t,e){this.getSource(e).removeFeature(t)}resetFeature(t){this.getSource(t).clear()}setGPSPosition(t,e=void 0){const n="sub"==e?Tf:"hide"==e?Lf:Mf;"sub"!=e&&this.resetFeature("gps"),t&&(this.setFeature({geometry:new ns(t.xy)},n,"gps"),e||this.setFeature({geometry:new Ip(t.xy,t.rad)},Pf,"gps"))}setMarker(t,e,n,i){return i||(i="marker"),e.geometry=new ns(t),n?"string"==typeof n?n=new el({image:new rl({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:n})}):n instanceof el||(n=new el({image:new rl(n)})):n=Of,this.setFeature(e,n,i)}resetMarker(t){t||(t="marker"),this.resetFeature(t)}setLine(t,e,n){return this.setVector(t,"Line",e?{stroke:e}:null,n)}setVector(t,e="Line",n,i){i||(i="feature");const r={};null!=n.stroke&&(r.stroke=new $a(n.stroke)),null!=n.fill&&(r.fill=new Wa(n.fill));const o=new el(r),s="Line"===e?new Lp(t):new ms(t);return this.setFeature({geometry:s,name:e},o,i)}resetLine(t){this.resetVector(t)}resetVector(t){t||(t="feature"),this.resetFeature(t)}setEnvelope(t,e,n){return n||(n="envelope"),this.setLine(t,e,n)}removeEnvelope(t,e){e||(e="envelope"),this.removeFeature(t,e)}resetEnvelope(t){t||(t="envelope"),this.resetFeature(t)}setFillEnvelope(t,e,n,i){let r;if(i||(i="envelope"),null!=e||null!=n){const t={};null!=e&&(t.stroke=new $a(e)),null!=n&&(t.fill=new Wa(n)),r=new el(t)}return this.setFeature({geometry:new ms([t])},r,i)}exchangeSource(t=void 0){const e=this.getLayers(),n=e.item(0),i=Rf.spawnLayer(n,t,this.getTarget());i!=n&&e.setAt(0,i),t&&t.setMap(this)}setLayer(t=void 0){const e=this.getLayer("overlay").getLayers();if(e.clear(),t){const n=new rp({source:t});e.push(n)}}setTransparency(t){const e=(100-t)/100;this.getSource()instanceof xf?(this.getLayers().item(0).setOpacity(1),this.getLayers().item(1).setOpacity(e)):this.getLayers().item(0).setOpacity(e)}setGPSMarker(t,e){this.getLayers().item(0).getSource().setGPSMarker(t,e)}handleGPS(t,e){if(t)if(this.dispatchEvent("gps_request"),this._first_gps_request=!0,this.geolocation)this.geolocation.setTracking(!0);else{const t=this.geolocation=new Xu({tracking:!0});t.on("change",(e=>{const n=this.getLayer("overlay").getLayers().item(0),i=n?n.getSource():this.getLayers().item(0).getSource();let r=t.getPosition(),o=t.getAccuracy();var s,a;this.fakeGps&&(s=this.homePosition,a=r,6378.14*Math.acos(Math.cos(Sf(s[1]))*Math.cos(Sf(a[1]))*Math.cos(Sf(a[0])-Sf(s[0]))+Math.sin(Sf(s[1]))*Math.sin(Sf(a[1])))>this.fakeGps)&&(r=[wf(this.homePosition[0],.001),wf(this.homePosition[1],.001)],o=wf(15,10));let l={lnglat:r,acc:o};i.setGPSMarkerAsync(l,!this._first_gps_request).then((t=>{t||(l={error:"gps_out"}),this._first_gps_request=!1,this.dispatchEvent(new mc("gps_result",this,l))}))})),t.on("error",(t=>{const e=this.getLayers().item(0).getSource();let n=null;if(this.fakeGps){const t=[wf(this.homePosition[0],.001),wf(this.homePosition[1],.001)],e=wf(15,10);n={lnglat:t,acc:e}}e.setGPSMarkerAsync(n,!this._first_gps_request).then((t=>{t||(n={error:"gps_out"}),this._first_gps_request=!1,this.dispatchEvent(new mc("gps_result",this,n))}))}))}else{this.geolocation&&this.geolocation.setTracking(!1);this.getLayers().item(0).getSource().setGPSMarker(),e||this.dispatchEvent(new mc("gps_result",this,{error:"gps_off"}))}}}const Af=class extends Wc{constructor(t){super(t=t||{}),this.condition_=t.condition?t.condition:nu,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(t){if(!ru(t))return;const e=t.map,n=e.getSize(),i=t.pixel,r=i[0]-n[0]/2,o=n[1]/2-i[1],s=Math.atan2(o,r),a=Math.sqrt(r*r+o*o),l=e.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-s;l.adjustRotationInternal(t)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/a),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}handleUpEvent(t){if(!ru(t))return!0;const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1}handleDownEvent(t){return!!ru(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}};for(let t=0;t<9;t++){!function(t,e){const n=new en({code:t,extent:[0,0,e,e],units:"m"});Ei(n),Ti("EPSG:3857",n,(t=>[(t[0]+Yi)*e/(2*Yi),(-t[1]+Yi)*e/(2*Yi)]),(t=>[t[0]*(2*Yi)/e-Yi,-1*(t[1]*(2*Yi)/e-Yi)]))}(`ZOOM:${t}`,256*Math.pow(2,t))}class kf extends(lr(Jp)){constructor(t={}){super(t=(()=>{(t=mr(t)).wrapX=!1,t.imageExtension||(t.imageExtension="jpg"),!t.mapID||t.url||t.urls||(t.url=`tiles/${t.mapID}/{z}/{x}/{y}.${t.imageExtension}`);const e=Math.log2(t.width/Zi),n=Math.log2(t.height/Zi);return t.maxZoom=Math.ceil(Math.max(e,n)),t.tileUrlFunction=t.tileUrlFunction||function(t){const e=t[0],n=t[1],i=t[2];return n*Zi*Math.pow(2,this.maxZoom-e)>=this.width||i*Zi*Math.pow(2,this.maxZoom-e)>=this.height||n<0||i<0?Wi:this._tileUrlFunction(t)},t})()),t.mapID&&(this.mapID=t.mapID),t.urls?this._tileUrlFunction=Yp(t.urls):t.url&&(this._tileUrlFunction=Yp(Hp(t.url))),this.width=t.width,this.height=t.height,this.maxZoom=t.maxZoom,this._maxxy=Math.pow(2,this.maxZoom)*Zi,hr(this,t),pr(this)}insideCheckXy(t){return!(t[0]<0||t[0]>this.width||t[1]<0||t[1]>this.height)}insideCheckSysCoord(t){return this.insideCheckXy(this.sysCoord2Xy(t))}modulateXyInside(t){const e=t[0]/(this.width/2)-1,n=t[1]/(this.height/2)-1,i=Math.max(Math.abs(e),Math.abs(n));return[(e/i+1)*this.width/2,(n/i+1)*this.height/2]}modulateSysCoordInside(t){const e=this.sysCoord2Xy(t),n=this.modulateXyInside(e);return this.xy2SysCoord(n)}xy2SysCoord(t){return[t[0]*(2*Yi)/this._maxxy-Yi,-1*(t[1]*(2*Yi)/this._maxxy-Yi)]}sysCoord2Xy(t){return[(t[0]+Yi)*this._maxxy/(2*Yi),(-t[1]+Yi)*this._maxxy/(2*Yi)]}defZoom(t){const e=t[0],n=t[1],i=Math.log2((e-10)/this.width),r=Math.log2((n-10)/this.height);let o;return o=r>i?r:i,this.maxZoom+o}}class Nf extends xf{constructor(t={}){super(Object.assign(t,{opaque:!1}))}static async createAsync(t){return new Nf(t)}}const Df="https://weiwudi.example.com/api/";let Ff,jf;!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();class Bf{constructor(){this.listeners={}}addEventListener(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}removeEventListener(t,e){if(!(t in this.listeners))return;const n=this.listeners[t];for(let t=0,i=n.length;t<i;t++)if(n[t]===e)return void n.splice(t,1)}dispatchEvent(t){if(!(t.type in this.listeners))return!0;const e=this.listeners[t.type].slice();for(let n=0,i=e.length;n<i;n++)e[n].call(this,t);return!t.defaultPrevented}}class Gf extends Bf{static async registerSW(t,e){if(!("serviceWorker"in navigator))throw"Error: Service worker is not supported";try{const n=await navigator.serviceWorker.register(t,e),i=n.installing,r=n.waiting;return i&&("activated"!==i.state||r||window.location.reload(),i.addEventListener("statechange",(t=>{"activated"!==i.state||r||window.location.reload()}))),n.onupdatefound=()=>{n.update()},await Gf.swCheck(),n}catch(t){throw`Error: Service worker registration failed with ${t}`}}static async swCheck(){return void 0!==jf?jf:(void 0===Ff&&(Ff=new Promise((async(t,e)=>{try{jf=await fetch(`${Df}ping`),jf=!!jf}catch(t){jf=!1}t(jf)}))),Ff)}static async registerMap(t,e){if(!await Gf.swCheck())throw"Weiwudi service worker is not implemented.";let n;try{const i=["type","url","width","height","tileSize","minZoom","maxZoom","maxLng","maxLat","minLng","minLat"].reduce(((t,n)=>(void 0!==e[n]&&(e[n]instanceof Array?e[n].map((e=>{t.append(n,e)})):t.append(n,e[n])),t)),new URLSearchParams);i.append("mapID",t);const r=new URL(`${Df}add`);r.search=i;const o=await fetch(r.href);n=await o.text()}catch(t){throw t}if(n.match(/^Error: /))throw n;return new Gf(t,JSON.parse(n))}static async retrieveMap(t){if(!await Gf.swCheck())throw"Weiwudi service worker is not implemented.";let e;try{const n=await fetch(`${Df}info?mapID=${t}`);e=await n.text()}catch(t){throw t}if(e.match(/^Error: /))throw e;return console.log(e),new Gf(t,JSON.parse(e))}static async removeMap(t){if(!await Gf.swCheck())throw"Weiwudi service worker is not implemented.";let e;try{const n=await fetch(`${Df}delete?mapID=${t}`);e=await n.text()}catch(t){throw t}if(e.match(/^Error: /))throw e}constructor(t,e){if(super(),!t)throw"MapID is necessary.";this.mapID=t,e&&Object.assign(this,e),this.url=`${Df}cache/${t}/{z}/{x}/{y}`,this.listener=e=>{e.data.mapID===t&&this.dispatchEvent(new CustomEvent(e.data.type,{detail:e.data}))},navigator.serviceWorker.addEventListener("message",this.listener)}release(){navigator.serviceWorker.removeEventListener("message",this.listener),delete this.mapID}checkAspect(){if(!this.mapID)throw"This instance is already released."}async stats(){let t;this.checkAspect();try{const e=await fetch(`${Df}stats?mapID=${this.mapID}`);t=await e.text()}catch(t){throw t}if("string"==typeof t&&t.match(/^Error: /))throw t;return JSON.parse(t)}async clean(){let t;this.checkAspect();try{const e=await fetch(`${Df}clean?mapID=${this.mapID}`);t=await e.text()}catch(t){throw t}if(t.match(/^Error: /))throw t}async fetchAll(){let t;this.checkAspect();try{const e=await fetch(`${Df}fetchAll?mapID=${this.mapID}`);t=await e.text()}catch(t){throw t}if(t.match(/^Error: /))throw t}async remove(){this.checkAspect(),await Gf.removeMap(this.mapID),this.release()}async cancel(){let t;this.checkAspect();try{const e=await fetch(`${Df}cancel?mapID=${this.mapID}`);t=await e.text()}catch(t){throw t}if(t.match(/^Error: /))throw t}}const zf=class extends Kp{constructor(t){const e=!!t.highDpi,n=!(!0===t.overlay);super({attributions:t.attributions||['Google Maps<a class="ol-attribution-google-tos" href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a> and <a class="ol-attribution-google-tos" href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a>'],cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:n,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const i={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(i.imageFormat=t.imageFormat),t.scale&&(i.scale=t.scale),e&&(i.highDpi=!0),t.layerTypes&&(i.layerTypes=t.layerTypes),t.styles&&(i.styles=t.styles),!0===t.overlay&&(i.overlay=!0),this.sessionTokenRequest_=i,this.sessionRefreshId_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,e){return fetch(t,e)}async createSession_(){const t="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},n=await this.fetchSessionToken(t,e);if(!n.ok){try{const t=await n.json();this.error_=new Error(t.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const i=await n.json(),r=this.getTilePixelRatio(1),o=[i.tileWidth/r,i.tileHeight/r];this.tileGrid=Gp({extent:Up(this.getProjection()),maxZoom:22,tileSize:o});const s=i.session,a=this.apiKey_;this.tileUrlFunction=function(t,e,n){return`https://tile.googleapis.com/v1/2dtiles/${t[0]}/${t[1]}/${t[2]}?session=${s}&key=${a}`};const l=1e3*parseInt(i.expiry,10),c=Math.max(l-Date.now()-6e4,1);this.sessionRefreshId_=setTimeout((()=>this.createSession_()),c),this.setState("ready")}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}};function Uf(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Uf(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function qf(t){var e=[1/0,1/0,-1/0,-1/0];return Uf(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}qf.default=qf;n(7418);function Xf(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function Vf(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return Xf({type:"Polygon",coordinates:t},e,n)}function Yf(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Yf(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var Hf=n(2273);function Wf(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(Yf(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=Hf(n,e.concavity);return i.length>3?Vf([i]):null}Object.prototype.hasOwnProperty;var Zf=new ArrayBuffer(16);new Float64Array(Zf),new Uint32Array(Zf);function $f(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===$f(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Kf(t){var e=[1/0,1/0,-1/0,-1/0];return $f(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Kf.default=Kf;n(5510);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t),s={x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]};return s}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])}}();function Jf(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Jf(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Qf(t){var e=[1/0,1/0,-1/0,-1/0];return Jf(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Qf.default=Qf;const td=Qf;function ed(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function nd(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return ed({type:"Polygon",coordinates:t},e,n)}const id=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return nd([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}(td(t))};function rd(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===rd(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function od(t){var e=[1/0,1/0,-1/0,-1/0];return rd(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}od.default=od;function sd(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function ad(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return sd({type:"LineString",coordinates:t},e,n)}function ld(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===ld(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function cd(t){var e=[1/0,1/0,-1/0,-1/0];return ld(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}cd.default=cd;n(9187);function ud(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===ud(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hd(t){var e=[1/0,1/0,-1/0,-1/0];return ud(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}hd.default=hd;var pd=Math.PI/180,fd=180/Math.PI,dd=function(t,e){this.lon=t,this.lat=e,this.x=pd*t,this.y=pd*e};dd.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},dd.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new dd(e,t)};var gd=function(){this.coords=[],this.length=0};gd.prototype.move_to=function(t){this.length++,this.coords.push(t)};var md=function(t){this.properties=t||{},this.geometries=[]};md.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},md.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var yd=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new dd(t.x,t.y),this.end=new dd(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};yd.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=fd*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[fd*Math.atan2(r,i),s]},yd.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,l=0,c=e&&e.offset?e.offset:10,u=180-c,h=-180+c,p=360-c,f=1;f<n.length;++f){var d=n[f-1][0],g=n[f][0],m=Math.abs(g-d);m>p&&(g>u&&d<h||d>u&&g<h)?a=!0:m>l&&(l=m)}var y=[];if(a&&l<c){var v=[];y.push(v);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>p){var b=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),E=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(b>-180&&b<h&&180===E&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){v.push([-180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(b>u&&b<180&&-180===E&&_+1<n.length&&n[_-1][0]>u&&n[_-1][0]<180){v.push([180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(b<h&&E>u){var C=b;b=E,E=C;var I=w;w=S,S=I}if(b>u&&E<h&&(E+=360),b<=180&&E>=180&&b<E){var M=(180-b)/(E-b),L=M*S+(1-M)*w;v.push([n[_-1][0]>u?180:-180,L]),(v=[]).push([n[_-1][0]>u?-180:180,L]),y.push(v)}else v=[],y.push(v);v.push([x,n[_][1]])}else v.push([n[_][0],n[_][1]])}}else{var T=[];y.push(T);for(var P=0;P<n.length;++P)T.push([n[P][0],n[P][1]])}for(var O=new md(this.properties),R=0;R<y.length;++R){var A=new gd;O.geometries.push(A);for(var k=y[R],N=0;N<k.length;++N)A.move_to(k[N])}return O};function vd(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===vd(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _d(t){var e=[1/0,1/0,-1/0,-1/0];return vd(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}_d.default=_d;function xd(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===xd(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bd(t){var e=[1/0,1/0,-1/0,-1/0];return xd(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}bd.default=bd;n(251);function wd(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===wd(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ed(t){var e=[1/0,1/0,-1/0,-1/0];return wd(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Ed.default=Ed;function Sd(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Sd(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cd(t){var e=[1/0,1/0,-1/0,-1/0];return Sd(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Cd.default=Cd;var Id=[],Md=[],Ld=[],Td=[],Pd=[],Od=[],Rd=[],Ad=[],kd=[],Nd=[],Dd=[],Fd=[],jd=[],Bd=[],Gd=[],zd=[],Ud=[],qd=[],Xd=[],Vd=[],Yd=[],Hd=[],Wd=[],Zd=[];Rd[85]=Nd[85]=-1,Ad[85]=Dd[85]=0,kd[85]=Fd[85]=1,Xd[85]=Hd[85]=1,Vd[85]=Wd[85]=0,Yd[85]=Zd[85]=1,Id[85]=Td[85]=0,Md[85]=Pd[85]=-1,Ld[85]=Gd[85]=0,zd[85]=jd[85]=0,Ud[85]=Bd[85]=1,Od[85]=qd[85]=1,Hd[1]=Hd[169]=0,Wd[1]=Wd[169]=-1,Zd[1]=Zd[169]=0,jd[1]=jd[169]=-1,Bd[1]=Bd[169]=0,Gd[1]=Gd[169]=0,Nd[4]=Nd[166]=0,Dd[4]=Dd[166]=-1,Fd[4]=Fd[166]=1,zd[4]=zd[166]=1,Ud[4]=Ud[166]=0,qd[4]=qd[166]=0,Rd[16]=Rd[154]=0,Ad[16]=Ad[154]=1,kd[16]=kd[154]=1,Td[16]=Td[154]=1,Pd[16]=Pd[154]=0,Od[16]=Od[154]=1,Xd[64]=Xd[106]=0,Vd[64]=Vd[106]=1,Yd[64]=Yd[106]=0,Id[64]=Id[106]=-1,Md[64]=Md[106]=0,Ld[64]=Ld[106]=1,Xd[2]=Xd[168]=0,Vd[2]=Vd[168]=-1,Yd[2]=Yd[168]=1,Hd[2]=Hd[168]=0,Wd[2]=Wd[168]=-1,Zd[2]=Zd[168]=0,jd[2]=jd[168]=-1,Bd[2]=Bd[168]=0,Gd[2]=Gd[168]=0,zd[2]=zd[168]=-1,Ud[2]=Ud[168]=0,qd[2]=qd[168]=1,Rd[8]=Rd[162]=0,Ad[8]=Ad[162]=-1,kd[8]=kd[162]=0,Nd[8]=Nd[162]=0,Dd[8]=Dd[162]=-1,Fd[8]=Fd[162]=1,jd[8]=jd[162]=1,Bd[8]=Bd[162]=0,Gd[8]=Gd[162]=1,zd[8]=zd[162]=1,Ud[8]=Ud[162]=0,qd[8]=qd[162]=0,Rd[32]=Rd[138]=0,Ad[32]=Ad[138]=1,kd[32]=kd[138]=1,Nd[32]=Nd[138]=0,Dd[32]=Dd[138]=1,Fd[32]=Fd[138]=0,Id[32]=Id[138]=1,Md[32]=Md[138]=0,Ld[32]=Ld[138]=0,Td[32]=Td[138]=1,Pd[32]=Pd[138]=0,Od[32]=Od[138]=1,Hd[128]=Hd[42]=0,Wd[128]=Wd[42]=1,Zd[128]=Zd[42]=1,Xd[128]=Xd[42]=0,Vd[128]=Vd[42]=1,Yd[128]=Yd[42]=0,Id[128]=Id[42]=-1,Md[128]=Md[42]=0,Ld[128]=Ld[42]=1,Td[128]=Td[42]=-1,Pd[128]=Pd[42]=0,Od[128]=Od[42]=0,Nd[5]=Nd[165]=-1,Dd[5]=Dd[165]=0,Fd[5]=Fd[165]=0,Hd[5]=Hd[165]=1,Wd[5]=Wd[165]=0,Zd[5]=Zd[165]=0,zd[20]=zd[150]=0,Ud[20]=Ud[150]=1,qd[20]=qd[150]=1,Td[20]=Td[150]=0,Pd[20]=Pd[150]=-1,Od[20]=Od[150]=1,Rd[80]=Rd[90]=-1,Ad[80]=Ad[90]=0,kd[80]=kd[90]=1,Xd[80]=Xd[90]=1,Vd[80]=Vd[90]=0,Yd[80]=Yd[90]=1,jd[65]=jd[105]=0,Bd[65]=Bd[105]=1,Gd[65]=Gd[105]=0,Id[65]=Id[105]=0,Md[65]=Md[105]=-1,Ld[65]=Ld[105]=0,Rd[160]=Rd[10]=-1,Ad[160]=Ad[10]=0,kd[160]=kd[10]=1,Nd[160]=Nd[10]=-1,Dd[160]=Dd[10]=0,Fd[160]=Fd[10]=0,Hd[160]=Hd[10]=1,Wd[160]=Wd[10]=0,Zd[160]=Zd[10]=0,Xd[160]=Xd[10]=1,Vd[160]=Vd[10]=0,Yd[160]=Yd[10]=1,zd[130]=zd[40]=0,Ud[130]=Ud[40]=1,qd[130]=qd[40]=1,jd[130]=jd[40]=0,Bd[130]=Bd[40]=1,Gd[130]=Gd[40]=0,Id[130]=Id[40]=0,Md[130]=Md[40]=-1,Ld[130]=Ld[40]=0,Td[130]=Td[40]=0,Pd[130]=Pd[40]=-1,Od[130]=Od[40]=1,Nd[37]=Nd[133]=0,Dd[37]=Dd[133]=1,Fd[37]=Fd[133]=1,Hd[37]=Hd[133]=0,Wd[37]=Wd[133]=1,Zd[37]=Zd[133]=0,Id[37]=Id[133]=-1,Md[37]=Md[133]=0,Ld[37]=Ld[133]=0,Td[37]=Td[133]=1,Pd[37]=Pd[133]=0,Od[37]=Od[133]=0,zd[148]=zd[22]=-1,Ud[148]=Ud[22]=0,qd[148]=qd[22]=0,Hd[148]=Hd[22]=0,Wd[148]=Wd[22]=-1,Zd[148]=Zd[22]=1,Xd[148]=Xd[22]=0,Vd[148]=Vd[22]=1,Yd[148]=Yd[22]=1,Td[148]=Td[22]=-1,Pd[148]=Pd[22]=0,Od[148]=Od[22]=1,Rd[82]=Rd[88]=0,Ad[82]=Ad[88]=-1,kd[82]=kd[88]=1,zd[82]=zd[88]=1,Ud[82]=Ud[88]=0,qd[82]=qd[88]=1,jd[82]=jd[88]=-1,Bd[82]=Bd[88]=0,Gd[82]=Gd[88]=1,Xd[82]=Xd[88]=0,Vd[82]=Vd[88]=-1,Yd[82]=Yd[88]=0,Rd[73]=Rd[97]=0,Ad[73]=Ad[97]=1,kd[73]=kd[97]=0,Nd[73]=Nd[97]=0,Dd[73]=Dd[97]=-1,Fd[73]=Fd[97]=0,jd[73]=jd[97]=1,Bd[73]=Bd[97]=0,Gd[73]=Gd[97]=0,Id[73]=Id[97]=1,Md[73]=Md[97]=0,Ld[73]=Ld[97]=1,Rd[145]=Rd[25]=0,Ad[145]=Ad[25]=-1,kd[145]=kd[25]=0,jd[145]=jd[25]=1,Bd[145]=Bd[25]=0,Gd[145]=Gd[25]=1,Hd[145]=Hd[25]=0,Wd[145]=Wd[25]=1,Zd[145]=Zd[25]=1,Td[145]=Td[25]=-1,Pd[145]=Pd[25]=0,Od[145]=Od[25]=0,Nd[70]=Nd[100]=0,Dd[70]=Dd[100]=1,Fd[70]=Fd[100]=0,zd[70]=zd[100]=-1,Ud[70]=Ud[100]=0,qd[70]=qd[100]=1,Xd[70]=Xd[100]=0,Vd[70]=Vd[100]=-1,Yd[70]=Yd[100]=1,Id[70]=Id[100]=1,Md[70]=Md[100]=0,Ld[70]=Ld[100]=0,Nd[101]=Nd[69]=0,Dd[101]=Dd[69]=1,Fd[101]=Fd[69]=0,Id[101]=Id[69]=1,Md[101]=Md[69]=0,Ld[101]=Ld[69]=0,Hd[149]=Hd[21]=0,Wd[149]=Wd[21]=1,Zd[149]=Zd[21]=1,Td[149]=Td[21]=-1,Pd[149]=Pd[21]=0,Od[149]=Od[21]=0,zd[86]=zd[84]=-1,Ud[86]=Ud[84]=0,qd[86]=qd[84]=1,Xd[86]=Xd[84]=0,Vd[86]=Vd[84]=-1,Yd[86]=Yd[84]=1,Rd[89]=Rd[81]=0,Ad[89]=Ad[81]=-1,kd[89]=kd[81]=0,jd[89]=jd[81]=1,Bd[89]=Bd[81]=0,Gd[89]=Gd[81]=1,Rd[96]=Rd[74]=0,Ad[96]=Ad[74]=1,kd[96]=kd[74]=0,Nd[96]=Nd[74]=-1,Dd[96]=Dd[74]=0,Fd[96]=Fd[74]=1,Xd[96]=Xd[74]=1,Vd[96]=Vd[74]=0,Yd[96]=Yd[74]=0,Id[96]=Id[74]=1,Md[96]=Md[74]=0,Ld[96]=Ld[74]=1,Rd[24]=Rd[146]=0,Ad[24]=Ad[146]=-1,kd[24]=kd[146]=1,zd[24]=zd[146]=1,Ud[24]=Ud[146]=0,qd[24]=qd[146]=1,jd[24]=jd[146]=0,Bd[24]=Bd[146]=1,Gd[24]=Gd[146]=1,Td[24]=Td[146]=0,Pd[24]=Pd[146]=-1,Od[24]=Od[146]=0,Nd[6]=Nd[164]=-1,Dd[6]=Dd[164]=0,Fd[6]=Fd[164]=1,zd[6]=zd[164]=-1,Ud[6]=Ud[164]=0,qd[6]=qd[164]=0,Hd[6]=Hd[164]=0,Wd[6]=Wd[164]=-1,Zd[6]=Zd[164]=1,Xd[6]=Xd[164]=1,Vd[6]=Vd[164]=0,Yd[6]=Yd[164]=0,jd[129]=jd[41]=0,Bd[129]=Bd[41]=1,Gd[129]=Gd[41]=1,Hd[129]=Hd[41]=0,Wd[129]=Wd[41]=1,Zd[129]=Zd[41]=0,Id[129]=Id[41]=-1,Md[129]=Md[41]=0,Ld[129]=Ld[41]=0,Td[129]=Td[41]=0,Pd[129]=Pd[41]=-1,Od[129]=Od[41]=0,zd[66]=zd[104]=0,Ud[66]=Ud[104]=1,qd[66]=qd[104]=0,jd[66]=jd[104]=-1,Bd[66]=Bd[104]=0,Gd[66]=Gd[104]=1,Xd[66]=Xd[104]=0,Vd[66]=Vd[104]=-1,Yd[66]=Yd[104]=0,Id[66]=Id[104]=0,Md[66]=Md[104]=-1,Ld[66]=Ld[104]=1,Rd[144]=Rd[26]=-1,Ad[144]=Ad[26]=0,kd[144]=kd[26]=0,Hd[144]=Hd[26]=1,Wd[144]=Wd[26]=0,Zd[144]=Zd[26]=1,Xd[144]=Xd[26]=0,Vd[144]=Vd[26]=1,Yd[144]=Yd[26]=1,Td[144]=Td[26]=-1,Pd[144]=Pd[26]=0,Od[144]=Od[26]=1,Nd[36]=Nd[134]=0,Dd[36]=Dd[134]=1,Fd[36]=Fd[134]=1,zd[36]=zd[134]=0,Ud[36]=Ud[134]=1,qd[36]=qd[134]=0,Id[36]=Id[134]=0,Md[36]=Md[134]=-1,Ld[36]=Ld[134]=1,Td[36]=Td[134]=1,Pd[36]=Pd[134]=0,Od[36]=Od[134]=0,Rd[9]=Rd[161]=-1,Ad[9]=Ad[161]=0,kd[9]=kd[161]=0,Nd[9]=Nd[161]=0,Dd[9]=Dd[161]=-1,Fd[9]=Fd[161]=0,jd[9]=jd[161]=1,Bd[9]=Bd[161]=0,Gd[9]=Gd[161]=0,Hd[9]=Hd[161]=1,Wd[9]=Wd[161]=0,Zd[9]=Zd[161]=1,Rd[136]=0,Ad[136]=1,kd[136]=1,Nd[136]=0,Dd[136]=1,Fd[136]=0,zd[136]=-1,Ud[136]=0,qd[136]=1,jd[136]=-1,Bd[136]=0,Gd[136]=0,Hd[136]=0,Wd[136]=-1,Zd[136]=0,Xd[136]=0,Vd[136]=-1,Yd[136]=1,Id[136]=1,Md[136]=0,Ld[136]=0,Td[136]=1,Pd[136]=0,Od[136]=1,Rd[34]=0,Ad[34]=-1,kd[34]=0,Nd[34]=0,Dd[34]=-1,Fd[34]=1,zd[34]=1,Ud[34]=0,qd[34]=0,jd[34]=1,Bd[34]=0,Gd[34]=1,Hd[34]=0,Wd[34]=1,Zd[34]=1,Xd[34]=0,Vd[34]=1,Yd[34]=0,Id[34]=-1,Md[34]=0,Ld[34]=1,Td[34]=-1,Pd[34]=0,Od[34]=0,Rd[35]=0,Ad[35]=1,kd[35]=1,Nd[35]=0,Dd[35]=-1,Fd[35]=1,zd[35]=1,Ud[35]=0,qd[35]=0,jd[35]=-1,Bd[35]=0,Gd[35]=0,Hd[35]=0,Wd[35]=-1,Zd[35]=0,Xd[35]=0,Vd[35]=1,Yd[35]=0,Id[35]=-1,Md[35]=0,Ld[35]=1,Td[35]=1,Pd[35]=0,Od[35]=1,Rd[153]=0,Ad[153]=1,kd[153]=1,jd[153]=-1,Bd[153]=0,Gd[153]=0,Hd[153]=0,Wd[153]=-1,Zd[153]=0,Td[153]=1,Pd[153]=0,Od[153]=1,Nd[102]=0,Dd[102]=-1,Fd[102]=1,zd[102]=1,Ud[102]=0,qd[102]=0,Xd[102]=0,Vd[102]=1,Yd[102]=0,Id[102]=-1,Md[102]=0,Ld[102]=1,Rd[155]=0,Ad[155]=-1,kd[155]=0,jd[155]=1,Bd[155]=0,Gd[155]=1,Hd[155]=0,Wd[155]=1,Zd[155]=1,Td[155]=-1,Pd[155]=0,Od[155]=0,Nd[103]=0,Dd[103]=1,Fd[103]=0,zd[103]=-1,Ud[103]=0,qd[103]=1,Xd[103]=0,Vd[103]=-1,Yd[103]=1,Id[103]=1,Md[103]=0,Ld[103]=0,Rd[152]=0,Ad[152]=1,kd[152]=1,zd[152]=-1,Ud[152]=0,qd[152]=1,jd[152]=-1,Bd[152]=0,Gd[152]=0,Hd[152]=0,Wd[152]=-1,Zd[152]=0,Xd[152]=0,Vd[152]=-1,Yd[152]=1,Td[152]=1,Pd[152]=0,Od[152]=1,Rd[156]=0,Ad[156]=-1,kd[156]=1,zd[156]=1,Ud[156]=0,qd[156]=1,jd[156]=-1,Bd[156]=0,Gd[156]=0,Hd[156]=0,Wd[156]=-1,Zd[156]=0,Xd[156]=0,Vd[156]=1,Yd[156]=1,Td[156]=-1,Pd[156]=0,Od[156]=1,Rd[137]=0,Ad[137]=1,kd[137]=1,Nd[137]=0,Dd[137]=1,Fd[137]=0,jd[137]=-1,Bd[137]=0,Gd[137]=0,Hd[137]=0,Wd[137]=-1,Zd[137]=0,Id[137]=1,Md[137]=0,Ld[137]=0,Td[137]=1,Pd[137]=0,Od[137]=1,Rd[139]=0,Ad[139]=1,kd[139]=1,Nd[139]=0,Dd[139]=-1,Fd[139]=0,jd[139]=1,Bd[139]=0,Gd[139]=0,Hd[139]=0,Wd[139]=1,Zd[139]=0,Id[139]=-1,Md[139]=0,Ld[139]=0,Td[139]=1,Pd[139]=0,Od[139]=1,Rd[98]=0,Ad[98]=-1,kd[98]=0,Nd[98]=0,Dd[98]=-1,Fd[98]=1,zd[98]=1,Ud[98]=0,qd[98]=0,jd[98]=1,Bd[98]=0,Gd[98]=1,Xd[98]=0,Vd[98]=1,Yd[98]=0,Id[98]=-1,Md[98]=0,Ld[98]=1,Rd[99]=0,Ad[99]=1,kd[99]=0,Nd[99]=0,Dd[99]=-1,Fd[99]=1,zd[99]=1,Ud[99]=0,qd[99]=0,jd[99]=-1,Bd[99]=0,Gd[99]=1,Xd[99]=0,Vd[99]=-1,Yd[99]=0,Id[99]=1,Md[99]=0,Ld[99]=1,Nd[38]=0,Dd[38]=-1,Fd[38]=1,zd[38]=1,Ud[38]=0,qd[38]=0,Hd[38]=0,Wd[38]=1,Zd[38]=1,Xd[38]=0,Vd[38]=1,Yd[38]=0,Id[38]=-1,Md[38]=0,Ld[38]=1,Td[38]=-1,Pd[38]=0,Od[38]=0,Nd[39]=0,Dd[39]=1,Fd[39]=1,zd[39]=-1,Ud[39]=0,qd[39]=0,Hd[39]=0,Wd[39]=-1,Zd[39]=1,Xd[39]=0,Vd[39]=1,Yd[39]=0,Id[39]=-1,Md[39]=0,Ld[39]=1,Td[39]=1,Pd[39]=0,Od[39]=0;var $d=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Kd=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Jd=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Qd=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},tg=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},eg=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ng=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ig=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},rg=[],og=[],sg=[],ag=[],lg=[],cg=[],ug=[],hg=[];ag[1]=lg[1]=18,ag[169]=lg[169]=18,sg[4]=og[4]=12,sg[166]=og[166]=12,rg[16]=hg[16]=4,rg[154]=hg[154]=4,cg[64]=ug[64]=22,cg[106]=ug[106]=22,sg[2]=cg[2]=17,ag[2]=lg[2]=18,sg[168]=cg[168]=17,ag[168]=lg[168]=18,rg[8]=ag[8]=9,og[8]=sg[8]=12,rg[162]=ag[162]=9,og[162]=sg[162]=12,rg[32]=hg[32]=4,og[32]=ug[32]=1,rg[138]=hg[138]=4,og[138]=ug[138]=1,lg[128]=hg[128]=21,cg[128]=ug[128]=22,lg[42]=hg[42]=21,cg[42]=ug[42]=22,og[5]=lg[5]=14,og[165]=lg[165]=14,sg[20]=hg[20]=6,sg[150]=hg[150]=6,rg[80]=cg[80]=11,rg[90]=cg[90]=11,ag[65]=ug[65]=3,ag[105]=ug[105]=3,rg[160]=cg[160]=11,og[160]=lg[160]=14,rg[10]=cg[10]=11,og[10]=lg[10]=14,sg[130]=hg[130]=6,ag[130]=ug[130]=3,sg[40]=hg[40]=6,ag[40]=ug[40]=3,og[101]=ug[101]=1,og[69]=ug[69]=1,lg[149]=hg[149]=21,lg[21]=hg[21]=21,sg[86]=cg[86]=17,sg[84]=cg[84]=17,rg[89]=ag[89]=9,rg[81]=ag[81]=9,rg[96]=ug[96]=0,og[96]=cg[96]=15,rg[74]=ug[74]=0,og[74]=cg[74]=15,rg[24]=sg[24]=8,ag[24]=hg[24]=7,rg[146]=sg[146]=8,ag[146]=hg[146]=7,og[6]=cg[6]=15,sg[6]=lg[6]=16,og[164]=cg[164]=15,sg[164]=lg[164]=16,ag[129]=hg[129]=7,lg[129]=ug[129]=20,ag[41]=hg[41]=7,lg[41]=ug[41]=20,sg[66]=ug[66]=2,ag[66]=cg[66]=19,sg[104]=ug[104]=2,ag[104]=cg[104]=19,rg[144]=lg[144]=10,cg[144]=hg[144]=23,rg[26]=lg[26]=10,cg[26]=hg[26]=23,og[36]=hg[36]=5,sg[36]=ug[36]=2,og[134]=hg[134]=5,sg[134]=ug[134]=2,rg[9]=lg[9]=10,og[9]=ag[9]=13,rg[161]=lg[161]=10,og[161]=ag[161]=13,og[37]=hg[37]=5,lg[37]=ug[37]=20,og[133]=hg[133]=5,lg[133]=ug[133]=20,sg[148]=lg[148]=16,cg[148]=hg[148]=23,sg[22]=lg[22]=16,cg[22]=hg[22]=23,rg[82]=sg[82]=8,ag[82]=cg[82]=19,rg[88]=sg[88]=8,ag[88]=cg[88]=19,rg[73]=ug[73]=0,og[73]=ag[73]=13,rg[97]=ug[97]=0,og[97]=ag[97]=13,rg[145]=ag[145]=9,lg[145]=hg[145]=21,rg[25]=ag[25]=9,lg[25]=hg[25]=21,og[70]=ug[70]=1,sg[70]=cg[70]=17,og[100]=ug[100]=1,sg[100]=cg[100]=17,rg[34]=ag[34]=9,og[34]=sg[34]=12,lg[34]=hg[34]=21,cg[34]=ug[34]=22,rg[136]=hg[136]=4,og[136]=ug[136]=1,sg[136]=cg[136]=17,ag[136]=lg[136]=18,rg[35]=hg[35]=4,og[35]=sg[35]=12,ag[35]=lg[35]=18,cg[35]=ug[35]=22,rg[153]=hg[153]=4,ag[153]=lg[153]=18,og[102]=sg[102]=12,cg[102]=ug[102]=22,rg[155]=ag[155]=9,lg[155]=hg[155]=23,og[103]=ug[103]=1,sg[103]=cg[103]=17,rg[152]=hg[152]=4,sg[152]=cg[152]=17,ag[152]=lg[152]=18,rg[156]=sg[156]=8,ag[156]=lg[156]=18,cg[156]=hg[156]=23,rg[137]=hg[137]=4,og[137]=ug[137]=1,ag[137]=lg[137]=18,rg[139]=hg[139]=4,og[139]=ag[139]=13,lg[139]=ug[139]=20,rg[98]=ag[98]=9,og[98]=sg[98]=12,cg[98]=ug[98]=22,rg[99]=ug[99]=0,og[99]=sg[99]=12,ag[99]=cg[99]=19,og[38]=sg[38]=12,lg[38]=hg[38]=21,cg[38]=ug[38]=22,og[39]=hg[39]=5,sg[39]=lg[39]=16,cg[39]=ug[39]=22;var pg=[];pg[1]=pg[169]=$d,pg[4]=pg[166]=Kd,pg[16]=pg[154]=Jd,pg[64]=pg[106]=Qd,pg[168]=pg[2]=tg,pg[162]=pg[8]=eg,pg[138]=pg[32]=ng,pg[42]=pg[128]=ig,pg[5]=pg[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},pg[20]=pg[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},pg[80]=pg[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},pg[65]=pg[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},pg[160]=pg[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},pg[130]=pg[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},pg[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},pg[101]=pg[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},pg[149]=pg[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},pg[86]=pg[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},pg[89]=pg[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},pg[96]=pg[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},pg[24]=pg[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},pg[6]=pg[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},pg[129]=pg[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},pg[66]=pg[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pg[144]=pg[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pg[36]=pg[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},pg[9]=pg[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},pg[37]=pg[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},pg[148]=pg[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pg[82]=pg[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},pg[73]=pg[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},pg[145]=pg[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},pg[70]=pg[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pg[34]=function(t){return[ig(t),eg(t)]},pg[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},pg[136]=function(t){return[ng(t),tg(t)]},pg[153]=function(t){return[Jd(t),$d(t)]},pg[102]=function(t){return[Kd(t),Qd(t)]},pg[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},pg[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pg[152]=function(t){return[Jd(t),tg(t)]},pg[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},pg[137]=function(t){return[ng(t),$d(t)]},pg[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},pg[98]=function(t){return[eg(t),Qd(t)]},pg[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},pg[38]=function(t){return[Kd(t),ig(t)]},pg[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function fg(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===fg(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function dg(t){var e=[1/0,1/0,-1/0,-1/0];return fg(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}dg.default=dg;function gg(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function mg(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xg(t[0])||!xg(t[1]))throw new Error("coordinates must contain numbers");return gg({type:"Point",coordinates:t},e,n)}function yg(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return gg({type:"Polygon",coordinates:t},e,n)}function vg(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return gg({type:"LineString",coordinates:t},e,n)}function _g(t,e,n){return void 0===n&&(n={}),gg({type:"MultiPoint",coordinates:t},e,n)}function xg(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function bg(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0],a=n[1]-e[1];return((i=r*a-s*o)>0)-(i<0)||+i}function wg(t,e){return e.geometry.coordinates[0].every((function(e){return rf(mg(e),t)}))}var Eg=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=bg(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();const Sg=Eg;const Cg=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return vg([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return bg(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();var Ig=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=bg(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return _g(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=yg([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=id(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,r=t.getEnvelope();return e.forEach((function(e){var o,s,a,l,c,u,h=e.getEnvelope();if((i&&(n=i.getEnvelope()),s=r,a=(o=h).geometry.coordinates[0].map((function(t){return t[0]})),l=o.geometry.coordinates[0].map((function(t){return t[1]})),c=s.geometry.coordinates[0].map((function(t){return t[0]})),u=s.geometry.coordinates[0].map((function(t){return t[1]})),Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,u)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,u))&&wg(h,r)){for(var p=t.map((function(t){return t.from.coordinates})),f=void 0,d=function(t){e.some((function(e){return n=t,i=e.from.coordinates,n[0]===i[0]&&n[1]===i[1];var n,i}))||(f=t)},g=0,m=p;g<m.length;g++){d(m[g])}f&&e.inside(mg(f))&&(i&&!wg(n,h)||(i=e))}})),i},t.prototype.inside=function(t){return rf(t,this.toPolygon())},t}();const Mg=Ig;function Lg(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Lg(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tg(t,e){var n,i,r,o,s,a,l,c,u,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},u=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}function Pg(t,e){Tg(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(gg(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(gg({type:s,coordinates:c},i),n,l))return!1}}))}!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Pg(e,(function(t){var e,i,r,o;!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),e=function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e},o=i,Lg(t,(function(t,n,r,s,a){o=0===n&&void 0===i?t:e(o,t,n,r,s,a)}),r)})),n},t.prototype.getNode=function(t){var e=Sg.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Sg(t)),n},t.prototype.addEdge=function(t,e){var n=new Cg(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,c=void 0;s.label===e&&(l=s),a.label===e&&(c=a),l&&c&&(c&&(i=c),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Mg;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();function Og(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Og(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Rg(t){var e=[1/0,1/0,-1/0,-1/0];return Og(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Rg.default=Rg;n(9657);n(2606);n(1160);function Ag(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Ag(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function kg(t){var e=[1/0,1/0,-1/0,-1/0];return Ag(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}kg.default=kg;function Ng(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Dg={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||Dg.heuristics.manhattan,o=i.closest||!1,s=new Bg((function(t){return t.f})),a=e;for(e.h=r(e,n),s.push(e);s.size()>0;){var l=s.pop();if(l===n)return Ng(l);l.closed=!0;for(var c=t.neighbors(l),u=0,h=c.length;u<h;++u){var p=c[u];if(!p.closed&&!p.isWall()){var f=l.g+p.getCost(l),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?Ng(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Fg(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new jg(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function jg(t,e,n){this.x=t,this.y=e,this.weight=n}function Bg(t){this.content=[],this.scoreFunction=t}Fg.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Dg.cleanNode(this.nodes[t])},Fg.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Dg.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Fg.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Fg.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Fg.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},jg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},jg.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},jg.prototype.isWall=function(){return 0===this.weight},Bg.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<i&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};function Gg(){this._=null}function zg(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ug(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function qg(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Xg(t){for(;t.L;)t=t.L;return t}Gg.prototype={constructor:Gg,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Xg(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ug(this,n),n=(t=n).U),n.C=!1,i.C=!0,qg(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(qg(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ug(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?Xg(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ug(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,qg(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ug(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,qg(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ug(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,qg(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};const Vg=Gg;function Yg(t,e,n,i){var r=[null,null],o=mm.push(r)-1;return r.left=t,r.right=e,n&&Wg(r,t,e,n),i&&Wg(r,e,t,i),dm[t.index].halfedges.push(o),dm[e.index].halfedges.push(o),r}function Hg(t,e,n){var i=[e,n];return i.left=t,i}function Wg(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Zg(t,e,n,i,r){var o,s=t[0],a=t[1],l=s[0],c=s[1],u=0,h=1,p=a[0]-l,f=a[1]-c;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[l+u*p,c+u*f]),h<1&&(t[1]=[l+h*p,c+h*f]),!0)}}}}}function $g(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,l=t[0],c=t.left,u=t.right,h=c[0],p=c[1],f=u[0],d=u[1],g=(h+f)/2,m=(p+d)/2;if(d===p){if(g<e||g>=i)return;if(h>f){if(l){if(l[1]>=r)return}else l=[g,n];o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r];o=[g,n]}}else if(a=m-(s=(h-f)/(d-p))*g,s<-1||s>1)if(h>f){if(l){if(l[1]>=r)return}else l=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(l){if(l[1]<n)return}else l=[(r-a)/s,r];o=[(n-a)/s,n]}else if(p<d){if(l){if(l[0]>=i)return}else l=[e,s*e+a];o=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function Kg(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Jg(t,e){return e[+(e.left!==t.site)]}function Qg(t,e){return e[+(e.left===t.site)]}var tm,em=[];function nm(){zg(this),this.x=this.y=this.arc=this.site=this.cy=null}function im(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],l=i[0]-s,c=i[1]-a,u=o[0]-s,h=o[1]-a,p=2*(l*h-c*u);if(!(p>=-vm)){var f=l*l+c*c,d=u*u+h*h,g=(h*f-c*d)/p,m=(l*d-u*f)/p,y=em.pop()||new nm;y.arc=t,y.site=r,y.x=g+s,y.y=(y.cy=m+a)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,_=gm._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}gm.insert(v,y),v||(tm=y)}}}}function rm(t){var e=t.circle;e&&(e.P||(tm=e.N),gm.remove(e),em.push(e),zg(e),t.circle=null)}var om=[];function sm(){zg(this),this.edge=this.site=this.circle=null}function am(t){var e=om.pop()||new sm;return e.site=t,e}function lm(t){rm(t),fm.remove(t),om.push(t),zg(t)}function cm(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];lm(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<ym&&Math.abs(i-l.circle.cy)<ym;)o=l.P,a.unshift(l),lm(l),l=o;a.unshift(l),rm(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<ym&&Math.abs(i-c.circle.cy)<ym;)s=c.N,a.push(c),lm(c),c=s;a.push(c),rm(c);var u,h=a.length;for(u=1;u<h;++u)c=a[u],l=a[u-1],Wg(c.edge,l.site,c.site,r);l=a[0],(c=a[h-1]).edge=Yg(l.site,c.site,null,r),im(l),im(c)}function um(t){for(var e,n,i,r,o=t[0],s=t[1],a=fm._;a;)if((i=hm(a,s)-o)>ym)a=a.L;else{if(!((r=o-pm(a,s))>ym)){i>-ym?(e=a.P,n=a):r>-ym?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){dm[t.index]={site:t,halfedges:[]}}(t);var l=am(t);if(fm.insert(e,l),e||n){if(e===n)return rm(e),n=am(e.site),fm.insert(l,n),l.edge=n.edge=Yg(e.site,l.site),im(e),void im(n);if(n){rm(e),rm(n);var c=e.site,u=c[0],h=c[1],p=t[0]-u,f=t[1]-h,d=n.site,g=d[0]-u,m=d[1]-h,y=2*(p*m-f*g),v=p*p+f*f,_=g*g+m*m,x=[(m*v-f*_)/y+u,(p*_-g*v)/y+h];Wg(n.edge,c,d,x),l.edge=Yg(c,t,null,x),n.edge=Yg(t,d,null,x),im(e),im(n)}else l.edge=Yg(e.site,l.site)}}function hm(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],c=l-e;if(!c)return a;var u=a-i,h=1/o-1/c,p=u/c;return h?(-p+Math.sqrt(p*p-2*h*(u*u/(-2*c)-l+c/2+r-o/2)))/h+i:(i+a)/2}function pm(t,e){var n=t.N;if(n)return hm(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var fm,dm,gm,mm,ym=1e-6,vm=1e-12;function _m(t,e){return e[1]-t[1]||e[0]-t[0]}function xm(t,e){var n,i,r,o=t.sort(_m).pop();for(mm=[],dm=new Array(t.length),fm=new Vg,gm=new Vg;;)if(r=tm,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(um(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;cm(r.arc)}if(function(){for(var t,e,n,i,r=0,o=dm.length;r<o;++r)if((t=dm[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=Kg(t,mm[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,o=mm.length;o--;)$g(r=mm[o],t,e,n,i)&&Zg(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>ym||Math.abs(r[0][1]-r[1][1])>ym)||delete mm[o]}(s,a,l,c),function(t,e,n,i){var r,o,s,a,l,c,u,h,p,f,d,g,m=dm.length,y=!0;for(r=0;r<m;++r)if(o=dm[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)mm[l[a]]||l.splice(a,1);for(a=0,c=l.length;a<c;)d=(f=Qg(o,mm[l[a]]))[0],g=f[1],h=(u=Jg(o,mm[l[++a%c]]))[0],p=u[1],(Math.abs(d-h)>ym||Math.abs(g-p)>ym)&&(l.splice(a,0,mm.push(Hg(s,f,Math.abs(d-t)<ym&&i-g>ym?[t,Math.abs(h-t)<ym?p:i]:Math.abs(g-i)<ym&&n-d>ym?[Math.abs(p-i)<ym?h:n,i]:Math.abs(d-n)<ym&&g-e>ym?[n,Math.abs(h-n)<ym?p:e]:Math.abs(g-e)<ym&&d-t>ym?[Math.abs(p-e)<ym?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var v,_,x,b=1/0;for(r=0,y=null;r<m;++r)(o=dm[r])&&(x=(v=(s=o.site)[0]-t)*v+(_=s[1]-e)*_)<b&&(b=x,y=o);if(y){var w=[t,e],E=[t,i],S=[n,i],C=[n,e];y.halfedges.push(mm.push(Hg(s=y.site,w,E))-1,mm.push(Hg(s,E,S))-1,mm.push(Hg(s,S,C))-1,mm.push(Hg(s,C,w))-1)}}for(r=0;r<m;++r)(o=dm[r])&&(o.halfedges.length||delete dm[r])}(s,a,l,c)}this.edges=mm,this.cells=dm,fm=gm=mm=dm=null}xm.prototype={constructor:xm,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Jg(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,l,c,u=n.site,h=-1,p=e[r[o-1]],f=p.left===u?p.right:p.left;++h<o;)s=f,f=(p=e[r[h]]).left===u?p.right:p.left,s&&f&&i<s.index&&i<f.index&&(l=s,c=f,((a=u)[0]-c[0])*(l[1]-a[1])-(a[0]-l[0])*(c[1]-a[1])<0)&&t.push([u.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var l=t-r.site[0],c=e-r.site[1],u=l*l+c*c;do{r=o.cells[i=s],s=null,r.halfedges.forEach((function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var l=t-a[0],c=e-a[1],h=l*l+c*c;h<u&&(u=h,s=a.index)}}))}while(null!==s);return o._found=i,null==n||u<=n*n?r.site:null}};var bm=n(2676);function wm(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function Em(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return wm({type:"Polygon",coordinates:t},e,n)}function Sm(t,e,n){return void 0===n&&(n={}),wm({type:"MultiPolygon",coordinates:t},e,n)}const Cm=function(t,e){var n=nf(t),i=nf(e),r=t.properties||{},o=bm.difference(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?Em(o[0],r):Sm(o,r)};n(675);function Im(){return new Mm}function Mm(){this.reset()}Mm.prototype={constructor:Mm,reset:function(){this.s=this.t=0},add:function(t){Tm(Lm,t,this.t),Tm(this,Lm.s,this.s),this.s?this.t+=Lm.t:this.s=Lm.t},valueOf:function(){return this.s}};var Lm=new Mm;function Tm(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var Pm=1e-6,Om=Math.PI,Rm=Om/2,Am=Om/4,km=2*Om,Nm=Om/180,Dm=Math.abs,Fm=Math.atan,jm=Math.atan2,Bm=Math.cos,Gm=(Math.ceil,Math.exp),zm=(Math.floor,Math.log),Um=(Math.pow,Math.sin),qm=(Math.sign,Math.sqrt),Xm=Math.tan;function Vm(t){return t>1?Rm:t<-1?-Rm:Math.asin(t)}function Ym(){}Im(),Im();function Hm(t){var e=t[0],n=t[1],i=Bm(n);return[i*Bm(e),i*Um(e),Um(n)]}function Wm(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zm(t){var e=qm(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Im();function $m(t,e){return[t>Om?t-km:t<-Om?t+km:t,e]}function Km(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Jm(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,i=t[0],s=t[e];if(s,Dm(i[0]-u[0])<Pm&&Dm(c[1]-u[1])<Pm){for(r.lineStart(),0;o<e;++o)r.point(t[o][0],i[1]);r.lineEnd()}else{var c,u;a.push(new Km(i,t,null,!0)),l.push(n.o=new Km(i,null,n,!1)),a.push(new Km(s,t,null,!1)),l.push(n.o=new Km(s,null,n,!0))}}})),a.length){for(l.sort(e),Qm(a),Qm(l),0,l.length;o<s;++o)l[o].e=!n;for(var c,u,h=a[0];;){for(var p=h,f=!0;p.v;)if(p.n===h)return;p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(0,c.length;o<s;++o)r.point(c[o][0],u[1]);else i(p.x,p.n.x,1,r);p.n}else{if(f)for(p.p.z,c.length-1;o>=0;--o)r.point(c[o][0],u[1]);else i(p.x,p.p.x,-1,r);p.p}p.o.z,!f}while(!p.v);r.lineEnd()}}}function Qm(t){if(t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=t[i],n.p=r,n;r.n=t[0],n.p=r}}function ty(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}$m.invert=$m;var ey,ny;1===(ey=ty).length&&(ny=ey,ey=function(t,e){return ty(ny(t),e)});var iy=Array.prototype;iy.slice,iy.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var ry=Im();function oy(t,e){var n=e[0],i=e[1],r=[Um(n),-Bm(n),0],o=0,s=0;ry.reset();for(var a=0,l=t.length;a<l;++a)if(t[a].length)for(var c,u,h=c[u-1],p=h[0],f=h[1]/2+Am,d=Um(f),g=Bm(f),m=0;m<u;v,x,b,y){var y=c[m],v=y[0],_=y[1]/2+Am,x=Um(_),b=Bm(_),w=v-p,E=w>=0?1:-1,S=E*w,C=S>Om,I=d*x;if(ry.add(jm(I*E*Um(S),g*b+I*Bm(S))),C?w+E*km:w,C^p>=n^v>=n){var M=Wm(Hm(h),Hm(y));Zm(M);var L=Wm(r,M);Zm(L);var T=(C^w>=0?-1:1)*Vm(L[2]);(i>T||i===T&&(M[0]||M[1]))&&(C^w>=0?1:-1)}}return(o<-Pm||o<Pm&&ry<-Pm)^1&s}Im();Im(),Im();Im();function sy(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ay(t){return t.length>1}function ly(t,e){return(t.x[0]<0?t[1]-Rm-Pm:Rm-t[1])-(e.x[0]<0?e[1]-Rm-Pm:Rm-e[1])}sy(4.5);function cy(t){return function(e){var n=new uy;for(var i in t)n[i]=t[i];return n.stream=e,n}}function uy(){}uy.prototype={constructor:uy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Bm(30*Nm);cy({point:function(t,e){this.stream.point(t*Nm,e*Nm)}});function hy(t){return function(e,n){var i=Bm(e),r=Bm(n),o=t(i*r);return[o*r*Um(e),o*Um(n)]}}function py(t){return function(e,n){var i=qm(e*e+n*n),r=t(i),o=Um(r),s=Bm(r);return[jm(e*o,i*s),Vm(i&&n*o/i)]}}var fy=hy((function(t){return qm(2/(1+t))}));fy.invert=py((function(t){return 2*Vm(t/2)}));var dy=hy((function(t){return(t=(e=t)>1?0:e<-1?Om:Math.acos(e))&&t/Um(t);var e}));function gy(t,e){return[t,zm(Xm((Rm+e)/2))]}function my(t,e){return[t,e]}function yy(t,e){var n=Bm(e),i=Bm(t)*n;return[n*Um(t)/i,Um(e)/i]}function vy(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function _y(t,e){return[Bm(e)*Um(t),Um(e)]}function xy(t,e){var n=Bm(e),i=1+Bm(t)*n;return[n*Um(t)/i,Um(e)/i]}function by(t,e){return[zm(Xm((Rm+e)/2)),-t]}dy.invert=py((function(t){return t})),gy.invert=function(t,e){return[t,2*Fm(Gm(e))-Rm]},my.invert=my,yy.invert=py(Fm),vy.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Dm(n)>Pm&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},_y.invert=py(Vm),xy.invert=py((function(t){return 2*Fm(t)})),by.invert=function(t,e){return[-e,2*Fm(Gm(t))-Rm]};function wy(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function Ey(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return wy({type:"Polygon",coordinates:t},e,n)}function Sy(t,e,n){return void 0===n&&(n={}),wy({type:"MultiPolygon",coordinates:t},e,n)}const Cy=function(t,e,n){void 0===n&&(n={});var i=nf(t),r=nf(e),o=bm.union(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?Ey(o[0],n.properties):Sy(o,n.properties)};function Iy(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function My(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return Iy({type:"Polygon",coordinates:t},e,n)}function Ly(t,e,n){return void 0===n&&(n={}),Iy({type:"MultiPolygon",coordinates:t},e,n)}function Ty(t,e,n){if(null!==t)for(var i,r,o,s,a,l,c,u,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,m=d?t.features.length:1,y=0;y<m;y++){a=(u=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=u?c.geometries[v]:c)){l=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],p,y,_,x))return!1;p++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],p,y,_,x))return!1;p++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],p,y,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===Ty(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Py(t){var e=[1/0,1/0,-1/0,-1/0];return Ty(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Py.default=Py;class Oy extends(lr(zf)){constructor(t={}){t.mapType=t.googleMapType||"roadmap",t.layerTypes=t.googleLayerTypes||[],super(t),t.mapID&&(this.mapID=t.mapID),hr(this,t),pr(this)}static async createAsync(t){return new Oy(t)}insideCheckXy(t){return!this.envelope||rf(t,this.envelope)}insideCheckSysCoord(t){return this.insideCheckXy(t)}modulateXyInside(t){if(!this.centroid)return t;const e=ad([t,this.centroid]),n=_f(this.envelope,e);return n.features.length>0&&n.features[0].geometry?n.features[0].geometry.coordinates:t}modulateSysCoordInside(t){return this.modulateXyInside(t)}merc2XyAsync(t){return Promise.resolve(t)}merc2XyAsync_ignoreBackground(t){return this.merc2XyAsync(t)}xy2MercAsync(t){return Promise.resolve(t)}xy2SysCoord(t){return t}sysCoord2Xy(t){return t}viewpoint2MercsAsync(t,e){const n=this.viewpoint2SysCoords(t,e),i=this.sysCoords2Xys(n);return this.xys2MercsAsync(i)}mercs2ViewpointAsync(t){return this.mercs2XysAsync(t).then((t=>{const e=this.xys2SysCoords(t);return this.sysCoords2Viewpoint(e)}))}mercs2SysCoordsAsync_multiLayer(t){return Promise.all(t[0].map((t=>this.merc2SysCoordAsync(t)))).then((e=>[[e,t[1]]]))}defZoom(){return this.mercZoom}}function Ry(t,e,n){const i="string"==typeof t?t:t.getCode(),r="string"==typeof e?e:e.getCode();let o=Ai(t,e);if(o==wi&&i!=r){const n=Ai(t,"EPSG:3857"),s=Ai("EPSG:3857",e);if(n==wi&&"EPSG:3857"!=i)throw"Transform of Source projection is not defined.";if(s==wi&&"EPSG:3857"!=r)throw"Transform of Distination projection is not defined.";o=function(n){return ki(ki(n,t,"EPSG:3857"),"EPSG:3857",e)};const a=function(n){return ki(ki(n,e,"EPSG:3857"),"EPSG:3857",t)};Ti(t,e,o,a)}if(n)return o(n)}function Ay(t,e,n={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const i=tf(t),r=nf(e),o=r.type,s=e.bbox;let a=r.coordinates;if(s&&!function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);let l=!1;for(let t=0;t<a.length&&!l;t++){const e=ky(i,a[t]);(0===e&&!n.ignoreBoundary||e)&&(l=!0)}return l}function ky(t,e){let n=0,i=0,r=0,o=0,s=0,a=0,l=0,c=0,u=null,h=null;const p=t[0],f=t[1],d=e.length;for(;n<d;n++){i=0;const d=e[n].length-1,g=e[n];for(u=g[0],s=u[0]-p,a=u[1]-f;i<d;i++)if(h=g[i+1],c=h[1]-f,a<0&&c<0||a>0&&c>0)u=h,a=c,s=u[0]-p;else{if(l=h[0]-t[0],c>0&&a<=0){if(o=s*c-l*a,o>0)r+=1;else if(0===o)return 0}else if(a>0&&c<=0){if(o=s*c-l*a,o<0)r+=1;else if(0===o)return 0}else if(0===c&&a<0){if(o=s*c-l*a,0===o)return 0}else if(0===a&&c<0){if(o=s*c-l*a,0===o)return 0}else if(0===a&&0===c){if(l<=0&&s>=0)return 0;if(s<=0&&l>=0)return 0}u=h,a=c,s=l}}return r%2!=0}class Ny{constructor(t){this._zlimit=0,this.initArcs(t)}initArcs(t){const e=[],n=[],i=t.map((t=>{const i=t?t.length:0;for(let r=0;r<i;r++)e.push(t[r][0]),n.push(t[r][1]);return i}));this.initXYData(i,e,n)}initXYData(t,e,n){const i=t.length;this._xx=new Float64Array(e),this._yy=new Float64Array(n),this._nn=new Uint32Array(t),this._zz=null,this._zlimit=0,this._filteredArcIter=null,this._ii=new Uint32Array(i);let r=0;for(let e=0;e<i;e++)this._ii[e]=r,r+=t[e];r==this._xx.length&&this._xx.length==this._yy.length||Dy("ArcCollection#initXYData() Counting error"),this.initBounds(),this._arcIter=new Qy(this._xx,this._yy)}initBounds(){const t=this.calcArcBounds_(this._xx,this._yy,this._nn);this._bb=t.bb,this._allBounds=t.bounds}calcArcBounds_(t,e,n){const i=n.length,r=new Float64Array(4*i),o=new ev;let s,a,l,c=0;for(let u=0;u<i;u++)s=n[u],s>0&&(a=4*u,l=tv(t,e,c,s),r[a++]=l[0],r[a++]=l[1],r[a++]=l[2],r[a]=l[3],c+=s,o.mergeBounds(l));return{bb:r,bounds:o}}getBounds(){return this._allBounds.clone()}forEachSegment(t){let e=0;for(let n=0,i=this.size();n<i;n++)e+=this.forEachArcSegment(n,t);return e}size(){return this._ii&&this._ii.length||0}forEachArcSegment(t,e){const n=t>=0,i=n?t:~t,r=this.getRetainedInterval(),o=this._nn[i],s=n?1:-1;let a=n?this._ii[i]:this._ii[i]+o-1,l=a,c=0;for(let t=1;t<o;t++)l+=s,(0===r||this._zz[l]>=r)&&(e(a,l,this._xx,this._yy),a=l,c++);return c}getRetainedInterval(){return this._zlimit}getVertexData(){return{xx:this._xx,yy:this._yy,zz:this._zz,bb:this._bb,nn:this._nn,ii:this._ii}}getUint32Array(t){const e=4*t;return(!this.buf||this.buf.byteLength<e)&&(this.buf=new ArrayBuffer(e)),new Uint32Array(this.buf,0,t)}getAvgSegment2(){let t=0,e=0;const n=this.forEachSegment(((n,i,r,o)=>{t+=Math.abs(r[n]-r[i]),e+=Math.abs(o[n]-o[i])}));return[t/n||0,e/n||0]}calcSegmentIntersectionStripeCount(){const t=this.getBounds().height(),e=this.getAvgSegment2()[1];let n=1;return e>0&&t>0&&(n=Math.ceil(t/e/20)),n||1}findSegmentIntersections(){const t=this.getBounds(),e=t.ymin,n=t.ymax-e,i=this.calcSegmentIntersectionStripeCount(),r=new Uint32Array(i),o=i>1?t=>Math.floor((i-1)*(t-e)/n):()=>0;let s,a;this.forEachSegment(((t,e,n,i)=>{let s=o(i[t]);const a=o(i[e]);for(;r[s]=r[s]+2,s!=a;)s+=a>s?1:-1}));const l=this.getUint32Array(function(t,e){Fy(t)||Dy("utils.sum() expects an array, received:",t);let n,i=0,r=0;for(let e=0,o=t.length;e<o;e++)n=t[e],n?i+=n:isNaN(n)&&r++;e&&(e.nan=r);return i}(r));let c=0;const u=[];!function(t,e,n){if(!Fy(t))throw new Error(`#forEach() takes an array-like argument. ${t}`);for(let i=0,r=t.length;i<r;i++)e.call(n,t[i],i)}(r,(t=>{const e=c;c+=t,u.push(l.subarray(e,c))})),function(t,e){for(let n=0,i=t.length;n<i;n++)t[n]=e}(r,0),this.forEachSegment(((t,e,n,i)=>{let s=o(i[t]);const a=o(i[e]);let l,c;for(;l=r[s],r[s]=l+2,c=u[s],c[l]=t,c[l+1]=e,s!=a;)s+=a>s?1:-1}));const h=this.getVertexData(),p=[];let f;for(s=0;s<i;s++)for(f=jy(u[s],h.xx,h.yy),a=0;a<f.length;a++)p.push(f[a]);return Jy(p)}}function Dy(...t){const e=t.join(" ");throw new Error(e)}function Fy(t){return!!t&&(!!function(t){return Array.isArray(t)}(t)||!function(t){return null!=t&&t.toString===String.prototype.toString}(t)&&(0===t.length||t.length>0))}function jy(t,e,n){const i=t.length-2,r=[];let o,s,a,l,c,u,h,p,f,d,g,m,y,v,_,x,b;for(!function(t,e){(function(t,e){for(let n=0,i=e.length;n<i;n+=2)t[e[n]]>t[e[n+1]]&&Hy(e,n,n+1)})(t,e),Wy(t,e,0,e.length-2)}(e,t),x=0;x<i;){for(o=t[x],s=t[x+1],c=e[o],u=e[s],f=n[o],d=n[s],b=x;b<i&&(b+=2,a=t[b],h=e[a],!(u<h));){if(g=n[a],l=t[b+1],p=e[l],m=n[l],f>=g){if(f>m&&d>g&&d>m)continue}else if(f<m&&d<g&&d<m)continue;o!=a&&o!=l&&s!=a&&s!=l&&(y=By(c,f,u,d,h,g,p,m),y&&(v=[o,s],_=[a,l],r.push($y(y,v,_,e,n)),4==y.length&&r.push($y(y.slice(2),v,_,e,n))))}x+=2}return r}function By(t,e,n,i,r,o,s,a){const l=function(t,e,n,i,r,o,s,a){return Gy(t,e,n,i,r,o)*Gy(t,e,n,i,s,a)<=0&&Gy(r,o,s,a,t,e)*Gy(r,o,s,a,n,i)<=0}(t,e,n,i,r,o,s,a);let c=null;return l&&(c=function(t,e,n,i,r,o,s,a){let l,c=Uy(t,e,n,i,r,o,s,a);c&&(l=function(t,e,...n){let i,r=-1,o=1/0;for(let s=0,a=0,l=n.length;a<l;s++,a+=2)i=Xy(t,e,n[a],n[a+1]),i<o&&(o=i,r=s);return r}(c[0],c[1],t,e,n,i,r,o,s,a),1==l?c=Uy(n,i,t,e,r,o,s,a):2==l?c=Uy(r,o,s,a,t,e,n,i):3==l&&(c=Uy(s,a,r,o,t,e,n,i)));c&&function(t,e,n,i,r,o,s,a,l){let c=t[0],u=t[1];c=Vy(c,e,i),c=Vy(c,o,a),u=Vy(u,n,r),u=Vy(u,s,l),t[0]=c,t[1]=u}(c,t,e,n,i,r,o,s,a);return c}(t,e,n,i,r,o,s,a),c?function(t,e,n,i,r,o,s,a){return t==r&&e==o||t==s&&e==a||n==r&&i==o||n==s&&i==a}(t,e,n,i,r,o,s,a)&&(c=null):c=function(t,e,n,i,r,o,s,a){const l=Math.min(t,n,r,s),c=Math.max(t,n,r,s),u=Math.min(e,i,o,a),h=Math.max(e,i,o,a),p=h-u>c-l;let f=[];(p?Yy(e,u,h):Yy(t,l,c))&&f.push(t,e);(p?Yy(i,u,h):Yy(n,l,c))&&f.push(n,i);(p?Yy(o,u,h):Yy(r,l,c))&&f.push(r,o);(p?Yy(a,u,h):Yy(s,l,c))&&f.push(s,a);(2!=f.length&&4!=f.length||4==f.length&&f[0]==f[2]&&f[1]==f[3])&&(f=null);return f}(t,e,n,i,r,o,s,a)),c}function Gy(t,e,n,i,r,o){return zy(t-r,e-o,n-r,i-o)}function zy(t,e,n,i){return t*i-e*n}function Uy(t,e,n,i,r,o,s,a){const l=zy(n-t,i-e,s-r,a-o);let c;if(0===l)return null;const u=Gy(r,o,s,a,t,e)/l;return c=l<=1e-18&&l>=-1e-18?function(t,e,n,i,r,o,s,a){let l=null;qy(t,r,s)||qy(e,o,a)?qy(n,r,s)||qy(i,o,a)?qy(r,t,n)||qy(o,e,i)?qy(s,t,n)||qy(a,e,i)||(l=[s,a]):l=[r,o]:l=[n,i]:l=[t,e];return l}(t,e,n,i,r,o,s,a):[t+u*(n-t),e+u*(i-e)],c}function qy(t,e,n){let i;return i=e<n?t<e||t>n:e>n?t>e||t<n:t!=e,i}function Xy(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}function Vy(t,e,n){let i;return qy(t,e,n)&&(i=Math.abs(t-e)<Math.abs(t-n)?e:n,Math.abs(t-i),t=i),t}function Yy(t,e,n){return t>e&&t<n}function Hy(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Wy(t,e,n,i){let r,o,s=n,a=i;for(;s<i;){for(r=t[e[n+i>>2<<1]];s<=a;){for(;t[e[s]]<r;)s+=2;for(;t[e[a]]>r;)a-=2;s<=a&&(o=e[s],e[s]=e[a],e[a]=o,o=e[s+1],e[s+1]=e[a+1],e[a+1]=o,s+=2,a-=2)}if(a-n<40?Zy(t,e,n,a):Wy(t,e,n,a),i-s<40)return void Zy(t,e,s,i);n=s,a=i}}function Zy(t,e,n,i){let r,o;for(let s=n+2;s<=i;s+=2){let i;for(r=e[s],o=e[s+1],i=s-2;i>=n&&t[r]<t[e[i]];i-=2)e[i+2]=e[i],e[i+3]=e[i+1];e[i+2]=r,e[i+3]=o}}function $y(t,e,n,i,r){const o=t[0],s=t[1];e=Ky(o,s,e[0],e[1],i,r),n=Ky(o,s,n[0],n[1],i,r);const a=e[0]<n[0]?e:n;return{x:o,y:s,a,b:a==e?n:e}}function Ky(t,e,n,i,r,o){let s=n<i?n:i,a=s===n?i:n;return r[s]==t&&o[s]==e?a=s:r[a]==t&&o[a]==e&&(s=a),[s,a]}function Jy(t){const e={};return t.filter((t=>{const n=function(t){return`${t.a.join(",")};${t.b.join(",")}`}(t);return!(n in e)&&(e[n]=!0,!0)}))}class Qy{constructor(t,e){this._i=0,this._n=0,this._inc=1,this.i=0,this.x=0,this.y=0,this._xx=t,this._yy=e}}function tv(t,e,n,i){let r=0|n;const o=isNaN(i)?t.length-r:i+r;let s,a,l,c,u,h;if(!(o>0))return[void 0,void 0,void 0,void 0];for(l=u=t[r],c=h=e[r],r++;r<o;r++)s=t[r],a=e[r],s<l&&(l=s),s>u&&(u=s),a<c&&(c=a),a>h&&(h=a);return[l,c,u,h]}class ev{constructor(...t){t.length>0&&this.setBounds(t)}cloneBounds(){return this.clone()}clone(){return new ev(this.xmin,this.ymin,this.xmax,this.ymax)}width(){return this.xmax-this.xmin||0}height(){return this.ymax-this.ymin||0}setBounds(t,e,n,i){return 1==arguments.length&&(Fy(t)?(e=t[1],n=t[2],i=t[3],t=t[0]):(e=t.ymin,n=t.xmax,i=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=i,(t>n||e>i)&&this.update(),this}update(){let t;this.xmin>this.xmax&&(t=this.xmin,this.xmin=this.xmax,this.xmax=t),this.ymin>this.ymax&&(t=this.ymin,this.ymin=this.ymax,this.ymax=t)}mergeBounds(t,...e){let n,i,r,o;return t instanceof ev?(n=t.xmin,i=t.ymin,r=t.xmax,o=t.ymax):3==e.length?(n=t,i=e[0],r=e[1],o=e[2]):4==t.length?(n=t[0],i=t[1],r=t[2],o=t[3]):Dy("Bounds#mergeBounds() invalid argument:",t),void 0===this.xmin?this.setBounds(n,i,r,o):(n<this.xmin&&(this.xmin=n),i<this.ymin&&(this.ymin=i),r>this.xmax&&(this.xmax=r),o>this.ymax&&(this.ymax=o)),this}}const nv=134217729,iv=33306690738754706e-32;function rv(t,e,n,i,r){let o,s,a,l,c=e[0],u=i[0],h=0,p=0;u>c==u>-c?(o=c,c=e[++h]):(o=u,u=i[++p]);let f=0;if(h<t&&p<n)for(u>c==u>-c?(s=c+o,a=o-(s-c),c=e[++h]):(s=u+o,a=o-(s-u),u=i[++p]),o=s,0!==a&&(r[f++]=a);h<t&&p<n;)u>c==u>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++h]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++p]),o=s,0!==a&&(r[f++]=a);for(;h<t;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++h],o=s,0!==a&&(r[f++]=a);for(;p<n;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++p],o=s,0!==a&&(r[f++]=a);return 0===o&&0!==f||(r[f++]=o),f}function ov(t){return new Float64Array(t)}const sv=22204460492503146e-32,av=11093356479670487e-47,lv=ov(4),cv=ov(8),uv=ov(12),hv=ov(16),pv=ov(4);function fv(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),l=s-a;if(0===s||0===a||s>0!=a>0)return l;const c=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*c?l:-function(t,e,n,i,r,o,s){let a,l,c,u,h,p,f,d,g,m,y,v,_,x,b,w,E,S;const C=t-r,I=n-r,M=e-o,L=i-o;x=C*L,p=nv*C,f=p-(p-C),d=C-f,p=nv*L,g=p-(p-L),m=L-g,b=d*m-(x-f*g-d*g-f*m),w=M*I,p=nv*M,f=p-(p-M),d=M-f,p=nv*I,g=p-(p-I),m=I-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,lv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,lv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,lv[2]=v-(S-h)+(y-h),lv[3]=S;let T=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,lv),P=sv*s;if(T>=P||-T>=P)return T;if(h=t-C,a=t-(C+h)+(h-r),h=n-I,c=n-(I+h)+(h-r),h=e-M,l=e-(M+h)+(h-o),h=i-L,u=i-(L+h)+(h-o),0===a&&0===l&&0===c&&0===u)return T;if(P=av*s+iv*Math.abs(T),T+=C*u+L*a-(M*c+I*l),T>=P||-T>=P)return T;x=a*L,p=nv*a,f=p-(p-a),d=a-f,p=nv*L,g=p-(p-L),m=L-g,b=d*m-(x-f*g-d*g-f*m),w=l*I,p=nv*l,f=p-(p-l),d=l-f,p=nv*I,g=p-(p-I),m=I-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,pv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,pv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,pv[2]=v-(S-h)+(y-h),pv[3]=S;const O=rv(4,lv,4,pv,cv);x=C*u,p=nv*C,f=p-(p-C),d=C-f,p=nv*u,g=p-(p-u),m=u-g,b=d*m-(x-f*g-d*g-f*m),w=M*c,p=nv*M,f=p-(p-M),d=M-f,p=nv*c,g=p-(p-c),m=c-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,pv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,pv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,pv[2]=v-(S-h)+(y-h),pv[3]=S;const R=rv(O,cv,4,pv,uv);x=a*u,p=nv*a,f=p-(p-a),d=a-f,p=nv*u,g=p-(p-u),m=u-g,b=d*m-(x-f*g-d*g-f*m),w=l*c,p=nv*l,f=p-(p-l),d=l-f,p=nv*c,g=p-(p-c),m=c-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,pv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,pv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,pv[2]=v-(S-h)+(y-h),pv[3]=S;const A=rv(R,uv,4,pv,hv);return hv[A-1]}(t,e,n,i,r,o,c)}ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(8),ov(8),ov(8),ov(4),ov(8),ov(8),ov(8),ov(12);ov(192),ov(192);ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(8),ov(8),ov(8),ov(8),ov(8),ov(8),ov(8),ov(8),ov(8),ov(4),ov(4),ov(4),ov(8),ov(16),ov(16),ov(16),ov(32),ov(32),ov(48),ov(64);ov(1152),ov(1152);ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(4),ov(24),ov(24),ov(24),ov(24),ov(24),ov(24),ov(24),ov(24),ov(24),ov(24),ov(1152),ov(1152),ov(1152),ov(1152),ov(1152),ov(2304),ov(2304),ov(3456),ov(5760),ov(8),ov(8),ov(8),ov(16),ov(24),ov(48),ov(48),ov(96),ov(192),ov(384),ov(384),ov(384),ov(768);ov(96),ov(96),ov(96),ov(1152);const dv=Math.pow(2,-52),gv=new Uint32Array(512);class mv{static from(t,e=wv,n=Ev){const i=t.length,r=new Float64Array(2*i);for(let o=0;o<i;o++){const i=t[o];r[2*o]=e(i),r[2*o+1]=n(i)}return new mv(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:r}=this,o=t.length>>1;let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let e=0;e<o;e++){const n=t[2*e],i=t[2*e+1];n<s&&(s=n),i<a&&(a=i),n>l&&(l=n),i>c&&(c=i),this._ids[e]=e}const u=(s+l)/2,h=(a+c)/2;let p,f,d,g=1/0;for(let e=0;e<o;e++){const n=yv(u,h,t[2*e],t[2*e+1]);n<g&&(p=e,g=n)}const m=t[2*p],y=t[2*p+1];g=1/0;for(let e=0;e<o;e++){if(e===p)continue;const n=yv(m,y,t[2*e],t[2*e+1]);n<g&&n>0&&(f=e,g=n)}let v=t[2*f],_=t[2*f+1],x=1/0;for(let e=0;e<o;e++){if(e===p||e===f)continue;const n=_v(m,y,v,_,t[2*e],t[2*e+1]);n<x&&(d=e,x=n)}let b=t[2*d],w=t[2*d+1];if(x===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];xv(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,i=-1/0;t<o;t++){const r=this._ids[t];this._dists[r]>i&&(e[n++]=r,i=this._dists[r])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(fv(m,y,v,_,b,w)<0){const t=f,e=v,n=_;f=d,v=b,_=w,d=t,b=e,w=n}const E=function(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,c=o-e,u=s*s+a*a,h=l*l+c*c,p=.5/(s*c-a*l);return{x:t+(c*u-a*h)*p,y:e+(s*h-l*u)*p}}(m,y,v,_,b,w);this._cx=E.x,this._cy=E.y;for(let e=0;e<o;e++)this._dists[e]=yv(t[2*e],t[2*e+1],E.x,E.y);xv(this._ids,this._dists,0,o-1),this._hullStart=p;let S=3;n[p]=e[d]=f,n[f]=e[p]=d,n[d]=e[f]=p,i[p]=0,i[f]=1,i[d]=2,r.fill(-1),r[this._hashKey(m,y)]=p,r[this._hashKey(v,_)]=f,r[this._hashKey(b,w)]=d,this.trianglesLen=0,this._addTriangle(p,f,d,-1,-1,-1);for(let o,s,a=0;a<this._ids.length;a++){const l=this._ids[a],c=t[2*l],u=t[2*l+1];if(a>0&&Math.abs(c-o)<=dv&&Math.abs(u-s)<=dv)continue;if(o=c,s=u,l===p||l===f||l===d)continue;let h=0;for(let t=0,e=this._hashKey(c,u);t<this._hashSize&&(h=r[(e+t)%this._hashSize],-1===h||h===n[h]);t++);h=e[h];let g,m=h;for(;g=n[m],fv(c,u,t[2*m],t[2*m+1],t[2*g],t[2*g+1])>=0;)if(m=g,m===h){m=-1;break}if(-1===m)continue;let y=this._addTriangle(m,l,n[m],-1,-1,i[m]);i[l]=this._legalize(y+2),i[m]=y,S++;let v=n[m];for(;g=n[v],fv(c,u,t[2*v],t[2*v+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(v,l,g,i[l],-1,i[v]),i[l]=this._legalize(y+2),n[v]=v,S--,v=g;if(m===h)for(;g=e[m],fv(c,u,t[2*g],t[2*g+1],t[2*m],t[2*m+1])<0;)y=this._addTriangle(g,l,m,-1,i[m],i[g]),this._legalize(y+2),i[g]=y,n[m]=m,S--,m=g;this._hullStart=e[l]=m,n[m]=e[v]=l,n[l]=v,r[this._hashKey(c,u)]=l,r[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(S);for(let t=0,e=this._hullStart;t<S;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let r=0,o=0;for(;;){const s=n[t],a=t-t%3;if(o=a+(t+2)%3,-1===s){if(0===r)break;t=gv[--r];continue}const l=s-s%3,c=a+(t+1)%3,u=l+(s+2)%3,h=e[o],p=e[t],f=e[c],d=e[u];if(vv(i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*f],i[2*f+1],i[2*d],i[2*d+1])){e[t]=d,e[s]=h;const i=n[u];if(-1===i){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,i),this._link(s,n[o]),this._link(o,u);const a=l+(s+1)%3;r<gv.length&&(gv[r++]=a)}else{if(0===r)break;t=gv[--r]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,i),this._link(s+1,r),this._link(s+2,o),this.trianglesLen+=3,s}}function yv(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}function vv(t,e,n,i,r,o,s,a){const l=t-s,c=e-a,u=n-s,h=i-a,p=r-s,f=o-a,d=u*u+h*h,g=p*p+f*f;return l*(h*g-d*f)-c*(u*g-d*p)+(l*l+c*c)*(u*f-h*p)<0}function _v(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,c=o-e,u=s*s+a*a,h=l*l+c*c,p=.5/(s*c-a*l),f=(c*u-a*h)*p,d=(s*h-l*u)*p;return f*f+d*d}function xv(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const i=t[r],o=e[i];let s=r-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=i}else{let r=n+1,o=i;bv(t,n+i>>1,r),e[t[n]]>e[t[i]]&&bv(t,n,i),e[t[r]]>e[t[i]]&&bv(t,r,i),e[t[n]]>e[t[r]]&&bv(t,n,r);const s=t[r],a=e[s];for(;;){do{r++}while(e[t[r]]<a);do{o--}while(e[t[o]]>a);if(o<r)break;bv(t,r,o)}t[n+1]=t[o],t[o]=s,i-r+1>=o-n?(xv(t,e,r,i),xv(t,e,n,o-1)):(xv(t,e,n,o-1),xv(t,e,r,i))}}function bv(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function wv(t){return t[0]}function Ev(t){return t[1]}const Sv=134217729,Cv=33306690738754706e-32;function Iv(t,e,n,i,r){let o,s,a,l,c=e[0],u=i[0],h=0,p=0;u>c==u>-c?(o=c,c=e[++h]):(o=u,u=i[++p]);let f=0;if(h<t&&p<n)for(u>c==u>-c?(s=c+o,a=o-(s-c),c=e[++h]):(s=u+o,a=o-(s-u),u=i[++p]),o=s,0!==a&&(r[f++]=a);h<t&&p<n;)u>c==u>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++h]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++p]),o=s,0!==a&&(r[f++]=a);for(;h<t;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++h],o=s,0!==a&&(r[f++]=a);for(;p<n;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++p],o=s,0!==a&&(r[f++]=a);return 0===o&&0!==f||(r[f++]=o),f}function Mv(t,e,n,i,r,o,s,a){return Iv(Iv(t,e,n,i,s),s,r,o,a)}function Lv(t,e,n,i){let r,o,s,a,l,c,u,h,p,f,d;u=Sv*n,f=u-(u-n),d=n-f;let g=e[0];r=g*n,u=Sv*g,h=u-(u-g),p=g-h,s=p*d-(r-h*f-p*f-h*d);let m=0;0!==s&&(i[m++]=s);for(let y=1;y<t;y++)g=e[y],a=g*n,u=Sv*g,h=u-(u-g),p=g-h,l=p*d-(a-h*f-p*f-h*d),o=r+l,c=o-r,s=r-(o-c)+(l-c),0!==s&&(i[m++]=s),r=a+o,s=o-(r-a),0!==s&&(i[m++]=s);return 0===r&&0!==m||(i[m++]=r),m}function Tv(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function Pv(t){return new Float64Array(t)}const Ov=33306690738754716e-32,Rv=22204460492503146e-32,Av=11093356479670487e-47,kv=Pv(4),Nv=Pv(8),Dv=Pv(12),Fv=Pv(16),jv=Pv(4);function Bv(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),l=s-a;if(0===s||0===a||s>0!=a>0)return l;const c=Math.abs(s+a);return Math.abs(l)>=Ov*c?l:-function(t,e,n,i,r,o,s){let a,l,c,u,h,p,f,d,g,m,y,v,_,x,b,w,E,S;const C=t-r,I=n-r,M=e-o,L=i-o;x=C*L,p=Sv*C,f=p-(p-C),d=C-f,p=Sv*L,g=p-(p-L),m=L-g,b=d*m-(x-f*g-d*g-f*m),w=M*I,p=Sv*M,f=p-(p-M),d=M-f,p=Sv*I,g=p-(p-I),m=I-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,kv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,kv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,kv[2]=v-(S-h)+(y-h),kv[3]=S;let T=Tv(4,kv),P=Rv*s;if(T>=P||-T>=P)return T;if(h=t-C,a=t-(C+h)+(h-r),h=n-I,c=n-(I+h)+(h-r),h=e-M,l=e-(M+h)+(h-o),h=i-L,u=i-(L+h)+(h-o),0===a&&0===l&&0===c&&0===u)return T;if(P=Av*s+Cv*Math.abs(T),T+=C*u+L*a-(M*c+I*l),T>=P||-T>=P)return T;x=a*L,p=Sv*a,f=p-(p-a),d=a-f,p=Sv*L,g=p-(p-L),m=L-g,b=d*m-(x-f*g-d*g-f*m),w=l*I,p=Sv*l,f=p-(p-l),d=l-f,p=Sv*I,g=p-(p-I),m=I-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,jv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,jv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,jv[2]=v-(S-h)+(y-h),jv[3]=S;const O=Iv(4,kv,4,jv,Nv);x=C*u,p=Sv*C,f=p-(p-C),d=C-f,p=Sv*u,g=p-(p-u),m=u-g,b=d*m-(x-f*g-d*g-f*m),w=M*c,p=Sv*M,f=p-(p-M),d=M-f,p=Sv*c,g=p-(p-c),m=c-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,jv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,jv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,jv[2]=v-(S-h)+(y-h),jv[3]=S;const R=Iv(O,Nv,4,jv,Dv);x=a*u,p=Sv*a,f=p-(p-a),d=a-f,p=Sv*u,g=p-(p-u),m=u-g,b=d*m-(x-f*g-d*g-f*m),w=l*c,p=Sv*l,f=p-(p-l),d=l-f,p=Sv*c,g=p-(p-c),m=c-g,E=d*m-(w-f*g-d*g-f*m),y=b-E,h=b-y,jv[0]=b-(y+h)+(h-E),v=x+y,h=v-x,_=x-(v-h)+(y-h),y=_-w,h=_-y,jv[1]=_-(y+h)+(h-w),S=v+y,h=S-v,jv[2]=v-(S-h)+(y-h),jv[3]=S;const A=Iv(R,Dv,4,jv,Fv);return Fv[A-1]}(t,e,n,i,r,o,c)}Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(8),Pv(8),Pv(8),Pv(4),Pv(8),Pv(8),Pv(8),Pv(12);Pv(192),Pv(192);const Gv=4440892098500632e-31,zv=5423418723394464e-46,Uv=Pv(4),qv=Pv(4),Xv=Pv(4),Vv=Pv(4),Yv=Pv(4),Hv=Pv(4),Wv=Pv(4),Zv=Pv(4),$v=Pv(8),Kv=Pv(8),Jv=Pv(8),Qv=Pv(8),t_=Pv(8),e_=Pv(8),n_=Pv(8),i_=Pv(8),r_=Pv(8),o_=Pv(4),s_=Pv(4),a_=Pv(4),l_=Pv(8),c_=Pv(16),u_=Pv(16),h_=Pv(16),p_=Pv(32),f_=Pv(32),d_=Pv(48),g_=Pv(64);let m_=Pv(1152),y_=Pv(1152);function v_(t,e,n){t=Iv(t,m_,e,n,y_);const i=m_;return m_=y_,y_=i,t}function __(t,e,n,i,r,o,s,a){const l=t-s,c=n-s,u=r-s,h=e-a,p=i-a,f=o-a,d=c*f,g=u*p,m=l*l+h*h,y=u*h,v=l*f,_=c*c+p*p,x=l*p,b=c*h,w=u*u+f*f,E=m*(d-g)+_*(y-v)+w*(x-b),S=(Math.abs(d)+Math.abs(g))*m+(Math.abs(y)+Math.abs(v))*_+(Math.abs(x)+Math.abs(b))*w,C=11102230246251577e-31*S;return E>C||-E>C?E:function(t,e,n,i,r,o,s,a,l){let c,u,h,p,f,d,g,m,y,v,_,x,b,w,E,S,C,I,M,L,T,P,O,R,A,k,N,D,F,j,B,G,z,U,q;const X=t-s,V=n-s,Y=r-s,H=e-a,W=i-a,Z=o-a;B=V*Z,O=Sv*V,R=O-(O-V),A=V-R,O=Sv*Z,k=O-(O-Z),N=Z-k,G=A*N-(B-R*k-A*k-R*N),z=Y*W,O=Sv*Y,R=O-(O-Y),A=Y-R,O=Sv*W,k=O-(O-W),N=W-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,Uv[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,Uv[1]=j-(D+P)+(P-z),q=F+D,P=q-F,Uv[2]=F-(q-P)+(D-P),Uv[3]=q,B=Y*H,O=Sv*Y,R=O-(O-Y),A=Y-R,O=Sv*H,k=O-(O-H),N=H-k,G=A*N-(B-R*k-A*k-R*N),z=X*Z,O=Sv*X,R=O-(O-X),A=X-R,O=Sv*Z,k=O-(O-Z),N=Z-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,qv[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,qv[1]=j-(D+P)+(P-z),q=F+D,P=q-F,qv[2]=F-(q-P)+(D-P),qv[3]=q,B=X*W,O=Sv*X,R=O-(O-X),A=X-R,O=Sv*W,k=O-(O-W),N=W-k,G=A*N-(B-R*k-A*k-R*N),z=V*H,O=Sv*V,R=O-(O-V),A=V-R,O=Sv*H,k=O-(O-H),N=H-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,Xv[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,Xv[1]=j-(D+P)+(P-z),q=F+D,P=q-F,Xv[2]=F-(q-P)+(D-P),Xv[3]=q,c=Iv(Iv(Iv(Lv(Lv(4,Uv,X,l_),l_,X,c_),c_,Lv(Lv(4,Uv,H,l_),l_,H,u_),u_,p_),p_,Iv(Lv(Lv(4,qv,V,l_),l_,V,c_),c_,Lv(Lv(4,qv,W,l_),l_,W,u_),u_,f_),f_,g_),g_,Iv(Lv(Lv(4,Xv,Y,l_),l_,Y,c_),c_,Lv(Lv(4,Xv,Z,l_),l_,Z,u_),u_,p_),p_,m_);let $=Tv(c,m_),K=Gv*l;if($>=K||-$>=K)return $;if(P=t-X,u=t-(X+P)+(P-s),P=e-H,f=e-(H+P)+(P-a),P=n-V,h=n-(V+P)+(P-s),P=i-W,d=i-(W+P)+(P-a),P=r-Y,p=r-(Y+P)+(P-s),P=o-Z,g=o-(Z+P)+(P-a),0===u&&0===h&&0===p&&0===f&&0===d&&0===g)return $;if(K=zv*l+Cv*Math.abs($),$+=(X*X+H*H)*(V*g+Z*h-(W*p+Y*d))+2*(X*u+H*f)*(V*Z-W*Y)+((V*V+W*W)*(Y*f+H*p-(Z*u+X*g))+2*(V*h+W*d)*(Y*H-Z*X))+((Y*Y+Z*Z)*(X*d+W*u-(H*h+V*f))+2*(Y*p+Z*g)*(X*W-H*V)),$>=K||-$>=K)return $;if(0===h&&0===d&&0===p&&0===g||(B=X*X,O=Sv*X,R=O-(O-X),A=X-R,G=A*A-(B-R*R-(R+R)*A),z=H*H,O=Sv*H,R=O-(O-H),A=H-R,U=A*A-(z-R*R-(R+R)*A),D=G+U,P=D-G,Vv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Vv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Vv[2]=F-(q-P)+(D-P),Vv[3]=q),0===p&&0===g&&0===u&&0===f||(B=V*V,O=Sv*V,R=O-(O-V),A=V-R,G=A*A-(B-R*R-(R+R)*A),z=W*W,O=Sv*W,R=O-(O-W),A=W-R,U=A*A-(z-R*R-(R+R)*A),D=G+U,P=D-G,Yv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Yv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Yv[2]=F-(q-P)+(D-P),Yv[3]=q),0===u&&0===f&&0===h&&0===d||(B=Y*Y,O=Sv*Y,R=O-(O-Y),A=Y-R,G=A*A-(B-R*R-(R+R)*A),z=Z*Z,O=Sv*Z,R=O-(O-Z),A=Z-R,U=A*A-(z-R*R-(R+R)*A),D=G+U,P=D-G,Hv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Hv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Hv[2]=F-(q-P)+(D-P),Hv[3]=q),0!==u&&(m=Lv(4,Uv,u,$v),c=v_(c,Mv(Lv(m,$v,2*X,c_),c_,Lv(Lv(4,Hv,u,l_),l_,W,u_),u_,Lv(Lv(4,Yv,u,l_),l_,-Z,h_),h_,p_,d_),d_)),0!==f&&(y=Lv(4,Uv,f,Kv),c=v_(c,Mv(Lv(y,Kv,2*H,c_),c_,Lv(Lv(4,Yv,f,l_),l_,Y,u_),u_,Lv(Lv(4,Hv,f,l_),l_,-V,h_),h_,p_,d_),d_)),0!==h&&(v=Lv(4,qv,h,Jv),c=v_(c,Mv(Lv(v,Jv,2*V,c_),c_,Lv(Lv(4,Vv,h,l_),l_,Z,u_),u_,Lv(Lv(4,Hv,h,l_),l_,-H,h_),h_,p_,d_),d_)),0!==d&&(_=Lv(4,qv,d,Qv),c=v_(c,Mv(Lv(_,Qv,2*W,c_),c_,Lv(Lv(4,Hv,d,l_),l_,X,u_),u_,Lv(Lv(4,Vv,d,l_),l_,-Y,h_),h_,p_,d_),d_)),0!==p&&(x=Lv(4,Xv,p,t_),c=v_(c,Mv(Lv(x,t_,2*Y,c_),c_,Lv(Lv(4,Yv,p,l_),l_,H,u_),u_,Lv(Lv(4,Vv,p,l_),l_,-W,h_),h_,p_,d_),d_)),0!==g&&(b=Lv(4,Xv,g,e_),c=v_(c,Mv(Lv(b,e_,2*Z,c_),c_,Lv(Lv(4,Vv,g,l_),l_,V,u_),u_,Lv(Lv(4,Yv,g,l_),l_,-X,h_),h_,p_,d_),d_)),0!==u||0!==f){if(0!==h||0!==d||0!==p||0!==g?(B=h*Z,O=Sv*h,R=O-(O-h),A=h-R,O=Sv*Z,k=O-(O-Z),N=Z-k,G=A*N-(B-R*k-A*k-R*N),z=V*g,O=Sv*V,R=O-(O-V),A=V-R,O=Sv*g,k=O-(O-g),N=g-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Wv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Wv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Wv[2]=F-(q-P)+(D-P),Wv[3]=q,B=p*-W,O=Sv*p,R=O-(O-p),A=p-R,O=Sv*-W,k=O-(O- -W),N=-W-k,G=A*N-(B-R*k-A*k-R*N),z=Y*-d,O=Sv*Y,R=O-(O-Y),A=Y-R,O=Sv*-d,k=O-(O- -d),N=-d-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Zv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Zv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Zv[2]=F-(q-P)+(D-P),Zv[3]=q,E=Iv(4,Wv,4,Zv,i_),B=h*g,O=Sv*h,R=O-(O-h),A=h-R,O=Sv*g,k=O-(O-g),N=g-k,G=A*N-(B-R*k-A*k-R*N),z=p*d,O=Sv*p,R=O-(O-p),A=p-R,O=Sv*d,k=O-(O-d),N=d-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,s_[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,s_[1]=j-(D+P)+(P-z),q=F+D,P=q-F,s_[2]=F-(q-P)+(D-P),s_[3]=q,I=4):(i_[0]=0,E=1,s_[0]=0,I=1),0!==u){const t=Lv(E,i_,u,h_);c=v_(c,Iv(Lv(m,$v,u,c_),c_,Lv(t,h_,2*X,p_),p_,d_),d_);const e=Lv(I,s_,u,l_);c=v_(c,Mv(Lv(e,l_,2*X,c_),c_,Lv(e,l_,u,u_),u_,Lv(t,h_,u,p_),p_,f_,g_),g_),0!==d&&(c=v_(c,Lv(Lv(4,Hv,u,l_),l_,d,c_),c_)),0!==g&&(c=v_(c,Lv(Lv(4,Yv,-u,l_),l_,g,c_),c_))}if(0!==f){const t=Lv(E,i_,f,h_);c=v_(c,Iv(Lv(y,Kv,f,c_),c_,Lv(t,h_,2*H,p_),p_,d_),d_);const e=Lv(I,s_,f,l_);c=v_(c,Mv(Lv(e,l_,2*H,c_),c_,Lv(e,l_,f,u_),u_,Lv(t,h_,f,p_),p_,f_,g_),g_)}}if(0!==h||0!==d){if(0!==p||0!==g||0!==u||0!==f?(B=p*H,O=Sv*p,R=O-(O-p),A=p-R,O=Sv*H,k=O-(O-H),N=H-k,G=A*N-(B-R*k-A*k-R*N),z=Y*f,O=Sv*Y,R=O-(O-Y),A=Y-R,O=Sv*f,k=O-(O-f),N=f-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Wv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Wv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Wv[2]=F-(q-P)+(D-P),Wv[3]=q,L=-Z,T=-g,B=u*L,O=Sv*u,R=O-(O-u),A=u-R,O=Sv*L,k=O-(O-L),N=L-k,G=A*N-(B-R*k-A*k-R*N),z=X*T,O=Sv*X,R=O-(O-X),A=X-R,O=Sv*T,k=O-(O-T),N=T-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Zv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Zv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Zv[2]=F-(q-P)+(D-P),Zv[3]=q,S=Iv(4,Wv,4,Zv,r_),B=p*f,O=Sv*p,R=O-(O-p),A=p-R,O=Sv*f,k=O-(O-f),N=f-k,G=A*N-(B-R*k-A*k-R*N),z=u*g,O=Sv*u,R=O-(O-u),A=u-R,O=Sv*g,k=O-(O-g),N=g-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,a_[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,a_[1]=j-(D+P)+(P-z),q=F+D,P=q-F,a_[2]=F-(q-P)+(D-P),a_[3]=q,M=4):(r_[0]=0,S=1,a_[0]=0,M=1),0!==h){const t=Lv(S,r_,h,h_);c=v_(c,Iv(Lv(v,Jv,h,c_),c_,Lv(t,h_,2*V,p_),p_,d_),d_);const e=Lv(M,a_,h,l_);c=v_(c,Mv(Lv(e,l_,2*V,c_),c_,Lv(e,l_,h,u_),u_,Lv(t,h_,h,p_),p_,f_,g_),g_),0!==g&&(c=v_(c,Lv(Lv(4,Vv,h,l_),l_,g,c_),c_)),0!==f&&(c=v_(c,Lv(Lv(4,Hv,-h,l_),l_,f,c_),c_))}if(0!==d){const t=Lv(S,r_,d,h_);c=v_(c,Iv(Lv(_,Qv,d,c_),c_,Lv(t,h_,2*W,p_),p_,d_),d_);const e=Lv(M,a_,d,l_);c=v_(c,Mv(Lv(e,l_,2*W,c_),c_,Lv(e,l_,d,u_),u_,Lv(t,h_,d,p_),p_,f_,g_),g_)}}if(0!==p||0!==g){if(0!==u||0!==f||0!==h||0!==d?(B=u*W,O=Sv*u,R=O-(O-u),A=u-R,O=Sv*W,k=O-(O-W),N=W-k,G=A*N-(B-R*k-A*k-R*N),z=X*d,O=Sv*X,R=O-(O-X),A=X-R,O=Sv*d,k=O-(O-d),N=d-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Wv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Wv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Wv[2]=F-(q-P)+(D-P),Wv[3]=q,L=-H,T=-f,B=h*L,O=Sv*h,R=O-(O-h),A=h-R,O=Sv*L,k=O-(O-L),N=L-k,G=A*N-(B-R*k-A*k-R*N),z=V*T,O=Sv*V,R=O-(O-V),A=V-R,O=Sv*T,k=O-(O-T),N=T-k,U=A*N-(z-R*k-A*k-R*N),D=G+U,P=D-G,Zv[0]=G-(D-P)+(U-P),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j+z,P=D-j,Zv[1]=j-(D-P)+(z-P),q=F+D,P=q-F,Zv[2]=F-(q-P)+(D-P),Zv[3]=q,w=Iv(4,Wv,4,Zv,n_),B=u*d,O=Sv*u,R=O-(O-u),A=u-R,O=Sv*d,k=O-(O-d),N=d-k,G=A*N-(B-R*k-A*k-R*N),z=h*f,O=Sv*h,R=O-(O-h),A=h-R,O=Sv*f,k=O-(O-f),N=f-k,U=A*N-(z-R*k-A*k-R*N),D=G-U,P=G-D,o_[0]=G-(D+P)+(P-U),F=B+D,P=F-B,j=B-(F-P)+(D-P),D=j-z,P=j-D,o_[1]=j-(D+P)+(P-z),q=F+D,P=q-F,o_[2]=F-(q-P)+(D-P),o_[3]=q,C=4):(n_[0]=0,w=1,o_[0]=0,C=1),0!==p){const t=Lv(w,n_,p,h_);c=v_(c,Iv(Lv(x,t_,p,c_),c_,Lv(t,h_,2*Y,p_),p_,d_),d_);const e=Lv(C,o_,p,l_);c=v_(c,Mv(Lv(e,l_,2*Y,c_),c_,Lv(e,l_,p,u_),u_,Lv(t,h_,p,p_),p_,f_,g_),g_),0!==f&&(c=v_(c,Lv(Lv(4,Yv,p,l_),l_,f,c_),c_)),0!==d&&(c=v_(c,Lv(Lv(4,Vv,-p,l_),l_,d,c_),c_))}if(0!==g){const t=Lv(w,n_,g,h_);c=v_(c,Iv(Lv(b,e_,g,c_),c_,Lv(t,h_,2*Z,p_),p_,d_),d_);const e=Lv(C,o_,g,l_);c=v_(c,Mv(Lv(e,l_,2*Z,c_),c_,Lv(e,l_,g,u_),u_,Lv(t,h_,g,p_),p_,f_,g_),g_)}}return m_[c-1]}(t,e,n,i,r,o,s,a,S)}Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(4),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(24),Pv(1152),Pv(1152),Pv(1152),Pv(1152),Pv(1152),Pv(2304),Pv(2304),Pv(3456),Pv(5760),Pv(8),Pv(8),Pv(8),Pv(16),Pv(24),Pv(48),Pv(48),Pv(96),Pv(192),Pv(384),Pv(384),Pv(384),Pv(768);Pv(96),Pv(96),Pv(96),Pv(1152);class x_{constructor(t,e){this.W=t,this.bs=e}add(t){const e=this.W,n=t/e|0,i=t%e;return this.bs[n]|=1<<i,this}delete(t){const e=this.W,n=t/e|0,i=t%e;return this.bs[n]&=~(1<<i),this}set(t,e){const n=this.W,i=t/n|0,r=1<<t%n;return this.bs[i]^=(-e^this.bs[i])&r,e}has(t){const e=this.W,n=t/e|0,i=t%e;return!!(this.bs[n]&1<<i)}forEach(t){const e=this.W,n=this.bs,i=n.length;for(let r=0;r<i;r++){let i=0;for(;n[r]&&i<e;)n[r]&1<<i&&t(r*e+i),i++}return this}}class b_ extends x_{constructor(t){super(8,new Uint8Array(Math.ceil(t/8)).fill(0))}}function w_(t){return t%3==2?t-2:t+1}function E_(t){return t%3==0?t+2:t-1}class S_{constructor(t,e){if(!(t&&"object"==typeof t&&t.triangles&&t.halfedges&&t.coords))throw new Error("Expected an object with Delaunator output");if(t.triangles.length%3||t.halfedges.length!==t.triangles.length||t.coords.length%2)throw new Error("Delaunator output appears inconsistent");if(t.triangles.length<3)throw new Error("No edges in triangulation");this.del=t;const n=2**32-1,i=t.coords.length>>1,r=t.triangles.length;this.vertMap=new Uint32Array(i).fill(n),this.flips=new b_(r),this.consd=new b_(r);for(let e=0;e<r;e++){const i=t.triangles[e];this.vertMap[i]===n&&this.updateVert(e)}e&&this.constrainAll(e)}constrainOne(t,e){const{triangles:n,halfedges:i}=this.del,r=this.vertMap,o=this.consd,s=r[t];let a=s;do{const r=n[a],o=w_(a);if(r===e)return this.protect(a);const s=E_(a),l=n[s];if(l===e)return this.protect(o),o;if(this.intersectSegments(t,e,l,r)){a=s;break}a=i[o]}while(-1!==a&&a!==s);let l=a,c=-1;for(;-1!==a;){const r=i[a],s=E_(a),u=E_(r),h=w_(r);if(-1===r)throw new Error("Constraining edge exited the hull");if(o.has(a))throw new Error("Edge intersects already constrained edge");if(this.isCollinear(t,e,n[a])||this.isCollinear(t,e,n[r]))throw new Error("Constraining edge intersects point");if(this.intersectSegments(n[a],n[r],n[s],n[u])){if(this.flipDiagonal(a),this.intersectSegments(t,e,n[s],n[u])&&(-1===c&&(c=s),c===s))throw new Error("Infinite loop: flipped diagonal still intersects");n[u]===e?(l=u,a=c,c=-1):this.intersectSegments(t,e,n[h],n[u])&&(a=h)}else{if(-1===c&&(c=a),n[u]===e){if(a===c)throw new Error("Infinite loop: non-convex quadrilateral");a=c,c=-1;continue}if(this.intersectSegments(t,e,n[u],n[r]))a=u;else if(this.intersectSegments(t,e,n[h],n[u]))a=h;else if(c===a)throw new Error("Infinite loop: no further intersect after non-convex")}}const u=this.flips;this.protect(l);do{var h=0;u.forEach((t=>{u.delete(t);const e=i[t];-1!==e&&(u.delete(e),this.isDelaunay(t)||(this.flipDiagonal(t),h++))}))}while(h>0);return this.findEdge(t,e)}delaunify(t=!1){const e=this.del.halfedges,n=this.flips,i=this.consd,r=e.length;do{var o=0;for(let t=0;t<r;t++){if(i.has(t))continue;n.delete(t);const r=e[t];-1!==r&&(n.delete(r),this.isDelaunay(t)||(this.flipDiagonal(t),o++))}}while(t&&o>0);return this}constrainAll(t){const e=t.length;for(let n=0;n<e;n++){const e=t[n];this.constrainOne(e[0],e[1])}return this}isConstrained(t){return this.consd.has(t)}findEdge(t,e){const n=this.vertMap[e],{triangles:i,halfedges:r}=this.del;let o=n,s=-1;do{if(i[o]===t)return o;s=w_(o),o=r[s]}while(-1!==o&&o!==n);return i[w_(s)]===t?-s:1/0}protect(t){const e=this.del.halfedges[t],n=this.flips,i=this.consd;return n.delete(t),i.add(t),-1!==e?(n.delete(e),i.add(e),e):-t}markFlip(t){const e=this.del.halfedges,n=this.flips;if(this.consd.has(t))return!1;const i=e[t];return-1!==i&&(n.add(t),n.add(i)),!0}flipDiagonal(t){const{triangles:e,halfedges:n}=this.del,i=this.flips,r=this.consd,o=n[t],s=E_(t),a=w_(t),l=E_(o),c=w_(o),u=n[s],h=n[l];if(r.has(t))throw new Error("Trying to flip a constrained edge");return e[t]=e[l],n[t]=h,i.set(t,i.has(l))||r.set(t,r.has(l)),-1!==h&&(n[h]=t),n[s]=l,e[o]=e[s],n[o]=u,i.set(o,i.has(s))||r.set(o,r.has(s)),-1!==u&&(n[u]=o),n[l]=s,this.markFlip(t),this.markFlip(a),this.markFlip(o),this.markFlip(c),i.add(s),r.delete(s),i.add(l),r.delete(l),this.updateVert(t),this.updateVert(a),this.updateVert(o),this.updateVert(c),s}isDelaunay(t){const{triangles:e,halfedges:n}=this.del,i=n[t];if(-1===i)return!0;const r=e[E_(t)],o=e[t],s=e[w_(t)],a=e[E_(i)];return!this.inCircle(r,o,s,a)}updateVert(t){const{triangles:e,halfedges:n}=this.del,i=this.vertMap,r=e[t];let o=E_(t),s=n[o];for(;-1!==s&&s!==t;)o=E_(s),s=n[o];return i[r]=o,o}intersectSegments(t,e,n,i){const r=this.del.coords;return t!==n&&t!==i&&e!==n&&e!==i&&C_(r[2*t],r[2*t+1],r[2*e],r[2*e+1],r[2*n],r[2*n+1],r[2*i],r[2*i+1])}inCircle(t,e,n,i){const r=this.del.coords;return __(r[2*t],r[2*t+1],r[2*e],r[2*e+1],r[2*n],r[2*n+1],r[2*i],r[2*i+1])<0}isCollinear(t,e,n){const i=this.del.coords;return 0===Bv(i[2*t],i[2*t+1],i[2*e],i[2*e+1],i[2*n],i[2*n+1])}}function C_(t,e,n,i,r,o,s,a){const l=Bv(t,e,r,o,s,a),c=Bv(n,i,r,o,s,a);if(l>0&&c>0||l<0&&c<0)return!1;const u=Bv(r,o,t,e,n,i),h=Bv(s,a,t,e,n,i);return!(u>0&&h>0||u<0&&h<0)&&(0!==l||0!==c||0!==u||0!==h||!(Math.max(r,s)<Math.min(t,n)||Math.max(t,n)<Math.min(r,s)||Math.max(o,a)<Math.min(e,i)||Math.max(e,i)<Math.min(o,a)))}function I_(t,e,n){if(e||(e=[]),"object"!=typeof t||"FeatureCollection"!==t.type)throw"Argument points must be FeatureCollection";if(!Array.isArray(e))throw"Argument points must be Array of Array";const i=t.features.map((t=>t.geometry.coordinates)),r=mv.from(i);let o;const s=[];0!==r.triangles.length&&0!==e.length&&(o=new S_(r),o.constrainAll(e));for(let t=0;t<r.triangles.length;t+=3)s.push([r.triangles[t],r.triangles[t+1],r.triangles[t+2]]);const a=["a","b","c"];return(0,nr.uf)(s.map((e=>{const i={},r=e.map(((e,r)=>{const o=t.features[e],s=o.geometry.coordinates,l=[s[0],s[1]];return 3===s.length?l[2]=s[2]:i[a[r]]=o.properties[n],l}));return r[3]=r[0],(0,nr.yu)([r],i)})))}S_.intersectSegments=C_;const M_=2.00703;class L_{constructor(t={}){this.points=[],t.bounds?this.setBounds(t.bounds):(this.setWh(t.wh),this.vertexMode=t.vertexMode||L_.VERTEX_PLAIN),this.strictMode=t.strictMode||L_.MODE_AUTO,this.yaxisMode=t.yaxisMode||L_.YAXIS_INVERT,this.importance=t.importance||0,this.priority=t.priority||0,this.stateFull=t.stateFull||!1,t.points&&this.setPoints(t.points),t.edges&&this.setEdges(t.edges)}getFormatVersion(){return M_}setPoints(t){this.yaxisMode==L_.YAXIS_FOLLOW&&(t=t.map((t=>[t[0],[t[1][0],-1*t[1][1]]]))),this.points=t,this.tins=void 0,this.indexedTins=void 0}setEdges(t=[]){this.edges=U_(t),this.edgeNodes=void 0,this.tins=void 0,this.indexedTins=void 0}setBounds(t){this.bounds=t;let e=t[0][0],n=e,i=t[0][1],r=i;const o=[t[0]];for(let s=1;s<t.length;s++){const a=t[s];a[0]<e&&(e=a[0]),a[0]>n&&(n=a[0]),a[1]<i&&(i=a[1]),a[1]>r&&(r=a[1]),o.push(a)}o.push(t[0]),this.boundsPolygon=(0,nr.yu)([o]),this.xy=[e,i],this.wh=[n-e,r-i],this.vertexMode=L_.VERTEX_PLAIN,this.tins=void 0,this.indexedTins=void 0}setCompiled(t){if(t.version||!t.tins&&t.points&&t.tins_points){this.points=t.points,this.pointsWeightBuffer=!t.version||t.version<2.00703?["forw","bakw"].reduce(((e,n)=>{const i=t.weight_buffer[n];return i&&(e[n]=Object.keys(i).reduce(((t,e)=>(t[z_(e)]=i[e],t)),{})),e}),{}):t.weight_buffer,t.strict_status?this.strict_status=t.strict_status:t.kinks_points?this.strict_status=L_.STATUS_ERROR:2==t.tins_points.length?this.strict_status=L_.STATUS_LOOSE:this.strict_status=L_.STATUS_STRICT,this.vertices_params={forw:[t.vertices_params[0]],bakw:[t.vertices_params[1]]},this.vertices_params.forw[1]=[0,1,2,3].map((e=>{const n=G_(["c",`b${e}`,`b${(e+1)%4}`],t.points,t.edgeNodes||[],t.centroid_point,t.vertices_points,!1,M_);return(0,nr.uf)([n])})),this.vertices_params.bakw[1]=[0,1,2,3].map((e=>{const n=G_(["c",`b${e}`,`b${(e+1)%4}`],t.points,t.edgeNodes||[],t.centroid_point,t.vertices_points,!0,M_);return(0,nr.uf)([n])})),this.centroid={forw:(0,nr.xm)(t.centroid_point[0],{target:{geom:t.centroid_point[1],index:"c"}}),bakw:(0,nr.xm)(t.centroid_point[1],{target:{geom:t.centroid_point[0],index:"c"}})},this.edges=U_(t.edges||[]),this.edgeNodes=t.edgeNodes||[];const e=1==t.tins_points.length?0:1;this.tins={forw:(0,nr.uf)(t.tins_points[0].map((e=>G_(e,t.points,t.edgeNodes||[],t.centroid_point,t.vertices_points,!1,t.version)))),bakw:(0,nr.uf)(t.tins_points[e].map((e=>G_(e,t.points,t.edgeNodes||[],t.centroid_point,t.vertices_points,!0,t.version))))},this.addIndexedTin(),t.kinks_points&&(this.kinks={bakw:(0,nr.uf)(t.kinks_points.map((t=>(0,nr.xm)(t))))}),t.yaxisMode?this.yaxisMode=t.yaxisMode:this.yaxisMode=L_.YAXIS_INVERT,t.vertexMode&&(this.vertexMode=t.vertexMode),t.strictMode&&(this.strictMode=t.strictMode),t.bounds?(this.bounds=t.bounds,this.boundsPolygon=t.boundsPolygon,this.xy=t.xy,this.wh=t.wh):(this.xy=[0,0],t.wh&&(this.wh=t.wh),this.bounds=void 0,this.boundsPolygon=void 0)}else{t=JSON.parse(JSON.stringify(t).replace('"cent"','"c"').replace(/"bbox(\d+)"/g,'"b$1"')),this.tins=t.tins,this.addIndexedTin(),this.strict_status=t.strict_status,this.pointsWeightBuffer=t.weight_buffer,this.vertices_params=t.vertices_params,this.centroid=t.centroid,this.kinks=t.kinks;const e=[];for(let t=0;t<this.tins.forw.features.length;t++){const n=this.tins.forw.features[t];["a","b","c"].map(((t,i)=>{const r=n.geometry.coordinates[0][i],o=n.properties[t].geom,s=n.properties[t].index;e[s]=[r,o]}))}this.points=e}return{tins:this.tins,strict_status:this.strict_status,weight_buffer:this.pointsWeightBuffer,vertices_params:this.vertices_params,centroid:this.centroid,kinks:this.kinks}}getCompiled(){const t={};t.version=M_,t.points=this.points,t.weight_buffer=this.pointsWeightBuffer,t.centroid_point=[this.centroid.forw.geometry.coordinates,this.centroid.forw.properties.target.geom],t.vertices_params=[this.vertices_params.forw[0],this.vertices_params.bakw[0]],t.vertices_points=[];const e=this.vertices_params.forw[1];return[0,1,2,3].map((n=>{const i=e[n].features[0],r=i.geometry.coordinates[0][1],o=i.properties.b.geom;t.vertices_points[n]=[r,o]})),t.strict_status=this.strict_status,t.tins_points=[[]],this.tins.forw.features.map((e=>{t.tins_points[0].push(["a","b","c"].map((t=>e.properties[t].index)))})),this.strict_status==L_.STATUS_LOOSE?(t.tins_points[1]=[],this.tins.bakw.features.map((e=>{t.tins_points[1].push(["a","b","c"].map((t=>e.properties[t].index)))}))):this.strict_status==L_.STATUS_ERROR&&(t.kinks_points=this.kinks.bakw.features.map((t=>t.geometry.coordinates))),t.yaxisMode=this.yaxisMode,t.vertexMode=this.vertexMode,t.strictMode=this.strictMode,this.bounds?(t.bounds=this.bounds,t.boundsPolygon=this.boundsPolygon,t.xy=this.xy,t.wh=this.wh):t.wh=this.wh,t.edges=this.edges,t.edgeNodes=this.edgeNodes,t}addIndexedTin(){const t=this.tins,e=t.forw,n=t.bakw,i=Math.ceil(Math.sqrt(e.features.length));if(i<3)return void(this.indexedTins=void 0);let r=[],o=[];const s=e.features.map((t=>{let e=[];return ef(t)[0].map((t=>{0===r.length?r=[Array.from(t),Array.from(t)]:(t[0]<r[0][0]&&(r[0][0]=t[0]),t[0]>r[1][0]&&(r[1][0]=t[0]),t[1]<r[0][1]&&(r[0][1]=t[1]),t[1]>r[1][1]&&(r[1][1]=t[1])),0===e.length?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),a=(r[1][0]-r[0][0])/i,l=(r[1][1]-r[0][1])/i,c=s.reduce(((t,e,n)=>{const o=F_(e[0][0],r[0][0],a,i),s=F_(e[1][0],r[0][0],a,i),c=F_(e[0][1],r[0][1],l,i),u=F_(e[1][1],r[0][1],l,i);for(let e=o;e<=s;e++){t[e]||(t[e]=[]);for(let i=c;i<=u;i++)t[e][i]||(t[e][i]=[]),t[e][i].push(n)}return t}),[]),u=n.features.map((t=>{let e=[];return ef(t)[0].map((t=>{0===o.length?o=[Array.from(t),Array.from(t)]:(t[0]<o[0][0]&&(o[0][0]=t[0]),t[0]>o[1][0]&&(o[1][0]=t[0]),t[1]<o[0][1]&&(o[0][1]=t[1]),t[1]>o[1][1]&&(o[1][1]=t[1])),0===e.length?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),h=(o[1][0]-o[0][0])/i,p=(o[1][1]-o[0][1])/i,f=u.reduce(((t,e,n)=>{const r=F_(e[0][0],o[0][0],h,i),s=F_(e[1][0],o[0][0],h,i),a=F_(e[0][1],o[0][1],p,i),l=F_(e[1][1],o[0][1],p,i);for(let e=r;e<=s;e++){t[e]||(t[e]=[]);for(let i=a;i<=l;i++)t[e][i]||(t[e][i]=[]),t[e][i].push(n)}return t}),[]);this.indexedTins={forw:{gridNum:i,xOrigin:r[0][0],yOrigin:r[0][1],xUnit:a,yUnit:l,gridCache:c},bakw:{gridNum:i,xOrigin:o[0][0],yOrigin:o[0][1],xUnit:h,yUnit:p,gridCache:f}}}setWh(t){this.wh=t,this.xy=[0,0],this.bounds=void 0,this.boundsPolygon=void 0,this.tins=void 0,this.indexedTins=void 0}setVertexMode(t){this.vertexMode=t,this.tins=void 0,this.indexedTins=void 0}setStrictMode(t){this.strictMode=t,this.tins=void 0,this.indexedTins=void 0}calcurateStrictTinAsync(){const t=this.pointsSet.edges;return Promise.all(this.tins.forw.features.map((t=>Promise.resolve(B_(t))))).then((t=>{this.tins.bakw=(0,nr.uf)(t)})).then((()=>{const t={};return Promise.all(this.tins.forw.features.map(((e,n)=>{const i=this.tins.bakw.features[n];return Promise.resolve(X_(t,{forw:e,bakw:i}))}))).then((()=>Promise.all([q_(t),Promise.resolve(t)]))).catch((t=>{throw t}))})).then((e=>{const n=e[0],i=e[1];return n.bakw&&Object.keys(n.bakw).map((e=>{if("Not include case"==n.bakw[e])return;const r=i[e],o=Cy(r[0].forw,r[1].forw),s=Wf((0,nr.uf)([r[0].forw,r[1].forw]));if(Cm(s,o))return;const a=e.split("-");if(a[0].match(/^[0-9]+$/)&&a[1].match(/^[0-9]+$/)){const e=a.map((t=>parseInt(t))).sort(((t,e)=>t<e?-1:1));for(let n=0;n<t.length-1;n++)if(e[0]==t[n][0]&&e[1]==t[n][1])return}const l=a.map((t=>["a","b","c"].map(((t,e)=>{const n=r[0].bakw.properties[t];return{geom:r[0].bakw.geometry.coordinates[0][e],prop:n}})).filter((e=>e.prop.index==t))[0])),c=r.map((t=>["a","b","c"].map(((e,n)=>{const i=t.bakw.properties[e];return{geom:t.bakw.geometry.coordinates[0][n],prop:i}})).filter((t=>t.prop.index!=l[0].prop.index&&t.prop.index!=l[1].prop.index))[0]));V_(i,r[0],this.tins),V_(i,r[1],this.tins),l.map((t=>{const e=[t.geom,c[0].geom,c[1].geom,t.geom],n={a:t.prop,b:c[0].prop,c:c[1].prop},r=(0,nr.yu)([e],n),o=B_(r);X_(i,{forw:o,bakw:r},this.tins)}))})),Promise.all(["forw","bakw"].map((t=>new Promise((e=>{e(function(t){return Jy(new Ny(t).findSegmentIntersections()).reduce(((t,e,n,i)=>(t||(t={}),t[`${e.x}:${e.y}`]=e,n!=i.length-1?t:Object.keys(t).map((e=>(0,nr.xm)([t[e].x,t[e].y]))))),[])}(this.tins[t].features.map((t=>t.geometry.coordinates[0]))))})).catch((t=>{throw t}))))).then((t=>{0==t[0].length&&0==t[1].length?(this.strict_status=L_.STATUS_STRICT,delete this.kinks):(this.strict_status=L_.STATUS_ERROR,this.kinks={},t[0].length>0&&(this.kinks.forw=(0,nr.uf)(t[0])),t[1].length>0&&(this.kinks.bakw=(0,nr.uf)(t[1])))})).catch((t=>{throw t}))})).catch((t=>{throw t}))}generatePointsSet(){const t={forw:[],bakw:[]};for(let e=0;e<this.points.length;e++){const n=R_(this.points[e][0],this.points[e][1],e);t.forw.push(n),t.bakw.push(A_(n))}const e=[];let n=0;this.edgeNodes=[],this.edges||(this.edges=[]);for(let i=0;i<this.edges.length;i++){const r=this.edges[i][2],o=Object.assign([],this.edges[i][0]),s=Object.assign([],this.edges[i][1]);if(0===o.length&&0===s.length){e.push(r);continue}o.unshift(this.points[r[0]][0]),o.push(this.points[r[1]][0]),s.unshift(this.points[r[0]][1]),s.push(this.points[r[1]][1]);const a=[o,s].map((t=>{const e=t.map(((t,e,n)=>{if(0===e)return 0;const i=n[e-1];return Math.sqrt(Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))})),n=e.reduce(((t,e,n)=>0===n?[0]:(t.push(t[n-1]+e),t)),[]);return n.map(((i,r,o)=>{const s=i/o[o.length-1];return[t[r],e[r],n[r],s]}))}));a.map(((t,e)=>{const n=a[e?0:1];return t.filter(((e,n)=>!(0===n||n===t.length-1||"handled"===e[4]))).map((t=>{const i=t[0],r=t[3],o=n.reduce(((t,e,n,i)=>{if(t)return t;const o=i[n+1];return e[3]===r?(e[4]="handled",[e]):e[3]<r&&o[3]>r?[e,o]:void 0}),void 0);if(1===o.length)return 0===e?[i,o[0][0],r]:[o[0][0],i,r];{const t=o[0],n=o[1],s=(r-t[3])/(n[3]-t[3]),a=[(n[0][0]-t[0][0])*s+t[0][0],(n[0][1]-t[0][1])*s+t[0][1]];return 0===e?[i,a,r]:[a,i,r]}}))})).reduce(((t,e)=>t.concat(e)),[]).sort(((t,e)=>t[2]<e[2]?-1:1)).map(((i,o,s)=>{this.edgeNodes[n]=[i[0],i[1]];const a=R_(i[0],i[1],`e${n}`);n++,t.forw.push(a),t.bakw.push(A_(a)),0===o?e.push([r[0],t.forw.length-1]):e.push([t.forw.length-2,t.forw.length-1]),o===s.length-1&&e.push([t.forw.length-1,r[1]])}))}return{forw:(0,nr.uf)(t.forw),bakw:(0,nr.uf)(t.bakw),edges:e}}updateTinAsync(){let t=this.strictMode;const e=this.xy[0]-.05*this.wh[0],n=this.xy[0]+1.05*this.wh[0],i=this.xy[1]-.05*this.wh[1],r=this.xy[1]+1.05*this.wh[1],o=this.bounds?t=>Ay(t,this.boundsPolygon):t=>t[0]>=this.xy[0]&&t[0]<=this.xy[0]+this.wh[0]&&t[1]>=this.xy[1]&&t[1]<=this.xy[1]+this.wh[1],s=this.points.reduce(((t,e)=>t&&o(e[0])),!0);return s?new Promise((o=>{t!=L_.MODE_STRICT&&t!=L_.MODE_LOOSE&&(t=L_.MODE_AUTO);let s=[];this.wh&&(s=[[e,i],[n,i],[e,r],[n,r]]);o([this.generatePointsSet(),s])})).then((t=>{const e=t[0];return Promise.all([new Promise((t=>{t(I_(e.forw,e.edges,"target"))})),new Promise((t=>{t(I_(e.bakw,e.edges,"target"))})),new Promise((t=>{t(ar(e.forw))})),Promise.resolve(t)]).catch((t=>{throw t}))})).then((t=>{const e=t[0],n=t[1],i=t[2],r=t[3],o=r[0];if(0==e.features.length||0==n.features.length)throw"TOO LINEAR1";const s={forw:i.geometry.coordinates,bakw:j_(i,e)},a=R_(s.forw,s.bakw,"c");this.centroid={forw:a,bakw:A_(a)};const l={};return Promise.all([new Promise((t=>{const n=Wf(o.forw).geometry.coordinates[0];let i;try{i=n.map((t=>({forw:t,bakw:j_((0,nr.xm)(t),e)})))}catch(t){throw"TOO LINEAR2"}i.map((t=>{l[`${t.forw[0]}:${t.forw[1]}`]=t})),t(void 0)})),new Promise((t=>{const e=Wf(o.bakw).geometry.coordinates[0];let i;try{i=e.map((t=>({bakw:t,forw:j_((0,nr.xm)(t),n)})))}catch(t){throw"TOO LINEAR2"}i.map((t=>{l[`${t.forw[0]}:${t.forw[1]}`]=t})),t(void 0)}))]).then((()=>[s,l,r])).catch((t=>{throw t}))})).then((t=>{const o=t[0],s=t[1],a=t[2],l=Object.keys(s).reduce(((t,a,l,c)=>{const u=s[a].forw,h=s[a].bakw,p={forw:[u[0]-o.forw[0],u[1]-o.forw[1]]};p.bakw=[h[0]-o.bakw[0],h[1]-o.bakw[1]];const f=0==p.forw[0]?1/0:((p.forw[0]<0?e:n)-o.forw[0])/p.forw[0],d=0==p.forw[1]?1/0:((p.forw[1]<0?i:r)-o.forw[1])/p.forw[1];if(Math.abs(f)/Math.abs(d)<1.1){const e={forw:[p.forw[0]*f+o.forw[0],p.forw[1]*f+o.forw[1]],bakw:[p.bakw[0]*f+o.bakw[0],p.bakw[1]*f+o.bakw[1]]};p.forw[0]<0?t[3].push(e):t[1].push(e)}if(Math.abs(d)/Math.abs(f)<1.1){const e={forw:[p.forw[0]*d+o.forw[0],p.forw[1]*d+o.forw[1]],bakw:[p.bakw[0]*d+o.bakw[0],p.bakw[1]*d+o.bakw[1]]};p.forw[1]<0?t[0].push(e):t[2].push(e)}return t}),[[],[],[],[]]);let c=Object.keys(s).reduce(((t,e,n,i)=>{const r=s[e].forw,a=s[e].bakw,l={forw:[r[0]-o.forw[0],r[1]-o.forw[1]]};if(l.bakw=[a[0]-o.bakw[0],o.bakw[1]-a[1]],0==l.forw[0]||0==l.forw[1])return t;let c=0;return l.forw[0]>0&&(c+=1),l.forw[1]>0&&(c+=2),t[c].push([l.forw,l.bakw]),n==i.length-1?t.length==t.filter((t=>t.length>0)).length&&this.vertexMode==L_.VERTEX_BIRDEYE?t:t.reduce(((t,e)=>[t[0].concat(e)]),[[]]):t}),[[],[],[],[]]).map((t=>t.reduce(((t,e,n,i)=>{t||(t=[1/0,0,0]);let r=Math.sqrt(Math.pow(e[0][0],2)+Math.pow(e[0][1],2))/Math.sqrt(Math.pow(e[1][0],2)+Math.pow(e[1][1],2));r=r<t[0]?r:t[0];const o=Math.atan2(e[0][0],e[0][1])-Math.atan2(e[1][0],e[1][1]),s=t[1]+Math.cos(o),a=t[2]+Math.sin(o);return n==i.length-1?[r,Math.atan2(a,s)]:[r,s,a]}),null)));return 1==c.length&&(c=[c[0],c[0],c[0],c[0]]),[c,o,l,a]})).then((t=>{const e=t[0],n=t[1],i=t[2],r=t[3][0],o=t[3][1];let s=e.map(((t,e)=>{const i=o[e],r=[i[0]-n.forw[0],i[1]-n.forw[1]],s=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2))/t[0],a=Math.atan2(r[0],r[1])-t[1];return{forw:i,bakw:[n.bakw[0]+s*Math.sin(a),n.bakw[1]-s*Math.cos(a)]}}));const a=s[2];s[2]=s[3],s[3]=a;const l=[1,1,1,1];for(let t=0;t<4;t++){const e=(t+1)%4,r=(0,nr.Tu)([s[t].bakw,s[e].bakw]);i[t].map((i=>{const o=(0,nr.Tu)([n.bakw,i.bakw]),s=_f(r,o);if(s.features.length>0&&s.features[0].geometry){const r=s.features[0],o=Math.sqrt(Math.pow(i.bakw[0]-n.bakw[0],2)+Math.pow(i.bakw[1]-n.bakw[1],2))/Math.sqrt(Math.pow(r.geometry.coordinates[0]-n.bakw[0],2)+Math.pow(r.geometry.coordinates[1]-n.bakw[1],2));o>l[t]&&(l[t]=o),o>l[e]&&(l[e]=o)}}))}return s=s.map(((t,e)=>{const i=l[e],r=[(t.bakw[0]-n.bakw[0])*i+n.bakw[0],(t.bakw[1]-n.bakw[1])*i+n.bakw[1]];return{forw:t.forw,bakw:r}})),[s,r]})).then((e=>{const n=e[0],i=e[1],r={forw:[],bakw:[]};for(let t=0;t<n.length;t++){const e=R_(n[t].forw,n[t].bakw,`b${t}`),o=A_(e);i.forw.features.push(e),i.bakw.features.push(o),r.forw.push(e),r.bakw.push(o)}let o;return this.pointsSet=i,this.tins={forw:T_(I_(i.forw,i.edges,"target"))},o=t==L_.MODE_STRICT||t==L_.MODE_AUTO?this.calcurateStrictTinAsync():Promise.resolve(),o.then((()=>((t==L_.MODE_LOOSE||t==L_.MODE_AUTO&&this.strict_status==L_.STATUS_ERROR)&&(this.tins.bakw=T_(I_(i.bakw,i.edges,"target")),delete this.kinks,this.strict_status=L_.STATUS_LOOSE),this.vertices_params={forw:P_(r.forw,this.centroid.forw),bakw:P_(r.bakw,this.centroid.bakw)},this.addIndexedTin(),this.calculatePointsWeightAsync()))).catch((t=>{throw t}))})).catch((t=>{throw t})):new Promise(((t,e)=>{e("SOME POINTS OUTSIDE")}))}transform(t,e,n){if(e&&this.strict_status==L_.STATUS_ERROR)throw'Backward transform is not allowed if strict_status == "strict_error"';this.yaxisMode==L_.YAXIS_FOLLOW&&e&&(t=[t[0],-1*t[1]]);const i=(0,nr.xm)(t);if(this.bounds&&!e&&!n&&!Ay(i,this.boundsPolygon))return!1;const r=e?this.tins.bakw:this.tins.forw,o=e?this.indexedTins.bakw:this.indexedTins.forw,s=e?this.vertices_params.bakw:this.vertices_params.forw,a=e?this.centroid.bakw:this.centroid.forw,l=e?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw;let c,u;this.stateFull&&(this.stateBackward==e?c=this.stateTriangle:(this.stateBackward=e,this.stateTriangle=void 0),u=t=>{this.stateTriangle=t});let h=j_(i,r,o,s,a,l,c,u);if(this.bounds&&e&&!n){if(!Ay((0,nr.xm)(h),this.boundsPolygon))return!1}else this.yaxisMode!=L_.YAXIS_FOLLOW||e||(h=[h[0],-1*h[1]]);return h}calculatePointsWeightAsync(){const t=["forw"];this.strict_status==L_.STATUS_LOOSE&&t.push("bakw");const e={};return Promise.all(t.map((t=>{e[t]={};const n={},i=this.tins[t];return Promise.all(i.features.map((i=>{const r=["a","b","c"];return new Promise((o=>{for(let o=0;o<3;o++){const s=(o+1)%3,a=r[o],l=r[s],c=i.properties[a].index,u=i.properties[l].index,h=[c,u].sort().join("-");if(!n[h]){const r=i.geometry.coordinates[0][o],p=i.geometry.coordinates[0][s],f=i.properties[a].geom,d=i.properties[l].geom;n[h]=1;const g=Math.sqrt(Math.pow(f[0]-d[0],2)+Math.pow(f[1]-d[1],2))/Math.sqrt(Math.pow(r[0]-p[0],2)+Math.pow(r[1]-p[1],2));e[t][c]||(e[t][c]={}),e[t][u]||(e[t][u]={}),e[t][c][h]=g,e[t][u][h]=g}}o(void 0)}))}))).catch((t=>{throw t}))}))).then((()=>{const n={};t.map((t=>{n[t]={},this.strict_status==L_.STATUS_STRICT&&(n.bakw={}),Object.keys(e[t]).map((i=>{n[t][i]=Object.keys(e[t][i]).reduce(((n,r,o,s)=>(n+=e[t][i][r],o==s.length-1?n/s.length:n)),0),this.strict_status==L_.STATUS_STRICT&&(n.bakw[i]=1/n[t][i])})),n[t].c=[0,1,2,3].reduce(((e,i)=>{const r=`b${i}`;return e+=n[t][r],3==i?e/4:e}),0),this.strict_status==L_.STATUS_STRICT&&(n.bakw.c=1/n[t].c)})),this.pointsWeightBuffer=n})).catch((t=>{throw t}))}}function T_(t){const e=t.features;for(let t=0;t<e.length;t++){const n=e[t];"b"===`${n.properties.a.index}`.substring(0,1)&&"b"===`${n.properties.b.index}`.substring(0,1)?e[t]={geometry:{type:"Polygon",coordinates:[[n.geometry.coordinates[0][2],n.geometry.coordinates[0][0],n.geometry.coordinates[0][1],n.geometry.coordinates[0][2]]]},properties:{a:{geom:n.properties.c.geom,index:n.properties.c.index},b:{geom:n.properties.a.geom,index:n.properties.a.index},c:{geom:n.properties.b.geom,index:n.properties.b.index}},type:"Feature"}:"b"===`${n.properties.c.index}`.substring(0,1)&&"b"===`${n.properties.a.index}`.substring(0,1)&&(e[t]={geometry:{type:"Polygon",coordinates:[[n.geometry.coordinates[0][1],n.geometry.coordinates[0][2],n.geometry.coordinates[0][0],n.geometry.coordinates[0][1]]]},properties:{a:{geom:n.properties.b.geom,index:n.properties.b.index},b:{geom:n.properties.c.geom,index:n.properties.c.index},c:{geom:n.properties.a.geom,index:n.properties.a.index}},type:"Feature"})}return t}function P_(t,e){const n=e.geometry.coordinates;return[0,1,2,3].map((i=>{const r=(i+1)%4,o=t[i],s=t[r],a=o.geometry.coordinates,l=Math.atan2(a[0]-n[0],a[1]-n[1]),c=[e,o,s,e].map((t=>t.geometry.coordinates)),u={a:{geom:e.properties.target.geom,index:e.properties.target.index},b:{geom:o.properties.target.geom,index:o.properties.target.index},c:{geom:s.properties.target.geom,index:s.properties.target.index}};return[l,(0,nr.uf)([(0,nr.yu)([c],u)])]})).reduce(((t,e)=>(t[0].push(e[0]),t[1].push(e[1]),t)),[[],[]])}function O_(t,e=!1){const n=e?function(t){return!(t>=0&&t<2*Math.PI)}:function(t){return!(t>-1*Math.PI&&t<=Math.PI)};for(;n(t);)t+=2*Math.PI*(t>0?-1:1);return t}function R_(t,e,n){return(0,nr.xm)(t,{target:{geom:e,index:n}})}function A_(t){return(0,nr.xm)(t.properties.target.geom,{target:{geom:t.geometry.coordinates,index:t.properties.target.index}})}function k_(t,e,n){const i=e.geometry.coordinates[0][0],r=e.geometry.coordinates[0][1],o=e.geometry.coordinates[0][2],s=t.geometry.coordinates,a=e.properties.a.geom,l=e.properties.b.geom,c=e.properties.c.geom,u=[r[0]-i[0],r[1]-i[1]],h=[o[0]-i[0],o[1]-i[1]],p=[s[0]-i[0],s[1]-i[1]],f=[l[0]-a[0],l[1]-a[1]],d=[c[0]-a[0],c[1]-a[1]];let g=(h[1]*p[0]-h[0]*p[1])/(u[0]*h[1]-u[1]*h[0]),m=(u[0]*p[1]-u[1]*p[0])/(u[0]*h[1]-u[1]*h[0]);if(n){const t=n[e.properties.a.index],i=n[e.properties.b.index],r=n[e.properties.c.index];let o;if(g<0||m<0||1-g-m<0){const t=g/(g+m),e=m/(g+m);o=g/i/(t/i+e/r),m=m/r/(t/i+e/r)}else o=g/i/(g/i+m/r+(1-g-m)/t),m=m/r/(g/i+m/r+(1-g-m)/t);g=o}return[g*f[0]+m*d[0]+a[0],g*f[1]+m*d[1]+a[1]]}function N_(t,e,n,i){const r=t.geometry.coordinates,o=n.geometry.coordinates,s=function(t,e){let n,i=O_(t-e[0]),r=2*Math.PI;for(let o=0;o<e.length;o++){const s=O_(t-e[(o+1)%e.length]),a=Math.min(Math.abs(i),Math.abs(s));i*s<=0&&a<r&&(r=a,n=o),i=s}return n}(Math.atan2(r[0]-o[0],r[1]-o[1]),e[0]);return k_(t,e[1][s].features[0],i)}function D_(t,e){for(let n=0;n<e.features.length;n++){if(Ay(t,e.features[n]))return e.features[n]}}function F_(t,e,n,i){let r=Math.floor((t-e)/n);return r>=i&&(r=i-1),r}function j_(t,e,n,i,r,o,s,a){let l;if(s&&(l=D_(t,(0,nr.uf)([s]))),!l){if(n){const i=t.geometry.coordinates,r=n.gridNum,o=n.xOrigin,s=n.yOrigin,a=n.xUnit,l=n.yUnit,c=n.gridCache,u=F_(i[0],o,a,r),h=F_(i[1],s,l,r),p=c[u]&&c[u][h]?c[u][h]:[];e=(0,nr.uf)(p.map((t=>e.features[t])))}l=D_(t,e)}return a&&a(l),l?k_(t,l,o):N_(t,i,r,o)}function B_(t){const e=["a","b","c","a"].map((e=>t.properties[e].geom)),n=t.geometry.coordinates[0],i=t.properties,r={a:{geom:n[0],index:i.a.index},b:{geom:n[1],index:i.b.index},c:{geom:n[2],index:i.c.index}};return(0,nr.yu)([e],r)}function G_(t,e,n,i,r,o=!1,s){const a=t.map((t=>{(!s||s<2.00703)&&(t=z_(t));const a=isFinite(t)?e[t]:"c"===t?i:"b0"===t?r[0]:"b1"===t?r[1]:"b2"===t?r[2]:"b3"===t?r[3]:function(){const e=t.match(/e(\d+)/);if(e){const t=parseInt(e[1]);return n[t]}throw"Bad index value for indexesToTri"}();return o?[[a[1],a[0]],t]:[[a[0],a[1]],t]}));return function(t){const e=[0,1,2,0].map((e=>t[e][0][0])),n={a:{geom:t[0][0][1],index:t[0][1]},b:{geom:t[1][0][1],index:t[1][1]},c:{geom:t[2][0][1],index:t[2][1]}};return(0,nr.yu)([e],n)}(a)}function z_(t){return"number"==typeof t?t:t.replace(/^(c|e|b)(?:ent|dgeNode|box)(\d+)?$/,"$1$2")}function U_(t,e){return e&&e>=2.00703||Array.isArray(t[0])?t:t.map((t=>[t.illstNodes,t.mercNodes,t.startEnd]))}function q_(t){const e={forw:{},bakw:{}};return Promise.all(Object.keys(t).map((e=>new Promise((n=>{const i=t[e];if(i.length<2)return n(void 0);["forw","bakw"].map((t=>{const e=function(t,e,n){void 0===n&&(n={});var i=nf(t),r=nf(e),o=bm.intersection(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?My(o[0],n.properties):Ly(o,n.properties)}(i[0][t],i[1][t]);if(!e||"Point"==e.geometry.type||"LineString"==e.geometry.type)return n(void 0);n(void 0)}))}))))).then((()=>(0==Object.keys(e.forw).length&&delete e.forw,0==Object.keys(e.bakw).length&&delete e.bakw,e))).catch((t=>{throw t}))}function X_(t,e,n){const i=Y_(e.forw),r=Y_(e.bakw);if(JSON.stringify(i)!=JSON.stringify(r))throw`${JSON.stringify(e,null,2)}\n${JSON.stringify(i)}\n${JSON.stringify(r)}`;for(let n=0;n<i.length;n++){const r=i[n];t[r]||(t[r]=[]),t[r].push(e)}n&&(n.forw.features.push(e.forw),n.bakw.features.push(e.bakw))}function V_(t,e,n){const i=Y_(e.forw),r=Y_(e.bakw);if(JSON.stringify(i)!=JSON.stringify(r))throw`${JSON.stringify(e,null,2)}\n${JSON.stringify(i)}\n${JSON.stringify(r)}`;for(let n=0;n<i.length;n++){const r=i[n],o=t[r].filter((t=>t.forw!=e.forw));0==o.length?delete t[r]:t[r]=o}if(n){let t=n.forw.features.filter((t=>t!=e.forw));n.forw.features=t,t=n.bakw.features.filter((t=>t!=e.bakw)),n.bakw.features=t}}function Y_(t){const e=["a","b","c"].map((e=>t.properties[e].index));return[[0,1],[0,2],[1,2],[0,1,2]].map((t=>t.map((t=>e[t])).sort().join("-"))).sort()}L_.VERTEX_PLAIN="plain",L_.VERTEX_BIRDEYE="birdeye",L_.MODE_STRICT="strict",L_.MODE_AUTO="auto",L_.MODE_LOOSE="loose",L_.STATUS_STRICT="strict",L_.STATUS_ERROR="strict_error",L_.STATUS_LOOSE="loose",L_.YAXIS_FOLLOW="follow",L_.YAXIS_INVERT="invert",n.g.Tin=L_;const H_=["title","attr","officialTitle","dataAttr","author","createdAt","era","license","dataLicense","contributor","mapper","reference","description","url","lang","imageExtension","homePosition","mercZoom"];async function W_(t,e,n){const i=n?t:{},r=[];if(H_.forEach((e=>{i[e]=t[e]})),t.imageExtention&&(i.imageExtension=t.imageExtention),t.compiled){const n={};t.compiled.wh||(n.wh=[t.width,t.height]),t.compiled.strictMode||(n.strictMode=t.strictMode),t.compiled.vertexMode||(n.vertexMode=t.vertexMode),t.compiled.yaxisMode||(n.yaxisMode=t.yaxisMode);let o=new L_(n);o.setCompiled(t.compiled),e&&(o=o.getCompiled()),i.strictMode=o.strictMode,i.vertexMode=o.vertexMode,i.yaxisMode=o.yaxisMode,i.width=o.wh[0],i.height=o.wh[1],i.gcps=o.points,i.edges=o.edges,r.push(o)}else{i.strictMode=t.strictMode,i.vertexMode=t.vertexMode,i.yaxisMode=t.yaxisMode,i.width=t.width,i.height=t.height,i.gcps=t.gcps,i.edges=t.edges;let n=await Z_(t.strictMode,t.vertexMode,t.yaxisMode,t.gcps,t.edges,[t.width,t.height]);e&&"string"!=typeof n&&(n=n.getCompiled()),r.push(n)}if(t.sub_maps){const n=[];for(let i=0;i<t.sub_maps.length;i++){const o=t.sub_maps[i],s={};if(s.importance=o.importance,s.priority=o.priority,o.compiled){const n={};o.compiled.strictMode||(n.strictMode=t.strictMode),o.compiled.vertexMode||(n.vertexMode=t.vertexMode),o.compiled.yaxisMode||(n.yaxisMode=t.yaxisMode);let i=new L_(n);i.setCompiled(o.compiled),e&&(i=i.getCompiled()),s.bounds=i.bounds,s.gcps=i.points,s.edges=i.edges,r.push(i)}else{s.bounds=o.bounds,s.gcps=o.gcps,s.edges=o.edges;let n=await Z_(t.strictMode,t.vertexMode,t.yaxisMode,o.gcps,o.edges,void 0,o.bounds);e&&"string"!=typeof n&&(n=n.getCompiled()),r.push(n)}n.push(s)}i.sub_maps=n}return[i,r]}async function Z_(t,e,n,i=[],r=[],o,s){if(i.length<3)return"tooLessGcps";const a=new L_({yaxisMode:n});if(o)a.setWh(o);else{if(!s)throw"Both wh and bounds are missing";a.setBounds(s)}a.setStrictMode(t),a.setVertexMode(e),a.setPoints(i),a.setEdges(r);try{return await a.updateTinAsync(),a}catch(t){if(console.log(t),"SOME POINTS OUTSIDE"==t)return"pointsOutside";if(0==t.indexOf("TOO LINEAR"))return"tooLinear";if(t.indexOf("Vertex indices of edge")>-1||t.indexOf("is degenerate!")>-1||t.indexOf("already exists or intersects with an existing edge!")>-1)return"edgeError";throw t}}class $_ extends kf{constructor(t={}){super(t),this.tins=[]}static async createAsync(t){const e=await async function(t){return W_(t,!1,!0)}(t);t=e[0];const n=new $_(t);n.tins=e[1];const i=new en({code:`Illst:${n.mapID}`,extent:[0,0,n.width,n.height],units:"m"});return Ei(i),Ti(i,"EPSG:3857",(t=>n.tins[0].transform(t,!1)),(t=>n.tins[0].transform(t,!0))),Ry("EPSG:4326",i),t.sub_maps&&t.sub_maps.map(((t,e)=>{const i=e+1,r=`Illst:${n.mapID}#${i}`,o=n.tins[i],s=new en({code:r,extent:[o.xy[0],o.xy[1],o.wh[0],o.wh[1]],units:"m"});Ei(s),Ti(s,"EPSG:3857",(t=>o.transform(t,!1,!0)),(t=>o.transform(t,!0,!0))),Ry("EPSG:4326",s);const a=Object.assign([],t.bounds);a.push(t.bounds[0]);const l=a.map((t=>o.transform(t,!1))),c=(0,nr.yu)([a]),u=(0,nr.yu)([l]);o.xyBounds=c,o.mercBounds=u})),n}xy2MercAsync_specifyLayer(t,e){const n=`Illst:${this.mapID}${e?`#${e}`:""}`;return new Promise(((e,i)=>{e(Ry(n,"EPSG:3857",t))}))}merc2XyAsync_specifyLayer(t,e){const n=`Illst:${this.mapID}${e?`#${e}`:""}`;return new Promise(((e,i)=>{e(Ry("EPSG:3857",n,t))}))}xy2MercAsync_returnLayer(t){return new Promise(((e,n)=>{const i=this.tins.map(((t,e)=>[e,t])).sort(((t,e)=>t[1].priority<e[1].priority?1:-1));for(let r=0;r<i.length;r++){const o=i[r][0],s=i[r][1];if(0==o||rf(t,s.xyBounds)){this.xy2MercAsync_specifyLayer(t,o).then((t=>{e([o,t])})).catch((t=>{n(t)}));break}}}))}merc2XyAsync_returnLayer(t){return Promise.all(this.tins.map(((e,n)=>new Promise(((i,r)=>{this.merc2XyAsync_specifyLayer(t,n).then((t=>{0===n||rf(t,e.xyBounds)?i([e,n,t]):i([e,n])})).catch((t=>{r(t)}))}))))).then((t=>t.sort(((t,e)=>t[0].priority<e[0].priority?1:-1)).reduce(((t,e,n,i)=>{const r=e[0],o=e[1],s=e[2];if(!s)return t;for(let e=0;e<n;e++){const n=i[e][0];if(0===i[e][1]||rf(s,n.xyBounds)){if(t.length){const e=!t[0],n=e?t[1][2]:t[0][2];return!e||r.importance<n.importance?t:[void 0,[o,s,r]]}return[void 0,[o,s,r]]}}return t.length&&t[0]?(t.push([o,s,r]),t.sort(((t,e)=>t[2].importance<e[2].importance?1:-1)).filter(((t,e)=>e<2))):[[o,s,r]]}),[]).map((t=>{if(t)return[t[0],t[1]]}))))}setupMapParameter(t){const e=[this.width/2,this.height/2];this.xy2MercAsync_returnLayer(e).then((n=>{const i=n[0],r=n[1],o=[[e[0]-150,e[1]],[e[0]+150,e[1]],[e[0],e[1]-150],[e[0],e[1]+150]],s=[[0,0],[this.width,0],[this.width,this.height],[0,this.height]],a=[];for(let t=0;t<9;t++){const e=t<4?this.xy2MercAsync_specifyLayer(o[t],i):4==t?Promise.resolve(r):this.xy2MercAsync_specifyLayer(s[t-5],0);a.push(e)}Promise.all(a).then((e=>{const n=(Math.sqrt(Math.pow(e[0][0]-e[1][0],2)+Math.pow(e[0][1]-e[1][1],2))+Math.sqrt(Math.pow(e[2][0]-e[3][0],2)+Math.pow(e[2][1]-e[3][1],2)))/2;this.mercZoom||(this.mercZoom=Math.log(46962910.17841229/n)/Math.log(2)-3),this.homePosition||(this.homePosition=Pi(e[4])),this.envelope=(0,nr.yu)([[e[5],e[6],e[7],e[8],e[5]]]),t(this)})).catch((t=>{throw t}))})).catch((t=>{throw t}))}mercs2SysCoordsAsync_multiLayer(t){const e=this.merc2XyAsync_returnLayer(t[0][0]).then((e=>{let n=!1;return Promise.all(e.map(((e,i)=>{if(!e)return void(n=!0);const r=e[0],o=e[1];return 0===i||n?Promise.all(t[0].map(((t,e)=>0===e?Promise.resolve(o):this.merc2XyAsync_specifyLayer(t,r)))):Promise.resolve([o])})))}));return e.then((e=>e.map((e=>{if(e)return[e.map((t=>this.xy2SysCoord(t))),t[1]]}))))}merc2XyAsync_base(t,e){return this.merc2XyAsync_returnLayer(t).then((t=>{if(!e||t[0])return t[0]?t[0][1]:t[1][1]}))}merc2XyAsync_ignoreBackground(t){return this.merc2XyAsync_base(t,!0)}merc2XyAsync(t){return this.merc2XyAsync_base(t,!1)}xy2MercAsync(t){return this.xy2MercAsync_returnLayer(t).then((t=>t[1]))}viewpoint2MercsAsync(t,e){const n=this.viewpoint2SysCoords(t,e),i=this.sysCoords2Xys(n);return this.xy2MercAsync_returnLayer(i[0][0]).then((t=>{const n=t[0],r=t[1],o=i[0].map(((t,e)=>0===e?Promise.resolve(r):this.xy2MercAsync_specifyLayer(t,n)));return Promise.all(o).then((t=>[t,e]))}))}mercs2ViewpointAsync(t){const e=this.merc2XyAsync_returnLayer(t[0][0]).then((e=>{const n=e[0]||e[1],i=n[0],r=n[1];return Promise.all(t[0].map(((t,e)=>0===e?r:this.merc2XyAsync_specifyLayer(t,i))))}));return e.then((e=>{const n=this.xys2SysCoords([e,t[1]]);return this.sysCoords2Viewpoint(n)}))}}var K_="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g||{},J_="URLSearchParams"in K_,Q_="Symbol"in K_&&"iterator"in Symbol,tx="FileReader"in K_&&"Blob"in K_&&function(){try{return new Blob,!0}catch(t){return!1}}(),ex="FormData"in K_,nx="ArrayBuffer"in K_;if(nx)var ix=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],rx=ArrayBuffer.isView||function(t){return t&&ix.indexOf(Object.prototype.toString.call(t))>-1};function ox(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function sx(t){return"string"!=typeof t&&(t=String(t)),t}function ax(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return Q_&&(e[Symbol.iterator]=function(){return e}),e}function lx(t){this.map={},t instanceof lx?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function cx(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function ux(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function hx(t){var e=new FileReader,n=ux(e);return e.readAsArrayBuffer(t),n}function px(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function fx(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:tx&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:ex&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:J_&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():nx&&tx&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=px(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):nx&&(ArrayBuffer.prototype.isPrototypeOf(t)||rx(t))?this._bodyArrayBuffer=px(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):J_&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},tx&&(this.blob=function(){var t=cx(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=cx(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(tx)return this.blob().then(hx);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,n,i,r,o=cx(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=ux(e),i=/charset=([A-Za-z0-9_-]+)/.exec(t.type),r=i?i[1]:"utf-8",e.readAsText(t,r),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ex&&(this.formData=function(){return this.text().then(mx)}),this.json=function(){return this.text().then(JSON.parse)},this}lx.prototype.append=function(t,e){t=ox(t),e=sx(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},lx.prototype.delete=function(t){delete this.map[ox(t)]},lx.prototype.get=function(t){return t=ox(t),this.has(t)?this.map[t]:null},lx.prototype.has=function(t){return this.map.hasOwnProperty(ox(t))},lx.prototype.set=function(t,e){this.map[ox(t)]=sx(e)},lx.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},lx.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),ax(t)},lx.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),ax(t)},lx.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),ax(t)},Q_&&(lx.prototype[Symbol.iterator]=lx.prototype.entries);var dx=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function gx(t,e){if(!(this instanceof gx))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(e=e||{}).body;if(t instanceof gx){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new lx(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new lx(e.headers)),this.method=(n=e.method||this.method||"GET",i=n.toUpperCase(),dx.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in K_)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function mx(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}})),e}function yx(t,e){if(!(this instanceof yx))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new lx(e.headers),this.url=e.url||"",this._initBody(t)}gx.prototype.clone=function(){return new gx(this,{body:this._bodyInit})},fx.call(gx.prototype),fx.call(yx.prototype),yx.prototype.clone=function(){return new yx(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new lx(this.headers),url:this.url})},yx.error=function(){var t=new yx(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var vx=[301,302,303,307,308];yx.redirect=function(t,e){if(-1===vx.indexOf(e))throw new RangeError("Invalid status code");return new yx(null,{status:e,headers:{location:t}})};var _x=K_.DOMException;try{new _x}catch(t){_x=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},_x.prototype=Object.create(Error.prototype),_x.prototype.constructor=_x}function xx(t,e){return new Promise((function(n,i){var r=new gx(t,e);if(r.signal&&r.signal.aborted)return i(new _x("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}if(o.onload=function(){var t,e,i={statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new lx,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();try{e.append(i,r)}catch(t){console.warn("Response "+t.message)}}})),e)};0===r.url.indexOf("file://")&&(o.status<200||o.status>599)?i.status=200:i.status=o.status,i.url="responseURL"in o?o.responseURL:i.headers.get("X-Request-URL");var s="response"in o?o.response:o.responseText;setTimeout((function(){n(new yx(s,i))}),0)},o.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},o.onabort=function(){setTimeout((function(){i(new _x("Aborted","AbortError"))}),0)},o.open(r.method,function(t){try{return""===t&&K_.location.href?K_.location.href:t}catch(e){return t}}(r.url),!0),"include"===r.credentials?o.withCredentials=!0:"omit"===r.credentials&&(o.withCredentials=!1),"responseType"in o&&(tx?o.responseType="blob":nx&&(o.responseType="arraybuffer")),e&&"object"==typeof e.headers&&!(e.headers instanceof lx||K_.Headers&&e.headers instanceof K_.Headers)){var a=[];Object.getOwnPropertyNames(e.headers).forEach((function(t){a.push(ox(t)),o.setRequestHeader(t,sx(e.headers[t]))})),r.headers.forEach((function(t,e){-1===a.indexOf(e)&&o.setRequestHeader(e,t)}))}else r.headers.forEach((function(t,e){o.setRequestHeader(e,t)}));r.signal&&(r.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&r.signal.removeEventListener("abort",s)}),o.send(void 0===r._bodyInit?null:r._bodyInit)}))}xx.polyfill=!0,K_.fetch||(K_.fetch=xx,K_.Headers=lx,K_.Request=gx,K_.Response=yx);const bx={osm:{mapID:"osm",title:{ja:"オープンストリートマップ",en:"OpenStreetMap"},label:{ja:"OSM(現在)",en:"OSM(Now)"},attr:"©︎ OpenStreetMap contributors",maptype:"base",thumbnail:"assets/images/6345ee67d554fbfbf484ba4035ad19d9.jpg",urls:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},gsi:{mapID:"gsi",title:{ja:"地理院地図",en:"Geospatial Information Authority of Japan Map"},label:{ja:"地理院地図",en:"GSI Map"},attr:{ja:"国土地理院",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",maxZoom:18,thumbnail:"assets/images/b9ae27f0a01228380dff76a33b605707.jpg"},gsi_ortho:{mapID:"gsi_ortho",title:{ja:"地理院地図オルソ航空写真",en:"Geospatial Information Authority of Japan Ortho aerial photo"},label:{ja:"地理院オルソ",en:"GSI Ortho"},attr:{ja:"国土地理院",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg",maxZoom:18,thumbnail:"assets/images/41b2cf0fa604d3f196ca52337d238219.jpg"}};async function wx(t,e){if("string"==typeof t&&(t=bx[t]),(t=mr(Object.assign(t,e))).label=t.label||t.year,"base"===t.maptype||"overlay"===t.maptype||"google"===t.maptype||"mapbox"===t.maptype){const e="base"===t.maptype?xf:"overlay"===t.maptype?Nf:"google"===t.maptype?Oy:bf;e instanceof Nf?(t.homePosition||(t.homePosition=t.homePos),t.mercZoom||(t.mercZoom=t.defZoom)):(t.homePosition=t.homePos,t.mercZoom=t.defZoom),delete t.homePos,delete t.defZoom,t.zoomRestriction&&(t.maxZoom=t.maxZoom||t.mercMaxZoom,t.minZoom=t.minZoom||t.mercMinZoom),t.zoomRestriction=t.mercMaxZoom=t.mercMinZoom=void 0,t.translator&&(t.url=t.translator(t.url)),t.imageExtension||(t.imageExtension="jpg"),!t.mapID||t.url||t.urls||(t.url=t.tms?`tiles/${t.mapID}/{z}/{x}/{-y}.${t.imageExtension}`:`tiles/${t.mapID}/{z}/{x}/{y}.${t.imageExtension}`),t.weiwudi=await Ex(t),t.weiwudi&&(t.url=t.weiwudi.url,delete t.urls);const n=await e.createAsync(t);return await n.initialWait,n}return t.noload?(t.mercMaxZoom=t.mercMinZoom=void 0,new $_(t)):new Promise(((e,n)=>{const i=t.settingFile||`maps/${t.mapID}.json`,r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="json",r.onload=async function(i){if(200===this.status||0===this.status)try{let i=this.response;if("object"!=typeof i&&(i=JSON.parse(i)),(t=mr(Object.assign(i,t))).label=t.label||i.year,t.translator&&(t.url=t.translator(t.url)),t.maptype||(t.maptype="maplat"),"base"===t.maptype||"overlay"===t.maptype||"google"===t.maptype||"mapbox"===t.maptype){const i="base"===t.maptype?xf:"overlay"===t.maptype?Nf:"google"===t.maptype?Oy:bf;i instanceof Nf?(t.homePosition||(t.homePosition=t.homePos),t.mercZoom||(t.mercZoom=t.defZoom)):(t.homePosition=t.homePos,t.mercZoom=t.defZoom),delete t.homePos,delete t.defZoom,t.zoomRestriction&&(t.maxZoom=t.maxZoom||t.mercMaxZoom,t.minZoom=t.minZoom||t.mercMinZoom),t.zoomRestriction=t.mercMaxZoom=t.mercMinZoom=void 0;try{t.imageExtension||(t.imageExtension="jpg"),!t.mapID||t.url||t.urls||(t.url=t.tms?`tiles/${t.mapID}/{z}/{x}/{-y}.${t.imageExtension}`:`tiles/${t.mapID}/{z}/{x}/{y}.${t.imageExtension}`),t.weiwudi=await Ex(t),t.weiwudi&&(t.url=t.weiwudi.url,delete t.urls);const n=await i.createAsync(t);try{await n.initialWait,e(n)}catch(t){e(n)}}catch(t){n(t)}return}try{delete t.homePos,delete t.defZoom,t.imageExtension||(t.imageExtension="jpg"),!t.mapID||t.url||t.urls||(t.url=`tiles/${t.mapID}/{z}/{x}/{y}.${t.imageExtension}`),t.width=t.width||t.compiled.wh[0],t.height=t.height||t.compiled.wh[1],t.weiwudi=await Ex(t),t.weiwudi&&(t.url=t.weiwudi.url,delete t.urls);const n=await $_.createAsync(t);try{await n.initialWait,n.setupMapParameter(e)}catch(t){n.setupMapParameter(e)}}catch(t){n(t)}}catch(t){n(t)}else n("Fail to load map json")},r.send()}))}async function Ex(t){const e={};if("mapbox"===t.maptype||!t.enableCache)return;"base"===t.maptype||"overlay"===t.maptype?e.type="wmts":e.type="xyz",e.url=t.urls?t.urls:t.url,e.width=t.width,e.height=t.height,e.maxZoom=t.maxZoom,e.minZoom=t.minZoom;const n=t.envelopeLngLats;if(n){const t=n.reduce(((t,e)=>(t[0]=t[0]>e[0]?e[0]:t[0],t[1]=t[1]<e[0]?e[0]:t[1],t[2]=t[2]>e[1]?e[1]:t[2],t[3]=t[3]<e[1]?e[1]:t[3],t)),[1/0,-1/0,1/0,-1/0]);["minLng","maxLng","minLat","maxLat"].map(((n,i)=>{e[n]=t[i]}))}let i;try{i=await Gf.registerMap(t.mapID,e)}catch(t){}return i}const Sx={};var Cx=n(6816),Ix=n.n(Cx);function Mx(t,...e){const n=mr(Object.assign({},t));if(n.icon)return n;const i=e.reduce(((t,e)=>{if(t)return t;const i=e.iconTemplate||e.iconTemplate;return i?JSON.parse(Ix()(i)(n)):e.icon?{icon:e.icon,selectedIcon:e.selectedIcon||e.selectedIcon}:void 0}),void 0);return i&&(n.icon=i.icon,n.selectedIcon=i.selectedIcon),n}function Lx(t,...e){return(t=mr(t)).html?t:e.reduce(((e,n)=>{if(e)return e;const i=n.poiTemplate;return i?(t.html=Ix()(i)(t),t.poiStyle=t.poiStyle||n.poiStyle,t):void 0}),void 0)||t}class Tx extends Mt{constructor(t){super(),this.translateUI=!1,this.noRotate=!1,this.initialRestore={},this.mapDiv="map_div",this.restoreSession=!1,this.stateBuffer={},this.overlay=!0,this.appLang="ja",this.timer=void 0,this.startFrom="",this.vectors=[],this.__backMapMoving=!1,this.__init=!0,this.__redrawMarkerBlock=!1,this.__redrawMarkerThrottle=[],t=mr(t),this.appid=t.appid||"sample",t.mapboxgl&&(this.mapboxgl=t.mapboxgl,t.mapboxToken&&(this.mapboxgl.accessToken=t.mapboxToken)),this.mapDiv=t.div||"map_div",this.mapDivDocument=document.querySelector(`#${this.mapDiv}`),this.mapDivDocument.classList.add("maplat"),this.logger=new Qe(t.debug?Je.ALL:Je.INFO),this.enableCache=t.enableCache||!1,this.icon=t.icon,this.selectedIcon=t.selectedIcon,this.translateUI=t.translateUI;const e=t.setting;if(this.lang=t.lang,this.lang||(this.lang=$e()),"zh-hk"!=this.lang.toLowerCase()&&"zh-hant"!=this.lang.toLowerCase()||(this.lang="zh-TW"),t.restore)t.restoreSession&&(this.restoreSession=!0),this.initialRestore=t.restore;else if(t.restoreSession){this.restoreSession=!0;const t=parseInt(localStorage.getItem("epoch")||"0"),e=Math.floor((new Date).getTime()/1e3);t&&e-t<3600&&(this.initialRestore.mapID=localStorage.getItem("mapID")||localStorage.getItem("sourceID")||void 0,this.initialRestore.backgroundID=localStorage.getItem("backgroundID")||localStorage.getItem("backID")||void 0,this.initialRestore.position={x:parseFloat(localStorage.getItem("x")||"0"),y:parseFloat(localStorage.getItem("y")||"0"),zoom:parseFloat(localStorage.getItem("zoom")||"0"),rotation:parseFloat(localStorage.getItem("rotation")||"0")},this.initialRestore.transparency=parseFloat(localStorage.getItem("transparency")||"0"),this.initialRestore.hideMarker=parseInt(localStorage.getItem("hideMarker")||"0"),this.initialRestore.hideLayer=localStorage.getItem("hideLayer")||void 0)}const n=fr('<img id="center_circle" class="prevent-default" alt=""\n            style="position:absolute;top:50%;left:50%;margin-top:-10px;\n            margin-left:-10px;" src="assets/images/7df82bae917b68159f84998182f2fdc6.png">');for(let t=n.length-1;t>=0;t--)this.mapDivDocument.insertBefore(n[t],this.mapDivDocument.firstChild);const i=this.mapDivDocument.querySelectorAll(".prevent-default");for(let t=0;t<i.length;t++){i[t].addEventListener("touchstart",(t=>{t.preventDefault()}))}this.overlay=!("overlay"in t)||t.overlay,this.overlay&&this.mapDivDocument.classList.add("with-opacity"),this.waitReady=this.settingLoader(e).then((e=>this.handleSetting(e,t)))}async settingLoader(t){return t||new Promise(((t,e)=>{const n=new XMLHttpRequest;n.open("GET",`apps/${this.appid}.json`,!0),n.responseType="json",n.onload=function(e){let n=this.response;"object"!=typeof n&&(n=JSON.parse(n)),t(n)},n.send()}))}async i18nLoader(){return new Promise(((t,e)=>{const n=0!=Object.keys(Sx).length;(this.translateUI&&!n?ze.use(We):ze).init({lng:this.lang,fallbackLng:["en"],backend:{loadPath:"assets/locales/{{lng}}/{{ns}}.json"},resources:n?Sx:void 0},((e,n)=>{t([n,ze])}))}))}async sourcesLoader(t){const e=this.appData.sources,n=[],i={homePos:t.homePos,defZoom:t.defZoom,zoomRestriction:t.zoomRestriction,mercMinZoom:t.mercMinZoom,mercMaxZoom:t.mercMaxZoom,enableCache:this.enableCache,translator:t=>this.translate(t)};for(let t=0;t<e.length;t++){const r=e[t];n.push(wx(r,i))}return Promise.all(n)}handleSetting(t,e){return this.appData=mr(t),!this.lang&&this.appData.lang&&(this.lang=this.appData.lang),this.i18nLoader().then((t=>this.handleI18n(t,e)))}handleI18n(t,e){this.i18n=t[1],this.t=t[0];const n=this.prepareMap(e);return Ji(this.appData.pois||[],this).then((t=>this.handlePois(t,n)))}prepareMap(t){t=mr(t),this.mercBuffer=null;const e=this.appData.homePosition,n=this.appData.defaultZoom,i=this.appData.zoomRestriction,r=this.appData.minZoom,o=this.appData.maxZoom;this.appName=this.appData.appName;const s=!!t.fake&&this.appData.fakeGps,a=!!t.fake&&this.appData.fakeRadius;this.appLang=this.appData.lang||"ja",this.noRotate=t.noRotate||this.appData.noRotate||!1,this.poiTemplate=t.poiTemplate||this.appData.poiTemplate||!1,this.poiStyle=t.poiStyle||this.appData.poiStyle||!1,this.iconTemplate=t.iconTemplate||this.appData.iconTemplate||!1,this.currentPosition=null,this.__init=!0,this.dispatchEvent(new Ze("uiPrepare"));const l=`${this.mapDiv}_front`;let c=fr(`<div id="${l}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>`)[0];this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.mapObject=new Rf({div:l,controls:this.appData.controls||[],interactions:this.noRotate?Iu({altShiftDragRotate:!1,pinchRotate:!1}):Iu().extend([new Af({condition:$c})]),fakeGps:s,fakeRadius:a,homePosition:e,northUp:t.northUp||this.appData.northUp||!1,tapDuration:t.tapDuration||this.appData.tapDuration||3e3,homeMarginPixels:t.homeMarginPixels||this.appData.homeMarginPixels||50,tapUIVanish:t.tapUIVanish||this.appData.tapUIVanish||!1});let u=null;if(this.overlay&&(u=`${this.mapDiv}_back`,c=fr(`<div id="${u}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>`)[0],this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.backMap=new Rf({off_control:!0,div:u})),this.mapboxgl){const t=this.mapboxgl;delete this.mapboxgl;const e=`${this.mapDiv}_mapbox`;c=fr(`<div id="${e}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;visibility:hidden;"></div>`)[0],this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.mapboxMap=new t.Map({attributionControl:!1,boxZoom:!1,container:e,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1})}return this.startFrom=this.appData.startFrom,{homePos:e,defZoom:n,zoomRestriction:i,mercMinZoom:r,mercMaxZoom:o}}handlePois(t,e){return this.pois=t,this.sourcesLoader(e).then((t=>this.handleSources(t)))}handleSources(t){this.mercSrc=t.reduce(((t,e)=>t||(e instanceof xf&&!(e instanceof Nf)||e instanceof Oy?e:void 0)),null);const e=[];this.cacheHash={};for(let n=0;n<t.length;n++){const i=t[n];if(i.setMap(this.mapObject),i instanceof bf){if(!this.mapboxMap)throw"To use mapbox gl based base map, you have to make Maplat object with specifying 'mapboxgl' option.";i.mapboxMap=this.mapboxMap}e.push(i),this.cacheHash[i.mapID]=i}this.dispatchEvent(new Ze("sourceLoaded",t)),this.setInitialMap(e),this.setMapClick(),this.setPointerEvents(),this.setMapOnOff(),this.setMouseCursor(),this.setBackMapBehavior(),this.raiseChangeViewpoint()}async setInitialMap(t){const e=this.initialRestore.mapID||this.startFrom||t[t.length-1].mapID;this.from=t.reduce(((t,n)=>t?t instanceof kf||n.mapID==e?t:n:n.mapID!=e?n:t),void 0),await this.changeMap(e,this.initialRestore)}setMapClick(){this.mapObject.on("click",(t=>{this.logger.debug(t.pixel),this.lastClickEvent=t;const e=[];if(t.target.forEachFeatureAtPixel(t.pixel,(n=>{this.logger.debug(t.pixel),n.get("datum")&&e.push(n.get("datum"))})),e.length>0)this.dispatchEvent(new Ze("clickMarker",e[0])),this.dispatchEvent(new Ze("clickMarkers",e));else{const e=t.coordinate;this.dispatchEvent(new Ze("clickMapXy",e)),this.from.sysCoord2MercAsync(e).then((t=>{this.dispatchEvent(new Ze("clickMapMerc",t));const e=ki(t,"EPSG:3857","EPSG:4326");this.dispatchEvent(new Ze("clickMap",{longitude:e[0],latitude:e[1]}))}))}}))}setPointerEvents(){let t,e=!1,n=!1;const i={},r=n=>{this.dispatchEvent(new Ze("pointerMoveOnMapXy",n)),this.from.sysCoord2MercAsync(n).then((n=>{if(this.dispatchEvent(new Ze("pointerMoveOnMapMerc",n)),t){const e=t;t=!1,r(e)}else e=!1}))};this.mapObject.on("pointermove",(i=>{n||(e?t=i.coordinate:(e=!0,r(i.coordinate)))})),this.mapObject.on("pointerdown",(t=>{t.originalEvent&&null!=t.originalEvent.pointerId&&(i[t.originalEvent.pointerId]=!0),n=!0})),this.mapObject.on("pointerdrag",(t=>{t.originalEvent&&null!=t.originalEvent.pointerId&&(i[t.originalEvent.pointerId]=!0),n=!0})),this.mapObject.on("pointerup",(t=>{t.originalEvent&&null!=t.originalEvent.pointerId?(delete i[t.originalEvent.pointerId],0==Object.keys(i).length&&(n=!1)):t.originalEvent&&t.originalEvent.touches?0==t.originalEvent.touches.length&&(n=!1):n=!1}))}setMapOnOff(){let t;this.mapObject.on("click",(()=>{t&&(clearTimeout(t),t=void 0);const e=this.mapDivDocument.querySelectorAll(".ol-control");if(!this.mapObject.tapUIVanish||e.length&&e[0].classList.contains("fade"))for(let t=0;t<e.length;t++)e[t].classList.remove("fade");else{for(let t=0;t<e.length;t++)e[t].classList.add("fade");t=setTimeout((()=>{t=void 0;const e=this.mapDivDocument.querySelectorAll(".ol-control");for(let t=0;t<e.length;t++)e[t].classList.remove("fade")}),this.mapObject.tapDuration)}})),this.mapObject.on("pointerdrag",(()=>{t&&(clearTimeout(t),t=void 0);const e=this.mapDivDocument.querySelectorAll(".ol-control");for(let t=0;t<e.length;t++)e[t].classList.add("fade")})),this.mapObject.on("moveend",(()=>{t&&(clearTimeout(t),t=void 0),t=setTimeout((()=>{t=void 0;const e=this.mapDivDocument.querySelectorAll(".ol-control");for(let t=0;t<e.length;t++)e[t].classList.remove("fade")}),this.mapObject.tapDuration)}))}setMouseCursor(){this.mapObject.on("pointermove",(t=>{const e=t.target.getEventPixel(t.originalEvent),n=t.target.hasFeatureAtPixel(e),i=t.target.getTarget();if(n){const e=t.target.forEachFeatureAtPixel(t.pixel,(t=>{if(t.get("datum"))return t}));this.mapDivDocument.querySelector(`#${i}`).style.cursor=e?"pointer":""}else this.mapDivDocument.querySelector(`#${i}`).style.cursor=""}));this.mapObject.on("moveend",(t=>{let e=t.frameState.viewState.center;const n=this.from;n.insideCheckSysCoord(e)||(e=n.modulateSysCoordInside(e),t.target.getView().setCenter(e))}))}setBackMapBehavior(){this.mapObject.on("postrender",(t=>{if(!this.backMap)return;if(this.__backMapMoving)return void this.logger.debug("Backmap moving skipped");const e=this.backMap.getSource();e&&(this.__backMapMoving=!0,this.logger.debug("Backmap moving started"),this.convertParametersFromCurrent(e,(t=>{const e=this.backMap.getView();e.setCenter(t[0]),e.setZoom(t[1]),e.setRotation(this.noRotate?0:t[2]),this.logger.debug("Backmap moving ended"),this.__backMapMoving=!1})))}))}raiseChangeViewpoint(){this.mapObject.on("postrender",(t=>{const e=this.mapObject.getView(),n=e.getCenter(),i=e.getDecimalZoom(),r=dr(180*e.getRotation()/Math.PI);this.from.viewpoint2MercsAsync().then((t=>this.mercSrc.mercs2ViewpointAsync(t))).then((t=>{if(this.mobileMapMoveBuffer&&this.mobileMapMoveBuffer[0][0]==t[0][0]&&this.mobileMapMoveBuffer[0][1]==t[0][1]&&this.mobileMapMoveBuffer[1]==t[1]&&this.mobileMapMoveBuffer[2]==t[2])return;this.mobileMapMoveBuffer=t;const e=ki(t[0],"EPSG:3857","EPSG:4326"),o=dr(180*t[2]/Math.PI);this.dispatchEvent(new Ze("changeViewpoint",{x:n[0],y:n[1],longitude:e[0],latitude:e[1],mercator_x:t[0][0],mercator_y:t[0][1],zoom:i,mercZoom:t[1],direction:o,rotation:r})),this.requestUpdateState({position:{x:n[0],y:n[1],zoom:i,rotation:r}})}))}))}currentMapInfo(){return gr(this.from)}mapInfo(t){return gr(this.cacheHash[t])}setMarker(t){this.logger.debug(t);const e=t.lnglat||[t.lng||t.longitude,t.lat||t.latitude],n=t.x,i=t.y,r=t.coordinates,o=this.from,s=t.icon?this.__selectedMarker==t.namespaceID&&t.selectedIcon?t.selectedIcon:t.icon:this.__selectedMarker==t.namespaceID?"assets/images/f115726e6249018905cca51653e1262c.png":If;return(r?o.merc2SysCoordAsync_ignoreBackground(r):n&&i?new Promise((t=>{t(o.xy2SysCoord([n,i]))})):function(){const t=ki(e,"EPSG:4326","EPSG:3857");return o.merc2SysCoordAsync_ignoreBackground(t)}()).then((e=>{e&&o.insideCheckSysCoord(e)&&this.mapObject.setMarker(e,{datum:t},s)}))}resetMarker(){this.mapObject.resetMarker()}setLine(t){t.type="Line",!t.style&&t.stroke&&(t.style={stroke:t.stroke}),this.setVector(t)}setVector(t){let e;this.logger.debug(t);const n=(t,e=!1)=>Promise.all(t.map((t=>Array.isArray(t[0])?n(t,e):(e&&(t=ki(t,"EPSG:4326","EPSG:3857")),this.from.merc2SysCoordAsync(t)))));e=t.coordinates?n(t.coordinates):n(t.lnglats,!0),e.then((e=>{this.mapObject.setVector(e,t.type,t.style)}))}resetLine(){this.resetVector()}resetVector(){this.mapObject.resetVector()}redrawMarkers(t=void 0){if(t||(t=this.from),this.__redrawMarkerBlock){this.__redrawMarkerThrottle||(this.__redrawMarkerThrottle=[]);const e=this.__redrawMarkerThrottle;if(0==e.length||e[e.length-1]!==t)return void e.push(t)}this.__redrawMarkerBlock=!0;const e=t=>{const n=[];let i;this.resetMarker(),this.stateBuffer.hideMarker||(Object.keys(this.pois).map((t=>{const e=this.pois[t];e.hide||e.pois.map((t=>{const r=Mx(t,e,this);Lx(r,e,this),this.__selectedMarker==r.namespaceID?i=r:n.push(this.setMarker(r))}))})),t.pois&&Object.keys(t.pois).map((e=>{const r=t.pois[e];r.hide||r.pois.map((e=>{const o=Mx(e,r,t,this);Lx(o,r,t,this),this.__selectedMarker==o.namespaceID?i=o:n.push(this.setMarker(o))}))})));let r=Promise.all(n);i&&(r=r.then((()=>this.setMarker(i)))),r.then((()=>{this.__redrawMarkerThrottle&&this.__redrawMarkerThrottle.length>0?e(this.__redrawMarkerThrottle.shift()):this.__redrawMarkerBlock=!1}))};e(t)}selectMarker(t){const e=this.getMarker(t);if(!e)return;this.__selectedMarker=t;const n={latitude:e.lnglat?e.lnglat[1]:e.lat?e.lat:e.latitude,longitude:e.lnglat?e.lnglat[0]:e.lng?e.lng:e.longitude};this.setViewpoint(n),this.redrawMarkers()}unselectMarker(){delete this.__selectedMarker,this.redrawMarkers()}getMarker(t){if(t.indexOf("#")<0){let e;return Object.keys(this.pois).map((n=>{this.pois[n].pois.map(((i,r)=>{i.id==t&&(e=this.pois[n].pois[r])}))})),e}{const e=t.split("#"),n=this.cacheHash[e[0]];if(n)return n.getPoi(e[1])}}updateMarker(t,e,n){const i=this.getMarker(t);i&&(e=tr(e||{}),n?(Object.keys(i).map((t=>{"id"!=t&&"namespaceID"!=t&&delete i[t]})),Object.assign(i,e)):Object.keys(e).map((t=>{"id"!=t&&"namespaceID"!=t&&("____delete____"==e[t]?delete i[t]:i[t]=e[t])})),this.redrawMarkers())}addMarker(t,e){if(e||(e="main"),e.indexOf("#")<0){if(this.pois[e])return this.pois[e].pois.push(tr(t)),er(this.pois,e,{name:this.appName}),this.dispatchPoiNumber(),this.redrawMarkers(),t.namespaceID}else{const n=e.split("#"),i=this.cacheHash[n[0]];if(i){const e=i.addPoi(t,n[1]);return this.dispatchPoiNumber(),this.redrawMarkers(),e}}}removeMarker(t){if(t.indexOf("#")<0)Object.keys(this.pois).map((e=>{this.pois[e].pois.map(((n,i)=>{n.id==t&&(delete this.pois[e].pois[i],this.dispatchPoiNumber(),this.redrawMarkers())}))}));else{const e=t.split("#"),n=this.cacheHash[e[0]];n&&(n.removePoi(e[1]),this.dispatchPoiNumber(),this.redrawMarkers())}}clearMarker(t){if(t||(t="main"),t.indexOf("#")<0){if("all"==t)Object.keys(this.pois).map((t=>{this.pois[t].pois=[]}));else{if(!this.pois[t])return;this.pois[t].pois=[]}this.dispatchPoiNumber(),this.redrawMarkers()}else{const e=t.split("#"),n=this.cacheHash[e[0]];n&&(n.clearPoi(e[1]),this.dispatchPoiNumber(),this.redrawMarkers())}}showAllMarkers(){this.requestUpdateState({hideMarker:0}),this.redrawMarkers()}hideAllMarkers(){this.requestUpdateState({hideMarker:1}),this.redrawMarkers()}dispatchPoiNumber(){this.dispatchEvent(new Ze("poi_number",this.listPoiLayers(!1,!0).reduce(((t,e)=>t+e.pois.length),0)))}listPoiLayers(t=!1,e=!1){const n=Object.keys(this.pois).sort(((t,e)=>"main"==t?-1:"main"==e?1:t<e?-1:t>e?1:0)).map((t=>this.pois[t])).filter((n=>e?t?n.pois.length&&n.hide:n.pois.length:!t||n.hide)),i=this.from.listPoiLayers(t,e);return n.concat(i)}showPoiLayer(t){const e=this.getPoiLayer(t);e&&(delete e.hide,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((t=>t.namespaceID)).join(",")}),this.redrawMarkers())}hidePoiLayer(t){const e=this.getPoiLayer(t);e&&(e.hide=!0,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((t=>t.namespaceID)).join(",")}),this.redrawMarkers())}getPoiLayer(t){if(t.indexOf("#")<0)return this.pois[t];{const e=t.split("#"),n=this.cacheHash[e[0]];if(n)return n.getPoiLayer(e[1])}}addPoiLayer(t,e){if("main"!=t&&!this.pois[t])if(t.indexOf("#")<0)this.pois[t]=Qi(e||[],t,{name:this.appName}),this.redrawMarkers();else{const n=t.split("#"),i=this.cacheHash[n[0]];i&&(i.addPoiLayer(n[1],e),this.redrawMarkers())}}removePoiLayer(t){if("main"!=t&&this.pois[t])if(t.indexOf("#")<0)delete this.pois[t],this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((t=>t.namespaceID)).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers();else{const e=t.split("#"),n=this.cacheHash[e[0]];n&&(n.removePoiLayer(e[1]),this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((t=>t.namespaceID)).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers())}}addLine(t){this.vectors.push(t),this.setLine(t)}addVector(t){this.vectors.push(t),this.setVector(t)}clearLine(){this.vectors=[],this.resetLine()}clearVector(){this.vectors=[],this.resetVector()}setGPSMarker(t){this.currentPosition=t,this.from.setGPSMarker(t,!0)}changeMap(t,e){void 0===e&&(e={});const n=this.mercSrc,i=this.cacheHash[t];return this.changeMapSeq||(this.changeMapSeq=Promise.resolve()),this.changeMapSeq=this.changeMapSeq.then((()=>new Promise(((t,r)=>{this.convertParametersFromCurrent(i,(r=>{let o=null,s=null;const a=e.backgroundID?this.cacheHash[e.backgroundID]:void 0;if(this.backMap&&(o=this.backMap.getSource(),i instanceof xf||i instanceof Oy?this.backMap.exchangeSource():(a?(s=a,this.backMap.exchangeSource(s)):o?s=o:(s=n,(this.from instanceof xf||this.from instanceof Oy)&&(s=this.from instanceof Nf?this.mapObject.getSource():this.from),this.backMap.exchangeSource(s)),this.requestUpdateState({backgroundID:s.mapID}))),i instanceof Nf){if(this.mapObject.setLayer(i),a)this.mapObject.exchangeSource(a);else if(!(this.from instanceof xf||this.from instanceof Oy)){const t=o||n;this.mapObject.exchangeSource(t)}this.requestUpdateState({backgroundID:this.mapObject.getSource().mapID})}else this.mapObject.setLayer(),this.mapObject.exchangeSource(i);const l={mapID:i.mapID};(i instanceof xf&&!(i instanceof Nf)||i instanceof Oy)&&(l.backgroundID="____delete____"),this.requestUpdateState(l),this.from=i,this.dispatchPoiNumber();const c=this.mapObject.getView();if(this.appData.zoomRestriction&&(c.setMaxZoom(i.maxZoom),c.setMinZoom(i.minZoom||0)),i.insideCheckSysCoord(r[0])?(c.setCenter(r[0]),c.setZoom(r[1]),c.setRotation(this.noRotate?0:r[2])):this.__init||(this.dispatchEvent(new Ze("outOfMap",{})),this.goHome(i)),i.setGPSMarker(this.currentPosition,!0),e.hideLayer){e.hideLayer.split(",").map((t=>{const e=this.getPoiLayer(t);e&&(e.hide=!0)})),this.requestUpdateState({hideLayer:e.hideLayer})}e.hideMarker?this.hideAllMarkers():this.redrawMarkers(),this.resetVector();for(let t=0;t<this.vectors.length;t++)(t=>{this.setVector(t)})(this.vectors[t]);this.dispatchEvent(new Ze("mapChanged",this.getMapMeta(i.mapID))),this.mapObject.updateSize(),this.mapObject.renderSync(),e.position&&(this.__init=!1,i.setViewpoint(e.position)),e.transparency&&this.setTransparency(e.transparency),this.__init?(this.__init=!1,this.goHome(i)):this.backMap&&s&&this.convertParametersFromCurrent(s,(t=>{const e=this.backMap.getView();e.setCenter(t[0]),e.setZoom(t[1]),e.setRotation(this.noRotate?0:t[2]),this.backMap.updateSize(),this.backMap.renderSync()})),t(void 0)}))}))))}requestUpdateState(t){if(this.stateBuffer=Object.assign(this.stateBuffer,t),"____delete____"==this.stateBuffer.backgroundID&&delete this.stateBuffer.backgroundID,this.restoreSession){const e=Math.floor((new Date).getTime()/1e3);localStorage.setItem("epoch",`${e}`);const n=function(t){Object.keys(t).map((e=>{"position"==e?n(t[e]):"backgroundID"==e&&"____delete____"==t[e]?localStorage.removeItem(e):localStorage.setItem(e,t[e])}))};n(t)}this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.timer=void 0,this.dispatchEvent(new Ze("updateState",this.stateBuffer))}),50)}setTransparency(t){this.__transparency=t,this.mapObject.setTransparency(t),this.requestUpdateState({transparency:t})}getTransparency(){return null==this.__transparency?0:this.__transparency}setViewpoint(t){this.from.setViewpoint(t)}goHome(t){(t||this.from).goHome()}resetRotation(){this.from.resetRotation()}resetDirection(){this.from.resetDirection()}resetCirculation(){this.from.resetCirculation()}getMapMeta(t){let e;if(e=t?this.cacheHash[t]:this.from,e)return cr.reduce(((t,n)=>(t[n]=e[n],t)),{mapID:e.mapID,label:e.label})}getMapCacheEnable(t){let e;return e=t?this.cacheHash[t]:this.from,!!e&&e.getCacheEnable()}async getMapTileCacheStatsAsync(t){let e;return e=t?this.cacheHash[t]:this.from,e?await e.getTileCacheStatsAsync():{}}async getMapTileCacheSizeAsync(t){return(await this.getMapTileCacheStatsAsync(t)).size||0}async clearMapTileCacheAsync(t){let e;e=t?this.cacheHash[t]:this.from,e&&await e.clearTileCacheAsync()}async fetchAllMapTileCacheAsync(t,e){let n;n=t?this.cacheHash[t]:this.from,n?await n.fetchAllTileCacheAsync(e):e("stop",{})}async cancelMapTileCacheAsync(t){let e;e=t?this.cacheHash[t]:this.from,e&&await e.cancelTileCacheAsync()}convertParametersFromCurrent(t,e){const n=this.mapObject.getView();let i=this.from.viewpoint2MercsAsync();const r=Ef([n.getCenter(),n.getZoom(),n.getRotation()],10);if(this.mercBuffer&&this.mercBuffer.mercs&&this.mercBuffer.buffer[this.from.mapID]){const t=this.mercBuffer.buffer[this.from.mapID];t[0][0]==r[0][0]&&t[0][1]==r[0][1]&&t[1]==r[1]&&t[2]==r[2]?(this.logger.debug(t),this.logger.debug(r),this.logger.debug("From: Use buffer"),i=new Promise(((t,e)=>{t(this.mercBuffer.mercs)}))):(this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=r)}else this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=r;this.logger.debug(`From: Center: ${r[0]} Zoom: ${r[1]} Rotation: ${r[2]}`),this.logger.debug(`From: ${this.from.mapID}`),i.then((n=>{this.mercBuffer.mercs=n,this.logger.debug(`Mercs: ${n}`);let i=t.mercs2ViewpointAsync(n);const r=t.mapID;this.mercBuffer.buffer[r]&&(this.logger.debug("To: Use buffer"),i=new Promise(((t,e)=>{t(this.mercBuffer.buffer[r])}))),i.then((n=>{this.logger.debug(`To: Center: ${n[0]} Zoom: ${n[1]} Rotation: ${n[2]}`),this.logger.debug(`To: ${t.mapID}`),this.mercBuffer.buffer[t.mapID]=Ef(n,10),e(n)})).catch((t=>{throw t}))})).catch((t=>{throw t}))}translate(t){if(!t||"string"==typeof t)return t;const e=Object.keys(t);let n=e.reduce(((e,n,i,r)=>(n==this.appLang?e=[t[n],!0]:e&&("en"!=n||e[1])||(e=[t[n],!1]),i==r.length-1?e[0]:e)),void 0);if(n="string"==typeof n?n:`${n}`,this.i18n.exists(n,{ns:"translation",nsSeparator:"__X__yX__X__"}))return this.t(n,{ns:"translation",nsSeparator:"__X__yX__X__"});for(let i=0;i<e.length;i++){const r=e[i];this.i18n.addResource(r,"translation",n,t[r])}return this.t(n,{ns:"translation",nsSeparator:"__X__yX__X__"})}remove(){this.mapboxMap&&this.mapboxMap.remove(),this.mapDivDocument.innerHTML="",this.mapDivDocument.classList.remove("maplat")}}var Px="ol-ctx-menu";const Ox={namespace:Px,container:"".concat(Px,"-container"),separator:"".concat(Px,"-separator"),submenu:"".concat(Px,"-submenu"),hidden:"".concat(Px,"-hidden"),icon:"".concat(Px,"-icon"),zoomIn:"".concat(Px,"-zoom-in"),zoomOut:"".concat(Px,"-zoom-out"),unselectable:"ol-unselectable"};var Rx=Ox,Ax="beforeopen",kx="open",Nx="close",Dx="contextmenu",Fx={width:150,scrollAt:4,eventType:Dx,defaultItems:!0},jx=[{text:"Zoom In",classname:"".concat(Ox.zoomIn," ").concat(Ox.icon),callback:function(t,e){var n=e.getView();n.animate({zoom:+n.getZoom()+1,duration:700,center:t.coordinate})}},{text:"Zoom Out",classname:"".concat(Ox.zoomOut," ").concat(Ox.icon),callback:function(t,e){var n=e.getView();n.animate({zoom:+n.getZoom()-1,duration:700,center:t.coordinate})}}];n(3123),n(4603),n(3210);function Bx(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed";if(!t){if("undefined"!=typeof Error)throw new Error(e);throw e}}function Gx(t){return/^\d+$/.test(t)}function zx(t,e,n){if(Array.isArray(t))t.forEach((function(t){return zx(t,e)}));else for(var i=Array.isArray(e)?e:e.split(/\s+/),r=i.length;r--;)qx(t,i[r])||Wx(t,i[r],n)}function Ux(t,e,n){if(Array.isArray(t))t.forEach((function(t){return Ux(t,e,n)}));else for(var i=Array.isArray(e)?e:e.split(/\s+/),r=i.length;r--;)qx(t,i[r])&&Zx(t,i[r],n)}function qx(t,e){return t.classList?t.classList.contains(e):Hx(e).test(t.className)}function Xx(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=arguments.length>2?arguments[2]:void 0,i=Array.prototype.slice,r=[];if(/^(#?[\w-]+|\.[\w-.]+)$/.test(t))switch(t[0]){case"#":r=[Vx(t.substr(1))];break;case".":r=i.call(e.getElementsByClassName(t.substr(1).replace(/\./g," ")));break;default:r=i.call(e.getElementsByTagName(t))}else r=i.call(e.querySelectorAll(t));return n?r:r[0]}function Vx(t){return t="#"===t[0]?t.substr(1,t.length):t,document.getElementById(t)}function Yx(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e}function Hx(t){return new RegExp("(^|\\s+) ".concat(t," (\\s+|$)"))}function Wx(t,e,n){t.classList?t.classList.add(e):t.className="".concat(t.className," ").concat(e).trim(),n&&Gx(n)&&window.setTimeout((function(){return Zx(t,e)}),n)}function Zx(t,e,n){t.classList?t.classList.remove(e):t.className=t.className.replace(Hx(e)," ").trim(),n&&Gx(n)&&window.setTimeout((function(){return Wx(t,e)}),n)}function $x(t){return $x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(t)}function Kx(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==$x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==$x(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===$x(o)?o:String(o)),i)}var r,o}var Jx=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Base=e,this.map=void 0,this.viewport=void 0,this.coordinateClicked=void 0,this.pixelClicked=void 0,this.lineHeight=0,this.items={},this.opened=!1,this.submenu={left:"".concat(e.options.width-15,"px"),lastLeft:""},this.eventHandler=this.handleEvent.bind(this),this.eventMapMoveHandler=this.handleMapMoveEvent.bind(this),this}var e,n,i;return e=t,n=[{key:"init",value:function(t){this.map=t,this.viewport=t.getViewport(),this.setListeners(),this.Base.Html.createMenu(),this.lineHeight=this.getItemsLength()>0?this.Base.container.offsetHeight/this.getItemsLength():this.Base.Html.cloneAndGetLineHeight()}},{key:"getItemsLength",value:function(){var t=this,e=0;return Object.keys(this.items).forEach((function(n){t.items[n].submenu||t.items[n].separator||e++})),e}},{key:"getPixelClicked",value:function(){return this.pixelClicked}},{key:"getCoordinateClicked",value:function(){return this.coordinateClicked}},{key:"positionContainer",value:function(t){var e=this,n=this.Base.container,i=this.map.getSize(),r=i[1]-t[1],o=i[0]-t[0],s={w:n.offsetWidth,h:Math.round(this.lineHeight*this.getItemsLength())},a=Xx("li.".concat(Rx.submenu,">div"),n,!0);o>=s.w?(n.style.right="auto",n.style.left="".concat(t[0]+5,"px")):(n.style.left="auto",n.style.right="15px"),r>=s.h?(n.style.bottom="auto",n.style.top="".concat(t[1]-10,"px")):(n.style.top="auto",n.style.bottom=0),Ux(n,Rx.hidden),a.length&&(this.submenu.lastLeft=o<2*s.w?"-".concat(s.w,"px"):this.submenu.left,a.forEach((function(t){var n,i,o,s={w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight},a=(i=(n=t).getBoundingClientRect(),o=document.documentElement,{left:i.left+window.pageXOffset-o.clientLeft,top:i.top+window.pageYOffset-o.clientTop,width:n.offsetWidth,height:n.offsetHeight}),l=a.height,c=r-l;c<0&&(c=l-(s.h-a.top),t.style.top="-".concat(c,"px")),t.style.left=e.submenu.lastLeft})))}},{key:"openMenu",value:function(t,e){this.Base.dispatchEvent({type:kx,pixel:t,coordinate:e}),this.opened=!0,this.positionContainer(t)}},{key:"closeMenu",value:function(){this.opened=!1,zx(this.Base.container,Rx.hidden),this.Base.dispatchEvent({type:Nx})}},{key:"setListeners",value:function(){this.viewport.addEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map.on("movestart",this.eventMapMoveHandler)}},{key:"removeListeners",value:function(){this.viewport.removeEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map.un("movestart",this.eventMapMoveHandler)}},{key:"handleEvent",value:function(t){var e=this,n=this;this.coordinateClicked=this.map.getEventCoordinate(t),this.pixelClicked=this.map.getEventPixel(t),this.Base.dispatchEvent({type:Ax,pixel:this.pixelClicked,coordinate:this.coordinateClicked}),this.Base.disabled||(this.Base.options.eventType===Dx&&(t.stopPropagation(),t.preventDefault()),this.openMenu(this.pixelClicked,this.coordinateClicked),t.target.addEventListener("pointerdown",{handleEvent:function(i){n.opened&&(n.closeMenu(),i.stopPropagation(),t.target.removeEventListener(i.type,e,!1))}},!1))}},{key:"handleMapMoveEvent",value:function(t){this.closeMenu()}},{key:"setItemListener",value:function(t,e){var n,i=this;t&&"function"==typeof this.items[e].callback&&(n=this.items[e].callback,t.addEventListener("click",(function(t){t.preventDefault();var r={coordinate:i.getCoordinateClicked(),data:i.items[e].data||null};i.closeMenu(),n(r,i.map)}),!1))}}],n&&Kx(e.prototype,n),i&&Kx(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qx(t){return Qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(t)}function tb(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Qx(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Qx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Qx(o)?o:String(o)),i)}var r,o}var eb=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Base=e,this.container=this.Base.container,this}var e,n,i;return e=t,n=[{key:"createMenu",value:function(){var t=[];if("items"in this.Base.options?t=this.Base.options.defaultItems?this.Base.options.items.concat(jx):this.Base.options.items:this.Base.options.defaultItems&&(t=jx),0===t.length)return!1;t.forEach(this.addMenuEntry,this)}},{key:"addMenuEntry",value:function(t){var e,n=this;if(t.items&&Array.isArray(t.items)){t.classname=t.classname||"",e=Rx.submenu,~t.classname.indexOf(e)||(t.classname=t.classname.length?" ".concat(Rx.submenu):Rx.submenu);var i=this.generateHtmlAndPublish(this.container,t),r=lb(!1,this.Base.options.width);r.style.left=this.Base.Internal.submenu.lastLeft||this.Base.Internal.submenu.left,i.appendChild(r),t.items.forEach((function(t){n.generateHtmlAndPublish(r,t,!0)}))}else this.generateHtmlAndPublish(this.container,t)}},{key:"generateHtmlAndPublish",value:function(t,e,n){var i,r,o="_".concat(Math.random().toString(36).substr(2,9)),s=!1;return"string"==typeof e&&"-"===e.trim()?(i=Yx('<li id="'.concat(o,'" class="').concat(Rx.separator,'"><hr></li>')),r=[].slice.call(i.childNodes,0)[0],t.firstChild.appendChild(i),s=!0):(e.classname=e.classname||"",i=Yx("<span>".concat(e.text,"</span>")),r=document.createElement("li"),e.icon&&(""===e.classname?e.classname=Rx.icon:-1===e.classname.indexOf(Rx.icon)&&(e.classname+=" ".concat(Rx.icon)),r.setAttribute("style","background-image:url(".concat(e.icon,")"))),r.id=o,r.className=e.classname,r.appendChild(i),t.firstChild.appendChild(r)),this.Base.Internal.items[o]={id:o,submenu:n||0,separator:s,callback:e.callback,data:e.data||null},this.Base.Internal.setItemListener(r,o),r}},{key:"removeMenuEntry",value:function(t){var e=Xx("#".concat(t),this.container.firstChild);e&&this.container.firstChild.removeChild(e),delete this.Base.Internal.items[t]}},{key:"cloneAndGetLineHeight",value:function(){var t=this.container.cloneNode(),e=Yx("<span>Foo</span>"),n=Yx("<span>Foo</span>"),i=document.createElement("li"),r=document.createElement("li");i.appendChild(e),r.appendChild(n),t.appendChild(i),t.appendChild(r),this.container.parentNode.appendChild(t);var o=t.offsetHeight/2;return this.container.parentNode.removeChild(t),o}}],n&&tb(e.prototype,n),i&&tb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nb(t){return nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nb(t)}function ib(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==nb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===nb(o)?o:String(o)),i)}var r,o}function rb(t,e){return rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rb(t,e)}function ob(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ab(t);if(e){var r=ab(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===nb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sb(t)}(this,n)}}function sb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ab(t){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ab(t)}var lb=function(t,e){var n=document.createElement("div"),i=document.createElement("ul"),r=[Rx.container,Rx.unselectable];return t&&r.push(Rx.hidden),n.className=r.join(" "),n.style.width="".concat(parseInt(e,10),"px"),n.appendChild(i),n},cb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rb(t,e)}(o,t);var e,n,i,r=ob(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Bx("object"==nb(e),"@param `opt_options` should be object type!");var n=function(t,e){var n={};for(var i in t)n[i]=t[i];for(var r in e)n[r]=e[r];return n}(Fx,e),i=lb(!0,n.width);return(t=r.call(this,{element:i})).options=n,t.container=i,t.disabled=!1,t.Internal=new Jx(sb(t)),t.Html=new eb(sb(t)),t}return e=o,n=[{key:"clear",value:function(){Object.keys(this.Internal.items).forEach(this.Html.removeMenuEntry,this.Html)}},{key:"close",value:function(){this.Internal.closeMenu()}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"getDefaultItems",value:function(){return jx}},{key:"countItems",value:function(){return Object.keys(this.Internal.items).length}},{key:"extend",value:function(t){Bx(Array.isArray(t),"@param `arr` should be an Array."),t.forEach(this.push,this)}},{key:"isOpen",value:function(){return this.Internal.opened}},{key:"updatePosition",value:function(t){Bx(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&this.Internal.positionContainer(t)}},{key:"pop",value:function(){var t=Object.keys(this.Internal.items);this.Html.removeMenuEntry(t[t.length-1])}},{key:"push",value:function(t){Bx(function(t){return null!=t}(t),"@param `item` must be informed."),this.Html.addMenuEntry(t)}},{key:"shift",value:function(){this.Html.removeMenuEntry(Object.keys(this.Internal.items)[0])}},{key:"setMap",value:function(t){Bc.prototype.setMap.call(this,t),t?this.Internal.init(t,this):this.Internal.removeListeners()}}],n&&ib(e.prototype,n),i&&ib(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(Bc);function ub(t){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ub(t)}function hb(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==ub(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ub(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===ub(o)?o:String(o)),i)}var r,o}function pb(t,e){return pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pb(t,e)}function fb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=db(t);if(e){var r=db(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ub(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},db(t)}var gb,mb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pb(t,e)}(o,t);var e,n,i,r=fb(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).Internal.setItemListener=function(t,e){var n,i=this;t&&"function"==typeof this.items[e].callback&&(n=this.items[e].callback,t.addEventListener("pointerdown",(function(t){t.stopPropagation()})),t.addEventListener("click",(function(t){t.preventDefault();var r={coordinate:i.getCoordinateClicked(),data:i.items[e].data||null};n(r,i.map)||i.closeMenu()}),!1))},e}return e=o,n&&hb(e.prototype,n),i&&hb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(cb),yb=n(953);(function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var r=[],o=this.data.charCodeAt(e);o>65536?(r[0]=240|(1835008&o)>>>18,r[1]=128|(258048&o)>>>12,r[2]=128|(4032&o)>>>6,r[3]=128|63&o):o>2048?(r[0]=224|(61440&o)>>>12,r[1]=128|(4032&o)>>>6,r[2]=128|63&o):o>128?(r[0]=192|(1984&o)>>>6,r[1]=128|63&o):r[0]=o,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=p.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n);this.make();for(var r=0;r<this.modules.length;r++)for(var o=1*r,s=0;s<this.modules[r].length;s++){var a=1*s;this.modules[r][s]&&(i.beginFill(0,100),i.moveTo(a,o),i.lineTo(a+1,o),i.lineTo(a+1,o+1),i.lineTo(a,o+1),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[i+o][r+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=p.getBCHTypeInfo(n),r=0;r<15;r++){var o=!t&&1==(i>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(r=0;r<15;r++){o=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[i][s-a]){var l=!1;o<t.length&&(l=1==(t[o]>>>r&1)),p.getMask(e,i,s-a)&&(l=!l),this.modules[i][s-a]=l,-1==--r&&(o++,r=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,i){for(var r=m.getRSBlocks(t,n),o=new y,s=0;s<i.length;s++){var a=i[s];o.put(a.mode,4),o.put(a.getLength(),p.getLengthInBits(a.mode,t)),a.write(o)}var l=0;for(s=0;s<r.length;s++)l+=r[s].dataCount;if(o.getLengthInBits()>8*l)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");for(o.getLengthInBits()+4<=8*l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*l||(o.put(e.PAD0,8),o.getLengthInBits()>=8*l));)o.put(e.PAD1,8);return e.createBytes(o,r)},e.createBytes=function(t,e){for(var n=0,i=0,r=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,c=e[a].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),o[a]=new Array(l);for(var u=0;u<o[a].length;u++)o[a][u]=255&t.buffer[u+n];n+=l;var h=p.getErrorCorrectPolynomial(c),f=new g(o[a],h.getLength()-1).mod(h);s[a]=new Array(h.getLength()-1);for(u=0;u<s[a].length;u++){var d=u+f.getLength()-s[a].length;s[a][u]=d>=0?f.get(d):0}}var m=0;for(u=0;u<e.length;u++)m+=e[u].totalCount;var y=new Array(m),v=0;for(u=0;u<i;u++)for(a=0;a<e.length;a++)u<o[a].length&&(y[v++]=o[a][u]);for(u=0;u<r;u++)for(a=0;a<e.length;a++)u<s[a].length&&(y[v++]=s[a][u]);return y};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},r=0,o=1,s=2,a=3,l=4,c=5,u=6,h=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case r:return(e+n)%2==0;case o:return e%2==0;case s:return n%3==0;case a:return(e+n)%3==0;case l:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case c:return e*n%2+e*n%3==0;case u:return(e*n%2+e*n%3)%2==0;case h:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new g([1],0),n=0;n<t;n++)e=e.multiply(new g([1,f.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,s=t.isDark(i,r),a=-1;a<=1;a++)if(!(i+a<0||e<=i+a))for(var l=-1;l<=1;l++)r+l<0||e<=r+l||0==a&&0==l||s==t.isDark(i+a,r+l)&&o++;o>5&&(n+=3+o-5)}for(i=0;i<e-1;i++)for(r=0;r<e-1;r++){var c=0;t.isDark(i,r)&&c++,t.isDark(i+1,r)&&c++,t.isDark(i,r+1)&&c++,t.isDark(i+1,r+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r++)for(i=0;i<e;i++)t.isDark(i,r)&&u++;return n+=10*(Math.abs(100*u/e/e-50)/5)}},f={glog:function(t){if(t<1)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;d<8;d++)f.EXP_TABLE[d]=1<<d;for(d=8;d<256;d++)f.EXP_TABLE[d]=f.EXP_TABLE[d-4]^f.EXP_TABLE[d-5]^f.EXP_TABLE[d-6]^f.EXP_TABLE[d-8];for(d=0;d<255;d++)f.LOG_TABLE[f.EXP_TABLE[d]]=d;function g(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function m(t,e){this.totalCount=t,this.dataCount=e}function y(){this.buffer=[],this.length=0}g.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=f.gexp(f.glog(this.get(n))+f.glog(t.get(i)));return new g(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=f.gexp(f.glog(t.get(i))+e);return new g(n,0).mod(t)}},m.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m.getRSBlocks=function(t,e){var n=m.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=[],o=0;o<i;o++)for(var s=n[3*o+0],a=n[3*o+1],l=n[3*o+2],c=0;c<s;c++)r.push(new m(a,l));return r},m.getRsBlockTable=function(t,e){switch(e){case i.L:return m.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return m.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return m.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return m.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},y.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var x=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,n=this._el,i=t.getModuleCount();Math.floor(e.width/i),Math.floor(e.height/i);function r(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}this.clear();var o=r("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:e.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(o),o.appendChild(r("rect",{fill:e.colorLight,width:"100%",height:"100%"})),o.appendChild(r("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<i;s++)for(var a=0;a<i;a++)if(t.isDark(s,a)){var l=r("use",{x:String(a),y:String(s)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(l)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}.apply(window),b="svg"===document.documentElement.tagName.toLowerCase()?x:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,i=t.getModuleCount(),r=Math.floor(e.width/i),o=Math.floor(e.height/i),s=['<table style="border:0;border-collapse:collapse;">'],a=0;a<i;a++){s.push("<tr>");for(var l=0;l<i;l++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+r+"px;height:"+o+"px;background-color:"+(t.isDark(a,l)?e.colorDark:e.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),n.innerHTML=s.join("");var c=n.childNodes[0],u=(e.width-c.offsetWidth)/2,h=(e.height-c.offsetHeight)/2;u>0&&h>0&&(c.style.margin=h+"px "+u+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}.apply(window):function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,i,r,o,s,a,l,c,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*e;else void 0===c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}function i(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var i=document.createElement("img"),r=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)};return i.onabort=r,i.onerror=r,i.onload=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)},void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var r=function(t,e){this._bIsPainted=!1,this._android=_(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(t){var e=this._elImage,n=this._oContext,i=this._htOption,r=t.getModuleCount(),o=i.width/r,s=i.height/r,a=Math.round(o),l=Math.round(s);e.style.display="none",this.clear();for(var c=0;c<r;c++)for(var u=0;u<r;u++){var h=t.isDark(c,u),p=u*o,f=c*s;n.strokeStyle=h?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=h?i.colorDark:i.colorLight,n.fillRect(p,f,o,s),n.strokeRect(Math.floor(p)+.5,Math.floor(f)+.5,a,l),n.strokeRect(Math.ceil(p)-.5,Math.ceil(f)-.5,a,l)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&i.call(this,t)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},r}.apply(window);function w(t,e){for(var n=1,r=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,s=v.length;o<=s;o++){var a=0;switch(e){case i.L:a=v[o][0];break;case i.M:a=v[o][1];break;case i.Q:a=v[o][2];break;case i.H:a=v[o][3]}if(r<=a)break;n++}if(n>v.length)throw new Error("Too long data");return n}gb=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(b=x),this._android=_(),this._el=t,this._oQRCode=null,this._oDrawing=new b(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},gb.prototype.makeCode=function(t){this._oQRCode=new e(w(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},gb.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},gb.prototype.clear=function(){this._oDrawing.clear()},gb.CorrectLevel=i}).apply(window);const vb=gb;var _b,xb=n(686);n(4819),n(5003);!function(){var t,e,n=document.attachEvent,i=!1;if(!n){var r=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return e(t)}),o=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)}),s=function(t){var e=t.__resizeTriggers__,n=e.firstElementChild,i=e.lastElementChild,r=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},a=function(t){var e=this;s(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach((function(n){n.call(e,t)})))}))},l=!1,c="",u="animationstart",h="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="",d=document.createElement("fakeelement");if(void 0!==d.style.animationName&&(l=!0),!1===l)for(var g=0;g<h.length;g++)if(void 0!==d.style[h[g]+"AnimationName"]){(f=h[g])+"Animation",c="-"+f.toLowerCase()+"-",u=p[g],l=!0;break}var m="resizeanim",y="@"+c+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",v=c+"animation: 1ms "+m+"; "}_b=function(t,e){n?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),function(){if(!i){var t=(y||"")+".resize-triggers { "+(v||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),i=!0}}(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),s(t),t.addEventListener("scroll",a,!0),u&&t.__resizeTriggers__.addEventListener(u,(function(e){e.animationName==m&&s(t)}))),t.__resizeListeners__.push(e))},function(t,e){n?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",a),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}}();const bb={"Maplat.png":"assets/images/558bc7e8b9b6c5f41a7141cddb8cdb5e.png","all_right_reserved.png":"assets/images/f101a0974972eeab41189185a5c5b225.png","attr.png":"assets/images/acc6eab0ba9c470ae20fb4b74135e865.png","basemap.png":"assets/images/7bef6f357e921c43f4f800cfcb757872.png","blue_marker.png":"assets/images/927c34e7b9b2f95c82ba477993117eaf.png","bluedot.png":"assets/images/6e1f2f2f6fed3c5cddeb925e7ae75aba.png","bluedot_small.png":"assets/images/0beac2cb41dfab43ddfd9df80b32b85d.png","bluedot_transparent.png":"assets/images/6c5dba7f7d76e74c3a8c7c5b1c3fc544.png","border.png":"assets/images/90c32e751366be22777f3fe40a53fe06.png","cc0.png":"assets/images/7d9d643a903df6f57b8b7386316021e5.png","cc_by-nc-nd.png":"assets/images/ffea4dd10bf2506aa1e0cd4c61426b42.png","cc_by-nc-sa.png":"assets/images/95e9ca8285131f8ccb6da5052093173c.png","cc_by-nc.png":"assets/images/ca6b77b234b18e7bb9b1ccda774da286.png","cc_by-nd.png":"assets/images/1354b4f40dd58bb0f2a4871cb4ff81d8.png","cc_by-sa.png":"assets/images/649fce122b354de2ac725ba5f2661955.png","cc_by.png":"assets/images/2a61e310e46b50b5f8ddd5e905ba9db9.png","compass.png":"assets/images/cd213169df16398b0017450e31788d73.png","defaultpin.png":"assets/images/9ac6d81f417d6a5626b7c8d5a087c32b.png","defaultpin_selected.png":"assets/images/f115726e6249018905cca51653e1262c.png","favicon.png":"assets/images/3131423d782cd3ea89a81247065e7f9d.png","fullscreen.png":"assets/images/9247459937b9c882303962e42bd8d989.png","gps.png":"assets/images/ba48b220f61a6e1028f1854326f43acd.png","gsi.jpg":"assets/images/b9ae27f0a01228380dff76a33b605707.jpg","gsi_ortho.jpg":"assets/images/41b2cf0fa604d3f196ca52337d238219.jpg","help.png":"assets/images/c49f2344772e33256ba24d64b59b20d1.png","hide_marker.png":"assets/images/9a243e0cb0fc43e2a016d5d3aaa330d5.png","home.png":"assets/images/09c3ce5a86d600e24f8e85de3a019853.png","loading.png":"assets/images/8e5d0335f6598b8d874ba23ea9fb295f.png","loading_image.png":"assets/images/5ba349e3596aca094c41c56966b45dc7.png","minus.png":"assets/images/f7acb820d978ab2dd69e8bf695c574d1.png","no_image.png":"assets/images/56f7003805ed02f8a21199947651db2e.png","osm.jpg":"assets/images/6345ee67d554fbfbf484ba4035ad19d9.jpg","overlay.png":"assets/images/799a0177b0dc540682fa4a2e349a8f4f.png","pd.png":"assets/images/bf67cc860289b85c0402a4d4f890a3bd.png","plus.png":"assets/images/6111b8076a2cf81c73f0e46f41a3af60.png","red_marker.png":"assets/images/6a580287dea82c2fb9b214321a375145.png","redcircle.png":"assets/images/7df82bae917b68159f84998182f2fdc6.png","share.png":"assets/images/9d3a01c866095b8b3e8e63f9cf11dd51.png","slider.png":"assets/images/9df733bcb29a746cb16b47eedea9fc3a.png"};function wb(t){return wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(t)}function Eb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sb(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==wb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==wb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===wb(o)?o:String(o)),i)}var r,o}function Cb(t,e,n){return e&&Sb(t.prototype,e),n&&Sb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ib(){return Ib="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ob(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Ib.apply(this,arguments)}function Mb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lb(t,e)}function Lb(t,e){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lb(t,e)}function Tb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ob(t);if(e){var r=Ob(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===wb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pb(t)}(this,n)}}function Pb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ob(t)}var Rb={},Ab={compass:"compass.png",border:"border.png",attr:"attr.png",gps:"gps.png",zoom_plus:"plus.png",zoom_minus:"minus.png",help:"help.png",home:"home.png",hide_marker:"hide_marker.png",share:"share.png",slider_in_help:"slider.png",favicon:"favicon.png"};function kb(t){var e={};return t.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i)?(e.red=parseInt(RegExp.$1,16),e.green=parseInt(RegExp.$2,16),e.blue=parseInt(RegExp.$3,16)):t.match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i)&&(e.red=parseInt("".concat(RegExp.$1).concat(RegExp.$1),16),e.green=parseInt("".concat(RegExp.$2).concat(RegExp.$2),16),e.blue=parseInt("".concat(RegExp.$3).concat(RegExp.$3),16)),e}var Nb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{},o=document.createElement("div"),s=r.render?r.render:n.render;(i=e.call(this,{element:o,render:s})).direction_=n.Direction_.VERTICAL,i.dragging_=void 0,i.value_=void 0,i.previousX_=void 0,i.previousY_=void 0,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==r.duration?r.duration:200,i.reverse_=void 0!==r.reverse&&r.reverse,i.initialValue=r.initialValue;var a=void 0!==r.className?r.className:"ol-slidercommon",l=document.createElement("button");if(l.setAttribute("type","button"),l.className="".concat(a,"-thumb").concat(va),o.title=r.tipLabel,o.className="".concat(a," ").concat(va," ").concat(_a),o.appendChild(l),o.addEventListener("pointerdown",(function(t){t.stopPropagation(),i.handleDraggerStart_(t)})),o.addEventListener("pointermove",(function(t){t.stopPropagation(),i.handleDraggerDrag_(t)})),o.addEventListener("pointerup",(function(t){t.stopPropagation(),i.handleDraggerEnd_(t)})),l.addEventListener("click",(function(t){t.stopPropagation()})),o.addEventListener("mouseout",(function(t){t.stopPropagation(),i.handleDraggerEnd_(t)})),Rb.slider_color){var c=kb(Rb.slider_color),u=i.element.querySelector("button");u.addEventListener("mouseover",(function(){u.style.backgroundColor="rgba(".concat(c.red,",").concat(c.green,",").concat(c.blue,",.7)")})),u.addEventListener("mouseout",(function(){var t=i.element.classList.contains("disable");u.style.backgroundColor="rgba(".concat(c.red,",").concat(c.green,",").concat(c.blue,",").concat(t?.2:.5,")")}))}return i}return Cb(n,[{key:"disposeInternal",value:function(){this.dragger_.dispose(),Ib(Ob(n.prototype),"disposeInternal",this).call(this)}},{key:"setMap",value:function(t){Ib(Ob(n.prototype),"setMap",this).call(this,t),t&&t.render()}},{key:"initSlider_",value:function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,r=t.firstElementChild,o=getComputedStyle(r),s=r.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=r.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);this.thumbSize_=[s,a],this.direction_=e>i?n.Direction_.HORIZONTAL:n.Direction_.VERTICAL,this.setValue(this.initialValue||0);var l=this;_b(t,(function(){l.setValue(l.value_)})),this.sliderInitialized_=!0}},{key:"widthLimit_",value:function(t){return this.element.offsetWidth-this.thumbSize_[0]}},{key:"heightLimit_",value:function(t){return this.element.offsetHeight-this.thumbSize_[1]}},{key:"handleContainerClick_",value:function(t){var e=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2);this.setThumbPosition_(e)}},{key:"handleDraggerStart_",value:function(t){this.dragging_||t.target!==this.element.firstElementChild||this.element.classList.contains("disable")||(this.getMap().getView().setHint(ao,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)}},{key:"handleDraggerDrag_",value:function(t){if(this.dragging_){var e=this.element.firstElementChild,n=t.clientX-this.previousX_+(parseFloat(e.style.left,10)||0),i=t.clientY-this.previousY_+(parseFloat(e.style.top,10)||0),r=this.getRelativePosition_(n,i);this.setThumbPosition_(r),this.previousX_=t.clientX,this.previousY_=t.clientY}}},{key:"handleDraggerEnd_",value:function(t){this.dragging_&&(this.getMap().getView().setHint(ao,-1),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0)}},{key:"setThumbPosition_",value:function(t){var e=this.element.firstElementChild;this.direction_==n.Direction_.HORIZONTAL?e.style.left="".concat(this.widthLimit_()*t,"px"):e.style.top="".concat(this.heightLimit_()*t,"px"),this.value_=this.reverse_?1-t:t,this.set("slidervalue",this.value_)}},{key:"getRelativePosition_",value:function(t,e){return ti(this.direction_===n.Direction_.HORIZONTAL?t/this.widthLimit_():e/this.heightLimit_(),0,1)}},{key:"setValue",value:function(t){t=this.reverse_?1-t:t,this.setThumbPosition_(t)}},{key:"setEnable",value:function(t){var e=this.element;if(t?e.classList.remove("disable"):e.classList.add("disable"),Rb.slider_color){var n=kb(Rb.slider_color);e.querySelector("button").style.backgroundColor="rgba(".concat(n.red,",").concat(n.green,",").concat(n.blue,",").concat(t?.5:.2,")")}}}],[{key:"render",value:function(t){t.frameState&&(this.sliderInitialized_||this.initSlider_())}},{key:"Direction_",get:function(){return{VERTICAL:0,HORIZONTAL:1}}}]),n}(Bc),Db=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{},o=document.createElement("div");i=e.call(this,{element:o,target:r.target,render:r.render});var s=document.createElement("button");s.setAttribute("type","button"),s.title=r.tipLabel;var a,l,c=document.createElement("span");c.innerHTML=r.character,s.appendChild(c);var u=Pb(i);return s.addEventListener("click",(function(t){t.stopPropagation()})),s.addEventListener("mouseup",(function(t){l||a&&(r.long_callback&&clearTimeout(a),a=null,r.callback.apply(u)),t.stopPropagation()}),!1),s.addEventListener("mousemove",(function(t){t.stopPropagation()}),!1),s.addEventListener("mousedown",(function(t){l||(a=!r.long_callback||setTimeout((function(){a=null,r.long_callback.apply(u)}),1500)),t.stopPropagation()}),!1),s.addEventListener("touchstart",(function(t){l=!0,a=!r.long_callback||setTimeout((function(){a=null,r.long_callback.apply(u)}),1500),t.stopPropagation()}),!1),s.addEventListener("touchend",(function(t){a&&(r.long_callback&&clearTimeout(a),a=null,r.callback.apply(u)),t.stopPropagation()}),!1),s.addEventListener("mouseout",(function(t){r.long_callback&&clearTimeout(a),a=null,t.stopPropagation()}),!1),s.addEventListener("dblclick",(function(t){t.preventDefault()}),!1),o.className="".concat(r.cls," ol-unselectable ol-control"),o.appendChild(s),i}return Cb(n)}(Bc),Fb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.home?'<img src="'.concat(Rb.home,'">'):'<i class="fa fa-home fa-lg"></i>',r.cls="home",r.callback=function(){this.getMap().getLayers().item(0).getSource().goHome()},i=e.call(this,r),Rb.home)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),jb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.gps?'<img src="'.concat(Rb.gps,'">'):'<i class="fa fa-crosshairs fa-lg"></i>',r.cls="gps",r.render=function(t){if(t.frameState){var e=this.getMap();if(e.geolocation){var n=e.geolocation.getTracking(),i=this.element.classList.contains("disable");i&&!n?this.element.classList.remove("disable"):!i&&n&&this.element.classList.add("disable")}}},r.callback=function(){var t=this.element.classList.contains("disable");this.getMap().handleGPS(!t),t?this.element.classList.remove("disable"):this.element.classList.add("disable")},i=e.call(this,r),Rb.gps)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),Bb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};r.autoHide=!1;var o=document.createElement("span");(o.innerHTML=Rb.compass?'<img src="'.concat(Rb.compass,'">'):'<i class="fa fa-compass fa-lg ol-compass-fa"></i>',r.label=o,r.render=function(t){var e=this,n=t.frameState;if(n){var i=this.getMap().getView(),r=n.viewState.rotation,o=i.getCenter(),s=i.getDecimalZoom();if(r!=this.rotation_||o[0]!=this.center_[0]||o[1]!=this.center_[1]||s!=this.zoom_){if(!this.getMap().northUp){var a=this.element.classList.contains("disable");a||0!==r?a&&0!==r&&this.element.classList.remove("disable"):this.element.classList.add("disable")}var l=this,c=this.getMap().getLayers().item(0),u=c.getSource?c.getSource():c.getLayers().item(0).getSource();if(!u){var h="rotate(0rad)";return l.label_.style.msTransform=h,l.label_.style.webkitTransform=h,void(l.label_.style.transform=h)}u.viewpoint2MercsAsync().then((function(t){var n=u.mercs2MercViewpoint(t)[2],i="rotate(".concat(n,"rad)");if(l.label_.style.msTransform=i,l.label_.style.webkitTransform=i,l.label_.style.transform=i,e.getMap().northUp){console.log(n);var r=l.element.classList.contains("disable");!r&&Math.abs(n)<.1?l.element.classList.add("disable"):r&&Math.abs(n)>=.1&&l.element.classList.remove("disable")}}))}this.rotation_=r,this.center_=o,this.zoom_=s}},i=e.call(this,r),Rb.compass)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i.center_=[],i.zoom_=void 0,i.callResetNorth_=function(){var t=i.getMap().getLayers().item(0);(t.getSource?t.getSource():t.getLayers().item(0).getSource()).resetCirculation()},i}return Cb(n)}(zc),Gb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.share?'<img src="'.concat(Rb.share,'">'):'<i class="fa fa-share-alt-square fa-lg"></i>',r.cls="ol-share",r.callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"share"}))},i=e.call(this,r),Rb.share)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),zb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.border?'<img src="'.concat(Rb.border,'">'):'<i class="fa fa-clone fa-lg"></i>',r.cls="ol-border",r.callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"border"}))},i=e.call(this,r),Rb.border)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),Ub=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.help?'<img src="'.concat(Rb.help,'">'):'<i class="fa fa-question-circle fa-lg"></i>',r.cls="ol-maplat",r.callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"help"}))},i=e.call(this,r),Rb.help)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),qb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.attr?'<img src="'.concat(Rb.attr,'">'):'<i class="fa fa-info-circle fa-lg"></i>',r.cls="ol-copyright",r.callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"copyright"}))},i=e.call(this,r),Rb.attr)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),Xb=function(t){Mb(n,t);var e=Tb(n);function n(t){var i;Eb(this,n);var r=t||{};(r.character=Rb.hide_marker?'<img src="'.concat(Rb.hide_marker,'">'):'<i class="fa fa-map-marker fa-lg"></i>',r.cls="ol-hide-marker",r.callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"hideMarker"}))},r.long_callback=function(){var t=this.getMap();t.dispatchEvent(new mc("click_control",t,{control:"hideLayer"}))},i=e.call(this,r),Rb.hide_marker)&&(i.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return i}return Cb(n)}(Db),Vb=function(t){Mb(n,t);var e=Tb(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(Eb(this,n),Rb.zoom_plus&&(i.zoomInLabel=fr('<img src="'.concat(Rb.zoom_plus,'">'))[0]),Rb.zoom_minus&&(i.zoomOutLabel=fr('<img src="'.concat(Rb.zoom_minus,'">'))[0]),t=e.call(this,i),Rb.compass)&&t.element.querySelectorAll("button").forEach((function(t){t.style.backgroundColor="rgba(0,0,0,0)"}));return t}return Cb(n)}(Uc);function Yb(t){return function(t){if(Array.isArray(t))return Hb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Wb(){Wb=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,s=Object.create(o.prototype),a=new C(r||[]);return i(s,"_invoke",{value:b(t,n,a)}),s}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function p(){}function f(){}function d(){}var g={};l(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==e&&n.call(y,o)&&(g=y);var v=d.prototype=p.prototype=Object.create(g);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,s,a){var l=u(t[i],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Zb(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,a)}))}a(l.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function b(t,e,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return M()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=u(t,e,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function w(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=u(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=d,i(v,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:f,configurable:!0}),f.displayName=l(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var s=new x(c(e,n,i,r),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(v),l(v,a,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function Zb(t){return Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zb(t)}function $b(t,e,n,i,r,o,s){try{var a=t[o](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function Kb(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){$b(o,i,r,s,a,"next",t)}function a(t){$b(o,i,r,s,a,"throw",t)}s(void 0)}))}}function Jb(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Zb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Zb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Zb(o)?o:String(o)),i)}var r,o}function Qb(t,e){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qb(t,e)}function tw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nw(t);if(e){var r=nw(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Zb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ew(t)}(this,n)}}function ew(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nw(t)}at.use([ut,ft]);var iw=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qb(t,e)}(l,e);var n,i,r,o,s,a=tw(l);function l(t){var e,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=a.call(this),i={state_url:"stateUrl",restore_session:"restoreSession",enable_share:"enableShare",mobile_if:"mobileIF",pwa_manifest:"pwaManifest",pwa_worker:"pwaWorker",pwa_scope:"pwaScope"},n=mr(n=t),(t=Object.keys(i).reduce((function(t,e){return t[e]&&(t[i[e]]=t[e],delete t[e]),t}),n)).control&&function(t){Rb=t,Object.keys(Rb).forEach((function(t){Ab[t]&&(bb[Ab[t]]=Rb[t])}))}(t.control);var r=ew(e);return r.html_id_seed="".concat(Math.floor(9e3*Math.random())+1e3),t.stateUrl?((0,Lt.Z)((function(e,n){var i=e.canonicalPath.split("#!"),o=i.length>1?i[1]:i[0];if(i=o.split("?"),(o=i[0])!==r.pathThatSet){var s={transparency:0,position:{rotation:0}};o.split("/").map((function(t){var e=t.split(":");switch(e[0]){case"s":s.mapID=e[1];break;case"b":s.backgroundID=e[1];break;case"t":s.transparency=parseFloat(e[1]);break;case"r":s.position.rotation=parseFloat(e[1]);break;case"z":s.position.zoom=parseFloat(e[1]);break;case"x":case"y":s.position[e[0]]=parseFloat(e[1]);break;case"sb":s.showBorder=!!parseInt(e[1]);break;case"hm":s.hideMarker=!!parseInt(e[1]);break;case"hl":s.hideLayer=e[1];break;case"c":if(r.core){var n=r.core.mapDivDocument.querySelector(".modalBase");new Tt.Z.Modal(n,{root:r.core.mapDivDocument}).hide()}}})),r.core?s.mapID&&r.core.waitReady.then((function(){r.core.changeMap(s.mapID,s)})):(s.mapID&&(t.restore=s),r.initializer(t))}else delete r.pathThatSet})),(0,Lt.Z)({hashbang:!0}),(0,Lt.Z)(),r.waitReady=new Promise((function(t,e){r.waitReadyBridge=t}))):r.initializer(t),e}return n=l,i=[{key:"initializer",value:(s=Kb(Wb().mark((function e(n){var i,r,o,s,a,l,c,u,h,p,f,d,g,m,y,v,_,x,b,w;return Wb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w=function(t){i.contextMenu.clear();var e=[];t.forEach((function(t){i.contextMenu.push(t),t.mouseOnTask&&e.push([t.mouseOnTask,t.mouseOutTask])}));var n=i.core.lastClickEvent.coordinate,r=i.core.lastClickEvent.pixel;i.contextMenu.disabled||(i.contextMenu.on("open",(function t(){if(i.contextMenu.removeEventListener("open",t),e.length>0){var n=Yb(i.core.mapDivDocument.querySelectorAll(".ol-ctx-menu-container ul li")).map((function(t,n){var i=e[n];return t.addEventListener("mouseover",i[0]),t.addEventListener("mouseout",i[1]),[t,i[0],i[1]]}));i.contextMenu.on("close",(function t(){i.contextMenu.removeEventListener("close",t),n.forEach((function(t){t[0].removeEventListener("mouseover",t[1]),t[0].removeEventListener("mouseout",t[2])}))}))}})),i.contextMenu.Internal.openMenu(r,n),i.core.mapObject.getViewport().addEventListener("pointerdown",{handleEvent:function(t){i.contextMenu.Internal.opened&&(i.contextMenu.Internal.closeMenu(),t.stopPropagation(),i.core.mapObject.getViewport().removeEventListener(t.type,this,!1))}},!1))},i=this,n.translateUI=!0,i.core=new Tx(n),n.icon&&(bb["defaultpin.png"]=n.icon),n.restore?(i.setShowBorder(n.restore.showBorder||!1),n.restore.hideMarker&&i.core.mapDivDocument.classList.add("hide-marker")):n.restoreSession?(r=parseInt(localStorage.getItem("epoch")||0),o=Math.floor((new Date).getTime()/1e3),r&&o-r<3600&&i.setShowBorder(!!parseInt(localStorage.getItem("showBorder")||"0")),i.core.initialRestore.hideMarker&&i.core.mapDivDocument.classList.add("hide-marker")):i.setShowBorder(!1),s=!i.core.initialRestore.mapID,a=i.core.initialRestore.transparency,l=!n.presentation_mode,c=n.enablePoiHtmlNoScroll,n.enableShare&&(i.core.mapDivDocument.classList.add("enable_share"),i.enableShare=!0),n.enableHideMarker&&(i.core.mapDivDocument.classList.add("enable_hide_marker"),i.enableHideMarker=!0),n.enableBorder&&(i.core.mapDivDocument.classList.add("enable_border"),i.enableBorder=!0),n.disableNoimage&&(i.disableNoimage=!0),n.stateUrl&&i.core.mapDivDocument.classList.add("state_url"),i.core.enableCache&&i.core.mapDivDocument.classList.add("enable_cache"),"ontouchstart"in window&&(i.core.mapDivDocument.classList.add("ol-touch"),i.isTouch=!0),n.mobileIF&&(n.debug=!0),n.appEnvelope&&(i.appEnvelope=!0),u=n.pwaManifest,h=n.pwaWorker,p=n.pwaScope,f=fr('<d c="ol-control map-title"><s></s></d> <d c="swiper-container ol-control base-swiper prevent-default-ui"> <d c="swiper-wrapper"></d> <d c="swiper-button-next base-next swiper-button-white"></d> <d c="swiper-button-prev base-prev swiper-button-white"></d> </d> <d c="swiper-container ol-control overlay-swiper prevent-default-ui"> <d c="swiper-wrapper"></d> <d c="swiper-button-next overlay-next swiper-button-white"></d> <d c="swiper-button-prev overlay-prev swiper-button-white"></d> </d> ');for(d=f.length-1;d>=0;d--)i.core.mapDivDocument.insertBefore(f[d],i.core.mapDivDocument.firstChild);for(g=i.core.mapDivDocument.querySelectorAll(".prevent-default-ui"),m=0;m<g.length;m++)g[m].addEventListener("touchstart",(function(t){t.preventDefault()}));for(f=fr('<d c="modal modalBase" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static"> <d c="modal-dialog"> <d c="modal-content"> <d c="modal-header"> <button type="button" c="close" data-dismiss="modal"> <s aria-hidden="true">&#215;</s><s c="sr-only" din="html.close"></s> </button> <h4 c="modal-title"> <s c="modal_title"></s> <s c="modal_load_title"></s> <s c="modal_gpsW_title" din="html.acquiring_gps"></s> <s c="modal_help_title" din="html.help_title"></s> <s c="modal_share_title" din="html.share_title"></s> <s c="modal_hide_marker_title" din="html.hide_marker_title"></s> </h4> </d> <d c="modal-body"> <d c="modal_help_content"> <d c="help_content"> <s dinh="html.help_using_maplat"></s> <p c="col-xs-12 help_img"><img src="'.concat(bb["fullscreen.png"],'"></p> <h4 din="html.help_operation_title"></h4> <p dinh="html.help_operation_content" c="recipient"></p> <h4 din="html.help_selection_title"></h4> <p dinh="html.help_selection_content" c="recipient"></p> <h4 din="html.help_gps_title"></h4> <p dinh="html.help_gps_content" c="recipient"></p> <h4 din="html.help_poi_title"></h4> <p dinh="html.help_poi_content" c="recipient"></p> <h4 din="html.help_etc_title"></h4> <ul> <li dinh="html.help_etc_attr" c="recipient"></li> <li dinh="html.help_etc_help" c="recipient"></li> <s c="share_help"><li dinh="html.help_share_help" c="recipient"></li></s> <s c="border_help"><li dinh="html.help_etc_border" c="recipient"></li></s> <s c="hide_marker_help"><li dinh="html.help_etc_hide_marker" c="recipient"></li></s> <li dinh="html.help_etc_slider" c="recipient"></li> </ul> <p><a href="https://github.com/code4history/Maplat/wiki" target="_blank">Maplat</a> © 2015- Kohei Otsuka, Code for History</p> </d> </d> <d c="modal_poi_content"> <d c="poi_web').concat(c?"":" embed-responsive embed-responsive-60vh",'"> <iframe c="poi_iframe iframe_poi" frameborder="0" src=""').concat(c?" onload=\"window.addEventListener('message', (e) =>{if (e.data[0] == 'setHeight') {console.log(this.style.height = e.data[1]);}});\" scrolling=\"no\"":"",'></iframe> </d> <d c="poi_data hide"> <d c="col-xs-12 swiper-container poi_img_swiper"> <d c="swiper-wrapper"></d> <d c="swiper-pagination poi-pagination"></d> <d c="swiper-button-next poi-img-next"></d> <d c="swiper-button-prev poi-img-prev"></d> </d> <p c="recipient poi_address"></p> <p c="recipient poi_desc"></p> </d> </d> <d c="modal_share_content"> <h4 din="html.share_app_title"></h4> <d id="___maplat_app_toast_').concat(i.html_id_seed,'"></d> <d c="recipient row"> <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" c="share btn btn-light" data="cp_app"><i c="fa fa-clipboard"></i>&nbsp;<small din="html.share_copy"></small></button></d> <d c="form-group col-xs-4 text-center"><button title="Twitter" c="share btn btn-light" data="tw_app"><i c="fa fa-twitter"></i>&nbsp;<small>Twitter</small></button></d> <d c="form-group col-xs-4 text-center"><button title="Facebook" c="share btn btn-light" data="fb_app"><i c="fa fa-facebook"></i>&nbsp;<small>Facebook</small></button></d> </d> <d c="qr_app center-block" style="width:128px;"></d> <d c="modal_share_state"> <h4 din="html.share_state_title"></h4> <d id="___maplat_view_toast_').concat(i.html_id_seed,'"></d> <d c="recipient row"> <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" c="share btn btn-light" data="cp_view"><i c="fa fa-clipboard"></i>&nbsp;<small din="html.share_copy"></small></button></d> <d c="form-group col-xs-4 text-center"><button title="Twitter" c="share btn btn-light" data="tw_view"><i c="fa fa-twitter"></i>&nbsp;<small>Twitter</small></button></d> <d c="form-group col-xs-4 text-center"><button title="Facebook" c="share btn btn-light" data="fb_view"><i c="fa fa-facebook"></i>&nbsp;<small>Facebook</small></button></d> </d> <d c="qr_view center-block" style="width:128px;"></d> </d> <p><img src="" height="0px" width="0px"></p> </d> <d c="modal_map_content"> ').concat(cr.map((function(t){return"title"==t||"officialTitle"==t?"":'<d c="recipients '.concat(t,'_div"><dl c="dl-horizontal"> <dt din="html.').concat(t,'"></dt> <dd c="').concat(t,'_dd"></dd> </dl></d> ')})).join(""),' <d c="recipients modal_cache_content"><dl c="dl-horizontal"> <dt din="html.cache_handle"></dt> <dd><s c="cache_size"></s></dd> <dt></dt> <dd><s c="pull-right"><button c="cache_fetch btn btn-default" href="#" din="html.cache_fetch"></button> <button c="cache_delete btn btn-default" href="#" din="html.cache_delete"></button></s></dd> </dl></d> </d> <d c="modal_load_content"> <p c="recipient"><img src="').concat(bb["loading.png"],'"><s din="html.app_loading_body"></s></p> <d c="splash_div hide row"><p c="col-xs-12 poi_img"><img c="splash_img" src=""></p></d> <p><img src="" height="0px" width="0px"></p> </d> <d c="modal_hide_marker_content"> <ul c="list-group"></ul> </d> <p c="modal_gpsD_content" c="recipient"></p> <p c="modal_gpsW_content" c="recipient"></p> </d> </d> </d> </d> ')),y=f.length-1;y>=0;y--)i.core.mapDivDocument.insertBefore(f[y],i.core.mapDivDocument.firstChild);for(v=i.core.mapDivDocument.querySelectorAll(".btn.share"),_=0;_<v.length;_++)v[_].addEventListener("click",(function(t){var e=t.target;e.classList.contains("share")||(e=e.parentElement);var n=e.getAttribute("data").split("_"),r=t.target.baseURI;r||(r=window.location.href);var o=r.split("#!"),s=o.length>1?o[1].split("?")[0]:"",a=o[0].split("?"),l=a[0],c=a.length>1?a[1].split("&").filter((function(t){return"pwa"!==t})).join("&"):"";if(c&&(l="".concat(l,"?").concat(c)),"view"===n[1]&&s&&(l="".concat(l,"#!").concat(s)),"cp"===n[0]){var u=document.createElement("textarea");u.textContent=l;var h=document.querySelector("body");if(h.appendChild(u),/iP(hone|[oa]d)/.test(navigator.userAgent)){var p=document.createRange();p.selectNode(u),window.getSelection().addRange(p)}else u.select();document.execCommand("copy"),h.removeChild(u);var f="#___maplat_".concat(n[1],"_toast_").concat(i.html_id_seed);yb.Z.show({message:i.core.t("app.copy_toast",{ns:"translation"}),close:!1,pauseOnHover:!1,timeout:1e3,progressBar:!1,target:f})}else if("tw"===n[0]){var d="https://twitter.com/share?url=".concat(encodeURIComponent(l),"&hashtags=Maplat");window.open(d,"_blank","width=650,height=450,menubar=no,toolbar=no,scrollbars=yes")}else if("fb"===n[0]){var g="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(l),"&display=popup&ref=plugin&src=like&kid_directed_site=0");window.open(g,"_blank","width=650,height=450,menubar=no,toolbar=no,scrollbars=yes")}}));if(u){!0===u&&(u="./pwa/".concat(i.core.appid,"_manifest.json")),h||(h="./service-worker.js"),p||(p="./"),(x=document.querySelector("head")).querySelector('link[rel="manifest"]')||x.appendChild(fr('<link rel="manifest" href="'.concat(u,'">'))[0]);try{Gf.registerSW(h,{scope:p})}catch(t){}x.querySelector('link[rel="apple-touch-icon"]')||((b=new XMLHttpRequest).open("GET",u,!0),b.responseType="json",b.onload=function(e){var n=this.response;if(n&&("object"!=Zb(n)&&(n=JSON.parse(n)),n.icons))for(var i=0;i<n.icons.length;i++){var r=t(u,n.icons[i].src),o=n.icons[i].sizes,s='<link rel="apple-touch-icon" sizes="'.concat(o,'" href="').concat(r,'">');x.appendChild(fr(s)[0])}},b.send())}i.core.addEventListener("uiPrepare",(function(t){for(var e=function(t){for(var e,n=/\$\{([a-zA-Z0-9_\.\/\-]+)\}/g,i=t;null!=(e=n.exec(t));)i=i.replace(e[0],bb[e[1]]);return i},n=i.core.mapDivDocument.querySelectorAll("[data-i18n]"),r=0;r<n.length;r++){var o=n[r],l=o.getAttribute("data-i18n");o.innerText=e(i.core.t(l))}n=i.core.mapDivDocument.querySelectorAll("[data-i18n-html]");for(var c=0;c<n.length;c++){var u=n[c],h=u.getAttribute("data-i18n-html");u.innerHTML=e(i.core.t(h))}var p={reverse:!0,tipLabel:i.core.t("control.trans",{ns:"translation"})};if(a&&(p.initialValue=a/100),i.sliderCommon=new Nb(p),i.core.appData.controls=[new qb({tipLabel:i.core.t("control.info",{ns:"translation"})}),new Bb({tipLabel:i.core.t("control.compass",{ns:"translation"})}),new Vb({tipLabel:i.core.t("control.zoom",{ns:"translation"})}),new jb({tipLabel:i.core.t("control.gps",{ns:"translation"})}),new Fb({tipLabel:i.core.t("control.home",{ns:"translation"})}),i.sliderCommon,new Ub({tipLabel:i.core.t("control.help",{ns:"translation"})})],i.enableShare&&i.core.appData.controls.push(new Gb({tipLabel:i.core.t("control.share",{ns:"translation"})})),i.enableBorder&&i.core.appData.controls.push(new zb({tipLabel:i.core.t("control.border",{ns:"translation"})})),i.enableHideMarker&&i.core.appData.controls.push(new Xb({tipLabel:i.core.t("control.hide_marker",{ns:"translation"})})),i.contextMenu=new mb({eventType:"__dummy__",width:170,defaultItems:!1,items:[]}),i.core.appData.controls.push(i.contextMenu),i.core.mapObject&&i.core.appData.controls.map((function(t){i.core.mapObject.addControl(t)})),i.sliderCommon.on("propertychange",(function(t){"slidervalue"===t.key&&i.core.setTransparency(100*i.sliderCommon.get(t.key))})),s){var f=!1;i.core.appData.splash&&(f=!0);var d=i.core.mapDivDocument.querySelector(".modalBase"),g=new Tt.Z.Modal(d,{root:i.core.mapDivDocument});i.core.mapDivDocument.querySelector(".modal_load_title").innerText=i.core.translate(i.core.appData.appName),f&&(i.core.mapDivDocument.querySelector(".splash_img").setAttribute("src","img/".concat(i.core.appData.splash)),i.core.mapDivDocument.querySelector(".splash_div").classList.remove("hide")),i.modalSetting("load"),g.show();var m=f?1e3:200;i.splashPromise=new Promise((function(t){setTimeout((function(){t()}),m)}))}document.querySelector("title").innerHTML=i.core.translate(i.core.appName)})),i.core.addEventListener("sourceLoaded",(function(t){for(var e=t.detail,n=["maroon","deeppink","indigo","olive","royalblue","red","hotpink","green","yellow","navy","saddlebrown","fuchsia","darkslategray","yellowgreen","blue","mediumvioletred","purple","lime","darkorange","teal","crimson","darkviolet","darkolivegreen","steelblue","aqua"],r=[],o=0,s=0;s<e.length;s++){var a=e[s];if(a.envelope){i.appEnvelope&&a.envelope.geometry.coordinates[0].map((function(t){0===r.length?(r[0]=r[2]=t[0],r[1]=r[3]=t[1]):(t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1]))})),a.envelopeColor=n[o],(o+=1)===n.length&&(o=0);var l=a.envelope.geometry.coordinates[0];a.envelopeAreaIndex=i.areaIndex(l)}}i.appEnvelope&&console.log("This app's envelope is: ".concat(r)),i.splashPromise&&i.splashPromise.then((function(){var t=i.core.mapDivDocument.querySelector(".modalBase"),e=new Tt.Z.Modal(t,{root:i.core.mapDivDocument});i.modalSetting("load"),e.hide()}));for(var c=[],u=[],h=0;h<e.length;h++){var p=e[h];p instanceof xf&&!(p instanceof Nf)||p instanceof Oy?c.push(p):u.push(p)}var f=i.baseSwiper=new at(".base-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,loop:c.length>=2,navigation:{nextEl:".base-next",prevEl:".base-prev"}});f.on("click",(function(t){if(f.clickedSlide){var e=f.clickedSlide;i.core.changeMap(e.getAttribute("data")),delete i._selectCandidateSources,f.setSlideIndexAsSelected(e.getAttribute("data-swiper-slide-index"))}})),c.length<2&&i.core.mapDivDocument.querySelector(".base-swiper").classList.add("single-map");var d=i.overlaySwiper=new at(".overlay-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,loop:u.length>=2,navigation:{nextEl:".overlay-next",prevEl:".overlay-prev"}});d.on("click",(function(t){if(d.clickedSlide){var e=d.clickedSlide;i.core.changeMap(e.getAttribute("data")),delete i._selectCandidateSources,d.setSlideIndexAsSelected(e.getAttribute("data-swiper-slide-index"))}})),u.length<2&&i.core.mapDivDocument.querySelector(".overlay-swiper").classList.add("single-map");for(var g=0;g<c.length;g++){var m=c[g];f.appendSlide('<div class="swiper-slide" data="'.concat(m.mapID,'">')+'<img crossorigin="anonymous" src="'.concat(m.thumbnail,'"><div> ').concat(i.core.translate(m.label),"</div> </div> "))}for(var y=0;y<u.length;y++){var v=u[y],_=v.envelope?" ".concat(v.envelopeColor):"";d.appendSlide('<div class="swiper-slide'.concat(_,'" data="').concat(v.mapID,'">')+'<img crossorigin="anonymous" src="'.concat(v.thumbnail,'"><div> ').concat(i.core.translate(v.label),"</div> </div> "))}f.on,d.on,f.slideToLoop(0),d.slideToLoop(0),i.ellips()})),i.core.addEventListener("mapChanged",(function(t){var e=t.detail;i.baseSwiper.setSlideMapID(e.mapID),i.overlaySwiper.setSlideMapID(e.mapID);var n=e.officialTitle||e.title||e.label;i.core.mapDivDocument.querySelector(".map-title span").innerText=i.core.translate(n),i.checkOverlayID(e.mapID)?i.sliderCommon.setEnable(!0):i.sliderCommon.setEnable(!1);var r=100*i.sliderCommon.get("slidervalue");i.core.mapObject.setTransparency(r),i.updateEnvelope()})),i.core.addEventListener("poi_number",(function(t){t.detail?i.core.mapDivDocument.classList.remove("no_poi"):i.core.mapDivDocument.classList.add("no_poi")})),i.core.addEventListener("outOfMap",(function(t){if(l){i.core.mapDivDocument.querySelector(".modal_title").innerText=i.core.t("app.out_of_map"),i.core.mapDivDocument.querySelector(".modal_gpsD_content").innerText=i.core.t("app.out_of_map_area");var e=i.core.mapDivDocument.querySelector(".modalBase"),n=new Tt.Z.Modal(e,{root:i.core.mapDivDocument});i.modalSetting("gpsD"),n.show()}})),i.core.mapDivDocument.addEventListener("mouseout",(function(t){i._selectCandidateSources&&(Object.keys(i._selectCandidateSources).forEach((function(t){return i.core.mapObject.removeEnvelope(i._selectCandidateSources[t])})),delete i._selectCandidateSources)})),i.core.addEventListener("pointerMoveOnMapXy",function(){var t=Kb(Wb().mark((function t(e){var n;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.core.stateBuffer.showBorder){t.next=3;break}return i._selectCandidateSources&&(Object.keys(i._selectCandidateSources).forEach((function(t){return i.core.mapObject.removeEnvelope(i._selectCandidateSources[t])})),delete i._selectCandidateSources),t.abrupt("return");case 3:return t.next=5,i.xyToMapIDs(e.detail);case 5:n=t.sent,i.showFillEnvelope(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.core.addEventListener("clickMapXy",function(){var t=Kb(Wb().mark((function t(e){var n,r;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.core.stateBuffer.showBorder){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i.xyToMapIDs(e.detail);case 4:(n=t.sent).length>0&&(w(n.map((function(t){var e=i.core.cacheHash[t],o=e.envelopeColor,s='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px" height="10px" viewBox="0 0 10 10" enable-background="new 0 0 10 10" xml:space="preserve"> <polygon x="0" y="0" points="2,2 2,8 8,8 8,2 2,2" stroke="'.concat(o,'" fill="').concat(o,'" stroke-width="2" style="fill-opacity: .25;"></polygon></svg>');return{icon:s="data:image/svg+xml,".concat(encodeURIComponent(s)),text:i.core.translate(e.title),callback:function(){var e=Yb(i.core.mapDivDocument.querySelectorAll(".ol-ctx-menu-container ul li"));if(e.forEach((function(t){return t.classList.remove("selected")})),!r||r!==t){r=t,i.showFillEnvelope([t]),i.overlaySwiper.slideToMapID(t);var o=n.indexOf(t);return o>-1&&e[o].classList.add("selected"),!0}delete i._selectCandidateSources,i.core.changeMap(t)},mouseOnTask:function(e){i.isTouch||(r=t,i.showFillEnvelope([t]),i.overlaySwiper.slideToMapID(t))},mouseOutTask:function(t){i.isTouch||(r=void 0,i.showFillEnvelope([]))}}}))),i.showFillEnvelope(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.core.addEventListener("clickMarkers",(function(t){var e=t.detail;1===e.length?i.handleMarkerAction(e[0]):w(e.map((function(t){return{icon:t.icon||bb["defaultpin.png"],text:i.core.translate(t.name),callback:function(){i.handleMarkerAction(t)}}})))})),n.stateUrl&&i.core.addEventListener("updateState",(function(t){var e=t.detail;if(e.position&&e.mapID){var n="s:".concat(e.mapID);e.backgroundID&&(n="".concat(n,"/b:").concat(e.backgroundID)),e.transparency&&(n="".concat(n,"/t:").concat(e.transparency)),n="".concat(n,"/x:").concat(e.position.x,"/y:").concat(e.position.y),n="".concat(n,"/z:").concat(e.position.zoom),e.position.rotation&&(n="".concat(n,"/r:").concat(e.position.rotation)),e.showBorder&&(n="".concat(n,"/sb:").concat(e.showBorder)),e.hideMarker&&(n="".concat(n,"/hm:").concat(e.hideMarker)),e.hideLayer&&(n="".concat(n,"/hl:").concat(e.hideLayer)),i.pathThatSet=n,(0,Lt.Z)(n)}})),i.waitReady=i.core.waitReady.then((function(){var t,e,r=!!n.fake&&i.core.appData.fake_gps,o=!!n.fake&&i.core.appData.fake_center,s=!!n.fake&&i.core.appData.fake_radius,a=!1,l=null;function c(t){if(t&&t.error){if(i.core.currentPosition=null,"gps_out"===t.error&&a){a=!1;var e=i.core.mapDivDocument.querySelector(".modalBase"),n=new Tt.Z.Modal(e,{root:i.core.mapDivDocument});i.core.mapDivDocument.querySelector(".modal_title").innerText=i.core.t("app.out_of_map"),i.core.mapDivDocument.querySelector(".modal_gpsD_content").innerText=i.core.t("app.out_of_map_desc"),i.modalSetting("gpsD"),n.show()}}else i.core.currentPosition=t;if(a){a=!1;var r=i.core.mapDivDocument.querySelector(".modalBase");new Tt.Z.Modal(r,{root:i.core.mapDivDocument}).hide()}}if(i.core.mapObject.on("gps_request",(function(){l="gps_request";var t=[new Promise((function(t){"gps_request"!==l?t(l):l=t}))];a=!0;var e=i.core.mapDivDocument.querySelector(".modalBase"),n=new Tt.Z.Modal(e,{root:i.core.mapDivDocument});i.modalSetting("gpsW"),n.show(),t.push(new Promise((function(t){setTimeout(t,200)}))),Promise.all(t).then((function(t){c(t[0])}))})),i.core.mapObject.on("gps_result",(function(t){"gps_request"===l?l=t.frameState:l?(l(t.frameState),l=null):a||c(t.frameState)})),i.core.mapObject.on("click_control",function(){var n=Kb(Wb().mark((function n(r){var o,s,a,l,c,u,h,p,f,d,g,m,y,v,_,x,b,w,E,S,C,I,M,L;return Wb().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.frameState.control,s=i.core.mapDivDocument.querySelector(".modalBase"),a=new Tt.Z.Modal(s,{root:i.core.mapDivDocument}),"copyright"!==o){n.next=34;break}if(l=i.core.getMapMeta(),cr.reduce((function(t,e){return"title"===e?t:l[e]||t}),!1)){n.next=7;break}return n.abrupt("return");case 7:if(i.core.mapDivDocument.querySelector(".modal_title").innerText=i.core.translate(l.officialTitle||l.title),cr.map((function(t){"title"!==t&&"officialTitle"!==t&&(l[t]&&""!==l[t]?(i.core.mapDivDocument.querySelector(".".concat(t,"_div")).classList.remove("hide"),i.core.mapDivDocument.querySelector(".".concat(t,"_dd")).innerHTML="license"===t||"dataLicense"===t?'<img src="'.concat(bb["".concat(l[t].toLowerCase().replace(/ /g,"_"),".png")],'">'):i.core.translate(l[t])):i.core.mapDivDocument.querySelector(".".concat(t,"_div")).classList.add("hide"))})),c=i.core.mapDivDocument.querySelector(".cache_delete"),u=i.core.mapDivDocument.querySelector(".cache_fetch"),h=function(t){var e=t.size||0,n="Bytes";-1!==e&&(e>1024&&(e=Math.round(10*e/1024)/10,n="KBytes"),e>1024&&(e=Math.round(10*e/1024)/10,n="MBytes"),e>1024&&(e=Math.round(10*e/1024)/10,n="GBytes"));var r=-1===e?i.core.t("html.cache_processing"):"".concat(e," ").concat(n);r=t.total?"".concat(r," (").concat(t.count," / ").concat(t.total," tiles [").concat(t.percent,"%])"):"".concat(r," (").concat(t.count," tiles)"),i.core.mapDivDocument.querySelector(".cache_size").innerHTML=r,0!=t.count?c.removeAttribute("disabled"):c.setAttribute("disabled",!0),t.total?(u.classList.remove("hide"),t.total===t.count?u.setAttribute("disabled",!0):u.removeAttribute("disabled")):u.classList.add("hide")},i.modalSetting("map"),p=i.core.mapDivDocument.querySelector(".modal_cache_content"),!i.core.getMapCacheEnable(l.mapID)){n.next=30;break}return p.classList.remove("hide"),f=function(){var t=Kb(Wb().mark((function t(e){var n;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=i.core.getMapMeta(),t.next=4,i.core.clearMapTileCacheAsync(n.mapID);case 4:return t.t0=h,t.next=7,i.core.getMapTileCacheStatsAsync(n.mapID);case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Kb(Wb().mark((function t(e){var n;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&e.preventDefault(),n=i.core.getMapMeta(),t.next=4,i.core.cancelMapTileCacheAsync(n.mapID);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Kb(Wb().mark((function t(e){var n,r;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.core.mapDivDocument.querySelector(".close"),e.preventDefault(),u.innerHTML=i.core.t("html.cache_cancel"),u.removeEventListener("click",g),u.addEventListener("click",d),n.classList.add("temp_no_close"),r=i.core.getMapMeta(),t.next=9,i.core.fetchAllMapTileCacheAsync(r.mapID,function(){var t=Kb(Wb().mark((function t(e,o){return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="proceed"===t.t0?3:"canceled"===t.t0||"stop"===t.t0||"finish"===t.t0?5:14;break;case 3:return h({count:o.processed,total:o.total,percent:o.percent,size:-1}),t.abrupt("return");case 5:return u.innerHTML=i.core.t("html.cache_fetch"),u.removeEventListener("click",d),u.addEventListener("click",g),n.classList.remove("temp_no_close"),t.t1=h,t.next=12,i.core.getMapTileCacheStatsAsync(r.mapID);case 12:t.t2=t.sent,(0,t.t1)(t.t2);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function t(e){c.removeEventListener("click",f,!1),u.removeEventListener("click",g,!1),u.removeEventListener("click",d,!1),s.removeEventListener("hide.bs.modal",t,!1)},s.addEventListener("hide.bs.modal",m,!1),n.t0=h,n.next=25,i.core.getMapTileCacheStatsAsync(l.mapID);case 25:n.t1=n.sent,(0,n.t0)(n.t1),setTimeout((function(){c.addEventListener("click",f,!1),u.addEventListener("click",g,!1),u.innerHTML=i.core.t("html.cache_fetch")}),200),n.next=31;break;case 30:p.classList.add("hide");case 31:a.show(),n.next=35;break;case 34:"help"===o?(i.modalSetting("help"),a.show()):"share"===o?(i.modalSetting("share"),y=location.href,v=y.split("#!"),_=v.length>1?v[1].split("?")[0]:"",x=v[0].split("?"),b=x[0],(w=x.length>1?x[1].split("&").filter((function(t){return"pwa"!==t})).join("&"):"")&&(b="".concat(b,"?").concat(w)),E=b,_&&(E="".concat(E,"#!").concat(_)),t?t.makeCode(b):t=new vb(i.core.mapDivDocument.querySelector(".qr_app"),{text:b,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:vb.CorrectLevel.H}),e?e.makeCode(E):e=new vb(i.core.mapDivDocument.querySelector(".qr_view"),{text:E,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:vb.CorrectLevel.H}),a.show()):"border"===o?(S=!i.core.stateBuffer.showBorder,i.setShowBorder(S)):"hideMarker"===o?(C=!i.core.stateBuffer.hideMarker,i.setHideMarker(C)):"hideLayer"===o&&(i.modalSetting("hide_marker"),I=i.core.listPoiLayers(!1,!0),M=i.core.mapDivDocument.querySelector("ul.list-group"),L=i.core.mapDivDocument.querySelector(".modalBase"),M.innerHTML="",I.map((function(t,e){for(var n=t.icon||bb["defaultpin.png"],r=i.core.translate(t.name),o=!t.hide,s=t.namespaceID,a=fr('<li c="list-group-item"> <d c="row"> <d c="col-sm-1"><img c="markerlist" src="'.concat(n,'"></d> <d c="col-sm-9">').concat(r,'</d> <d c="col-sm-2"> <input type="checkbox" c="markerlist" data="').concat(s,'" id="___maplat_marker_').concat(e,"_").concat(i.html_id_seed,'"').concat(o?" checked":"",'/> <label c="check" for="___maplat_marker_').concat(e,"_").concat(i.html_id_seed,'"><d> </d> </label> </d> </d> </li>')),l=0;l<a.length;l++)M.appendChild(a[l]);var c=i.core.mapDivDocument.querySelector("#___maplat_marker_".concat(e,"_").concat(i.html_id_seed)),u=function(t){var e=t.target.getAttribute("data");t.target.checked?i.core.showPoiLayer(e):i.core.hidePoiLayer(e)};L.addEventListener("hide.bs.modal",(function t(e){L.removeEventListener("hide.bs.modal",t,!1),c.removeEventListener("change",u,!1)}),!1),c.addEventListener("change",u,!1)})),a.show());case 35:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),r){var u=fr((0,xb.Z)(i.core.t("app.fake_explanation"),i.core.translate(o),s))[0];i.core.mapDivDocument.querySelector(".modal_gpsW_content").appendChild(u)}else{var h=fr(i.core.t("app.acquiring_gps_desc"))[0];i.core.mapDivDocument.querySelector(".modal_gpsW_content").appendChild(h)}i.waitReadyBridge&&(i.waitReadyBridge(),delete i.waitReadyBridge)}));case 42:case"end":return e.stop()}}),e,this)}))),function(t){return s.apply(this,arguments)})},{key:"modalSetting",value:function(t){var e=this.core.mapDivDocument.querySelector(".modalBase");["poi","map","load","gpsW","gpsD","help","share","hide_marker"].map((function(n){var i="modal_".concat(n);t===n?e.classList.add(i):e.classList.remove(i)}))}},{key:"handleMarkerAction",value:function(t){var e=this;if(t.directgo){var n=!1,i="";return"string"==typeof t.directgo?i=t.directgo:(i=t.directgo.href,n=t.directgo.blank||!1),void(n?window.open(i,"_blank"):window.location.href=i)}this.core.mapDivDocument.querySelector(".modal_title").innerText=this.core.translate(t.name);var r=this.core.mapDivDocument.querySelector(".modalBase");if(t.url||t.html){this.core.mapDivDocument.querySelector(".poi_web").classList.remove("hide"),this.core.mapDivDocument.querySelector(".poi_data").classList.add("hide");var o=this.core.mapDivDocument.querySelector(".poi_iframe");t.html?(o.addEventListener("load",(function t(e){e.currentTarget.removeEventListener(e.type,t);var n=fr('<style type="text/css">html, body { height: 100vh; } img { width: 100%; }</style>'),i=fr('<script> const heightGetter = document.querySelector("#heightGetter"); const resizeObserver = new ResizeObserver(entries => { window.parent.postMessage(["setHeight", (entries[0].target.clientHeight + 16) + "px"], "*"); }); resizeObserver.observe(heightGetter); <\/script>');o.contentDocument.head.appendChild(n[0]),o.contentDocument.head.appendChild(i[0])})),o.removeAttribute("src"),o.setAttribute("srcdoc",'<div id="heightGetter">'.concat(this.core.translate(t.html),"</div>"))):(o.removeAttribute("srcdoc"),o.setAttribute("src",this.core.translate(t.url)))}else{this.core.mapDivDocument.querySelector(".poi_data").classList.remove("hide"),this.core.mapDivDocument.querySelector(".poi_web").classList.add("hide");var s=[];t.image&&""!==t.image?(Array.isArray(t.image)?t.image:[t.image]).forEach((function(t){"string"==typeof t&&(t={src:t});var n=e.resolveRelativeLink(t.src,"img"),i='<a target="_blank" href="'.concat(n,'"><img src="').concat(n,'"></a>');t.desc&&(i="".concat(i,"<div>").concat(t.desc,"</div>")),s.push('<div class="swiper-slide">'.concat(i,"</div>"))})):this.disableNoimage||s.push('<div class="swiper-slide"><img src="'.concat(bb["no_image.png"],'"></div>')),r.addEventListener("shown.bs.modal",(function t(n){r.removeEventListener("shown.bs.modal",t,!1);var i=e.core.mapDivDocument.querySelector(".swiper-container.poi_img_swiper");0===s.length?i.classList.add("hide"):(i.classList.remove("hide"),e.poiSwiper||(e.poiSwiper=new at(".swiper-container.poi_img_swiper",{lazy:!0,modules:[ut,ft],pagination:{el:".poi-pagination",clickable:!0},navigation:{nextEl:".poi-img-next",prevEl:".poi-img-prev"}})),s.forEach((function(t){return e.poiSwiper.appendSlide(t)})))}),!1),this.core.mapDivDocument.querySelector(".poi_address").innerText=this.core.translate(t.address),this.core.mapDivDocument.querySelector(".poi_desc").innerHTML=this.core.translate(t.desc).replace(/\n/g,"<br>")}var a=new Tt.Z.Modal(r,{root:this.core.mapDivDocument});this.core.selectMarker(t.namespaceID),r.addEventListener("hide.bs.modal",(function t(n){r.removeEventListener("hide.bs.modal",t,!1),e.core.unselectMarker()}),!1),r.addEventListener("hidden.bs.modal",(function t(n){r.removeEventListener("hidden.bs.modal",t,!1),e.poiSwiper&&(e.poiSwiper.removeAllSlides(),e.poiSwiper=void 0)}),!1),this.modalSetting("poi"),a.show()}},{key:"showFillEnvelope",value:function(t){var e=this;t.length>0?(e._selectCandidateSources||(e._selectCandidateSources={}),Object.keys(e._selectCandidateSources).forEach((function(n){var i=t.indexOf(n);i<0?(e.core.mapObject.removeEnvelope(e._selectCandidateSources[n]),delete e._selectCandidateSources[n]):t.splice(i,1)})),t.forEach((function(t){if(t!==e.core.from.mapID){var n=e.core.cacheHash[t],i=n.envelope.geometry.coordinates[0].map((function(t){return e.core.from.merc2SysCoordAsync(t)})),r=Ys(n.envelopeColor);(r=r.slice())[3]=.2,Promise.all(i).then((function(n){e._selectCandidateSources[t]=e.core.mapObject.setFillEnvelope(n,null,{color:r})}))}}))):e._selectCandidateSources&&(Object.keys(e._selectCandidateSources).forEach((function(t){return e.core.mapObject.removeEnvelope(e._selectCandidateSources[t])})),delete e._selectCandidateSources)}},{key:"xyToMapIDs",value:(o=Kb(Wb().mark((function t(e){var n,i,r,o,s,a,l,c,u,h=arguments;return Wb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:10,i=this,r=(0,nr.xm)(e),o=i.core.mapObject,s=o.getSize(),a=[[0,0],[s[0],0],s,[0,s[1]],[0,0]],l=a.map((function(t){return o.getCoordinateFromPixel(t)})),t.next=9,i.core.from instanceof xf||i.core.from instanceof Oy?Promise.resolve(l):Promise.all(l.map((function(t){return i.core.from.sysCoord2MercAsync(t)})));case 9:return c=t.sent,u=i.areaIndex(c),t.abrupt("return",Promise.all(Object.keys(i.core.cacheHash).filter((function(t){return i.core.cacheHash[t].envelope})).map((function(t){var e=i.core.cacheHash[t];return Promise.all([Promise.resolve(e),Promise.all(e.envelope.geometry.coordinates[0].map((function(t){return i.core.from.merc2SysCoordAsync(t)})))])}))).then((function(t){var e=t.reduce((function(t,e){var n=e[0],o=e[1];if(n.mapID!==i.core.from.mapID){var s=(0,nr.yu)([o]);rf(r,s)&&t.push(n)}return t}),[]).filter((function(t){return t.envelopeAreaIndex/u<n})).sort((function(t,e){return t.envelopeAreaIndex-e.envelopeAreaIndex})).map((function(t){return t.mapID}));return e})));case 12:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setShowBorder",value:function(t){if(this.core.requestUpdateState({showBorder:t?1:0}),this.updateEnvelope(),t?this.core.mapDivDocument.classList.add("show-border"):this.core.mapDivDocument.classList.remove("show-border"),this.core.restoreSession){var e=Math.floor((new Date).getTime()/1e3);localStorage.setItem("epoch",e),localStorage.setItem("showBorder",t?1:0)}}},{key:"setHideMarker",value:function(t){t?(this.core.hideAllMarkers(),this.core.mapDivDocument.classList.add("hide-marker")):(this.core.showAllMarkers(),this.core.mapDivDocument.classList.remove("hide-marker"))}},{key:"updateEnvelope",value:function(){var t=this;t.core.mapObject&&(t.core.mapObject.resetEnvelope(),delete t._selectCandidateSources,t.core.stateBuffer.showBorder&&Object.keys(t.core.cacheHash).filter((function(e){return t.core.cacheHash[e].envelope})).map((function(e){var n=t.core.cacheHash[e],i=e===t.core.from.mapID&&n instanceof kf?[[0,0],[n.width,0],[n.width,n.height],[0,n.height],[0,0]].map((function(t){return Promise.resolve(n.xy2SysCoord(t))})):n.envelope.geometry.coordinates[0].map((function(e){return t.core.from.merc2SysCoordAsync(e)}));Promise.all(i).then((function(e){t.core.mapObject.setEnvelope(e,{color:n.envelopeColor,width:2,lineDash:[6,6]})}))})))}},{key:"resolveRelativeLink",value:function(t,e){return e||(e="."),t.match(/\//)?t:"".concat(e,"/").concat(t)}},{key:"checkOverlayID",value:function(t){for(var e=this.overlaySwiper.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++)if(e[n].getAttribute("data")===t)return!0;return!1}},{key:"areaIndex",value:function(t){return.5*Math.abs([0,1,2,3].reduce((function(e,n,i){var r=t[i],o=t[i+1];return e+(r[0]-o[0])*(r[1]+o[1])}),0))}},{key:"ellips",value:function(){for(var t=function(t){for(var e=t.innerText.split(""),n="",i=0;i<e.length;i++)n+="<span>".concat(e[i],"</span>");n+='<span class="omit-mark">'.concat("…","</span>"),t.innerHTML=n},e=function(t){var e,n=t.querySelectorAll("span"),i=t.querySelector(".omit-mark"),r=0;n[0].style.display="";for(var o=1;o<n.length;o++)n[o].style.display="none";i.style.display="";for(var s=t.offsetHeight,a=!1,l=1;l<n.length-1;l++){if(n[l].style.display="",t.offsetHeight>s&&(a?(s=t.offsetHeight,r++):(a=!0,t.classList.add("minimize"))),r>=2){e=l-2;break}if(l>=n.length-2)return void(i.style.display="none")}for(var c=e;c<n.length-1;c++)n[c].style.display="none"},n=this.core.mapDivDocument.querySelectorAll(".swiper-slide div"),i=0;i<n.length;i++){var r=n[i];t(r),e(r)}}},{key:"remove",value:function(){this.core.remove(),delete this.core}}],i&&Jb(n.prototype,i),r&&Jb(n,r),Object.defineProperty(n,"prototype",{writable:!1}),l}(Mt);(window.Maplat={}).createObject=function(t){return new Promise((function(e){var n=new iw(t);n.waitReady.then((function(){e(n)}))}))}})()})();
//# sourceMappingURL=maplat.js.map